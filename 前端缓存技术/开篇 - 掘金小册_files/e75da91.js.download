(window.webpackJsonp=window.webpackJsonp||[]).push([[67,1,5,10,167,170],{1007:function(t,e,n){"use strict";n(884)},1008:function(t,e,n){"use strict";n(885)},1020:function(t,e,n){"use strict";n.d(e,"d",(function(){return h})),n.d(e,"a",(function(){return m})),n.d(e,"c",(function(){return V})),n.d(e,"b",(function(){return _}));n(23);var o=n(5),r=n(105),c=n(26),l=n(6),d=n(8),f=n(166);function h(t){var e=Object(f.j)({maxDurationMS:9e4}),n=e.stayDuration,h=e.isCancelled,m=e.cancel;function v(){return(v=Object(o.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.value){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,r.a.AddPointReport({growth_type:c.GrowthType.JScore,task_id:c.GrowthTaskID.ViewContent,item_id:e});case 5:(n=t.sent).err_no!==d.ERROR_NO.OK?console.warn("error reportViewContentJScore reason:".concat(n.err_msg)):m(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.warn("error reportViewContentJScore err:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}Object(l.z)((function(){n.value>=9e4&&function(t){v.apply(this,arguments)}(t)}))}function m(){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.AddPointReport({growth_type:c.GrowthType.JScore,task_id:c.GrowthTaskID.BindPhone,item_id:"0"});case 3:(e=t.sent).err_no!==d.ERROR_NO.OK&&console.warn("error reportBindPhoneJScore reason:".concat(e.err_msg)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn("error reportBindPhoneJScore err:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function V(){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.AddPointReport({growth_type:c.GrowthType.JScore,task_id:c.GrowthTaskID.UploadFavicon,item_id:"0"});case 3:(e=t.sent).err_no!==d.ERROR_NO.OK&&console.warn("error reportUploadAvatarJScore reason:".concat(e.err_msg)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn("error reportUploadAvatarJScore err:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function _(){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.a.AddPointReport({growth_type:c.GrowthType.JScore,task_id:c.GrowthTaskID.ModifyScreenName,item_id:"0"});case 3:(e=t.sent).err_no!==d.ERROR_NO.OK&&console.warn("error reportModifyScreenNameJScore reason:".concat(e.err_msg)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn("error reportModifyScreenNameJScore err:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}},1051:function(t,e,n){"use strict";n(38);var o=n(6),r=n(1067),c=n.n(r),l=n(1068),d=n.n(l),f=Object(o.b)({components:{LabelLeftIcon:c.a,LabelRightIcon:d.a},props:{book:{type:Object,default:function(){return{}}},isCountDown:{type:Boolean,default:!1},isOnlyDay:{type:Boolean,default:!1},isFloatDiscountLabel:{type:Boolean,default:!1},showWapStyle:{type:Boolean,default:!1}},setup:function(t,e){var n=e.root.$device.isMobile,r=Object(o.n)({days:"0",hours:"0",minutes:"0",seconds:"0"}),c=Object(o.n)(),l=Object(o.n)(),d=Object(o.n)(99),f=Object(o.a)((function(){var e,n,o;return!(0!==(null===(n=null===(e=t.book)||void 0===e?void 0:e.base_info)||void 0===n?void 0:n.price)&&!(null===(o=t.book)||void 0===o?void 0:o.is_buy))})),h=Object(o.a)((function(){var e;return(null===(e=t.book.max_discount)||void 0===e?void 0:e.name)||""})),m=Object(o.a)((function(){var e;return!!(null===(e=t.book.max_discount)||void 0===e?void 0:e.is_limited_time)})),v=Object(o.a)((function(){return!f.value&&!t.isFloatDiscountLabel&&t.isCountDown&&h.value&&m.value})),V=Object(o.a)((function(){if(!v.value)return"";if(t.isOnlyDay){var e=t.book.max_discount;return e&&1e3*(null==e?void 0:e.end_time)-Date.now()>0?"剩余 ".concat(Math.floor((1e3*(null==e?void 0:e.end_time)-Date.now())/1e3/60/60/24)," 天"):""}return n?"":"剩余 ".concat(r.value.days," 天 ").concat(r.value.hours,":").concat(r.value.minutes,":").concat(r.value.seconds,".").concat(y(d.value))})),y=function(t){return t<10?"0".concat(t):"".concat(t)},_=function(){var e=t.book.max_discount;if(e&&m.value){var n=1e3*(null==e?void 0:e.end_time)-Date.now();if(n>0){var o="".concat(Math.floor(n/1e3/60/60/24)),l=y(Math.floor(n/1e3/60/60%24)),f=y(Math.floor(n/1e3/60%60)),h=y(Math.floor(n/1e3%60));r.value={days:o,hours:l,minutes:f,seconds:h}}else clearInterval(c.value),d.value=0,window.location.reload();c.value||(c.value=setInterval((function(){var t=d.value;t>0?t-=1:t=99,d.value=t}),10))}};return Object(o.j)((function(){n||!v.value||t.isOnlyDay||(_(),l.value=setInterval((function(){_()}),1e3))})),Object(o.k)((function(){clearInterval(l.value),clearInterval(c.value)})),{isOwner:f,isWap:n,showLabel:h,countDownText:V}}}),h=(n(1069),n(30)),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return!t.isOwner&&t.showLabel?n("div",{staticClass:"sale-tooltip-wrap",class:{"sale-tooltip-wrap-wap":t.showWapStyle,"sale-tooltip-wrap-float":t.isFloatDiscountLabel}},[t.isFloatDiscountLabel?n("LabelLeftIcon",{staticClass:"label-icon label-icon-left"}):t._e(),t._v(" "),t.isFloatDiscountLabel?n("div",{staticClass:"sale-tooltip"},[t._v("\n    "+t._s(t.showLabel)+"\n    "),t.countDownText?n("span",{staticClass:"count-down-text"},[t._v("\n      "+t._s(t.countDownText)+"\n    ")]):t._e()]):n("div",{staticClass:"sale-tooltip"},[t._v("\n    "+t._s(t.showLabel)+"\n    "),t.countDownText?n("span",{staticClass:"count-down-text"},[t._v("\n      "+t._s(t.countDownText)+"\n    ")]):t._e(),t._v(" "),n("div",{staticClass:"sale-tooltip-content"},[t._v("\n      "+t._s(t.showLabel)+"\n      "),t.countDownText?n("span",{staticClass:"count-down-text"},[t._v("\n        "+t._s(t.countDownText)+"\n      ")]):t._e()])]),t._v(" "),t.isFloatDiscountLabel?n("LabelRightIcon",{staticClass:"label-icon label-icon-right"}):t._e()],1):t._e()}),[],!1,null,"6a0ef028",null);e.a=component.exports},1062:function(t,e,n){t.exports=n.p+"5e2cfe768dbb98a0bf497ff46eec11fe.svg"},1063:function(t,e,n){t.exports=n.p+"37ca4f63b2d6ce3142b550147fe4476c.svg"},1064:function(t,e,n){"use strict";n(988)},1067:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,m=data.staticStyle,v=data.attrs,V=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,h],style:[style,m],attrs:Object.assign({width:"7",height:"20",viewBox:"0 0 7 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V)},y),d.concat([n("path",{attrs:{d:"M0 5.33333C0 2.38781 2.38781 0 5.33333 0H76C76 0 72.0072 0 72.0072 4.11765C72.0072 4.91035 72.0072 5.89927 72.0072 6.97946C72.0072 12.8705 67.2534 17.6471 61.3624 17.6471C43.6926 17.6471 9.85589 17.6471 5.99862 17.6471C0.749827 17.6471 0 20 0 20V5.33333Z",fill:"#FFF2EF"}}),n("path",{attrs:{d:"M72.653 0.666667C72.4433 0.869927 72.2462 1.10455 72.0712 1.3752C71.619 2.07469 71.3405 2.97571 71.3405 4.11765V4.12229V4.12695V4.1316V4.13626V4.14093V4.1456V4.15027V4.15495V4.15963V4.16432V4.16901V4.17371V4.17841V4.18311V4.18782V4.19253V4.19725V4.20198V4.2067V4.21143V4.21617V4.22091V4.22566V4.2304V4.23516V4.23991V4.24468V4.24944V4.25421V4.25899V4.26377V4.26855V4.27334V4.27813V4.28293V4.28773V4.29254V4.29735V4.30216V4.30698V4.3118V4.31663V4.32146V4.3263V4.33114V4.33598V4.34083V4.34568V4.35054V4.3554V4.36027V4.36514V4.37001V4.37489V4.37977V4.38466V4.38955V4.39444V4.39934V4.40425V4.40916V4.41407V4.41898V4.4239V4.42883V4.43376V4.43869V4.44363V4.44857V4.45351V4.45846V4.46342V4.46838V4.47334V4.4783V4.48327V4.48825V4.49323V4.49821V4.5032V4.50819V4.51318V4.51818V4.52319V4.52819V4.53321V4.53822V4.54324V4.54827V4.55329V4.55833V4.56336V4.5684V4.57345V4.57849V4.58355V4.5886V4.59366V4.59873V4.6038V4.60887V4.61394V4.61902V4.62411V4.6292V4.63429V4.63939V4.64449V4.64959V4.6547V4.65981V4.66493V4.67005V4.67517V4.6803V4.68543V4.69057V4.69571V4.70085V4.706V4.71115V4.71631V4.72147V4.72663V4.7318V4.73697V4.74215V4.74733V4.75251V4.7577V4.76289V4.76808V4.77328V4.77848V4.78369V4.7889V4.79411V4.79933V4.80455V4.80978V4.81501V4.82024V4.82548V4.83072V4.83596V4.84121V4.84646V4.85172V4.85698V4.86224V4.86751V4.87278V4.87806V4.88334V4.88862V4.89391V4.8992V4.90449V4.90979V4.91509V4.92039V4.9257V4.93102V4.93633V4.94165V4.94698V4.9523V4.95763V4.96297V4.96831V4.97365V4.979V4.98435V4.9897V4.99506V5.00042V5.00578V5.01115V5.01652V5.0219V5.02728V5.03266V5.03804V5.04343V5.04883V5.05422V5.05963V5.06503V5.07044V5.07585V5.08126V5.08668V5.0921V5.09753V5.10296V5.10839V5.11383V5.11927V5.12471V5.13016V5.13561V5.14107V5.14652V5.15199V5.15745V5.16292V5.16839V5.17387V5.17935V5.18483V5.19032V5.19581V5.2013V5.2068V5.2123V5.2178V5.22331V5.22882V5.23433V5.23985V5.24537V5.25089V5.25642V5.26195V5.26749V5.27303V5.27857V5.28411V5.28966V5.29521V5.30077V5.30633V5.31189V5.31745V5.32302V5.3286V5.33417V5.33975V5.34533V5.35092V5.35651V5.3621V5.3677V5.3733V5.3789V5.3845V5.39011V5.39573V5.40134V5.40696V5.41258V5.41821V5.42384V5.42947V5.43511V5.44075V5.44639V5.45203V5.45768V5.46333V5.46899V5.47465V5.48031V5.48598V5.49164V5.49732V5.50299V5.50867V5.51435V5.52004V5.52572V5.53141V5.53711V5.54281V5.54851V5.55421V5.55992V5.56563V5.57134V5.57706V5.58278V5.5885V5.59423V5.59996V5.60569V5.61143V5.61717V5.62291V5.62865V5.6344V5.64015V5.64591V5.65166V5.65743V5.66319V5.66896V5.67473V5.6805V5.68628V5.69206V5.69784V5.70362V5.70941V5.7152V5.721V5.7268V5.7326V5.7384V5.74421V5.75002V5.75583V5.76165V5.76747V5.77329V5.77911V5.78494V5.79077V5.79661V5.80244V5.80828V5.81413V5.81997V5.82582V5.83168V5.83753V5.84339V5.84925V5.85511V5.86098V5.86685V5.87272V5.8786V5.88448V5.89036V5.89624V5.90213V5.90802V5.91391V5.91981V5.92571V5.93161V5.93752V5.94342V5.94934V5.95525V5.96116V5.96708V5.97301V5.97893V5.98486V5.99079V5.99672V6.00266V6.0086V6.01454V6.02049V6.02643V6.03238V6.03834V6.04429V6.05025V6.05621V6.06218V6.06815V6.07412V6.08009V6.08606V6.09204V6.09802V6.10401V6.10999V6.11598V6.12198V6.12797V6.13397V6.13997V6.14597V6.15198V6.15799V6.164V6.17001V6.17603V6.18205V6.18807V6.1941V6.20012V6.20615V6.21219V6.21822V6.22426V6.2303V6.23634V6.24239V6.24844V6.25449V6.26054V6.2666V6.27266V6.27872V6.28479V6.29085V6.29692V6.303V6.30907V6.31515V6.32123V6.32731V6.3334V6.33948V6.34557V6.35167V6.35776V6.36386V6.36996V6.37607V6.38217V6.38828V6.39439V6.4005V6.40662V6.41274V6.41886V6.42498V6.43111V6.43724V6.44337V6.4495V6.45564V6.46178V6.46792V6.47406V6.48021V6.48636V6.49251V6.49866V6.50482V6.51097V6.51713V6.5233V6.52946V6.53563V6.5418V6.54797V6.55415V6.56033V6.56651V6.57269V6.57887V6.58506V6.59125V6.59744V6.60364V6.60983V6.61603V6.62223V6.62844V6.63464V6.64085V6.64706V6.65328V6.65949V6.66571V6.67193V6.67815V6.68438V6.6906V6.69683V6.70306V6.7093V6.71553V6.72177V6.72801V6.73426V6.7405V6.74675V6.753V6.75925V6.76551V6.77176V6.77802V6.78428V6.79055V6.79681V6.80308V6.80935V6.81562V6.8219V6.82817V6.83445V6.84073V6.84702V6.8533V6.85959V6.86588V6.87217V6.87847V6.88476V6.89106V6.89736V6.90366V6.90997V6.91628V6.92259V6.9289V6.93521V6.94153V6.94784V6.95416V6.96048V6.96681V6.97313V6.97946C71.3405 12.5042 66.8834 16.9804 61.3624 16.9804H5.99862C3.2911 16.9804 1.65133 17.5844 0.666667 18.2649V5.33333C0.666667 2.756 2.756 0.666667 5.33333 0.666667H72.653Z",stroke:"#F64242","stroke-opacity":"0.1","stroke-width":"1.33333"}})]))}}},1068:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,m=data.staticStyle,v=data.attrs,V=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,h],style:[style,m],attrs:Object.assign({width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V)},y),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.9997 0C12.5147 0 10.4266 1.69963 9.83447 3.99987H20.165C19.5729 1.69963 17.4848 0 14.9997 0Z",fill:"#FFB6B6"}}),n("path",{attrs:{d:"M-61 5.33333C-61 2.38781 -58.6122 0 -55.6667 0H15C15 0 11.0072 0 11.0072 4.11765C11.0072 4.91035 11.0072 5.89927 11.0072 6.97946C11.0072 12.8705 6.25343 17.6471 0.362395 17.6471C-17.3074 17.6471 -51.1441 17.6471 -55.0014 17.6471C-60.2502 17.6471 -61 20 -61 20V5.33333Z",fill:"#FFF2EF"}}),n("path",{attrs:{d:"M11.653 0.666667C11.4433 0.869927 11.2462 1.10455 11.0712 1.3752C10.619 2.07469 10.3405 2.97571 10.3405 4.11765V4.12229V4.12695V4.1316V4.13626V4.14093V4.1456V4.15027V4.15495V4.15963V4.16432V4.16901V4.17371V4.17841V4.18311V4.18782V4.19253V4.19725V4.20198V4.2067V4.21143V4.21617V4.22091V4.22566V4.2304V4.23516V4.23991V4.24468V4.24944V4.25421V4.25899V4.26377V4.26855V4.27334V4.27813V4.28293V4.28773V4.29254V4.29735V4.30216V4.30698V4.3118V4.31663V4.32146V4.3263V4.33114V4.33598V4.34083V4.34568V4.35054V4.3554V4.36027V4.36514V4.37001V4.37489V4.37977V4.38466V4.38955V4.39444V4.39934V4.40425V4.40916V4.41407V4.41898V4.4239V4.42883V4.43376V4.43869V4.44363V4.44857V4.45351V4.45846V4.46342V4.46838V4.47334V4.4783V4.48327V4.48825V4.49323V4.49821V4.5032V4.50819V4.51318V4.51818V4.52319V4.52819V4.53321V4.53822V4.54324V4.54827V4.55329V4.55833V4.56336V4.5684V4.57345V4.57849V4.58355V4.5886V4.59366V4.59873V4.6038V4.60887V4.61394V4.61902V4.62411V4.6292V4.63429V4.63939V4.64449V4.64959V4.6547V4.65981V4.66493V4.67005V4.67517V4.6803V4.68543V4.69057V4.69571V4.70085V4.706V4.71115V4.71631V4.72147V4.72663V4.7318V4.73697V4.74215V4.74733V4.75251V4.7577V4.76289V4.76808V4.77328V4.77848V4.78369V4.7889V4.79411V4.79933V4.80455V4.80978V4.81501V4.82024V4.82548V4.83072V4.83596V4.84121V4.84646V4.85172V4.85698V4.86224V4.86751V4.87278V4.87806V4.88334V4.88862V4.89391V4.8992V4.90449V4.90979V4.91509V4.92039V4.9257V4.93102V4.93633V4.94165V4.94698V4.9523V4.95763V4.96297V4.96831V4.97365V4.979V4.98435V4.9897V4.99506V5.00042V5.00578V5.01115V5.01652V5.0219V5.02728V5.03266V5.03804V5.04343V5.04883V5.05422V5.05963V5.06503V5.07044V5.07585V5.08126V5.08668V5.0921V5.09753V5.10296V5.10839V5.11383V5.11927V5.12471V5.13016V5.13561V5.14107V5.14652V5.15199V5.15745V5.16292V5.16839V5.17387V5.17935V5.18483V5.19032V5.19581V5.2013V5.2068V5.2123V5.2178V5.22331V5.22882V5.23433V5.23985V5.24537V5.25089V5.25642V5.26195V5.26749V5.27303V5.27857V5.28411V5.28966V5.29521V5.30077V5.30633V5.31189V5.31745V5.32302V5.3286V5.33417V5.33975V5.34533V5.35092V5.35651V5.3621V5.3677V5.3733V5.3789V5.3845V5.39011V5.39573V5.40134V5.40696V5.41258V5.41821V5.42384V5.42947V5.43511V5.44075V5.44639V5.45203V5.45768V5.46333V5.46899V5.47465V5.48031V5.48598V5.49164V5.49732V5.50299V5.50867V5.51435V5.52004V5.52572V5.53141V5.53711V5.54281V5.54851V5.55421V5.55992V5.56563V5.57134V5.57706V5.58278V5.5885V5.59423V5.59996V5.60569V5.61143V5.61717V5.62291V5.62865V5.6344V5.64015V5.64591V5.65166V5.65743V5.66319V5.66896V5.67473V5.6805V5.68628V5.69206V5.69784V5.70362V5.70941V5.7152V5.721V5.7268V5.7326V5.7384V5.74421V5.75002V5.75583V5.76165V5.76747V5.77329V5.77911V5.78494V5.79077V5.79661V5.80244V5.80828V5.81413V5.81997V5.82582V5.83168V5.83753V5.84339V5.84925V5.85511V5.86098V5.86685V5.87272V5.8786V5.88448V5.89036V5.89624V5.90213V5.90802V5.91391V5.91981V5.92571V5.93161V5.93752V5.94342V5.94934V5.95525V5.96116V5.96708V5.97301V5.97893V5.98486V5.99079V5.99672V6.00266V6.0086V6.01454V6.02049V6.02643V6.03238V6.03834V6.04429V6.05025V6.05621V6.06218V6.06815V6.07412V6.08009V6.08606V6.09204V6.09802V6.10401V6.10999V6.11598V6.12198V6.12797V6.13397V6.13997V6.14597V6.15198V6.15799V6.164V6.17001V6.17603V6.18205V6.18807V6.1941V6.20012V6.20615V6.21219V6.21822V6.22426V6.2303V6.23634V6.24239V6.24844V6.25449V6.26054V6.2666V6.27266V6.27872V6.28479V6.29085V6.29692V6.303V6.30907V6.31515V6.32123V6.32731V6.3334V6.33948V6.34557V6.35167V6.35776V6.36386V6.36996V6.37607V6.38217V6.38828V6.39439V6.4005V6.40662V6.41274V6.41886V6.42498V6.43111V6.43724V6.44337V6.4495V6.45564V6.46178V6.46792V6.47406V6.48021V6.48636V6.49251V6.49866V6.50482V6.51097V6.51713V6.5233V6.52946V6.53563V6.5418V6.54797V6.55415V6.56033V6.56651V6.57269V6.57887V6.58506V6.59125V6.59744V6.60364V6.60983V6.61603V6.62223V6.62844V6.63464V6.64085V6.64706V6.65328V6.65949V6.66571V6.67193V6.67815V6.68438V6.6906V6.69683V6.70306V6.7093V6.71553V6.72177V6.72801V6.73426V6.7405V6.74675V6.753V6.75925V6.76551V6.77176V6.77802V6.78428V6.79055V6.79681V6.80308V6.80935V6.81562V6.8219V6.82817V6.83445V6.84073V6.84702V6.8533V6.85959V6.86588V6.87217V6.87847V6.88476V6.89106V6.89736V6.90366V6.90997V6.91628V6.92259V6.9289V6.93521V6.94153V6.94784V6.95416V6.96048V6.96681V6.97313V6.97946C10.3405 12.5042 5.88338 16.9804 0.362396 16.9804H-55.0014C-57.7089 16.9804 -59.3487 17.5844 -60.3333 18.2649V5.33333C-60.3333 2.756 -58.244 0.666667 -55.6667 0.666667H11.653Z",stroke:"#F64242","stroke-opacity":"0.1","stroke-width":"1.33333"}})]))}}},1069:function(t,e,n){"use strict";n(992)},1100:function(t,e,n){"use strict";var o=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"title"},[this._v("未登录")]),this._v(" "),e("div",{staticClass:"desc"},[this._v("注册或登录后即可继续操作")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("img",{attrs:{src:n(1062)}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("img",{attrs:{src:n(1063)}})])}],r=n(14),c={data:function(){return{show:!1}},computed:{isWechat:function(){return Object(r.i)()}},filters:{},methods:{loginWithWechat:function(){return this.$getBean("oauthBusiness").loginWithWechat()},close:function(){this.show=!1},authoLogin:function(){this.show=!1,this.$requestLogin()}},mounted:function(){var t=this,e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.AUTH_WECHAT_QUICK_LOGIN,(function(){t.$requestLogin()}))}},l=(n(1064),n(30)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"wechat-quick-login"},[n("div",{staticClass:"quick-box"},[t._m(0),t._v(" "),n("div",{staticClass:"auth-box"},[n("div",{staticClass:"auth-btn wx",on:{click:t.loginWithWechat}},[t._m(1),t._v(" "),n("span",[t._v("微信快捷登录")])]),t._v(" "),n("div",{staticClass:"auth-btn jj",on:{click:t.authoLogin}},[t._m(2),t._v(" "),n("span",[t._v("稀土掘金账号登录")])])]),t._v(" "),n("div",{staticClass:"agreement-box"},[t._v("\n      注册登录即表示同意\n      "),n("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/terms",expression:"'/terms'",modifiers:{blank:!0}}]},[t._v("用户协议")]),t._v("\n      、\n      "),n("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/privacy",expression:"'/privacy'",modifiers:{blank:!0}}]},[t._v("隐私政策")])]),t._v(" "),n("div",{staticClass:"footer"},[n("div",{staticClass:"box",on:{click:t.close}},[t._v("取消")])])])]):t._e()}),o,!1,null,"3a1cf91f",null);e.a=component.exports},1102:function(t,e,n){"use strict";n(39),n(45);var o=n(6),r=n(85),c=n(165),l=n(29),d=n(104),f=Object(o.b)({components:{BTooltip:r.Tooltip},props:{bookInfo:{type:Object,default:function(){return{}}},eventPage:{type:String,default:""}},emits:["read","fetch"],setup:function(t,e){var n=Object(o.a)((function(){var t,n;return(null===(n=null===(t=e.root.$store.state)||void 0===t?void 0:t.auth)||void 0===n?void 0:n.user)||null})),r=e.root.$getBean("eventBus"),f=Object(o.w)(),h=Object(o.a)((function(){var e,o,r;if(t.bookInfo.isBorrowing){var c=null===(o=null===(e=t.bookInfo)||void 0===e?void 0:e.reading_progress)||void 0===o?void 0:o.last_section_id;return"0"!==c&&c?"继续学习":"立即学习"}return(null===(r=t.bookInfo)||void 0===r?void 0:r.borrowTimes)>0&&n.value.is_vip?"再次借阅":"VIP借阅"})),m=Object(o.a)((function(){return t.bookInfo.isBorrowing?"有效期至 ".concat(Object(l.b)(1e3*t.bookInfo.validEndTime,"YYYY-MM-DD")):"借过".concat(t.bookInfo.borrowTimes,"次")})),v=Object(o.f)("refreshBook",(function(){return null})),V=Object(d.b)((function(){e.emit("fetch"),v()}),500);Object(o.j)((function(){r.on(r.eventType.SHOW_VIP_FETCH,(function(){V()}))})),Object(o.k)((function(){r.off(r.eventType.SHOW_VIP_FETCH)}));return{buttonVipTitle:h,buttonVipDescript:m,handleClick:function(){var o={event_page:t.eventPage,book_id:t.bookInfo.id,author_id:t.bookInfo.user_info.user_id,platform:e.root.$device.isMobile?"h5":"web"};return e.root.$TEA("member_rent_click",o),n.value?n.value.isBindedPhone?void(t.bookInfo.isBorrowing?e.emit("read"):n.value.is_vip?r.emit(r.eventType.SHOW_VIP_BORROW_MODAL,t.bookInfo,o):f.push({name:"vipIndex",query:{utm_source:window.location.pathname.includes("section")?"course_section":"course_detail"}})):e.root.$requestBindPhoneNumber(c.c,{toUrl:location.href}):e.root.$requestLogin()},currentUser:n}}}),h=(n(1262),n(30)),component=Object(h.a)(f,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.bookInfo.canVipBorrow?o("div",{staticClass:"vip-borrow-button"},[o("BTooltip",{staticClass:"tooltip",attrs:{content:"如果您下单购买了借阅中或曾经借阅过的课程，我们将把消耗的借阅卡退还给您，每门课程最多退还1张",theme:"light",placement:"bottom",disabled:!t.bookInfo.isBorrowing||t.$device.isMobile,"max-width":"244px"}},[o("div",{staticClass:"vip-borrow",on:{click:t.handleClick}},[t.bookInfo.isBorrowing?o("img",{staticClass:"mark",attrs:{src:n(1261),alt:"借阅中"}}):t._e(),t._v(" "),o("div",{staticClass:"title"},[t._v(t._s(t.buttonVipTitle))]),t._v(" "),t.bookInfo.borrowTimes>0&&t.currentUser.is_vip?o("div",{staticClass:"descript"},[t._v("\n        "+t._s(t.buttonVipDescript)+"\n      ")]):t._e()])])],1):t._e()}),[],!1,null,"7674da1f",null);e.a=component.exports},1114:function(t,e,n){},1115:function(t,e,n){},1170:function(t,e,n){"use strict";n(38);var o=n(6),r=n(1051),c=n(873),l=Object(o.b)({components:{SaleTooltip:r.a},props:{book:{type:Object,default:function(){return{}}},isOwner:{type:Boolean,default:!1},sectionRoute:{type:Object,default:function(){return{}}},isFloatDiscountLabel:{type:Boolean,default:!1}},emits:["buyBook"],setup:function(t,e){var n,r=e.emit;return{isWap:null===(n=e.root.$device)||void 0===n?void 0:n.isMobile,bookId:Object(o.a)((function(){var e;return(null===(e=t.book)||void 0===e?void 0:e.booklet_id)||""})),hasReadSection:Object(o.a)((function(){var e,n;return!!(null===(n=null===(e=t.book)||void 0===e?void 0:e.reading_progress)||void 0===n?void 0:n.last_section_id)})),hasBorrow:Object(o.a)((function(){var e,n;return!!(null===(n=null===(e=t.book)||void 0===e?void 0:e.reading_progress)||void 0===n?void 0:n.borrow_times)})),hasDiscount:Object(o.a)((function(){var e,n;return(null===(e=t.book.max_discount)||void 0===e?void 0:e.pay_money)!==(null===(n=t.book.max_discount)||void 0===n?void 0:n.price)})),currentPrice:Object(o.a)((function(){var e;return Object(c.d)((null===(e=t.book.max_discount)||void 0===e?void 0:e.pay_money)||0)})),originPrice:Object(o.a)((function(){var e;return Object(c.d)((null===(e=t.book.max_discount)||void 0===e?void 0:e.price)||0)})),showLabel:Object(o.a)((function(){var e;return(null===(e=t.book.max_discount)||void 0===e?void 0:e.name)||""})),buyBook:function(){r("buyBook")}}}}),d=(n(1263),n(30)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-buy-button-wrap",class:{"discount-label-show":t.showLabel&&!t.isOwner&&!t.hasBorrow,"discount-label-float":t.isFloatDiscountLabel}},[!t.showLabel||t.isOwner||t.hasBorrow?t._e():n("SaleTooltip",{staticClass:"sale-tooltip-entry",attrs:{book:t.book,"is-count-down":!t.isWap,"is-float-discount-label":t.isFloatDiscountLabel}}),t._v(" "),n("div",{staticClass:"book-buy-button"},[t.isOwner?n("router-link",{staticClass:"book-owner",attrs:{"data-book-id":t.bookId,to:t.sectionRoute}},[t._v("\n      "+t._s(t.hasReadSection?"继续学习":"立即学习")+"\n    ")]):n("div",{staticClass:"buy-button",on:{click:function(e){return e.stopPropagation(),t.buyBook(e)}}},[n("div",{staticClass:"price-box",class:{"price-box-line":!(t.hasBorrow||t.hasDiscount)}},[n("span",{staticClass:"price-unit"},[t._v("¥")]),t._v(" "),n("span",[t._v("\n          "+t._s(t.currentPrice+" 立即购买")+"\n        ")])]),t._v(" "),t.hasBorrow?n("div",{staticClass:"borrow-desc"},[t._v("\n        "+t._s("退还 1 张借阅卡")+"\n      ")]):t.hasDiscount?n("div",{staticClass:"origin-price"},[t._v("\n        "+t._s("原价 ¥"+t.originPrice)+"\n      ")]):t._e()])],1)],1)}),[],!1,null,"495d186a",null);e.a=component.exports},1261:function(t,e,n){t.exports=n.p+"d9fd35ba8ea6d69f1746f621a0dd8433.svg"},1262:function(t,e,n){"use strict";n(1114)},1263:function(t,e,n){"use strict";n(1115)},1264:function(t,e,n){},1265:function(t,e,n){},1276:function(t,e,n){},1277:function(t,e,n){},1607:function(t,e,n){"use strict";n(1264)},1608:function(t,e,n){"use strict";n(1265)},1627:function(t,e,n){"use strict";n(1276)},1628:function(t,e,n){"use strict";n(1277)},1631:function(t,e,n){"use strict";var o,r=n(11),c=n(12);n(13),n(7),n(47),n(220);function l(t){if(t<0||!t)return"0秒";if(0<=t&&t<60)return t+"秒";var e=Math.floor(t/60),s=Math.floor(t%60);return s>0?e+"分"+s+"秒":e+"分"}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=new Map,c=[];return t.forEach((function(t){var d,f,h,m="";t.sectionId===(null===(d=e.reading_progress)||void 0===d?void 0:d.last_section_id)&&(m="上次学到"),(null===(f=t.reading_progress)||void 0===f?void 0:f.reading_progress)>=100&&(m="已学完"),2===(null===(h=t.reading_progress)||void 0===h?void 0:h.has_update)&&(m="有更新");var v="";v=e.price>0?t.isFree?"试学章节":"付费章节":"免费章节",c.push(t.sectionId),r.set(t.sectionId,{sectionId:t.sectionId,title:t.title||"小册章节标题",readCount:t.readCount,commentCount:t.commentCount,readDurationStr:l(t.readDuration),status:m,isFinished:t.isFinished,freeStatus:v,canEdit:n===o.author,vid:t.vid,hasVideo:!!t.vid})})),{sectionMap:r,sectionOrder:c}}function f(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r&&r.id?(null===(t=r.roles)||void 0===t?void 0:t.isAdmin)?o.admin:r.id===(null===(e=n.user)||void 0===e?void 0:e.user_id)?o.author:n.is_buy?o.buyer:o.common:o.unlogin}!function(t){t.unlogin="unlogin",t.admin="admin",t.author="author",t.buyer="buyer",t.common="common"}(o||(o={}));var h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(r.a)(this,t),this.bookId="",this.userRole=o.common,this.sectionMap=new Map,this.sectionOrder=[],this.bookId=n.booklet_id,this.userRole=f(n,c);var l=d(e,n,this.userRole);this.sectionMap=l.sectionMap,this.sectionOrder=l.sectionOrder}return Object(c.a)(t,[{key:"getSectionList",value:function(){var t=this,e=[];return this.sectionOrder.forEach((function(n){var o;e.push((o=t.sectionMap.get(n),JSON.parse(JSON.stringify(o))))})),e}},{key:"setSectionFree",value:function(){}}]),t}();e.a=h},1632:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,m=data.staticStyle,v=data.attrs,V=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,h],style:[style,m],attrs:Object.assign({width:"16",height:"20",viewBox:"0 0 16 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V)},y),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.5822 5.29608C12.5184 2.81844 10.4914 0.833008 8.00036 0.833008C5.46911 0.833008 3.41703 2.88301 3.41703 5.41634V6.66634C1.80591 6.66761 0.500583 7.97418 0.500855 9.5853L0.501795 15.167C0.502167 17.3759 2.29292 19.1663 4.50179 19.1663H11.5004C13.7095 19.1663 15.5004 17.3755 15.5004 15.1663V9.58301C15.5004 7.97218 14.1945 6.66634 12.5837 6.66634V5.41634L12.5822 5.29608ZM8.00006 11.0002C9.10472 11.0002 10.0001 11.8968 10.0001 13.0002C10.0001 14.1035 9.10472 15.0002 8.00006 15.0002C6.89539 15.0002 6.00006 14.1035 6.00006 13.0002C6.00006 11.8968 6.89539 11.0002 8.00006 11.0002ZM5.08581 5.3163C5.13867 3.75039 6.42352 2.5 8.00079 2.5C9.61162 2.5 10.9175 3.80417 10.9175 5.41667V6.66667H5.08412V5.41667L5.08581 5.3163Z",fill:"#C2C8D1"}})]))}}},1981:function(t,e,n){"use strict";n(19),n(18),n(13),n(7),n(16);var o=n(0),r=n(3),c=n(86),l=(n(38),n(912)),d=n(1102),f=n(1170),h={components:{VipBorrowButton:d.a,BookBuyButton:f.a,BookThumb:l.a},props:["bookInfo"],computed:{isWapSection:function(){return"bookWapSection"===this.$route.name}},methods:{buyBook:function(){this.$emit("buy")}}},m=(n(1607),n(30)),v=Object(m.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"buying-guide-wrap"},[n("div",{staticClass:"buying-guide",class:{"buying-guide--m":t.isWapSection}},[n("div",{staticClass:"buying-inner"},[n("div",{staticClass:"poster"},[n("BookThumb",{staticClass:"thumb",attrs:{book:t.bookInfo}})],1),t._v(" "),n("div",{staticClass:"title"},[t._v("此章节为付费章节")]),t._v(" "),n("div",{staticClass:"desc"},[t._v("现在购买立即解锁全部内容")]),t._v(" "),n("div",{staticClass:"button-container"},[n("BookBuyButton",{attrs:{book:t.bookInfo,"is-float-discount-label":!0},on:{buyBook:t.buyBook}}),t._v(" "),n("VipBorrowButton",{attrs:{"book-info":t.bookInfo,"event-page":"lock"}})],1)])])])}),[],!1,null,"7e23cee3",null).exports,V={components:{BookThumb:l.a},props:["bookInfo"],computed:{isWapSection:function(){return"bookWapSection"===this.$route.name}}},y=(n(1608),Object(m.a)(V,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"section-writing-wrap"},[e("div",{staticClass:"section-writing",class:{"section-writing--m":this.isWapSection}},[e("div",{staticClass:"writing-inner"},[e("div",{staticClass:"poster"},[e("BookThumb",{staticClass:"thumb",attrs:{book:this.bookInfo}})],1),this._v(" "),e("div",{staticClass:"title"},[this._v("此章节正在写作中")])])])])}),[],!1,null,"217a0058",null).exports),_=(n(44),n(76),n(23),n(5)),w=(n(70),n(6)),O=n(1033),content=n(720),j=n(788),C=n(883),k=n(41),S=n(1020),I=n(104);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function L(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var P=Object(w.b)({components:{CommentListBox:j.a,MarkdownViewer:C.default,VipBorrowButton:d.a,BookBuyButton:f.a,Video:function(){return Promise.all([n.e(211),n.e(141)]).then(n.bind(null,2926))}},props:["bookInfo","sectionInfo","free"],setup:function(t,e){var n=e.root,o=Object(w.v)();return Object(S.d)(o.value.params.sectionId),L({},function(t,e){var n={miniscreen:e.$device.isMobile?null:{width:320,height:180,isShowIcon:!0,isScrollSwitch:!0},cssFullscreen:!0};return{isLegacyBookletVid:Object(w.a)((function(){var e;return"6844733803647205384"===(null===(e=t.bookInfo)||void 0===e?void 0:e.id)})),handleVideoEvent:function(t){console.log("%c 🌭 player","color:#f5ce50",t);var n=e.$getBean("eventBus");t.on(O.Events.FULLSCREEN_CHANGE,(function(t){n.emit(n.eventType.VIDEO_FULLSCREEN_CHANGE,t)}))},videoConfig:n}}(t,n))},data:function(){return{htmlContent:"",canFetch:!0,isVideoSupported:!0,commentList:[],query:{entryId:"",startTime:"",pageSize:20},readingPostion:0,videoWrapperHeight:0,mobilePlayerStyle:{}}},computed:L({subject:function(){return{item_id:this.section.section_id,item_type:13,user_id:this.section.user_id,comment_count:this.section.comment_count}},curSectionId:function(){return this.$route.params.sectionId},isLastSectionId:function(){var t,e,n=(null===(e=null===(t=this.bookInfo.base_info)||void 0===t?void 0:t.section_ids)||void 0===e?void 0:e.split("|"))||[];return(n.length>0?n[n.length-1]:0)===this.curSectionId},isMobileBrowser:function(){return this.$device.isMobile},section:function(){return Object.assign({},this.sectionInfo,{user:this.bookInfo.user})},showBuyButton:function(){return!this.free&&this.sectionInfo.isFree&&this.sectionInfo&&this.isMobileBrowser&&!this.bookInfo.isBorrowing}},Object(c.mapGetters)({user:r.USER,login:r.LOGIN})),watch:{$route:function(){this.fetch()},sectionInfo:{handler:function(t){var e=this;return Object(_.a)(regeneratorRuntime.mark((function n(){var o,r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null==t?void 0:t.id)){n.next=18;break}if(e.htmlContent=t.html,e.bookletId=t.bookId,e.sectionId=t.id,e.readingPostion=Number((null===(o=t.reading_progress)||void 0===o?void 0:o.reading_position)||"0"),e.initPosition(),!(null===(r=e.user)||void 0===r?void 0:r.id)){n.next=18;break}return n.prev=7,n.next=10,Object(content.a)({booklet_id:e.bookletId,section_id:e.sectionId,reading_position:e.readingPostion});case 10:if(0===(c=n.sent).err_no||"0"===c.err_no){n.next=13;break}throw c;case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(7),console.warn("阅读记录上报失败",n.t0);case 18:e.setupVideoPlayer();case 19:case"end":return n.stop()}}),n,null,[[7,15]])})))()},immediate:!0}},mounted:function(){var t=this;return Object(_.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isMounted=!0,t.initRecordReadPos(),t._handleCurrentReadRecord=function(){var e=t.getCurrentReadPos();t.doRecord(e)},Object(k.o)(t._handleCurrentReadRecord),window.addEventListener("beforeunload",t._handleCurrentReadRecord),t.setupVideoPlayer();case 6:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){if(this.removeScrollListener){this.removeScrollListener();var t=this.getCurrentReadPos();this.doRecord(t)}Object(k.q)(this._handleCurrentReadRecord),window.removeEventListener("beforeunload",this._handleCurrentReadRecord)},methods:{setupVideoPlayer:function(){var t;(null===(t=this.sectionInfo)||void 0===t?void 0:t.vid)&&(this.removeVideoTag(),this.$refs.sectionPage&&this.calculateHeight())},calculateHeight:function(){var t=this.$refs.sectionPage,e=t.offsetLeft,n=t.offsetTop,o=t.offsetWidth;this.mobilePlayerStyle={left:"".concat(e,"px"),top:"".concat(n,"px"),width:"".concat(o,"px"),height:"".concat(o/16*9,"px")},this.videoWrapperHeight=o/16*9},initPosition:function(){this.$route.hash?this.initHashToElement(this.$route.hash):0<this.readingPostion&&this.readingPostion<=100&&this.scrollToContentPos(this.readingPostion)},removeVideoTag:function(){var content=this.sectionInfo.html||"";content=content.replace(/^<div\s+data-source="https:\/\/video-cdn\.juejin\.im.+?<\/div>/,""),this.htmlContent=content},buyBook:function(){this.$emit("buy")},syncCommentNum:function(t){var e=t.count,n=t.type;"add"===n?this.section.comment_count+=1:"sub"===n?this.section.comment_count-=e?e+1:1:this.section.comment_count=e,this.section.comment_count=this.section.comment_count>0?this.section.comment_count:0},initHashToElement:function(t){var e=this;this.$nextTick((function(){var n=t;if(n&&"#mark-star"!==n)if("#comment"===n)e.$refs.commentForm.focus(),Object(k.r)(e.$refs.commentForm);else{var o=n.substring(1),r=e.$refs.content.$el.querySelectorAll('[data-id="'.concat(o,'"]'))[0],c=e.isMobileBrowser?35:70,l=r.offsetTop;window.scrollTo(0,l-c)}}))},scrollToContentPos:function(t){var e=this;this.$nextTick((function(){var n,o;if(!(null===(o=null===(n=e.$refs)||void 0===n?void 0:n.content)||void 0===o?void 0:o.$el))return 0;var r=Object(k.h)().height,c=e.$refs.content.$el.getBoundingClientRect().height;window.scrollTo(0,c*t/100-r+122)}))},initRecordReadPos:function(){var t,e,n=this;(null===(t=this.user)||void 0===t?void 0:t.id)&&"0"!==(null===(e=this.user)||void 0===e?void 0:e.id)&&(this.removeScrollListener=Object(k.m)(window,Object(I.a)((function(){n.scrollRecord(n.getCurrentReadPos())}),500)))},getCurrentReadPos:function(){var t,e;if(!(null===(e=null===(t=this.$refs)||void 0===t?void 0:t.content)||void 0===e?void 0:e.$el))return 0;var n=Object(k.h)().height,o=this.$refs.content.$el.getBoundingClientRect(),r=o.y,c=o.height;if(0===c)return 0;var l=Math.round((n-r)/c*100);return l<0?0:l>100?100:l},scrollRecord:function(t){(Math.abs(t-this.readingPostion)>5||this.readingPostion<100&&t>=100)&&this.doRecord(t)},doRecord:function(t){var e=this;return Object(_.a)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===(o=e.user)||void 0===o?void 0:o.id){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,Object(content.a)({booklet_id:e.bookletId,section_id:e.sectionId,reading_position:t});case 5:if(0===(r=n.sent).err_no||"0"===r.err_no){n.next=8;break}throw r;case 8:e.readingPostion=t,n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),console.warn("阅读记录上报失败",n.t0);case 14:case"end":return n.stop()}}),n,null,[[2,11]])})))()}}});n(1627);function A(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function B(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?A(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):A(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var R={components:{SectionBuyingGuide:v,SectionWriting:y,SectionContent:Object(m.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"section-content"},[n("div",{ref:"sectionPage",staticClass:"section-page book-section-view"},[t.sectionInfo.vid?n("div",{staticClass:"video-wrapper",style:t.isMobileBrowser?{height:t.videoWrapperHeight+"px"}:{}},[n("Video",{style:t.isMobileBrowser?t.mobilePlayerStyle:{},attrs:{"video-type":t.isLegacyBookletVid?"mp4":"hls",vid:t.sectionInfo.vid||"","video-config":t.videoConfig},on:{handleEvent:t.handleVideoEvent}})],1):t._e(),t._v(" "),t.sectionInfo.markdown||t.htmlContent?n("markdown-viewer",{ref:"content",attrs:{markdown:t.sectionInfo.markdown,html:t.htmlContent}}):t._e(),t._v(" "),t.showBuyButton?n("div",{staticClass:"bottom-mobile-buy"},[n("BookBuyButton",{attrs:{book:t.bookInfo,"is-float-discount-label":!0},on:{buyBook:t.buyBook}}),t._v(" "),n("VipBorrowButton",{staticClass:"borrow",attrs:{"event-page":"free","book-info":t.bookInfo}})],1):t._e(),t._v(" "),t.sectionInfo.markdown||t.htmlContent?n("section",{ref:"commentBox",staticClass:"book-comments"},[n("div",{staticClass:"box-title"},[t._v("留言")]),t._v(" "),n("CommentListBox",{attrs:{subject:t.subject,"jj-helper-item-id":t.bookletId,"jj-helper-item-type":12,expanded:!0,sticky:!1},on:{syncCommentNum:t.syncCommentNum}})],1):t._e()],1)])}),[],!1,null,"48a45cb8",null).exports},props:["bookInfo","sectionInfo","free"],data:function(){return{}},computed:B(B({},Object(c.mapGetters)({logined:r.LOGINED,user:r.USER})),{},{isAuthor:function(){return!!this.user&&this.bookInfo.user.id===(null==this?void 0:this.user.id)},isAdmin:function(){var t,e;return!!this.user&&(null==this||null===(t=this.user)||void 0===t||null===(e=t.roles)||void 0===e?void 0:e.isAdmin)},sectionContentComponent:function(){var t,e,n,o,r=0===(null==this||null===(t=this.bookInfo)||void 0===t?void 0:t.price),c=1===(null==this||null===(e=this.sectionInfo)||void 0===e?void 0:e.is_free),l=(null==this||null===(n=this.bookInfo)||void 0===n?void 0:n.is_buy)||!1,d=0===(null==this||null===(o=this.sectionInfo)||void 0===o?void 0:o.status)||!1,f=(null==this?void 0:this.bookInfo.isBorrowing)||!1;return this.isAdmin||this.isAuthor?"section-content":c||r||l||f?d?"section-writing":"section-content":"section-buying-guide"}}),methods:{buyBook:function(){this.$coursePayment(this.user,this.bookInfo.id)}}},E=(n(1628),Object(m.a)(R,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"section-view"},[e(this.sectionContentComponent,{tag:"component",attrs:{"book-info":this.bookInfo,"section-info":this.sectionInfo,free:this.free},on:{buy:this.buyBook}})],1)}),[],!1,null,"3bdbd109",null));e.a=E.exports},2165:function(t,e,n){},2166:function(t,e,n){},2167:function(t,e,n){},2168:function(t,e,n){},3218:function(t,e,n){t.exports=n.p+"img/wx-qr.966373a.jpg"},3219:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,l=e._v,data=e.data,d=e.children,f=void 0===d?[]:d,h=data.class,m=data.staticClass,style=data.style,v=data.staticStyle,V=data.attrs,y=void 0===V?{}:V,_=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[h,m],style:[style,v],attrs:Object.assign({width:"40px",height:"40px",viewBox:"0 0 40 40",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:sketch":"http://www.bohemiancoding.com/sketch/ns"},y)},_),f.concat([n("title",[l("juejin_logo copy")]),n("desc",[l("Created with Sketch.")]),n("defs"),n("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd","sketch:type":"MSPage"}},[n("g",{attrs:{id:"juejin_logo-copy","sketch:type":"MSArtboardGroup",fill:"#007FFF"}},[n("path",{attrs:{d:"M23.2819984,7.7030545 L19.8538714,5 L16.2721918,7.8241757 L16.0865388,7.97375707 L19.8538714,10.977629 L23.6327866,7.97375707 L23.2819984,7.7030545 Z M36.2727433,18.185664 L19.8439434,31.1400064 L3.42507143,18.1936064 L1,20.1414735 L19.8439434,35 L38.6981457,20.1335312 L36.2727433,18.185664 Z M19.8439434,19.2367048 L10.903809,12.1875172 L8.47840667,14.1353844 L19.8439434,23.0970293 L31.2190771,14.127442 L28.7936748,12.1795749 L19.8439434,19.2367048 Z",id:"Fill-1-Copy-2","sketch:type":"MSShapeGroup"}})])])]))}}},3220:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,l=e._v,data=e.data,d=e.children,f=void 0===d?[]:d,h=data.class,m=data.staticClass,style=data.style,v=data.staticStyle,V=data.attrs,y=void 0===V?{}:V,_=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[h,m],style:[style,v],attrs:Object.assign({width:"16px",height:"13px",viewBox:"0 0 16 13",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},y)},_),f.concat([n("title",[l("Group 4")]),n("desc",[l("Created with Sketch.")]),n("defs"),n("g",{attrs:{id:"全屏",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[n("g",{attrs:{id:"2_fullscreen_close-sidebar",transform:"translate(-19.000000, -25.000000)",fill:"#979797"}},[n("g",{attrs:{id:"Group-4",transform:"translate(19.000000, 25.000000)"}},[n("rect",{attrs:{id:"Rectangle-3",x:"0",y:"5.5",width:"16",height:"1.5"}}),n("rect",{attrs:{id:"Rectangle-3",x:"0",y:"0",width:"16",height:"1.5"}}),n("rect",{attrs:{id:"Rectangle-3-Copy",x:"0",y:"11",width:"16",height:"1.5"}})])])])]))}}},3221:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,m=data.staticStyle,v=data.attrs,V=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,h],style:[style,m],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"},V)},y),d.concat([n("path",{attrs:{fill:"#BABABA","fill-rule":"evenodd",d:"M11 0h9v9h-9V0zM0 0h9v9H0V0zm0 11h9v9H0v-9zm14-5h3V3h-3v3zM3 6h3V3H3v3zm0 11v-3h3v3H3zm8-6h3v3h-3v-3zm3 3h3v3h-3v-3zm3-3h3v3h-3v-3zm-6 6h3v3h-3v-3zm6 0h3v3h-3v-3z"}})]))}}},3222:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,m=data.staticStyle,v=data.attrs,V=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,h],style:[style,m],attrs:Object.assign({width:"137",height:"28",viewBox:"0 0 137 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V)},y),d.concat([n("path",{attrs:{d:"M17.5865 17.3955H17.5902L28.5163 8.77432L25.5528 6.39453L17.5902 12.6808H17.5865L17.5828 12.6845L9.62018 6.40201L6.6604 8.78181L17.5828 17.3992L17.5865 17.3955Z",fill:"#1E80FF"}}),n("path",{attrs:{d:"M17.5872 6.77268L21.823 3.40505L17.5872 0.00748237L17.5835 0L13.3552 3.39757L17.5835 6.76894L17.5872 6.77268Z",fill:"#1E80FF"}}),n("path",{attrs:{d:"M17.5865 23.2854L17.5828 23.2891L2.95977 11.7531L0 14.1291L0.284376 14.3574L17.5865 28L28.5238 19.3752L35.1768 14.1254L32.2133 11.7456L17.5865 23.2854Z",fill:"#1E80FF"}}),n("path",{attrs:{d:"M133.287 18.4172H131.162L129.923 23.0758H126.825V16.7559H135.364V14.7315H126.825V11.1469H133.074V9.12256H118.454V11.1469H124.703V14.7315H116.164V16.7559H124.703V23.0758H121.601L120.363 18.4172H118.237L119.487 23.0758H115.543V25.1001H135.985V23.0758H132.041L133.287 18.4172Z",fill:"#323232"}}),n("path",{attrs:{d:"M130.522 3.3151L130.2 2.94092H121.321L120.999 3.3151C119.298 5.2467 117.378 6.97337 115.278 8.46009V10.9522C116.206 10.3573 120.183 7.72295 122.327 4.98768H129.235C131.375 7.72295 135.356 10.3573 136.284 10.9522V8.46009C134.169 6.97586 132.235 5.2491 130.522 3.3151Z",fill:"#323232"}}),n("path",{attrs:{d:"M94.9037 8.53127H96.494V6.50323H94.9037V2.88867H92.9056V6.50323H91.3303V8.53127H92.9094V14.7914L91.3303 15.3377V17.5828L92.9094 17.0365V20.7371C92.8414 22.2391 92.5579 23.7236 92.0674 25.145H94.1629C94.6112 23.7165 94.863 22.2335 94.9112 20.7371V16.3442L96.5053 15.7904V13.5229L94.9112 14.0767L94.9037 8.53127Z",fill:"#323232"}}),n("path",{attrs:{d:"M99.1875 2.88867H97.6608V20.7446C97.6727 22.2359 97.4852 23.7221 97.1033 25.1637H99.1875C99.5206 23.7145 99.6851 22.2316 99.6776 20.7446V9.77357H112.321V2.88867H99.1875ZM110.308 7.75303H99.6851V4.91671H110.304L110.308 7.75303Z",fill:"#323232"}}),n("path",{attrs:{d:"M110.305 23.405H107.566V17.6838H110.021H110.702H111.91V11.8166H110.021V15.9363H107.566V11.1431H105.676V15.9363H103.27V11.8166H101.381V17.6838H102.298H103.27H105.676V23.405H102.967V19.173H101.074V25.1524H102.286H102.967H110.305H110.683H112.195V19.173H110.305V23.405Z",fill:"#323232"}}),n("path",{attrs:{d:"M53.0024 2.91846V4.83801L56.5908 6.11397L53.0024 7.38618V9.30573L59.2887 7.07187L65.5749 9.30573V7.38618L61.9865 6.11397L65.5749 4.83801V2.91846L59.2887 5.15232L53.0024 2.91846Z",fill:"#323232"}}),n("path",{attrs:{d:"M79.9508 11.697H88.5944V9.47813H79.9508V2.80273H77.5299V9.47813H68.8863V11.697H77.5299V22.9823H67.76V25.2012H89.7207V22.9823H79.9508V11.697Z",fill:"#323232"}}),n("path",{attrs:{d:"M48.9461 5.39227L52.2913 5.18272V3.24072L43.6813 3.78328V5.72529L47.0265 5.512V8.50545H43.5803V10.4213H47.0265V25.164H48.9461V10.4213H52.3923V8.50545H48.9461V5.39227Z",fill:"#323232"}}),n("path",{attrs:{d:"M57.6539 9.01025H55.6595L55.1768 10.3648H52.9991V12.2357H54.5145L52.55 17.7662H53.8821V24.1534H55.7007V16.8457H58.6642V25.1787H60.5837V16.8457H63.4612V21.059C63.4534 22.1374 63.181 23.1974 62.6679 24.146H64.7147C65.1423 23.173 65.3627 22.1217 65.362 21.059V15.6932V15.1282H60.5837V13.2572H58.6642V15.1282H55.4836L56.5313 12.2245H65.594V10.3536H57.1749L57.6539 9.01025Z",fill:"#323232"}}),n("path",{attrs:{d:"M43.562 24.6246H45.4591L46.2786 11.4272H44.3815L43.562 24.6246Z",fill:"#323232"}}),n("path",{attrs:{d:"M49.7849 11.4272L50.3499 23.2963H52.247L51.682 11.4272H49.7849Z",fill:"#323232"}})]))}}},3223:function(t,e,n){t.exports=n.p+"87ad47e35a060899d2234a8b5e7f378f.svg"},3224:function(t,e,n){t.exports=n.p+"54d8a353dfbeff543c8a513821df8caf.svg"},3225:function(t,e,n){"use strict";n(2165)},3226:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,m=data.staticStyle,v=data.attrs,V=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,h],style:[style,m],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V)},y),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.24984 3.33331H12.9165C13.3558 3.33331 13.7157 3.67326 13.7476 4.10445L13.7498 4.16665V15.8333C13.7498 16.2726 13.4099 16.6325 12.9787 16.6644L12.9165 16.6666H1.24984C0.81052 16.6666 0.450602 16.3267 0.41879 15.8955L0.416504 15.8333V4.16665C0.416504 3.72733 0.756453 3.36741 1.18764 3.3356L1.24984 3.33331H12.9165H1.24984ZM12.0831 4.99994H2.08309V14.9999H12.0831V4.99994ZM19.5831 6.47177V13.5281C19.5831 14.1758 18.8058 14.5759 18.1948 14.2427L14.9998 12.4999V7.49993L18.1948 5.75718C18.8058 5.42393 19.5831 5.82402 19.5831 6.47177ZM17.9164 7.94361L16.6664 8.44361V11.5563L17.9164 12.0563V7.94361ZM6.24976 6.66661V9.16661H3.74976V6.66661H6.24976Z",fill:"#8A919F"}})]))}}},3227:function(t,e,n){"use strict";n(2166)},3228:function(t,e,n){"use strict";n(2167)},3229:function(t,e,n){"use strict";n(2168)},4916:function(t,e,n){"use strict";n.r(e);var o=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[this._v("关注公众号")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"qr-img"},[e("img",{attrs:{src:n(3218)}})])}],r=(n(19),n(18),n(13),n(16),n(7),n(76),n(44),n(38),n(0)),c=n(6),l=n(85),d=n(86),f=n(8),h=n(214),m=n(3219),v=n.n(m),V=n(3220),y=n.n(V),_=n(3221),w=n.n(_),O=n(3222),j=n.n(O),C=n(1170),k=n(1102),S={components:{VipBorrowButton:k.a},props:["free","curIndex","list","isBorrowing","bookInfo","foldPc"],data:function(){return{}},computed:{notLastPage:function(){return this.curIndex<this.list.length-1},notFirstPage:function(){return this.curIndex>0},bookId:function(){return this.$route.params.id}},methods:{buyBook:function(){this.$emit("buy")},prevPage:function(){this.$emit("prev")},nextPage:function(){this.$emit("next")}}},I=(n(3225),n(30)),x=Object(I.a)(S,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"handle"},[t.list.length>0?o("div",{staticClass:"book-handle",class:{"fold-pc":t.foldPc}},[t.notFirstPage?o("div",{staticClass:"step-btn step-btn--prev",on:{click:t.prevPage}},[o("img",{attrs:{src:n(3223)}})]):t._e(),t._v(" "),t.notLastPage?o("div",{staticClass:"step-btn step-btn--next",on:{click:t.nextPage}},[o("img",{attrs:{src:n(3224)}})]):t._e()]):t._e(),t._v(" "),t.notLastPage||t.free||t.bookInfo.isBorrowing?t._e():o("div",{staticClass:"buy-container"},[o("button",{staticClass:"buy",on:{click:t.buyBook}},[t._v("购买")]),t._v(" "),o("VipBorrowButton",{staticClass:"borrow",attrs:{"book-info":t.bookInfo,"event-page":"free"}})],1)])}),[],!1,null,"7f935304",null).exports,L=n(3),P=n(1631),A=n(1632),B=n.n(A),R=n(3226),E=n.n(R);function H(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function D(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?H(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):H(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var T={components:{LockIcon:B.a,CameraIcon:E.a,BAlert:l.Alert},props:["free","admin","info","list","sectionId","isVideoCourse"],data:function(){return{sectionList:[],userRole:"",initShowDitoryVisible:!0}},computed:D(D({},Object(d.mapGetters)({user:L.USER})),{},{tryRead:function(){var t=this.info,e=t.price,n=t.isBuy;return!(0===e)&&this.admin||!n},bookId:function(){return this.$route.params.id}}),watch:{sectionId:{handler:function(){var t=this;this.$nextTick((function(){var e,n;(null===(e=t.$refs)||void 0===e?void 0:e.activeRef)&&Array.isArray(null===(n=t.$refs)||void 0===n?void 0:n.activeRef)&&t.bookDirectoryVisible(t.$refs.activeRef[0])}))},immediate:!0}},created:function(){this.initData()},methods:{initData:function(){var t=new P.a(this.list,this.info,this.user);this.userRole=t.userRole,this.sectionList=t.getSectionList()},setFreeSection:function(t,e){this.$emit("setFreeSection",t,e)},routeSectionId:function(t){var e=t.sectionId;e!==this.$route.params.sectionId&&this.$emit("linkSection",e)},bookDirectoryVisible:function(t){t&&!this.$device.isMobile&&this.sectionId&&(null==t||t.scrollIntoView({behavior:this.initShowDitoryVisible?"auto":"smooth",block:"nearest",inline:"center"}),this.initShowDitoryVisible=!1)}}},$=(n(3227),Object(I.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-directory-comp beautify-scrollbar-warp",class:{"is-admin":"admin"===t.userRole,"is-author":"author"===t.userRole,"is-buyer":"buyer"===t.userRole}},[n("div",{staticStyle:{padding:"0 15px"}},["admin"===t.userRole?n("b-alert",{attrs:{"show-icon":""}},[t._v("\n      当前是管理员状态,以下所有章节都可点击阅读\n    ")]):"author"===t.userRole?n("b-alert",{attrs:{"show-icon":""}},[t._v("\n      您是小册作者,以下所有章节都可点击阅读\n    ")]):t._e()],1),t._v(" "),n("div",{staticClass:"section-list"},t._l(t.sectionList,(function(e,o){return n("a",{key:e.sectionId,ref:t.sectionId===e.sectionId?"activeRef":"",refInFor:!0,staticClass:"section",class:{unfinished:!e.isFinished,"route-active":t.sectionId===e.sectionId},on:{click:function(n){return t.routeSectionId(e)}}},[n("div",{staticClass:"left"},[n("div",{staticClass:"index"},[t._v(t._s(o+1))])]),t._v(" "),n("div",{staticClass:"center"},[n("div",{staticClass:"main-line"},[n("div",{staticClass:"title"},[t.isVideoCourse||e.hasVideo?n("CameraIcon",{staticClass:"icon-camera"}):t._e(),t._v(" "),n("span",{staticClass:"title-text"},[t._v(t._s(e.title))])],1),t._v(" "),n("div",{staticClass:"right"},[e.isFinished?"buyer"===t.userRole||t.info.isBorrowing?t._e():["付费章节"===e.freeStatus?n("div",{staticClass:"lock"},[n("LockIcon")],1):t._e(),t._v(" "),"试学章节"===e.freeStatus?n("div",{staticClass:"label"},[t._v("\n                试学\n              ")]):t._e()]:n("div",{staticClass:"lock"},[n("LockIcon")],1)],2)]),t._v(" "),n("div",{staticClass:"sub-line"},[e.isFinished?["已学完"===e.status?n("div",{staticClass:"label",staticStyle:{color:"#8a919f",background:"#e4e6eb"}},[t._v("\n              已学完\n            ")]):"上次学到"===e.status?n("div",{staticClass:"label",staticStyle:{color:"#1e80ff",background:"#eaf2ff"}},[t._v("\n              上次学到\n            ")]):"有更新"===e.status?n("div",{staticClass:"label",staticStyle:{color:"#f53f3f",background:"#ffece8"}},[t._v("\n              有更新\n            ")]):t._e(),t._v(" "),n("span",[t._v("学习时长: "+t._s(e.readDurationStr))])]:n("div",[t._v("写作中...")])],2)])])})),0)])}),[],!1,null,"3cf5100c",null).exports),M={props:["curIndex","list"]},F=(n(3228),Object(I.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-progress"},[n("ul",t._l(t.list,(function(e,o){return n("li",{class:{active:o<=t.curIndex}})})),0)])}),[],!1,null,"6fbc2a2e",null).exports),U=n(1981),N=n(952),Z=n(1100),W=n(172),z=n(21),G=n(41);function J(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function K(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?J(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):J(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Q=Object(c.b)({components:{Icon:l.Icon,UserAuth:N.a,BookDirectory:$,BookDirection:x,BookProgress:F,WechatQuickLogin:Z.a,SectionPrev:U.a,SectionNext:U.a,AppOpenDrawer:function(){return Promise.all([n.e(8),n.e(21)]).then(n.bind(null,1212))},QrIcon:w.a,JuejinIcon:v.a,MenuIcon:y.a,JuejinLogoIcon:j.a,VipBorrowButton:k.a,BookBuyButton:C.a},provide:function(){var t=this;return{refreshBook:function(){t.fetch()}}},data:function(){return{sectionError:!1,sectionList:[],bookInfo:null,sectionInfo:{},direction:"next",view:"prev",unfoldM:!1,foldPc:!1,isViewNavOnTop:!1,isHeaderVisible:!0,needHide:!1,qrHide:!1,isPlayingFullscreen:!1}},computed:K(K({},Object(d.mapGetters)({user:L.USER,logined:L.LOGINED})),{},{isVideoCourse:function(){var t,e;return(null===(e=null===(t=this.bookInfo)||void 0===t?void 0:t.base_info)||void 0===e?void 0:e.course_type)===f.BookletCourseType.Video},isAuthor:function(){var t,e;return(null===(t=this.author)||void 0===t?void 0:t.id)===(null===(e=this.user)||void 0===e?void 0:e.id)},isAdmin:function(){var t,e=this.user||{};return(null===(t=null==e?void 0:e.roles)||void 0===t?void 0:t.isAdmin)||this.isAuthor},canPayment:function(){var t=this.bookInfo,e=t.price,n=t.isBuy;return e>0&&!n&&!this.isAuthor},directionClass:function(){return"prev"===this.direction?"transition--prev":"transition--next"},bookId:function(){return this.$route.params.id},sectionId:function(){return this.$route.params.sectionId},filterList:function(){var t=this;return this.isAdmin?this.sectionList.map((function(t){return t.sectionId})).filter((function(t){return t})):this.sectionList.map((function(e){return!(!(t.free||e.isFree||t.bookInfo.isBorrowing)||!e.isFinished)&&e.sectionId})).filter((function(t){return t}))},sectionIdList:function(){return this.bookInfo&&this.bookInfo.section||[]},curDirectoryIndex:function(){return this.sectionIdList&&this.sectionIdList.indexOf(this.sectionId)},curFreeDirectoryIndex:function(){var t=this.$route.params.sectionId;return this.filterList.indexOf(t)},free:function(){var t=this.bookInfo,e=t.price,n=t.isBuy,o=0===e;return o||n},author:function(){var t=this.bookInfo;return t&&t.user||{}},isMobile:function(){return this.$device.isMobile},scheme:function(){var t=this.$route.params||{},e=t.id,n=t.sectionId;return Object(W.e)("https://".concat(z.c,"/book/").concat(e,"/section/").concat(n),W.a.bookSectionDetail.gd_label)}}),watch:{$route:function(){this.bookInfo||this.fetch(),this.getSection(),this.loopComponent()}},shareInfo:function(){var t=this.bookInfo||{};return{title:"".concat(t.title," - ").concat(this.author.username," - 掘金小册"),noTemplate:!0,description:t.desc,thumb:t.img,url:this.$route.fullPath}},head:function(){var title=this.bookInfo&&this.bookInfo.title||"",t=this.author.username||"";return t=t?t+" - ":"",{titleTemplate:null,title:"".concat(title=title?title+" - ":"").concat(t,"掘金小册")}},methods:K(K({},Object(d.mapActions)({toogle_suspension:L.CHANGE_SUSPENSION_PANEL})),{},{buyBook:function(){return this.$coursePayment(this.user,this.bookId)},getXiaoce:function(){var t=this;return this.getXiaoceById().then((function(){t.isVideoCourse&&"bookSection"===t.$route.name&&t.$router.replace({name:"videoCourseSection",params:t.$route.params})}))},getXiaoceById:function(){var t=this;return Object(h.b)(this.bookId).then((function(e){var n=e.bookInfo,o=e.sections;t.bookInfo=n;t.sectionList=o.length?o.map((function(t){return Object.assign(t,{read:!1})})):[],Number(t.sectionId)?t.getSection():t.redirectSection()}))},getSection:function(){var t=this,e=this.sectionId;this.setSectionListIsRead(e),Object(h.e)(e).then((function(e){if(e||t.redirectSection(),!e.id)return Promise.reject(new Error);t.sectionInfo=Object.assign({},e,{html:e.content,markdown:e.markdown_show}),t.enterSectionTEA()})).catch((function(e){console.error("error get section info err:",e),t.sectionInfo={}}))},setFreeSection:function(t,e){var n=this;this.$getBean("xiaoceBusiness").setFreeSection(t,e).then((function(){n.getListSection()})).catch((function(t){n.$alertMsg(t)}))},redirectSection:function(){var t=this.filterList&&this.filterList[0];t?(this.setSectionListIsRead(t),this.$router.replace({params:{id:this.bookId,sectionId:t}})):this.$router.push({name:this.isVideoCourse?"videoCourseInfo":"bookInfo",params:{id:this.bookId}})},loopComponent:function(){var t=this.view;this.view="prev"===t?"next":"prev"},prevPage:function(t){(t=t||this.filterList[this.curFreeDirectoryIndex-1])&&(this.setSectionListIsRead(t),this.sectionInfo={},this.direction="prev",this.$router.push({params:{sectionId:t},query:this.$route.query}))},nextPage:function(t){(t=t||this.filterList[this.curFreeDirectoryIndex+1])&&(this.setSectionListIsRead(t),this.direction="next",this.sectionInfo={},this.$router.push({params:{sectionId:t},query:this.$route.query}))},setSectionIsRead:function(t,e){var n=Object.assign(this.sectionList[t],{read:e});this.$set(this.sectionList,t,n)},setSectionListIsRead:function(t){var e=this,n=this.sectionIdList.indexOf(t);n>-1&&this.sectionIdList.forEach((function(t,o){o<n?e.setSectionIsRead(o,!0):e.setSectionIsRead(o,!1)}))},linkSection:function(t){var e=this.sectionIdList.indexOf(t);this.curDirectoryIndex>e?(this.direction="prev",this.prevPage(t)):(this.direction="next",this.nextPage(t)),this.unfoldM=!1},toggleSummary:function(){var t=this.unfoldM,e=this.foldPc;this.unfoldM=!t,this.foldPc=!e},toggleQrPopup:function(){var t=this.qrHide;this.qrHide=!t},hideQrPopup:function(){var t=this;this.qrHide=!0,window.localStorage.setItem("bookQrHideSection",!0);var e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.ROOT_CONTAINER_CLICK,(function(){t.qrHide=!0}))},initQrHide:function(){var t=window.localStorage.getItem("bookQrHideSection");this.qrHide=t},initScroll:function(){var t=this;this.removeScrollDirectionChangeEventListener=Object(G.n)(window,(function(e,n){var o="up"===e,r=n<=50;t.needHide=r&&!o,t.isHeaderVisible=r||o}),50),this.removeScrollEventListener=Object(G.m)(window,(function(){window.pageYOffset<=50&&!t.isHeaderVisible?t.isHeaderVisible=!0:t.needHide&&(t.needHide=!1,t.isHeaderVisible=!1)}),50)},initPlayDirection:function(){var t=this;this.removeDirectionListener=Object(G.k)(document,"keyup",(function(e){e.ctrlKey||t.isPlayingFullscreen||(37===e.keyCode?t.prevPage():39===e.keyCode&&t.nextPage())}))},fetch:function(){this.getXiaoce()},reset:function(){this.toogle_suspension(!0)},handleVisibilityChange:function(){"visible"===document.visibilityState&&this.enterSectionTEA()},enterSectionTEA:function(){var t=this.sectionInfo;this.$TEA("book_section_detail_visit",{book_id:t.booklet_id,section_id:t.section_id,is_trial_section:t.is_free,is_purchased:this.bookInfo.isBuy?1:0,platform:this.isMobile?"h5":"web",rent_status:this.bookInfo.isBorrowing?"underway":this.bookInfo.borrowTimes>0?"finish":"never"})}}),mounted:function(){var t,e,n=this;this.initQrHide(),this.initScroll(),this.toogle_suspension(!1),this.fetch(),this.initPlayDirection();var o=this.$getBean("eventBus");o.onVmLife(this,o.eventType.VIDEO_FULLSCREEN_CHANGE,(function(t){n.isPlayingFullscreen=t})),Object(G.o)(this.handleVisibilityChange),this.isMobile&&!(null===(e=null===(t=this.$store.state)||void 0===t?void 0:t.header)||void 0===e?void 0:e.isPopupZlink)&&(window.open("https://z.juejin.cn/SMF5","_blank"),this.$store.commit("header/POPUP_ZLINK"))},beforeDestroy:function(){this.reset(),this.removeDirectionListener(),this.removeScrollEventListener(),this.removeScrollDirectionChangeEventListener(),Object(G.q)(this.handleVisibilityChange)}}),Y=(n(3229),Object(I.a)(Q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.bookInfo?n("div",{staticClass:"book-read-view"},[n("section",{staticClass:"book-section",class:{"fold-pc":t.foldPc}},[n("div",{staticClass:"book-summary",class:{"unfold-mobile":t.unfoldM}},[n("div",{staticClass:"book-summary-masker",on:{click:t.toggleSummary}}),t._v(" "),n("div",{staticClass:"book-summary-inner"},[n("div",{staticClass:"book-summary__header"},[n("app-link",{staticClass:"logo",attrs:{to:t.$courseIndex()}},[n("JuejinLogoIcon",{staticStyle:{height:"100%",width:"auto"}})],1),t._v(" "),n("div",{staticClass:"label"},[t._v("课程")]),t._v(" "),1==t.bookInfo.isPublish?n("div",{staticClass:"audit"},[t._v("审核中")]):t._e()],1),t._v(" "),t.free||t.bookInfo.isBorrowing?t._e():n("div",{staticClass:"buy-sticky"},[n("BookBuyButton",{staticClass:"section-buy",attrs:{book:t.bookInfo,"is-float-discount-label":!0},on:{buyBook:t.buyBook}}),t._v(" "),n("VipBorrowButton",{attrs:{"event-page":"free","book-info":t.bookInfo},on:{fetch:t.getXiaoceById}})],1),t._v(" "),n("book-directory",{staticClass:"book-directory",class:{bought:!t.canPayment||t.bookInfo.isBorrowing},attrs:{free:t.free,admin:t.isAdmin,info:t.bookInfo,list:t.sectionList,"cur-index":t.curDirectoryIndex,"section-id":t.sectionId,"is-video-course":t.isVideoCourse},on:{setFreeSection:t.setFreeSection,linkSection:t.linkSection}}),t._v(" "),n("div",{staticClass:"book-summary__footer",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"qr-icon",on:{click:function(e){return e.stopPropagation(),t.toggleQrPopup(e)}}},[n("QrIcon")],1),t._v(" "),n("div",{staticClass:"qr-tips",class:{show:!t.qrHide}},[n("span",{staticClass:"ion-close",on:{click:t.hideQrPopup}},[n("Icon",{attrs:{type:"close"}})],1),t._v(" "),t._m(0),t._v(" "),t._m(1)])])],1)]),t._v(" "),n("div",{staticClass:"book-content"},[n("div",{staticClass:"book-content-inner"},[n("div",{staticClass:"book-content__header",class:{visible:t.isHeaderVisible}},[n("div",{staticClass:"switch",on:{click:t.toggleSummary}},[n("JuejinIcon",{staticStyle:{width:"30px",height:"30px","vertical-align":"middle"}})],1),t._v(" "),n("div",{staticClass:"menu",on:{click:t.toggleSummary}},[n("MenuIcon")],1),t._v(" "),n("div",{staticClass:"title"},[n("app-link",{attrs:{to:t.$bookInfo(t.bookId,t.isVideoCourse?"video":"book")}},[t._v("\n              "+t._s(t.bookInfo.title)+"\n            ")])],1),t._v(" "),n("user-auth",{staticClass:"user-auth"}),t._v(" "),t.foldPc?n("book-progress",{staticClass:"book-progress",attrs:{"cur-index":t.curDirectoryIndex,list:t.sectionIdList}}):t._e()],1),t._v(" "),n("div",{ref:"bookBody",staticClass:"book-body",class:[t.directionClass,{mobile:t.isMobile}]},[n("section-"+t.view,{tag:"component",staticClass:"book-section-content",attrs:{free:t.free,user:t.user,"book-info":t.bookInfo,"section-info":t.sectionInfo},on:{buy:t.buyBook}})],1),t._v(" "),n("book-direction",{directives:[{name:"show",rawName:"v-show",value:t.sectionInfo&&t.curFreeDirectoryIndex>-1,expression:"sectionInfo && curFreeDirectoryIndex > -1"}],staticClass:"book-direction",attrs:{free:t.free,"cur-index":t.curFreeDirectoryIndex,list:t.filterList,"is-borrowing":t.bookInfo.isBorrowing,"book-info":t.bookInfo,"fold-pc":t.foldPc},on:{buy:t.buyBook,prev:t.prevPage,next:t.nextPage}})],1)])]),t._v(" "),n("wechat-quick-login"),t._v(" "),t.$device.isMobile?n("AppOpenDrawer",{attrs:{zlink:"https://z.juejin.cn/SMF5",scheme:t.scheme}}):t._e()],1):t._e()}),o,!1,null,"68fa1d63",null));e.default=Y.exports},702:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n(7);var o=n(11),r=n(12),c=function(){function t(){Object(o.a)(this,t),this.busy=!1}return Object(r.a)(t,[{key:"do",value:function(t){var e=this;return this.busy?Promise.resolve():(this.busy=!0,Promise.resolve("function"==typeof t?t():t).then((function(t){return e.busy=!1,t})).catch((function(t){return e.busy=!1,Promise.reject(t)})))}}]),t}();function l(){return new c}},703:function(t,e,n){"use strict";n.d(e,"g",(function(){return f})),n.d(e,"h",(function(){return h})),n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return v})),n.d(e,"f",(function(){return V})),n.d(e,"e",(function(){return y})),n.d(e,"d",(function(){return w})),n.d(e,"c",(function(){return O}));n(19),n(18),n(13),n(7),n(16),n(23);var o=n(0),r=n(5),c=n(1);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function f(t){var e=t.item_id,n=t.item_type,o=t.comment_content,r=t.comment_pics;return Object(c.e)({url:"/interact_api/v1/comment/publish",method:"post",body:{item_id:e,item_type:n,comment_content:o,comment_pics:r,client_type:2608}})}function h(t){var e=t.reply_to_comment_id,n=t.reply_to_reply_id,o=t.reply_to_user_id,r=t.item_id,l=t.item_type,d=t.reply_content,f=t.reply_pics;return Object(c.e)({url:"/interact_api/v1/reply/publish",method:"post",body:{reply_to_comment_id:e,reply_to_reply_id:n,reply_to_user_id:o,item_id:r,item_type:l,reply_content:d,reply_pics:f,client_type:2608}})}function m(t){var e=t.comment_id;return Object(c.e)({url:"/interact_api/v1/comment/delete",method:"post",body:{comment_id:String(e)}}).then((function(t){return t.data}))}function v(t){var e=t.comment_id,n=t.reply_id;return Object(c.e)({url:"/interact_api/v1/reply/delete",method:"post",body:{comment_id:e,reply_id:n}}).then((function(t){return t.data}))}function V(t){var e=t.comment_id,n=t.item_id,o=t.item_type,cursor=t.cursor,r=t.limit;return Object(c.e)({url:"/interact_api/v1/reply/list",method:"post",body:{comment_id:e,item_id:n,item_type:o,cursor:cursor,limit:r,client_type:2608}})}function y(t){return _.apply(this,arguments)}function _(){return(_=Object(r.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.e)({url:"/interact_api/v1/comment/hots",method:"post",body:e});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(t){return Object(c.e)({url:"/interact_api/v1/comment/list",method:"post",body:d(d({},t),{},{client_type:2608})})}function O(t){return Object(c.e)({url:"/interact_api/v1/comment/detail",method:"post",body:{comment_id:t,clent_type:2608},showError:!1})}},708:function(t,e,n){"use strict";n.r(e);n(19),n(18),n(13),n(16),n(7);var o=n(0),r=n(9),c=n(86),l=n(28),d=n(250),f=n(892),h=n(789),m=Object(r.d)({components:{Triangle:h.a},props:{disalbe:{type:Boolean,default:!1},promise:Promise},setup:function(t,e){var data=Object(r.q)({visible:!1,top:0,left:0,isTop:!1}),n=Object(r.r)(null),o=Object(r.r)(null),c=Object(r.r)();return{data:data,popoverStyle:Object(r.a)((function(){return{top:"".concat(data.top,"px"),left:"".concat(data.left,"px")}})),contentElem:c,showPopover:function(r){t.disalbe||(clearTimeout(o.value),e.emit("show"),n.value=setTimeout((function(){Promise.resolve(t.promise).then((function(){n.value&&(data.visible=!0,e.root.$nextTick((function(){var t=r.target,e=null==t?void 0:t.getBoundingClientRect(),n=t.offsetWidth||33,o=t.offsetHeight||33,l=c.value,d=(null==l?void 0:l.offsetWidth)||260,f=(null==l?void 0:l.offsetHeight)||160,h=e.left-d/2+n/2,m=e.top-f-12;data.isTop=!1,m<60&&(data.isTop=!0,m=e.top+o+8),h=Math.max(0,h),data.left=h,data.top=m})))}))}),300))},hidePopover:function(){clearTimeout(n.value),n.value=null,e.emit("hide"),o.value=setTimeout((function(){o.value=null,data.visible=!1}),300)}}}}),v=(n(917),n(30)),V=Object(v.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popover-box",on:{mouseenter:function(e){return t.showPopover(e)},mouseleave:t.hidePopover}},[n("transition",{attrs:{name:"fade"}},[t.data.visible?n("div",{ref:"contentElem",staticClass:"popover-content",style:t.popoverStyle},[t._t("content"),t._v(" "),n("triangle",{staticClass:"triangle-bottom",class:{isTop:t.data.isTop}})],2):t._e()]),t._v(" "),t._t("default")],2)}),[],!1,null,"4b48f267",null).exports,y=n(3),_=n(713),w=n(702);function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var C=Object(r.d)({components:{Avatar:d.a,Popover:V,Button:_.a,ImButton:f.a},props:{userId:String,showJscoreLevel:{type:Boolean,default:!1},enablePopover:{type:Boolean,default:!0},enterMethod:{type:String,default:""}},data:function(){return{user:null,followLock:Object(w.a)(),fetchUserPromise:null,isFollowing:!1}},computed:j(j({},Object(c.mapGetters)({currentUser:y.USER})),{},{position:function(){return this.user&&(this.$userPosition(this.user)||this.user.description||"暂无简介")},self:function(){return this.currentUser&&this.currentUser.id===this.userId},followed:function(){return this.user&&this.user.followed}}),methods:{toFollowing:function(){window.open("/user/".concat(this.userId,"/following"),"_blank")},toFollower:function(){window.open("/user/".concat(this.userId,"/followers"),"_blank")},handleShow:function(){this.fetchUserPromise=this.fetch().then((function(t){if(t.is_logout)return Promise.reject()}))},fetch:function(){var t=this;return Object(l.i)(this.userId,{ignore404:!0}).then((function(e){return t.user=e,e}))},toggleFollow:function(){var t=this;this.isFollowing=!0,this.followLock.do((function(){return t.$ensureAuthorized().then((function(){return t.$store.dispatch(y.TOGGLE_FOLLOW_USER,{user:t.user,enterMethod:t.enterMethod}).catch((function(e){t.$error(e)}))})).catch((function(t){return console.warn("follow failed err:",t)})).finally((function(){return t.isFollowing=!1}))}))}}}),k=(n(918),n(919),Object(v.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Popover",{staticClass:"user-popover",attrs:{promise:t.fetchUserPromise},on:{show:t.handleShow},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"info-row",on:{click:function(t){t.stopPropagation()}}},[n("app-link",{attrs:{to:t.$userRoute(t.user),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:t.user,decorative:!0,alt:t.user.username+"的头像"}})],1),t._v(" "),n("div",{staticClass:"user-info"},[n("username",{attrs:{user:t.user,"show-jscore-level":t.showJscoreLevel}}),t._v(" "),n("div",{staticClass:"position"},[t._v(t._s(t.position))])],1)],1),t._v(" "),t.self?t._e():n("div",{staticClass:"operate-btn"},[n("Button",{staticClass:"follow-btn",attrs:{"st:name":"followBtn",attention:!0,"custom-attention-text":"关注","cancel-attention-text":"已关注",cancel:t.followed,loading:t.isFollowing,size:"large","show-icon":!1},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleFollow(e)}}}),t._v(" "),n("ImButton",{staticClass:"im-btn",attrs:{"tea-type":"personal_information_card","user-id":t.userId}})],1),t._v(" "),n("div",{staticClass:"meta-row",on:{click:function(t){t.stopPropagation()}}},[n("ul",{staticClass:"meta-list"},[n("li",{staticClass:"item",on:{click:t.toFollowing}},[n("div",{staticClass:"count"},[t._v(t._s(t.user.followingCount||0))]),t._v(" "),n("div",{staticClass:"title"},[t._v("关注")])]),t._v(" "),n("li",{staticClass:"divider"}),t._v(" "),n("li",{staticClass:"item",on:{click:t.toFollower}},[n("div",{staticClass:"count"},[t._v(t._s(t.user.followerCount||0))]),t._v(" "),n("div",{staticClass:"title"},[t._v("粉丝")])])])])]},proxy:!0}])},[t._v(" "),t._t("default")],2)}),[],!1,null,"e0fd52c2",null));e.default=k.exports},713:function(t,e,n){"use strict";var o=n(9),r=n(752),c=n.n(r),l=n(753),d=n.n(l),f=n(754),h=n.n(f),m=n(755),v=n.n(m),V=n(756),y=n.n(V),_=Object(o.d)({props:{type:{type:String,default:"primary"},attention:Boolean,customAttentionText:String,cancelAttentionText:String,size:{type:String,default:"medium"},status:{type:String,default:"default"},disabled:Boolean,loading:Boolean,cancel:Boolean,text:String,icon:String,showIcon:{type:Boolean,default:!0}},setup:function(t,e){var n=Object(o.a)((function(){return t.attention}));return{handleClick:function(n){t.disabled||t.loading||e.emit("click",n)},isAttentionType:n,attentionText:Object(o.a)((function(){return"mini"===t.size&&t.loading?"":t.cancel?t.loading?"取消":t.cancelAttentionText||"已关注":t.customAttentionText||"关注"})),iconSrc:Object(o.a)((function(){return t.loading?t.cancel||n.value&&"primary"!==t.type?v.a:y.a:n.value&&t.showIcon?"mini"===t.size?"":t.icon||t.cancel?h.a:"primary"===t.type?c.a:d.a:""}))}}}),w=(n(757),n(30)),component=Object(w.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"ui-btn",class:[t.type,t.size,t.status,t.cancel?"cancel":"",t.attention?"attention":""],attrs:{disabled:t.disabled||t.loading},on:{click:t.handleClick}},[t.iconSrc?n("img",{staticClass:"img",class:t.loading?"loading":"",attrs:{src:t.iconSrc}}):t._e(),t._v(" "),t.isAttentionType?[t._v("\n    "+t._s(t.attentionText)+"\n  ")]:t._t("default",[t._v(t._s(t.text))])],2)}),[],!1,null,"2afc21b6",null);e.a=component.exports},715:function(t,e,n){},717:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r}));n(70),n(44),n(27),n(14);var o=function(text){try{var textarea=document.createElement("textarea");document.body.appendChild(textarea),textarea.value=text,textarea.select(),document.execCommand("copy"),document.body.removeChild(textarea)}catch(t){throw"copy link error"}};function r(content){if(!(content=(null==content?void 0:content.trim())||""))return"";var t=((null==content?void 0:content.trim())||"").split("\n")[0];return t.length<=30?t:t.substring(0,30)}},720:function(t,e,n){"use strict";n.d(e,"k",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return l})),n.d(e,"g",(function(){return d})),n.d(e,"b",(function(){return f})),n.d(e,"n",(function(){return h})),n.d(e,"j",(function(){return m})),n.d(e,"h",(function(){return v})),n.d(e,"i",(function(){return V})),n.d(e,"l",(function(){return y})),n.d(e,"m",(function(){return _})),n.d(e,"f",(function(){return w})),n.d(e,"a",(function(){return O})),n.d(e,"o",(function(){return j})),n.d(e,"e",(function(){return C}));var o=n(1);function r(t,e,n){return Object(o.c)({url:"/tag_api/v1/query_category_list",method:"POST",showError:t,headers:e,jsonBody:n})}function c(data,t,e,n){return Object(o.c)({url:"/interact_api/v1/digg/cancel",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function l(data,t,e,n){return Object(o.c)({url:"/interact_api/v1/digg/save",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function d(data,t,e,n){return Object(o.c)({url:"/interact_api/v1/follow/undo",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function f(data,t,e,n){return Object(o.c)({url:"/content_api/v1/column/articles_cursor",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function h(data,t,e,n){return Object(o.c)({url:"/tag_api/v1/theme/list_by_hot",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function m(data,t,e,n){return Object(o.c)({url:"/recommend_api/v1/short_msg/detail_rec",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function v(data,t,e,n){return Object(o.c)({url:"/interact_api/v1/message/set_all_read",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function V(data,t,e,n){return Object(o.c)({url:"/list_api/v1/annual/user_annual",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function y(data,t,e,n){return Object(o.c)({url:"/tag_api/v1/query_tag_list",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function _(data,t,e,n){return Object(o.c)({url:"/tag_api/v1/query_topic_detail",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function w(data,t,e,n){return Object(o.c)({url:"/interact_api/v1/follow/do",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function O(data,t,e,n){return Object(o.c)({url:"/booklet_api/v1/reading/submit_progress",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function j(data,t,e,n){return Object(o.c)({url:"/tag_api/v1/topic/list_by_search_cursor",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}function C(data,t,e,n){return Object(o.c)({url:"/interact_api/v1/digg/user_list",body:data,method:"POST",showError:t,headers:e,jsonBody:n})}},723:function(t,e,n){"use strict";n(19),n(18),n(13),n(16),n(44),n(7),n(70);var o,r=n(35),c=(n(23),n(5)),l=n(0),d=n(703),f=n(877),h=n.n(f),m=n(813),v=n(250),V=n(814),y=n(739),_=n(768),w=n(15),O=n(3),j=n(777),C=n(167),k=n(761),S=n(785),I=n(738);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function L(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var P=(o={},Object(l.a)(o,w.e.ArticleIdType,"article"),Object(l.a)(o,w.e.PinType,"pin"),Object(l.a)(o,w.e.Book,"小册"),Object(l.a)(o,w.e.Realtime,"news"),o),A={components:{AuthCard:m.a,Avatar:v.a,Emoji:V.a,ImageIcon:h.a},props:["commentList","replyList","subject","comment","parent","autoFocus","placeholder","mode","small"],data:function(){return{active:!1,focused:!1,submitting:!1,content:"",imageFile:null,imagePreviewUrl:"",emoji:""}},computed:{me:function(){return this.$store.getters.USER},bindedPhone:function(){return this.me&&this.me.isBindedPhone},empty:function(){return!this.content.length},canSubmit:function(){return this.content.length&&!this.submitting},isActionBoxVisible:function(){return(this.focused||!this.empty||this.imageFile)&&this.me&&this.bindedPhone},submitButtonTitle:function(){return this.submitting?"提交中...":"发表评论"},sendTip:function(){return this.$device.isMacOS?"⌘ + Enter":"Ctrl + Enter"}},watch:{focused:function(t){t&&!this.me&&this.$requestLogin(),t||!this.empty||this.imageFile||(this.$emit("emptyBlur"),this.$store.dispatch(O.UPDATE_PIN_ON_FOCUS,!1))},imageFile:function(){Object(j.g)(this.$refs.richInput)}},mounted:function(){var t=this;this.autoFocus&&this.$nextTick((function(){t.$refs.richInput.focus()}))},methods:{onFocus:function(){this.focused=!0,this.$store.dispatch(O.UPDATE_PIN_ON_FOCUS,!0)},onOuterClick:function(){this.empty&&(this.focused=!1)},onFormBoxClick:function(t){var e=t.target;if(this.bindedPhone){var input=this.$refs.richInput;input.focus(),input.contains(e)||Object(j.g)(input)}},onInput:function(){this.focused=!0,Object(j.e)(this.$refs.richInput),this.content=this.emojiToText(this.$refs.richInput.innerHTML),this.content=Object(j.b)(this.content)},onPaste:function(t){t.preventDefault(),Object(j.f)(t,this.onFileSelected);var text=Object(j.a)(t),html=Object(C.d)(text);Object(j.c)(this.$refs.richInput,html),this.focused=!0,this.content=this.emojiToText(this.$refs.richInput.innerHTML),this.content=Object(j.b)(this.content)},onKeydown:function(t){var e=this;if(this.content.length&&!this.submitting)return Object(S.a)(t,(function(){return e.submit()}))},cleanContent:function(){this.$refs.richInput.innerHTML="",this.content=""},updateEmoji:function(t){this.emoji=t,Object(j.c)(this.$refs.richInput,Object(C.c)(this.emoji)),this.focused=!0,this.content=this.emojiToText(this.$refs.richInput.innerHTML),this.content=Object(j.b)(this.content)},showFileDialog:function(){this.$refs.input.click()},changeFile:function(t){this.imageFile=t,window.URL.revokeObjectURL(this.imagePreviewUrl),this.imagePreviewUrl=t?window.URL.createObjectURL(t):""},cleanFile:function(){this.changeFile(null)},onFileSelected:function(t){var e=this;this.$refs.input.value=null,t&&(this.isWithVaildSize(t)?Object(k.a)(t,y.a).then((function(n){n?e.changeFile(t):e.$error("不支持此格式的图片")})):this.$error("文件过大"))},isWithVaildSize:function(t){return t.size<=y.c},uploadFile:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,o,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.imageFile){e.next=11;break}return e.next=3,Object(I.a)(t.me.user_id,[t.imageFile]);case 3:return n=e.sent,o=Object(r.a)(n,1),c=o[0],l=t.imageFile.type.split("/")[1],d={gif:0,png:1,jpg:2,jpeg:2},e.abrupt("return",{pic_url:c.Url,width:c.ImageHeight,height:c.ImageWidth,pic_type:d[l]||1});case 11:return e.abrupt("return",Promise.resolve());case 12:case"end":return e.stop()}}),e)})))()},submit:function(){var t=this;return this.submitting=!0,this.uploadFile().then((function(image){return t.createSubmitTask(image)})).then((function(e){var n;if(0===e.err_no?(t.$emit("syncCommentNum",{type:"add"}),t.submitting=!1,t.$alertMsg("评论成功"),t.$emit("submitted"),t.reset()):t.$error(e.err_msg||"评论失败，请稍后重试"),Object(_.a)()){var o=Object(_.b)();t.$TEA("search_detail_action",L(L({},o),{},{action_type:w.a.Comment,action_value:(null===(n=t.commentList)||void 0===n?void 0:n.length)||0}))}})).catch((function(e){t.submitting=!1,t.$error(e)}))},createSubmitTask:function(image){var t=this,e=this.subject,n=e.item_id,o=e.item_type,r=e.user_id;return this.$TEA("comment_action",{comment_type:P[o],comment_parent_id:n,author_user_id:r,comment_url:location.href,mode:this.mode}),this.comment?this.comment.reply_info?Object(d.h)({reply_to_comment_id:this.comment.reply_info.reply_comment_id,reply_to_reply_id:this.comment.reply_info.reply_id,reply_to_user_id:this.comment.reply_info.user_id,item_id:n,item_type:o,reply_content:this.content,reply_pics:void 0===image?[]:[image]}).then((function(e){return 0===e.err_no&&(t.replyList||[]).push(e.data),e})):Object(d.h)({reply_to_comment_id:this.comment.comment_info.comment_id,reply_to_reply_id:null,reply_to_user_id:null,item_id:n,item_type:o,reply_content:this.content,reply_pics:void 0===image?[]:[image]}).then((function(e){return 0===e.err_no&&(t.replyList||[]).push(e.data),e})):Object(d.g)({item_id:n,item_type:o,comment_content:this.content,comment_pics:void 0===image?[]:[image]}).then((function(e){var n;return 0===e.err_no&&(null===(n=t.commentList)||void 0===n||n.unshift(e.data)),e}))},reset:function(){this.cleanFile(),this.cleanContent()},emojiToText:function(html){return html.replace(/<img.*?alt=".*?/g,"").replace(/".?src=.*?>/g,"")}}},B=(n(878),n(30)),component=Object(B.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"outer-click",rawName:"v-outer-click",value:function(){return t.onOuterClick()},expression:"() => onOuterClick()"}],staticClass:"comment-form",class:{focused:t.focused,reply:!!t.comment,"sub-reply":!!t.parent,small:t.small}},[n("div",{staticClass:"avatar-box"},[n("avatar",{staticClass:"avatar",attrs:{user:t.me}})],1),n("div",{staticClass:"form-box",class:{disabled:t.submitting}},[n("auth-card",{attrs:{user:t.me},on:{click:t.onFormBoxClick}},[n("div",{staticClass:"input-box"},[n("div",{ref:"richInput",staticClass:"rich-input",class:{empty:t.empty},attrs:{contenteditable:"true",spellcheck:"false",placeholder:t.placeholder||"输入评论（Enter换行，"+t.sendTip+"发送）",disabled:!0},on:{focus:t.onFocus,input:t.onInput,paste:t.onPaste,keydown:t.onKeydown,keyup:function(t){t.stopPropagation()}}}),t.imagePreviewUrl?n("div",{staticClass:"image-preview-box"},[n("div",{staticClass:"image-preview",style:{backgroundImage:"url("+t.imagePreviewUrl+")"}}),n("div",{staticClass:"clean-btn",on:{click:t.cleanFile}},[n("svg",{attrs:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("rect",{attrs:{width:"12",height:"12",rx:"2",fill:"#86909C"}}),t._v(" "),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.98095 5.49307L8.22012 3.25389C8.28521 3.18881 8.39074 3.18881 8.45582 3.25389L8.69153 3.4896C8.75661 3.55468 8.75661 3.66021 8.69153 3.7253L6.45235 5.96447L8.69153 8.20364C8.75661 8.26873 8.75661 8.37426 8.69153 8.43934L8.45582 8.67505C8.39074 8.74013 8.28521 8.74013 8.22012 8.67505L5.98095 6.43587L3.74178 8.67505C3.67669 8.74013 3.57116 8.74013 3.50608 8.67505L3.27037 8.43934C3.20529 8.37426 3.20529 8.26873 3.27037 8.20364L5.50954 5.96447L3.27037 3.7253C3.20529 3.66021 3.20529 3.55468 3.27037 3.4896L3.50608 3.25389C3.57116 3.18881 3.67669 3.18881 3.74178 3.25389L5.98095 5.49307Z",fill:"white"}})])])]):t._e()])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible||!t.small,expression:"isActionBoxVisible || !small"}],staticClass:"action-box"},[n("emoji",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible,expression:"isActionBoxVisible"}],staticClass:"emoji-btn",on:{selectEmoji:t.updateEmoji}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible,expression:"isActionBoxVisible"}],staticClass:"image-btn",on:{click:t.showFileDialog}},[n("ImageIcon",{staticClass:"icon"}),n("span",[t._v("图片")])],1),n("div",{staticClass:"submit"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible,expression:"isActionBoxVisible"}]},[t._v(t._s(t.sendTip))]),n("button",{staticClass:"submit-btn",attrs:{disabled:!t.canSubmit},on:{click:t.submit}},[t._v(t._s(t.submitButtonTitle))])])],1)],1),n("input",{ref:"input",staticClass:"hidden",attrs:{type:"file"},on:{change:function(e){return t.onFileSelected(e.target.files[0])}}})])}),[],!1,null,"ad9a4596",null);e.a=component.exports},725:function(t,e,n){"use strict";n(123);var o=n(41);n(7);function r(t){return new Promise((function(e,n){var img=new window.Image;img.onload=function(){return e({width:img.naturalWidth,height:img.naturalHeight,url:t})},img.onerror=function(){return n()},img.src=t}))}var c=function(){return{loading:!1,loaded:!1,error:!1,src:null,imageStyle:{top:"",left:"",width:"",height:"",transform:""},token:Date.now()}},l={props:["backgroundColor","margin","full"],data:c,methods:{show:function(t){var e=t.thumbUrl,n=t.originalUrl,rect=t.rect;this.loadImage({originalUrl:n,rect:rect}),this.loadTumb({thumbUrl:e,rect:rect})},close:function(){Object.assign(this,c()),this.unlockScroll()},loadTumb:function(t){var e=this,n=t.thumbUrl,rect=t.rect,o=this.token;r(n).then((function(t){if(e.isInSameView(o)&&!e.loaded&&!e.error){var r=e.computeRenderedRect(t.width,t.height);e.applyRect(r),e.src=n,e.applyTransform(e.computeTransform(r,rect))}})).catch((function(t){e.isInSameView(o)&&console.error(t)}))},loadImage:function(t){var e=this,n=t.originalUrl,rect=t.rect,o=this.token;this.loading=!0,r(n).then((function(image){if(e.isInSameView(o)){var t=!!e.src,r=!e.full&&e.isLargeLongImage(image),c=e.computeRenderedRect(image.width,image.height,r);e.applyRect(c),e.src=n,e.loading=!1,e.loaded=!0,r&&e.lockScroll(),t||e.applyTransform(e.computeTransform(c,rect))}})).catch((function(t){e.isInSameView(o)&&(console.error(t),e.loading=!1,e.error=!0)}))},applyRect:function(rect){Object.assign(this.imageStyle,{top:rect.top+"px",left:rect.left+"px",width:rect.width+"px",height:rect.height+"px"})},applyTransform:function(t){var e=this;this.imageStyle.transform=t,this.$nextTick((function(){e.forceReflow(),e.imageStyle.transform=""}))},initScrollEventListener:function(){var t=this,e=this.$getBean("eventBus"),n=e.eventType.ROOT_CONTAINER_SCROLL;e.onVmLife(this,n,(function(){t.src&&t.close()}))},computeRenderedRect:function(t,e,n){var r=Object(o.h)(),c=this.getSafeAreaSize();if(n){var l=Math.min(r.width,t,960),d=l*e/t;return{top:0,left:(r.width-l)/2,width:l,height:d}}var f=t/c.width,h=e/c.height,m=Math.max(f,h,1),v=t/m,V=e/m;return{top:(r.height-V)/2,left:(r.width-v)/2,width:v,height:V}},computeTransform:function(t,rect){var e=rect.width/t.width,n=rect.height/t.height,o=rect.width-t.width,r=rect.height-t.height,c=rect.top-t.top+r/2,l=rect.left-t.left+o/2,d="translate3d(".concat(l,"px, ").concat(c,"px, 0)"),f="scale3d(".concat(e,", ").concat(n,", 1)");return"".concat(d," ").concat(f)},forceReflow:function(){document.body.clientWidth},isInSameView:function(t){return t===this.token},isLargeLongImage:function(image){var t=this.getSafeAreaSize(),e=t.width,n=t.height,o=n/e,r=image.height/image.width,c=r>1&&r>o;return(image.width>e||image.height>n)&&c},getSafeAreaSize:function(){var t=Object(o.h)(),e=t.width,n=t.height;return{width:Math.max(0,e-2*(+this.margin||0)),height:Math.max(0,n-2*(+this.margin||0))}},lockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.LOCK_ROOT_CONTAINER_SCROLL)},unlockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)}},mounted:function(){this.initScrollEventListener()}},d=(n(778),n(30)),f=Object(d.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"fade"}},[t.src?o("div",{staticClass:"image-viewer",class:{loading:t.loading},on:{click:t.close}},[o("div",{staticClass:"image-box",style:{backgroundColor:t.backgroundColor}},[t.error?o("img",{staticClass:"image error",attrs:{src:n(728)}}):o("img",{staticClass:"image",style:t.imageStyle,attrs:{src:t.src}})])]):t._e()])}),[],!1,null,"10b7b0e6",null).exports,h=n(856),m=n.n(h),v=function(){return{isLargeLongMode:!1,isZoomMode:!1,loading:!1,loaded:!1,error:!1,src:null,offsetX:0,offsetY:0,canZoom:!1,token:Date.now()}},V={props:["backgroundColor","margin","full"],data:v,methods:{show:function(t){var e=t.thumbUrl,n=t.originalUrl,rect=t.rect;this.loadImage({originalUrl:n,rect:rect}),this.loadTumb({thumbUrl:e,rect:rect})},close:function(){this.destroyGesture(),Object.assign(this,v()),this.unlockScroll()},loadTumb:function(t){var e=this,n=t.thumbUrl,o=(t.rect,this.token);r(n).then((function(t){!e.isInSameView(o)||e.loaded||e.error||(e.src=n)})).catch((function(t){e.isInSameView(o)&&console.error(t)}))},loadImage:function(t){var e=this,n=t.originalUrl,o=(t.rect,this.token);this.loading=!0,r(n).then((function(image){if(e.isInSameView(o)){var t=!e.full&&e.isLargeLongImage(image);e.src=n,e.loading=!1,e.loaded=!0,e.isLargeLongMode=t,e.canZoom=e.isLargeImage(image),e.initGesture(),e.isLargeLongMode&&e.lockScroll()}})).catch((function(t){e.isInSameView(o)&&(console.error(t),e.loading=!1,e.error=!0)}))},isInSameView:function(t){return t===this.token},isLargeLongImage:function(image){var t=Object(o.h)(),e=t.width,n=t.height,r=n/e,c=image.height/image.width,l=c>1&&c>r;return(image.width>e||image.height>n)&&l},isLargeImage:function(image){var t=Object(o.h)(),e=t.width;return t.height<image.height||e<image.width},lockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.LOCK_ROOT_CONTAINER_SCROLL)},unlockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)},initScrollEventListener:function(){var t=this,e=this.$getBean("eventBus"),n=e.eventType.ROOT_CONTAINER_SCROLL;e.onVmLife(this,n,(function(){t.src&&!t.isZoomMode&&t.close()}))},adjustOffset:function(){var t=Object(o.h)(),e=t.width,n=t.height,rect=this.$refs.image.getBoundingClientRect();rect.width<e?this.offsetX=0:rect.left>0?this.offsetX-=rect.left:rect.left+rect.width<e&&(this.offsetX+=e-rect.left-rect.width),rect.height<n?this.offsetY=0:rect.top>0?this.offsetY-=rect.top:rect.top+rect.height<n&&(this.offsetY+=n-rect.top-rect.height)},initGesture:function(){var t=this;this.$nextTick((function(){t.finger=new m.a(t.$refs.imageBox,{singleTap:function(e){t.isZoomMode?(t.isZoomMode=!1,t.offsetX=0,t.offsetY=0):t.close()},doubleTap:function(e){t.canZoom&&(t.isZoomMode=!t.isZoomMode,t.isZoomMode?t.lockScroll():(t.unlockScroll(),t.offsetX=0,t.offsetY=0))},pressMove:function(e){var n=e.deltaX,o=e.deltaY;t.isZoomMode&&(t.offsetX+=n,t.offsetY+=o)},touchEnd:function(){t.isZoomMode&&window.setTimeout((function(){t.adjustOffset()}),100)}})}))},destroyGesture:function(){this.finger&&this.finger.destroy()}},mounted:function(){this.initScrollEventListener()}},y=(n(779),Object(d.a)(V,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"fade"}},[t.src?o("div",{staticClass:"image-viewer mobile",class:{loading:t.loading}},[o("div",{ref:"imageBox",staticClass:"image-box",class:{"large-long":t.isLargeLongMode},style:{backgroundColor:t.backgroundColor}},[t.error?o("img",{staticClass:"image error",attrs:{src:n(728)}}):o("img",{ref:"image",staticClass:"image",class:{zoom:t.isZoomMode},style:{transform:"translate3d("+t.offsetX+"px, "+t.offsetY+"px, 0)"},attrs:{src:t.src}})])]):t._e()])}),[],!1,null,"93a27598",null).exports),_=n(121);var w={components:{Desktop:f,Mobile:y},props:["selector","backgroundColor","margin","full"],data:function(){return{component:null}},methods:{attachContainer:function(t){this.container!==t&&(this.removeEventListener(),this.addEventListener(t),this.container=t)},onClick:function(t){var e,n=t.target;if(this.isMatched(n)){var o=(e=n).getAttribute("data-src")||e.getAttribute("src")||function(t){var e=(t.style.backgroundImage||"").match(/url\("?'?(.+?)"?'?\)/i);return e&&e[1]}(e);if(o){var r=Object(_.f)(o),rect=n.getBoundingClientRect();this.$refs.viewer.show({thumbUrl:o,originalUrl:r,rect:rect})}}},addEventListener:function(t){var e=this;t.__removeIamgeViewListener=Object(o.k)(t,"click",(function(t){e.onClick(t)}),!0)},removeEventListener:function(){this.container&&this.container.__removeIamgeViewListener()},isMatched:function(t){return!t.classList.contains("equation")&&!this.$el.contains(t)&&Object(o.j)(t,this.selector||"img")}},mounted:function(){this.component=this.$device.isMobile?"Mobile":"Desktop"},beforeDestroy:function(){this.removeEventListener()}},O=(n(780),Object(d.a)(w,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"image-viewer-box"},[e(this.component,{ref:"viewer",tag:"component",attrs:{selector:this.selector,"background-color":this.backgroundColor,margin:this.margin,full:this.full}})],1)}),[],!1,null,"5ca9a68f",null));e.a=O.exports},728:function(t,e,n){t.exports=n.p+"img/image-error.3338abe.png"},729:function(t,e,n){},730:function(t,e,n){},731:function(t,e,n){},735:function(t,e,n){"use strict";var o,r;n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return r})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"f",(function(){return h})),function(t){t.UNPLAY="unplay",t.PLAYING="playing",t.PAUSED="paused",t.PLAYED="played"}(o||(o={})),function(t){t.detailRoute="bytetechVideoDetail",t.singleDetailRoute="bytetechVideoSingleDetail"}(r||(r={}));var c,l={routeName:"courseIndex",videoCategory:"bytetech",vipBookType:"vip"},d={title:"掘金小册是什么？",desc:"一个小篇幅、高浓度、成体系、有收益的技术学习平台",spreadQrcode:"https://z.juejin.cn/L54A"};!function(t){t.PutOnTimeSort="1",t.SaleCountDesc="7",t.PriceAsc="8",t.PriceDesc="9",t.DefaultSort="10"}(c||(c={}));var f={10:"recommend",7:"hot",1:"new",9:"price_h2l",8:"price_l2h"},h={discussTitle:"加入掘金会员，查看并参与课程讨论，字节内部课免费学",resouceTitle:"加入掘金会员，即可查看学习资料，字节内部课免费学"}},738:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(13),n(47),n(7),n(23);var o=n(5),r=n(1);function c(t,e){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(regeneratorRuntime.mark((function t(e,r){var c,l,h,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.e(15).then(n.t.bind(null,869,7));case 3:return c=t.sent,l=c.default,t.next=7,d();case 7:return h=t.sent,m=function(t){return new Promise((function(n,o){var r=new l({userId:e,appId:2608,imageConfig:{serviceId:"k3u1fbpfcp"}}),c=r.addFile({file:t,stsToken:h,type:"image"});r.start(c),r.on("complete",(function(t){n(t.uploadResult)})),r.on("error",(function(t){console.log(t.extra,"bytedUploader Error"),o(t.extra)}))}))},t.next=11,Promise.all(r.map(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:return n=t.sent,o=n.ImageHeight,r=n.ImageWidth,c=n.Uri,t.next=8,f(c);case 8:return l=t.sent,t.abrupt("return",{ImageHeight:o,ImageWidth:r,Uri:c,Url:l.data.main_url});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 11:return t.abrupt("return",t.sent);case 14:throw t.prev=14,t.t0=t.catch(0),new Error("上传图片失败");case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}function d(){return Object(r.e)({url:"/imagex/gen_token",query:{client:"web"}}).then((function(t){return t.data.token}))}function f(t){return Object(r.e)({url:"/imagex/get_img_url",query:{uri:t}})}},739:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return l})),n.d(e,"a",(function(){return d}));var o=["jpg","jpeg","png","gif","webp"],r=5242880,c=9,l=1e3,d=["jpg","png","gif"]},741:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,m=data.staticStyle,v=data.attrs,V=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,h],style:[style,m],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V)},y),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 10.5759L13.4212 5.15476C13.5513 5.02459 13.7624 5.02459 13.8926 5.15476L14.364 5.62616C14.4941 5.75634 14.4941 5.96739 14.364 6.09757L8.4714 11.9901C8.21106 12.2505 7.78894 12.2505 7.5286 11.9901L1.63604 6.09757C1.50586 5.96739 1.50586 5.75634 1.63604 5.62616L2.10744 5.15476C2.23762 5.02459 2.44867 5.02459 2.57885 5.15476L8 10.5759Z",fill:"#4E5969"}})]))}}},742:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,m=data.staticStyle,v=data.attrs,V=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,h],style:[style,m],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"#86909c",xmlns:"http://www.w3.org/2000/svg"},V)},y),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 1C14.3682 1 14.6667 1.29848 14.6667 1.66667V12.3333C14.6667 12.7015 14.3682 13 14 13H10.5924L8.44602 14.932C8.19248 15.1601 7.8076 15.1601 7.55406 14.932L5.40737 13H2.00004C1.63185 13 1.33337 12.7015 1.33337 12.3333V1.66667C1.33337 1.29848 1.63185 1 2.00004 1H14ZM13.3334 2.33333H2.6667V11.6667H5.919L8 13.5395L10.0807 11.6667H13.3334V2.33333ZM11.3334 6.66667C11.3334 6.48257 11.1841 6.33333 11 6.33333H5.00003C4.81594 6.33333 4.6667 6.48257 4.6667 6.66667V7.33333C4.6667 7.51743 4.81594 7.66667 5.00003 7.66667H11C11.1841 7.66667 11.3334 7.51743 11.3334 7.33333V6.66667Z"}})]))}}},743:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,m=data.staticStyle,v=data.attrs,V=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,h],style:[style,m],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V)},y),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.56162 2.16903C8.66569 2.09612 8.78195 2.06075 8.88247 2.09071C8.97653 2.11874 9.23851 2.25868 9.50988 2.9675C9.64419 3.31832 9.9356 4.24191 9.42155 6.05383C9.29751 6.49103 9.61394 6.95254 10.0926 6.95922L13.492 7.00667L13.492 7.00672H13.4991C13.6049 7.00672 13.7228 7.01937 13.8134 7.05849C13.8544 7.07622 13.8815 7.0959 13.8999 7.11552C13.9166 7.13326 13.9368 7.16198 13.9515 7.21587C13.9848 7.33735 14.0228 7.74663 13.9473 8.42213C13.874 9.07808 13.698 9.9443 13.341 10.9593C13.0424 11.8083 12.6601 12.5287 12.0684 13.4874C12.0558 13.5047 12.0462 13.5192 12.0418 13.526L12.0404 13.528C12.0292 13.5449 12.0242 13.5526 12.018 13.5613C12.0076 13.5759 12.0018 13.5815 11.9983 13.5845C11.996 13.5865 11.9908 13.5907 11.9777 13.5954C11.9638 13.6004 11.9311 13.6095 11.8706 13.6095H5.56278L5.56373 6.58441C5.87126 6.41852 6.19881 6.20079 6.54112 5.8401C6.93883 5.42103 7.33789 4.82891 7.76254 3.94134C7.84974 3.75908 7.91745 3.55913 7.97574 3.37714C7.99264 3.32437 8.0087 3.2733 8.02438 3.22344L8.02439 3.2234C8.066 3.09109 8.10495 2.96727 8.14985 2.84264C8.2758 2.49303 8.40247 2.28052 8.56162 2.16903ZM10.452 2.6068C10.1323 1.7716 9.70208 1.28228 9.17063 1.12389C8.64564 0.967414 8.20308 1.18842 7.98278 1.34276C7.55169 1.64476 7.33837 2.11859 7.20071 2.50071C7.14817 2.64656 7.10002 2.79968 7.05661 2.93775C7.0422 2.98357 7.02832 3.02773 7.01496 3.06941C6.95791 3.24755 6.90763 3.39066 6.85248 3.50594C6.45683 4.33291 6.1121 4.82661 5.80935 5.14563C5.51322 5.45766 5.23983 5.62142 4.9473 5.76772C4.71095 5.88592 4.55494 6.12857 4.55491 6.40111L4.55388 13.912C4.55383 14.3021 4.87002 14.6183 5.26008 14.6183H11.8706C12.2097 14.6183 12.4663 14.5109 12.6519 14.3531C12.7387 14.2792 12.7988 14.2038 12.8387 14.1479C12.8556 14.1243 12.8704 14.102 12.8786 14.0895L12.8813 14.0854L12.8826 14.0835L12.8955 14.068L12.9142 14.0377C13.5304 13.0409 13.9578 12.2465 14.2927 11.294C14.6745 10.2085 14.8679 9.26762 14.9499 8.53421C15.0297 7.82035 15.009 7.25796 14.9246 6.94965C14.805 6.51236 14.5104 6.26063 14.2134 6.13235C13.9385 6.01358 13.661 5.9981 13.5028 5.99787L10.4907 5.95583C10.9296 4.15742 10.648 3.11853 10.452 2.6068ZM1.0008 6.46734C0.981809 6.06471 1.30313 5.72787 1.70621 5.72787H2.75264C3.14266 5.72787 3.45883 6.04405 3.45883 6.43407V13.9437C3.45883 14.3337 3.14266 14.6499 2.75264 14.6499H2.06044C1.68335 14.6499 1.37279 14.3536 1.35502 13.977L1.0008 6.46734Z",fill:"#8A919F"}})]))}}},744:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,m=data.staticStyle,v=data.attrs,V=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,h],style:[style,m],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V)},y),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.452 2.6068C10.1323 1.7716 9.70208 1.28228 9.17063 1.12389C8.64564 0.967414 8.20308 1.18842 7.98278 1.34276C7.55169 1.64476 7.33837 2.11859 7.20071 2.50071C7.14817 2.64655 7.10003 2.79966 7.05661 2.93773L7.05661 2.93775C7.0422 2.98357 7.02832 3.02773 7.01496 3.06941C6.95791 3.24755 6.90763 3.39066 6.85248 3.50594C6.45683 4.33291 6.1121 4.82661 5.80935 5.14563C5.51322 5.45766 5.23983 5.62142 4.9473 5.76772C4.71095 5.88592 4.55494 6.12857 4.55491 6.40111L4.55388 13.912C4.55383 14.3021 4.87002 14.6183 5.26008 14.6183H11.8706C12.2097 14.6183 12.4663 14.5109 12.6519 14.3531C12.7388 14.2792 12.7988 14.2038 12.8387 14.1479C12.8556 14.1243 12.8704 14.102 12.8786 14.0895L12.8813 14.0854L12.8826 14.0835L12.8955 14.068L12.9142 14.0377C13.5304 13.0409 13.9578 12.2465 14.2927 11.294C14.6745 10.2085 14.8679 9.26762 14.9499 8.53421C15.0297 7.82035 15.009 7.25796 14.9246 6.94965C14.805 6.51236 14.5104 6.26063 14.2134 6.13235C13.9385 6.01358 13.661 5.9981 13.5028 5.99787L10.4907 5.95583C10.9296 4.15742 10.648 3.11853 10.452 2.6068ZM1.0008 6.46734C0.981809 6.06471 1.30313 5.72787 1.70621 5.72787H2.75264C3.14266 5.72787 3.45883 6.04405 3.45883 6.43407V13.9437C3.45883 14.3337 3.14266 14.6499 2.75264 14.6499H2.06044C1.68335 14.6499 1.37279 14.3536 1.35502 13.977L1.0008 6.46734Z",fill:"#1E80FF"}})]))}}},745:function(t,e,n){},746:function(t,e,n){},747:function(t,e,n){},748:function(t,e,n){},749:function(t,e,n){},750:function(t,e,n){},752:function(t,e,n){t.exports=n.p+"c5c64e06a56896da43c1d084d2482cf3.svg"},753:function(t,e,n){t.exports=n.p+"bd960fe696b2c2b82cea3c0e2e2f2aae.svg"},754:function(t,e,n){t.exports=n.p+"062856d97fc330530a3a64c01d915edc.svg"},755:function(t,e,n){t.exports=n.p+"img/loading.b144729.png"},756:function(t,e,n){t.exports=n.p+"img/loading-light.e96acb8.png"},757:function(t,e,n){"use strict";n(715)},759:function(t,e,n){},760:function(t,e,n){},761:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return d}));n(38),n(24),n(25),n(363),n(7);var o=[{name:"jpg",regx:/^ffd8ff/},{name:"gif",regx:/^474946/},{name:"png",regx:/89504e47/},{name:"webp",regx:/57454250/},{name:"bmp",regx:/^424d/},{name:"any",regx:/./}];function r(t,e){return function(t){return new Promise((function(e,n){var o=new FileReader;o.onload=function(t){return e(t.target.result)},o.onerror=function(t){return n(t)},o.readAsArrayBuffer(t.slice(0,64))}))}(t).then(c).then(l.bind(null,e))}function c(t){return Array.prototype.slice.call(new Uint8Array(t)).reduce((function(t,data){return t+data.toString(16)}),"")}function l(t,header){for(var i=0;i<o.length;i++)if(o[i].regx.test(header))return-1!==t.indexOf(o[i].name);return!1}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readAsText";return new Promise((function(n,o){var r=new FileReader;r.onerror=function(t){o(t)},r.onload=function(){n(r.result)},r[e](t)}))}},762:function(t,e,n){"use strict";n.d(e,"c",(function(){return y})),n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return w}));var o=n(965),r=n.n(o),c=n(966),l=n.n(c),d=n(967),f=n.n(d),h=n(968),m=n.n(h),v=n(969),V=n.n(v),y=function(s){return s.attributes["*"].push("data*"),s},_=["arduino","bash","c","cpp","csharp","css","diff","go","ini","java","javascript","json","kotlin","less","lua","makefile","markdown","objectivec","perl","php","phpTemplate","plaintext","python","pythonRepl","r","ruby","rust","scss","shell","sql","swift","typescript","vbnet","xml","yaml","html","dart","scala","vbscript","erlang","matlab"],w={vbscript:r.a,erlang:l.a,matlab:f.a,dart:m.a,scala:V.a}},768:function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return l}));n(39),n(45);var o=n(15),r={left:[{id:0,title:"综合"},{id:2,title:"文章"},{id:12,title:"课程"},{id:9,title:"标签"},{id:1,title:"用户"}],right:[{id:0,title:"时间不限"},{id:1,title:"最近一天"},{id:2,title:"最近一周"},{id:3,title:"最近三月"}]},c=function(){return document.referrer.includes("/search")},l=function(){if(!c())return{};try{var t=sessionStorage.getItem("SEARCH_PARAMS"),e=JSON.parse(t),n=e.query,r=e.search_attached_info,l=void 0===r?"":r,d=e.rank,f=e.display_search_type;return{query:n,detail_from:o.f.Search,search_attached_info:l,rank:d,display_search_type:f}}catch(t){return{}}}},770:function(t,e,n){"use strict";var o,r;n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return r})),function(t){t.header="1",t.footer="2",t.feed="3",t.collect="4",t.comment="5",t.code="6"}(o||(o={})),function(t){t.auto="1",t.hover="2"}(r||(r={}))},772:function(t,e,n){},777:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"g",(function(){return c})),n.d(e,"b",(function(){return f})),n.d(e,"f",(function(){return h})),n.d(e,"a",(function(){return m})),n.d(e,"c",(function(){return v})),n.d(e,"e",(function(){return V}));n(44);var o=n(167);function r(t){t.preventDefault(),window.getSelection().deleteFromDocument&&window.getSelection().deleteFromDocument();try{var text=window.clipboardData.getData("Text");try{window.getSelection().createRange().pasteHTML(text)}catch(t){var e=document.createTextNode(text);window.getSelection().getRangeAt(0).insertNode(e)}}catch(e){var n=(t.originalEvent||t).clipboardData.getData("text/plain");document.execCommand("insertText",!1,n)}}function c(t){if(document.createRange){var e=document.createRange();e.selectNodeContents(t),e.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(e)}else if(document.selection){var o=document.body.createTextRange();o.moveToElementText(t),o.collapse(!1),o.select()}}function l(){return"function"==typeof document.createRange||"function"==typeof window.getSelection}function d(){var t=null,e=null;return l?(e=document.getSelection()).getRangeAt&&e.rangeCount&&(t=document.getSelection().getRangeAt(0)):t=document.selection.createRange(),t}function f(html){var text=html;return text=text.replace(/<\s*script[^>]*>[\s\S]*?<\/script>/gim,"").replace(/<\s*style[^>]*>[\s\S]*?<\/style>/gim,"").replace(/<!--.*?-->/gim,"").replace(/<!DOCTYPE.*?>/gi,"").replace(/<\/div>/gi,"").replace(/(<br><div>|<div>|<br>)/gi,"\n").replace(/&nbsp;/gi,"").replace(/<.*?>/gi,"").replace(/&lt;/gi,"<").replace(/&amp;/gi,"&").replace(/&gt;/gi,">").replace(/&#39;/gi,"'").replace(/&quot;/g,'"')}function h(t,e){var n="",o=t.clipboardData.items;if(o){for(var i=0;i<o.length;i++)-1!=o[i].type.indexOf("image")&&(n=o[i].getAsFile());"function"==typeof e&&n&&e(n)}}function m(t){window.getSelection().deleteFromDocument&&window.getSelection().deleteFromDocument();try{return window.clipboardData.getData("Text")}catch(e){return(t.originalEvent||t).clipboardData.getData("text/plain")}}function v(t,html){var e,n,o=d();if(o&&function t(e,n){return!(!n||!e)&&(e===n||t(e,n.parentElement))}(t,o.startContainer)||c(t),t.focus(),window.getSelection){if((e=window.getSelection()).getRangeAt&&e.rangeCount){(n=e.getRangeAt(0)).deleteContents(),(t=document.createElement("div")).innerHTML=html;for(var r,l,f=document.createDocumentFragment();r=t.firstChild;)l=f.appendChild(r);n.insertNode(f),l&&((n=n.cloneRange()).setStartAfter(l),n.collapse(!0),e.removeAllRanges(),e.addRange(n))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(html)}function V(t){var e=d(),n=e.startContainer;if(3===n.nodeType){for(var text=n.nodeValue,r=e.startOffset-1,c=e.endOffset-1,f=[];r>=0;){if("["===text[r]){f[0]=r;break}r--}for(;c<=text.length-1;){if("]"===text[c]){f[1]=c;break}c++}if(void 0!==f[0]&&void 0!==f[1]){var h=text.slice(f[0],f[1]+1),m=Object(o.c)(h);if(m){var V=document.createRange();V.setStart(n,f[0]),V.setEnd(n,f[1]+1),function(t){if(t){var e=null,n=null;l?((n=document.getSelection()).removeAllRanges(),n.addRange(t)):((e=document.selection.createRange()).setEndPoint("EndToEnd",t),0===t.text.length?e.collapse(!1):e.setEndPoint("StartToStart",t),e.select())}}(V),v(t,m)}}}}},778:function(t,e,n){"use strict";n(729)},779:function(t,e,n){"use strict";n(730)},780:function(t,e,n){"use strict";n(731)},782:function(t,e,n){},783:function(t,e,n){},785:function(t,e,n){"use strict";function o(t,e){if((10==t.keyCode||13==t.keyCode)&&(t.ctrlKey||t.metaKey))return e()}n.d(e,"a",(function(){return o}))},786:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,m=data.staticStyle,v=data.attrs,V=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,h],style:[style,m],attrs:Object.assign({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V)},y),d.concat([n("path",{attrs:{d:"M8 6L4 9L4 3L8 6Z",fill:"#8A919F"}})]))}}},788:function(t,e,n){"use strict";n(23);var o=n(5),r=n(52),c=n(703),l=n(741),d=n.n(l),f=n(41),h=n(723),m=n(725),v=n(57),V=n(742),y=n.n(V),_=n(743),w=n.n(_),O=n(744),j=n.n(O),C=n(250),k=n(164),S=n(708),I=n(165),x=n(252),L=n(702),P=n(6),A=n(786),B=n.n(A),R=n(735),E=Object(P.b)({components:{VideoSingleIcon:B.a},props:{comment:{type:Object,default:function(){return{}}}},setup:function(t,e){var n=e.root,o=Object(P.a)((function(){return n.$userPosition(t.comment.user_info)}));return{isMobile:n.$device.isMobile,position:o,getVideoDetailRoute:function(t){return{name:R.e.singleDetailRoute,params:{id:t.parent_id,sectionId:t.item_id}}}}}}),H=(n(796),n(30)),D=Object(H.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-more-info"},[!t.isMobile&&t.position?n("span",{staticClass:"divide"}):t._e(),t._v(" "),t.position?n("span",{staticClass:"position"},[t._v("\n    "+t._s(t.position)+"\n  ")]):t._e(),t._v(" "),!t.isMobile||t.isMobile&&t.position?n("span",{class:{divide:!t.isMobile,dot:t.isMobile}}):t._e(),t._v(" "),n("time",{staticClass:"time",attrs:{datetime:t._f("iso")(1e3*t.comment.comment_info.ctime),title:new Date(1e3*t.comment.comment_info.ctime)}},[t._v("\n    "+t._s(t._f("relative")(1e3*t.comment.comment_info.ctime))+"\n  ")]),t._v(" "),t.comment.root_item&&t.comment.root_item.item_id?n("span",{staticClass:"dot"}):t._e(),t._v(" "),t.comment.root_item&&t.comment.root_item.item_id?n("router-link",{staticClass:"extra-info",attrs:{to:t.getVideoDetailRoute(t.comment.root_item)}},[n("div",{staticClass:"video-title"},[t._v("来自分辑-"+t._s(t.comment.root_item.title))]),t._v(" "),n("VideoSingleIcon",{staticClass:"single-video-icon"})],1):t._e()],1)}),[],!1,null,"29d7f98b",null).exports,T=n(167),$=n(169),M={components:{CommentForm:h.a,UserPopover:S.default,Avatar:C.a,Thumb:k.a,LikeIcon:w.a,LikeActiveIcon:j.a,CommentIcon:y.a},props:["replyList","subject","parent","reply","removable","user","mode","isHiddenReply","jjHelperItemId","jjHelperItemType"],data:function(){return{likeLock:Object(L.a)(),isReplyFormVisible:!1,isShowAll:!1,isLikeLoading:!1,replyCount:this.reply.reply_info.reply_count,extend:!1}},computed:{isMobile:function(){return this.$device.isMobile},parentReply:function(){var t,content=null===(t=this.reply.parent_reply)||void 0===t?void 0:t.reply_content;return this.hasParentRemove&&content?"该评论已被删除":content?Object(x.b)(content):""},hasParentRemove:function(){var t;return 0===(null===(t=this.reply.parent_reply)||void 0===t?void 0:t.reply_status)},currentUser:function(){var t=this.$store.getters;return"USER"in t?t.USER:null},removableReply:function(){return this.removable||this.isCurrentUsersReply()},hasAuthorBadge:function(){return this.subject.user_id===this.reply.user_info.user_id},imageUrl:function(){return this.reply.reply_info.reply_pics[0]&&this.reply.reply_info.reply_pics[0].pic_url},limitedContent:function(){return Object($.d)(this.reply.reply_info.reply_content,{maxLineCount:this.maxLineCount,perLineLength:this.perLineLength,escapeReg:T.a})},collapsed:function(){return this.limitedContent.length<this.reply.reply_info.reply_content.length&&!this.isShowAll&&this.reply.reply_info.reply_content.length-this.limitedContent.length>this.perLineLength},replyPlaceholder:function(){return"回复".concat(this.reply.user_info.user_name,"...")},perLineLength:function(){return this.$device.isMobile?30:40},maxLineCount:function(){return this.$device.isMobile?4:6},isAutoFocus:function(){return!this.user||this.user.isBindedPhone}},mounted:function(){var t=this.$refs.content;if(t){var e=t.clientHeight;t.scrollHeight>e&&(this.extend=!0)}},methods:{parseUrlEmoji:x.b,onSyncCommentNum:function(t){"add"===t.type&&(this.replyCount=this.replyCount+(t.count||1)),"sub"===t.type&&(this.replyCount=this.replyCount-(t.count||1)),this.$emit("syncCommentNum",t)},isCurrentUsersReply:function(){return this.currentUser&&this.currentUser.user_id===this.reply.user_info.user_id},toggleLike:function(){var t=this;return this.currentUser?this.currentUser.isBindedPhone?void(this.isLikeLoading||this.$ensureAuthorized().then((function(){t.isLikeLoading=!0,t.reply.user_interact.is_digg?Object(v.c)({itemId:t.reply.reply_info.reply_id,type:6}).then((function(e){t.isLikeLoading=!1,0!==e.err_no?t.$error(e.err_msg):(t.reply.reply_info.digg_count--,t.reply.user_interact.is_digg=!t.reply.user_interact.is_digg)})):(Object(v.b)({itemId:t.reply.reply_info.reply_id,type:6}).then((function(e){t.isLikeLoading=!1,0!==e.err_no?t.$error(e.err_msg):(t.reply.reply_info.digg_count++,t.reply.user_interact.is_digg=!t.reply.user_interact.is_digg)})),t.$TEA("like_action",{like_comment_mode:t.mode}))}))):this.$requestBindPhoneNumber(I.b.interact):this.$requestLogin()},onReplyFormEmptyBlur:function(){var t=this;window.setTimeout((function(){t.isReplyFormVisible=!1}))},onSubmitted:function(){this.isReplyFormVisible=!1,this.$emit("submitted")},deleteComment:function(t){var e=this;this.$ensureAuthorized("login").then((function(){window.confirm("确定删除这条评论吗？")&&Object(c.b)({comment_id:t.reply_info.reply_comment_id,reply_id:t.reply_info.reply_id}).then((function(){e.replyList.some((function(n,o){n.reply_info.reply_id===t.reply_info.reply_id&&e.replyList.splice(o,1)})),e.$alertMsg("删除成功"),e.$emit("syncCommentNum",{type:"sub"})})).catch((function(){e.$alertMsg("删除失败，刷新后重试")}))}))}}},F=(n(797),{components:{SubComment:Object(H.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"subcomment"},[n("UserPopover",{attrs:{"user-id":t.reply.user_info.user_id,"show-jscore-level":!0}},[n("app-link",{staticClass:"user-link",attrs:{to:t.$userRoute(t.reply.user_info.user_id),blank:!0}},[n("Avatar",{staticClass:"avatar",attrs:{user:t.reply.user_info,size:48}})],1)],1),t._v(" "),n("div",{staticClass:"content-box"},[n("div",{staticClass:"content-wrapper"},[n("span",{staticClass:"delete",class:{removable:t.removableReply},on:{click:function(e){return t.deleteComment(t.reply)}}},[t._v("\n        删除\n      ")]),t._v(" "),n("div",{staticClass:"user-box"},[n("UserPopover",{attrs:{"user-id":t.reply.user_info.user_id,"show-jscore-level":!0}},[n("username",{staticClass:"username",attrs:{user:t.reply.user_info,universal:!0,"show-jpower-level":!1}})],1),t._v(" "),t.hasAuthorBadge&&!t.isMobile?n("span",{staticClass:"author-badge-text"},[t._v("\n          （作者）\n        ")]):t._e(),t._v(" "),t.reply.reply_user&&t.reply.reply_user.user_name&&!t.isMobile?n("div",{staticClass:"rely-box"},[n("span",[t._v("回复")]),t._v(" "),n("UserPopover",{attrs:{"user-id":t.reply.reply_user.user_id,"show-jscore-level":!0}},[n("app-link",{staticClass:"repliedname",attrs:{to:t.$userRoute(t.reply.reply_user)}},[t._v("\n              "+t._s(t.reply.reply_user.user_name)+"\n            ")])],1)],1):t._e(),t._v(" "),n("span",{staticClass:"divide"}),t._v(" "),n("time",{staticClass:"time",attrs:{datetime:t._f("iso")(1e3*t.reply.reply_info.ctime),title:new Date(1e3*t.reply.reply_info.ctime)}},[t._v("\n          "+t._s(t._f("relative")(1e3*t.reply.reply_info.ctime))+"\n        ")])],1),t._v(" "),n("div",{ref:"content",staticClass:"content",class:{extend:t.isShowAll,hasimage:!!t.imageUrl},domProps:{innerHTML:t._s(t.parseUrlEmoji(t.reply.reply_info.reply_content))}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.extend&&!t.isShowAll,expression:"extend && !isShowAll"}],staticClass:"limit-btn",on:{click:function(e){t.isShowAll=!0}}},[t._v("\n        展开\n      ")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.extend&&t.isShowAll,expression:"extend && isShowAll"}],staticClass:"limit-btn",on:{click:function(e){t.isShowAll=!1}}},[t._v("\n        收起\n      ")]),t._v(" "),t.imageUrl?n("Thumb",{staticClass:"viewable",attrs:{"data-src":t.imageUrl,url:t.imageUrl,width:160,height:160,format:"jpg"}}):t._e(),t._v(" "),t.parentReply?n("div",{staticClass:"parent-wrapper"},[t.hasParentRemove?t._e():n("div",[t._v("“")]),t._v(" "),n("div",{staticClass:"parent-content",domProps:{innerHTML:t._s(t.parentReply)}}),t._v(" "),t.hasParentRemove?t._e():n("div",[t._v("”")])]):t._e(),t._v(" "),n("div",{staticClass:"action-box"},[n("div",{staticClass:"item dig-item",class:t.reply.user_interact.is_digg&&"active",on:{click:t.toggleLike}},[t.reply.user_interact.is_digg?n("LikeActiveIcon"):n("LikeIcon"),t._v("\n          "+t._s(t.reply.reply_info.digg_count||"点赞")+"\n        ")],1),t._v(" "),t.isHiddenReply?t._e():n("div",{staticClass:"item",class:t.isReplyFormVisible&&"active",on:{click:function(e){t.isReplyFormVisible=!t.isReplyFormVisible}}},[n("CommentIcon"),t._v("\n          "+t._s(t.isReplyFormVisible?"取消回复":t.replyCount||"回复")+"\n        ")],1)])],1),t._v(" "),t.isReplyFormVisible?n("CommentForm",{staticClass:"replyform",attrs:{subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,parent:t.parent,comment:t.reply,"reply-list":t.replyList,"auto-focus":t.isAutoFocus,placeholder:t.replyPlaceholder,mode:t.mode},on:{emptyBlur:t.onReplyFormEmptyBlur,submitted:t.onSubmitted,syncCommentNum:t.onSyncCommentNum}}):t._e()],1)],1)}),[],!1,null,"e65add6e",null).exports,MoreIcon:d.a},props:["subject","parent","expanded","removable","user","mode","isHiddenReply","hiddenSubComment","jjHelperItemId","jjHelperItemType"],data:function(){return{list:[],cursor:"0",limit:20,count:0,has_more:!0,loading:!1,showAll:!1}},computed:{canFetchMore:function(){var t=this.parent.comment_info.reply_count;return!!this.list.length&&(t>2&&t<=10&&(this.showAll=!0),this.expanded?"0"===this.cursor?this.parent.comment_info.reply_count>this.list.length:this.has_more:this.list.length&&this.parent.comment_info.reply_count>this.list.length)}},watch:{parent:function(t){this.list=t.reply_infos}},created:function(){this.list=this.hiddenSubComment?[]:this.parent.reply_infos},methods:{getRouterParams:function(){return{name:{2:"column",4:"pin",12:"book"}[this.subject.item_type],params:{id:this.subject.item_id}}},refetch:function(){this.$emit("refetch")},fetchMore:function(){var t=this;!this.loading&&this.has_more&&(this.loading=!0,Object(c.f)({comment_id:this.parent.comment_info.comment_id,item_id:this.subject.item_id,item_type:this.subject.item_type,cursor:this.cursor,limit:this.limit}).then((function(e){var data=e.data,n=e.count,o=e.has_more,cursor=e.cursor;t.loading=!1,t.mergeList(data),t.count=n,t.has_more=o,t.cursor=cursor})).catch((function(e){t.loading=!1,console.error(e)})))},mergeList:function(t){var e,n=this.list.reduce((function(t,e){return t[e.reply_info.reply_id]=!0,t}),{}),o=t.filter((function(t){return!n[t.reply_info.reply_id]}));(e=this.list).push.apply(e,Object(r.a)(o))},onSyncCommentNum:function(t){this.$emit("syncCommentNum",t)}}}),U=(n(798),Object(H.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.list.length?n("div",{staticClass:"sub-comment-list"},[n("div",t._l(t.list,(function(e){return n("sub-comment",{key:e.reply_info.reply_id,staticClass:"sub-comment",attrs:{"data-jj-helper-comment-id":e.reply_info&&e.reply_info.reply_id,"data-jj-helper-item-id":t.jjHelperItemId,"data-jj-helper-item-type":t.jjHelperItemType,subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,parent:t.parent,reply:e,"reply-list":t.list,removable:t.removable,user:t.user,mode:t.mode,"is-hidden-reply":t.isHiddenReply},on:{refetch:t.refetch,syncCommentNum:t.onSyncCommentNum}})})),1),t._v(" "),t.canFetchMore&&t.has_more?n("div",{staticClass:"fetch-more"},[t.expanded||t.showAll?t.loading?n("span",{staticClass:"fetch-more-comment"},[t._v("加载中...")]):n("span",{staticClass:"fetch-more-comment",on:{click:t.fetchMore}},[t._v("\n      查看更多回复\n      "),n("MoreIcon")],1):n("app-link",{staticClass:"fetch-more-comment",attrs:{to:t.getRouterParams(),blank:!0}},[t._v("\n      查看更多回复\n    ")])],1):t._e()]):t._e()}),[],!1,null,"73d1824e",null).exports),N={components:{Avatar:C.a,Thumb:k.a,CommentForm:h.a,SubCommentList:U,UserPopover:S.default,LikeIcon:w.a,CommentIcon:y.a,LikeActiveIcon:j.a,CommentExtraInfo:D},props:["list","subject","comment","expanded","mode","isHiddenReply","hiddenSubComment","jjHelperItemId","jjHelperItemType","enterMethod"],data:function(){return{likeLock:Object(L.a)(),isReplyFormVisible:!1,isShowAll:!1,isLikeLoading:!1,parseUrlEmoji:x.b,extend:!1,replyCount:this.comment.comment_info.reply_count}},computed:{isMobile:function(){return this.$device.isMobile},isDelete:function(){var t;return null===(t=this.comment.user_info)||void 0===t?void 0:t.is_logout},currentUser:function(){var t=this.$store.getters;return"USER"in t?t.USER:null},isCurrentUsersSubject:function(){return this.currentUser&&this.currentUser.user_id===this.subject.user_id},isCurrentUsersComment:function(){return this.currentUser&&this.currentUser.user_id===this.comment.user_info.user_id},isAdmin:function(){return this.currentUser&&"admin"===this.currentUser.role},hasAuthorBadge:function(){return this.subject.user_id===this.comment.user_info.user_id},removable:function(){return this.isAdmin||this.isCurrentUsersSubject||this.isCurrentUsersComment},mobile:function(){return this.$device.isMobile},imageUrl:function(){return this.comment.comment_info.comment_pics[0]&&this.comment.comment_info.comment_pics[0].pic_url},replyPlaceholder:function(){return"回复".concat(this.comment.user_info.user_name,"...")},isAutoFocus:function(){return!this.currentUser||this.currentUser.isBindedPhone}},mounted:function(){var t=this.$refs.content;if(t){var e=t.clientHeight;t.scrollHeight>e&&(this.extend=!0)}},methods:{toggleLike:function(){var t=this;return this.currentUser?this.currentUser.isBindedPhone?void(this.isLikeLoading||this.$ensureAuthorized().then((function(){t.isLikeLoading=!0,t.comment.user_interact.is_digg?Object(v.c)({itemId:t.comment.comment_info.comment_id,type:5}).then((function(e){t.isLikeLoading=!1,0!==e.err_no?t.$error(e.err_msg):(t.comment.comment_info.digg_count--,t.comment.user_interact.is_digg=!t.comment.user_interact.is_digg)})):(Object(v.b)({itemId:t.comment.comment_info.comment_id,type:5}).then((function(e){t.isLikeLoading=!1,0!==e.err_no?t.$error(e.err_msg):(t.comment.comment_info.digg_count++,t.comment.user_interact.is_digg=!t.comment.user_interact.is_digg)})),t.$TEA("like_action",{like_comment_mode:t.mode}))}))):this.$requestBindPhoneNumber(I.b.interact):this.$requestLogin()},onReplyFormEmptyBlur:function(){var t=this;window.setTimeout((function(){t.isReplyFormVisible=!1}))},onSubmitted:function(){this.isReplyFormVisible=!1},refetch:function(){this.$emit("refetch")},deleteComment:function(t){var e=this;this.$ensureAuthorized("login").then((function(){window.confirm("确定删除这条评论吗？")&&Object(c.a)({comment_id:t.comment_info.comment_id}).then((function(){e.list.some((function(n,o){n.comment_info.comment_id===t.comment_info.comment_id&&e.list.splice(o,1)})),e.$alertMsg("删除成功"),e.$emit("syncCommentNum",{type:"sub",count:t.reply_infos.length})})).catch((function(){e.$alertMsg("删除失败，刷新后重试")}))}))},onSyncCommentNum:function(t){"add"===t.type&&(this.replyCount=this.replyCount+(t.count||1)),"sub"===t.type&&(this.replyCount=this.replyCount-(t.count||1)),this.$emit("syncCommentNum",t)}}},Z=(n(799),Object(H.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment"},[n("UserPopover",{staticClass:"popover",attrs:{"enter-method":t.enterMethod,"user-id":t.comment.user_info.user_id,"enable-popover":Boolean(!t.isDelete),"show-jscore-level":!0}},[n("app-link",{staticClass:"user-link",attrs:{to:t.$userRoute(t.comment.user_info.user_id),blank:!0}},[n("Avatar",{staticClass:"avatar",attrs:{user:t.comment.user_info,alt:t.comment.user_info.user_name+"的头像"}})],1)],1),t._v(" "),n("div",{staticClass:"content-box"},[n("div",{staticClass:"comment-main"},[n("span",{staticClass:"delete",class:{removable:t.removable},on:{click:function(e){return t.deleteComment(t.comment)}}},[t._v("\n        删除\n      ")]),t._v(" "),n("div",{staticClass:"user-box"},[n("UserPopover",{attrs:{"enter-method":t.enterMethod,"user-id":t.comment.user_info.user_id,"enable-popover":Boolean(!t.isDelete),"show-jscore-level":!0}},[n("username",{staticClass:"username",attrs:{user:t.comment.user_info,universal:!0,"show-jscore-level":!0}})],1),t._v(" "),t.hasAuthorBadge&&!t.isMobile?n("span",{staticClass:"author-badge-text"},[t._v("\n          （作者）\n        ")]):t._e(),t._v(" "),t.isMobile?t._e():n("CommentExtraInfo",{attrs:{comment:t.comment}})],1),t._v(" "),t.isMobile?n("CommentExtraInfo",{attrs:{comment:t.comment}}):t._e(),t._v(" "),n("div",{ref:"content",staticClass:"content",class:{extend:t.extend&&t.isShowAll,hasimage:!!t.imageUrl},domProps:{innerHTML:t._s(t.parseUrlEmoji(t.comment.comment_info.comment_content))}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.extend&&!t.isShowAll,expression:"extend && !isShowAll"}],staticClass:"limit-btn",on:{click:function(e){t.isShowAll=!0}}},[t._v("\n        展开\n      ")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.extend&&t.isShowAll,expression:"extend && isShowAll"}],staticClass:"limit-btn",on:{click:function(e){t.isShowAll=!1}}},[t._v("\n        收起\n      ")]),t._v(" "),t.imageUrl?n("Thumb",{staticClass:"viewable",attrs:{"data-src":t.imageUrl,url:t.imageUrl,width:160,height:160,format:"jpg"}}):t._e(),t._v(" "),n("div",{staticClass:"action-box"},[n("div",{staticClass:"action-left"},[n("div",{staticClass:"item dig-item",class:t.comment.user_interact.is_digg&&"active",on:{click:t.toggleLike}},[t.comment.user_interact.is_digg?n("LikeActiveIcon"):n("LikeIcon"),t._v("\n            "+t._s(t.comment.comment_info.digg_count||"点赞")+"\n          ")],1),t._v(" "),t.isHiddenReply?t._e():n("div",{staticClass:"item",class:t.isReplyFormVisible&&"active",on:{click:function(e){t.isReplyFormVisible=!t.isReplyFormVisible}}},[n("CommentIcon"),t._v("\n            "+t._s(t.isReplyFormVisible?"取消回复":t.replyCount||"回复")+"\n          ")],1)])])],1),t._v(" "),n("div",{staticClass:"subcomment-wrapper"},[t.isReplyFormVisible?n("CommentForm",{staticClass:"comment-form",attrs:{subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,comment:t.comment,"reply-list":t.comment.reply_infos,"auto-focus":t.isAutoFocus,placeholder:t.replyPlaceholder,mode:t.mode},on:{emptyBlur:t.onReplyFormEmptyBlur,submitted:t.onSubmitted,syncCommentNum:t.onSyncCommentNum}}):t._e(),t._v(" "),n("SubCommentList",{ref:"subCommentList",attrs:{"hidden-sub-comment":t.hiddenSubComment,subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,parent:t.comment,expanded:t.expanded,removable:t.isAdmin||t.isCurrentUsersSubject,user:t.currentUser,mode:t.mode,"is-hidden-reply":t.isHiddenReply},on:{refetch:t.refetch,syncCommentNum:t.onSyncCommentNum}})],1)])],1)}),[],!1,null,"3cba2486",null).exports),W={components:{ImageViewer:m.a,Comment:Z},props:["subject","list","expanded","mode","isHiddenReply","hiddenSubComment","jjHelperItemId","jjHelperItemType","enterMethod"],methods:{initImageViewer:function(){this.$refs.imageViewer.attachContainer(this.$el)},refetch:function(){this.$emit("refetch")},onSyncCommentNum:function(t){this.$emit("syncCommentNum",t)}},mounted:function(){this.initImageViewer()}},z=Object(H.a)(W,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-list"},[n("ImageViewer",{ref:"imageViewer",attrs:{selector:".viewable"}}),t._v(" "),t._l(t.list,(function(e){return n("comment",{key:e.comment_id,staticClass:"comment",attrs:{"data-jj-helper-comment-id":e.comment_id,"data-jj-helper-item-id":t.jjHelperItemId,"data-jj-helper-item-type":t.jjHelperItemType,"data-jj-helper-comment-status":e.comment_info.comment_status,list:t.list,comment:e,subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,expanded:t.expanded,"hidden-sub-comment":t.hiddenSubComment,isHiddenReply:t.isHiddenReply,mode:t.mode,"enter-method":t.enterMethod},on:{refetch:t.refetch,syncCommentNum:t.onSyncCommentNum}})}))],2)}),[],!1,null,null,null).exports,G=n(9),J=n(800),K=n.n(J),Q=Object(G.d)({props:{subject:{type:Object,required:!0},jjHelperItemId:{type:String,default:""},jjHelperItemType:{type:String,default:""}},components:{HotIcon:K.a,CommentComp:Z,ImageViewer:m.a},setup:function(t){var e=Object(G.r)([]);Object(G.y)((function(){var n=t.subject,o=n.item_id,r=n.item_type;o&&r&&Object(c.e)({item_id:o,item_type:r}).then((function(t){return e.value=t}))}));var n=Object(G.a)((function(){return e.value.slice(0,5)})),o=Object(G.r)(),r=Object(G.r)();return Object(G.x)([o,r],(function(){o.value&&r.value&&o.value.attachContainer(r.value)})),{list:n,imageViewer:o,commentContainer:r}}}),Y=(n(801),Object(H.a)(Q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.list.length>0?n("div",{staticClass:"container"},[n("ImageViewer",{ref:"imageViewer",attrs:{selector:".viewable"}}),t._v(" "),n("div",{staticClass:"title"},[t._v("\n    热门评论\n    "),n("HotIcon")],1),t._v(" "),n("div",{ref:"commentContainer",staticClass:"list"},t._l(t.list,(function(e){return n("CommentComp",{key:e.comment_id,attrs:{"data-jj-helper-comment-id":e.comment_id,"data-jj-helper-item-id":t.jjHelperItemId,"data-jj-helper-item-type":t.jjHelperItemType,list:t.list,comment:e,subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,expanded:!0,mode:"top"}})})),1)],1):t._e()}),[],!1,null,"00f8bb4c",null).exports),X={components:{CommentForm:h.a,CommentList:z,HotCommentList:Y,MoreIcon:d.a},props:["subject","expanded","sticky","forbidInput","small","hasSort","hasHot","threeSiftComment","isHiddenReply","isBestComment","hiddenSubComment","jjHelperItemId","jjHelperItemType","enterMethod"],data:function(){return{list:[],cursor:"0",limit:20,count:0,has_more:!0,loading:!1,listSize:0,sort:"new",hasLoadMore:!1}},computed:{sortData:function(){return{new:0,hot:1}[this.sort]||0}},watch:{"subject.item_id":{handler:function(t){t&&!this.$isServer&&this.fetchData()}},sortData:{handler:function(){this.$isServer||this.fetchData()}}},mounted:function(){this.fetchData()},beforeDestroy:function(){removeEventListener("scroll",this.handleBookCommentScroll)},methods:{setSort:function(t){this.$TEA("comment_switch",{switch:t}),this.sort=t},getMore:function(){var t=this;if(!this.expanded){var e=this.$router.resolve({name:{2:"column",4:"pin",12:"book"}[this.subject.item_type],params:{id:this.subject.item_id},hash:"#comment"}).href;window.open(e,"_blank")}if(this.expanded&&!this.hasLoadMore){this.hasLoadMore=!0,this.fetchMoreIfConditionIsSatisfied();var n=this.$getBean("eventBus");n.onVmLife(this,n.eventType.ROOT_CONTAINER_SCROLL,(function(){t.fetchMoreIfConditionIsSatisfied()})),Object(f.l)(this.$el,(function(){t.fetchMoreIfConditionIsSatisfied()}))}},fetchMore:function(){var t=this;if(!this.loading&&this.has_more){this.loading=!0;var e=this.subject,n=e.item_id,o=e.item_type;Object(c.d)({item_id:n,item_type:o,cursor:this.cursor,limit:this.limit,sort:this.sortData}).then((function(e){var data=e.data,cursor=e.cursor,n=e.count,o=e.has_more;t.listSize=data.length,t.loading=!1,t.mergeList(data),t.count=n,t.cursor=cursor,t.has_more=o})).catch((function(e){t.loading=!1,console.error(e)}))}},mergeList:function(t){var e,n=this.list.reduce((function(t,e){return t[e.comment_id]=!0,t}),{}),o=t.filter((function(t){return!n[t.comment_id]}));(e=this.list).push.apply(e,Object(r.a)(o))},fetchMoreIfConditionIsSatisfied:function(){Object(f.b)(this.$el)>-200&&this.fetchMore()},onRefetch:function(){this.fetchData()},onSyncCommentNum:function(t){this.$emit("syncCommentNum",t)},handleBookCommentScroll:function(){var t=this,e=document.documentElement.clientHeight,n=document.body.scrollHeight;if(document.documentElement.scrollTop+e>=n&&this.has_more&&!this.threeSiftComment){var o=this.subject,l=o.item_id,d=o.item_type;this.limit=this.expanded?20:5,Object(c.d)({item_id:l,item_type:d,cursor:this.cursor,limit:this.limit,sort:this.sortData}).then((function(e){var data=e.data,cursor=e.cursor,n=e.count,o=e.has_more,c=data.filter((function(t){return 5===t.comment_info.comment_status}));t.list=[].concat(Object(r.a)(t.list),Object(r.a)(c)),t.cursor=cursor,t.count=n,t.has_more=o}))}},fetchData:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,data,cursor,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.subject,o=n.item_id,r=n.item_type,!t.loading&&o){e.next=3;break}return e.abrupt("return");case 3:return t.loading=!0,t.limit=t.expanded?20:5,t.cursor="0",t.count=0,t.has_more=!0,e.prev=8,e.next=11,Object(c.d)({item_id:o,item_type:r,cursor:t.cursor,limit:t.limit,sort:t.sortData});case 11:l=e.sent,data=l.data,cursor=l.cursor,d=l.count,f=l.has_more,t.listSize=data.length,t.loading=!1,t.list=data,t.threeSiftComment&&data.length>3&&(t.list=t.list.filter((function(t){return 5===t.comment_info.comment_status})),t.list.length>3&&t.$emit("isListLenMore3"),t.list&&0!==t.list.length&&t.$emit("isShowCommentMode"),t.list=t.list.slice(0,3)),t.count=d,t.cursor=cursor,t.has_more=f,t.isBestComment&&(t.list=t.list.filter((function(t){return 5===t.comment_info.comment_status})),addEventListener("scroll",t.handleBookCommentScroll)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(8),t.loading=!1,console.error(e.t0);case 30:case"end":return e.stop()}}),e,null,[[8,26]])})))()}}},tt=(n(802),Object(H.a)(X,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",class:t.small&&"small",attrs:{"data-jj-helper":"comment-container"}},[t.forbidInput?t._e():n("CommentForm",{staticClass:"comment-form",class:{hasborder:t.list&&t.list.length},attrs:{"comment-list":t.list,subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,small:t.small},on:{syncCommentNum:t.onSyncCommentNum}}),t._v(" "),t.hasHot?n("HotCommentList",{staticClass:"hot-list hasborder",attrs:{subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType}}):t._e(),t._v(" "),t.list.length?n("div",{staticClass:"comment-list-wrapper"},[n("div",{staticClass:"title"},[t._v("\n      全部评论（"+t._s(t.subject.comment_count)+"）\n      "),t.hasSort?n("div",{staticClass:"sort"},[n("div",{staticClass:"item",class:"new"===t.sort&&"active",on:{click:function(e){return t.setSort("new")}}},[t._v("\n          最新\n        ")]),t._v(" "),n("div",{staticClass:"divide"}),t._v(" "),n("div",{staticClass:"item",class:"hot"===t.sort&&"active",on:{click:function(e){return t.setSort("hot")}}},[t._v("\n          最热\n        ")])]):t._e()]),t._v(" "),n("comment-list",{staticClass:"comment-list",attrs:{list:t.list,"enter-method":t.enterMethod,subject:t.subject,"jj-helper-item-id":t.jjHelperItemId,"jj-helper-item-type":t.jjHelperItemType,expanded:t.expanded,"is-hidden-reply":t.isHiddenReply,"hidden-sub-comment":t.hiddenSubComment,mode:t.sort},on:{refetch:t.onRefetch,syncCommentNum:t.onSyncCommentNum}}),t._v(" "),t.list.length<t.subject.comment_count&&t.has_more?n("p",{staticClass:"fetch-more-comment",on:{click:t.getMore}},[t._v("\n      "+t._s(t.hasLoadMore?"加载中...":"查看全部 "+t.subject.comment_count+" 条回复")+"\n      "),t.expanded&&!t.hasLoadMore?n("MoreIcon"):t._e()],1):t._e()],1):t._e()],1)}),[],!1,null,"44605f84",null));e.a=tt.exports},789:function(t,e,n){"use strict";n(879);var o=n(30),component=Object(o.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"container"},[e("em",{staticClass:"triangle"})])}],!1,null,"68da8972",null);e.a=component.exports},796:function(t,e,n){"use strict";n(745)},797:function(t,e,n){"use strict";n(746)},798:function(t,e,n){"use strict";n(747)},799:function(t,e,n){"use strict";n(748)},800:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,m=data.staticStyle,v=data.attrs,V=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,h],style:[style,m],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V)},y),d.concat([n("path",{attrs:{d:"M12.8 5.2C13.9532 6.46 14.8 8.2 14.8 10C14.7039 12.8937 12.6843 15.1706 9.97973 15.8159C10.359 12.3442 7.77588 9.35406 7.77588 9.35406C7.77588 9.35406 7.99512 13.7064 6.79514 15.8104C4.03715 15.1428 2 12.7806 2 9.8C2 7.776 2.9336 5.9728 4.4 4.8C5.8608 3.7056 6.8 1.9656 6.8 0C9.684 0.4368 11.894 2.9264 11.894 5.932C11.894 6.5012 11.746 7.0652 11.6 7.6C12.1264 6.9024 12.6184 6.0876 12.8 5.2Z",fill:"#F53F3F"}})]))}}},801:function(t,e,n){"use strict";n(749)},802:function(t,e,n){"use strict";n(750)},813:function(t,e,n){"use strict";var o={props:["user"],computed:{isVisible:function(){if(this.user){var t=this.user.isBindedPhone;return this.user&&!t}return!1}},methods:{bindPhone:function(){this.$requestBindPhoneNumber()}}},r=(n(818),n(30)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"auth-card"},[n("transition",{attrs:{name:"fade"}},[t.isVisible?n("div",{staticClass:"auth-cover"},[n("span",{staticClass:"hint"}),t._v("\n      您需要\n      "),n("a",{on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.bindPhone(e)}}},[t._v("绑定手机号")]),t._v("\n      后才可在社区内发布内容。\n    ")]):t._e()]),t._v(" "),t._t("default")],2)}),[],!1,null,"7c7c7498",null);e.a=component.exports},814:function(t,e,n){"use strict";var o=n(9),r=n(819),c=n.n(r),l=Object(o.d)({components:{EmotionIcon:c.a,Picker:function(){return n.e(49).then(n.bind(null,4966))}},emits:["selectEmoji"],setup:function(t,e){var n=e.root,r=e.emit,c=Object(o.r)(!1);var l=Object(o.r)(!1),d=Object(o.x)(c,(function(){l.value=!0,d()}));return{once:l,visible:c,toggleShow:function(){var t=n.$store.getters.USER;return t?t.isBindedPhone?void(c.value=!c.value):n.$requestBindPhoneNumber():n.$requestLogin()},hide:function(){c.value=!1},handleChange:function(t){r("selectEmoji",t.source)}}}}),d=(n(820),n(30)),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"outer-click",rawName:"v-outer-click",value:t.hide,expression:"hide"}],staticClass:"emoji-container"},[n("div",{staticClass:"emoji-box",class:t.visible&&"active",on:{click:t.toggleShow}},[n("EmotionIcon",{staticClass:"icon"}),t._v(" "),n("span",[t._v("表情")])],1),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.once?n("Picker",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],on:{change:t.handleChange}}):t._e()],1)],1)}),[],!1,null,"33ab0a29",null);e.a=component.exports},818:function(t,e,n){"use strict";n(759)},819:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,m=data.staticStyle,v=data.attrs,V=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,h],style:[style,m],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V)},y),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.00002 0.666504C12.0501 0.666504 15.3334 3.94975 15.3334 7.99984C15.3334 12.0499 12.0501 15.3332 8.00002 15.3332C3.94993 15.3332 0.666687 12.0499 0.666687 7.99984C0.666687 3.94975 3.94993 0.666504 8.00002 0.666504ZM8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM10.6667 5.66667V7.66667H9.33333V5.66667H10.6667ZM6.66667 5.66667V7.66667H5.33333V5.66667H6.66667ZM10.0767 9.33333H11.0495C11.1804 9.33333 11.2866 9.43951 11.2866 9.57048C11.2866 9.60754 11.2779 9.64409 11.2612 9.67718L11.244 9.71053C10.6294 10.8739 9.40726 11.6667 7.99998 11.6667C6.61523 11.6667 5.40977 10.8991 4.7859 9.76612L4.73786 9.67593C4.67845 9.56052 4.72385 9.4188 4.83926 9.35939C4.87253 9.34226 4.90941 9.33333 4.94683 9.33333H5.92347C6.02396 9.33332 6.11908 9.37865 6.18238 9.4567C6.26207 9.55496 6.32833 9.62955 6.38117 9.68046C6.80074 10.0847 7.37133 10.3333 7.99998 10.3333C8.63289 10.3333 9.20694 10.0814 9.62728 9.67224C9.67791 9.62296 9.74135 9.55121 9.8176 9.45698C9.88089 9.37877 9.97611 9.33333 10.0767 9.33333Z"}})]))}}},820:function(t,e,n){"use strict";n(760)},822:function(t,e,n){},823:function(t,e,n){},824:function(t,e,n){},825:function(t,e,n){},826:function(t,e,n){},849:function(t,e,n){t.exports=n.p+"img/loading-placeholder.9112506.png"},850:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAq4AAAMMAQMAAACokrcUAAAABlBMVEUTGiQYIS3+UMXuAAAAgElEQVR42uzMMQ0AAAwCsPnXTMJU8LUCel2IVqvVarVarVar1Wq1Wq1Wq9VqtVqtVqvVttqFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPDtwSEBAAAAgKD/r11hAwAAAAAAAGATjapzHPFOaqgAAAAASUVORK5CYII="},861:function(t,e,n){t.exports=n.p+"img/auditing-placeholder.1726838.png"},862:function(t,e,n){t.exports=n.p+"img/auditing-placeholder-mobile.7c24b8f.png"},863:function(t,e,n){"use strict";n(772)},873:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return l}));n(44),n(87);function o(t){return t>=1e4?"".concat((t/1e4).toFixed(1),"w"):t>=1e3?"".concat((t/1e3).toFixed(1),"k"):"".concat(t)}function r(t){return t>1e8?"".concat(parseInt("".concat(t/1e8)),"亿+"):t>1e4?"".concat(parseInt("".concat(t/1e4)),"w+"):"".concat(t)}function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(t/100).toFixed(2)}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===t?0:t/100}},877:function(t,e,n){n(19),n(18),n(13),n(7),n(16);var o=n(134),r=n(149);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}t.exports={functional:!0,render:function(t,e){var n=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,h=data.staticClass,style=data.style,m=data.staticStyle,v=data.attrs,V=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){o(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,h],style:[style,m],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},V)},y),d.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 1.3335C14.3514 1.3335 14.6394 1.60546 14.6648 1.95041L14.6666 2.00016V14.0002C14.6666 14.3516 14.3947 14.6396 14.0497 14.665L14 14.6668H1.99998C1.64853 14.6668 1.36059 14.3949 1.33514 14.0499L1.33331 14.0002V2.00016C1.33331 1.64871 1.60527 1.36077 1.95023 1.33532L1.99998 1.3335H14ZM13.3333 2.66618H2.66664V13.3328H13.3333V2.66618ZM11.9219 6.7879C11.9719 6.83791 12 6.90574 12 6.97647V11.7993C12 11.9098 11.9104 11.9993 11.8 11.9993H6.81615C6.7975 11.9993 6.77945 11.9968 6.76232 11.992L3.91042 11.9847C3.79996 11.9844 3.71063 11.8947 3.7109 11.7842C3.71102 11.7313 3.73209 11.6807 3.76948 11.6433L6.52468 8.88807C6.62882 8.78393 6.79766 8.78393 6.9018 8.88807L8.17297 10.1593L11.5447 6.7879C11.6489 6.68376 11.8177 6.68376 11.9219 6.7879ZM5.99997 3.99951V5.99951H3.99997V3.99951H5.99997Z"}})]))}}},878:function(t,e,n){"use strict";n(782)},879:function(t,e,n){"use strict";n(783)},883:function(t,e,n){"use strict";n.r(e);n(13),n(71),n(18),n(47),n(66),n(38),n(106),n(44),n(23),n(24),n(25),n(7);var o=n(5),r=n(9),c=n(1011),l=n(1012),d=n.n(l),f=n(1013),h=n.n(f),m=n(1014),v=n.n(m),V=n(1015),y=n.n(V),_=n(1016),w=n.n(_),O=n(3163),j=n(1017),C=n.n(j),k=n(1029),S=n(1005),I=n(1004),x=n(861),L=n.n(x),P=n(862),A=n.n(P),B=n(849),R=n.n(B),E=n(850),H=n.n(E),D=n(770),T=n(1018),$=n.n(T),M=(n(39),n(45),n(122),n(875)),html=n(4858),F=n(994),U=n.n(F),N=n(27),Z=n(121);function W(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,r=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw r}}}}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var G=1512*n(48).l;function J(t,e){var n;t.properties.src=Object(Z.g)((null===(n=t.properties)||void 0===n?void 0:n.src)||"",G,0,{supportWebP:e},"zoomInCrop"),t.properties.loading="lazy"}var K,Q,Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.copyable,n=t.supportWebP,o=void 0!==n&&n;return function(t,n){var r,c=n.frontmatter,l=(null==c?void 0:c.theme)||"juejin",d=U.a[l]||U.a.juejin,f=(null==c?void 0:c.highlight)||d.highlight;null===(r=t.children)||void 0===r||r.unshift({type:"element",tagName:"style",children:[{type:"text",value:d.style}]},{type:"element",tagName:"style",properties:{"data-highlight":!0,"data-highlight-key":f}});var h=0;Object(M.a)(t,"element",(function(t,n,r){var c;switch(t.properties||(t.properties={}),t.tagName){case"a":var p=t.properties||{},l=p.href||"";l&&!l.toString().startsWith("#")&&(p.target="_blank"),p.title=l;var d=t.children;if(d&&d[0]&&"text"===d[0].type){/^(https?:\/\/)?[-a-z0-9@:%._+~#=]{1,256}\.[a-z]{2,6}/i.test(d[0].value)&&(d[0].value=d[0].value.replace(/^https?:\/\//i,"").replace(/\/(.*)$/,(function(t){return t.length>12?"".concat(t.slice(0,12),"…"):t})))}Object(N.e)(l)&&(p.ref="nofollow noopener noreferrer",p.href=Object(N.h)(l)?Object(N.d)(l):l);break;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":t.properties["data-id"]="heading-".concat(h++);break;case"img":J(t,o);break;case"code":if(!r||"pre"!==r.tagName)return;t.properties.className=null!==(c=t.properties.className)&&void 0!==c?c:[];var f,m=t.properties.className;e&&!m.includes("language-mermaid")&&(m.push("copyable"),t.children.push(Object(html.a)("span.copy-code-btn",["复制代码"])));var v,V=W(m);try{for(V.s();!(v=V.n()).done;){var y=v.value;if("lang-"===y.slice(0,5)){f=y.slice(5);break}if("language-"===y.slice(0,9)){f=y.slice(9);break}}}catch(t){V.e(t)}finally{V.f()}f&&(t.properties.lang=f)}}))}},X=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.supportWebP,n=void 0!==e&&e;return function(t){Object(M.a)(t,"element",(function(t){switch(t.properties||(t.properties={}),t.tagName){case"img":J(t,n)}}))}},tt=function(t){var e=t.copyable,n=t.supportWebP;return{viewerEffect:function(t){var e,n=t.markdownBody.querySelector("style[data-highlight]"),o=(null===(e=null==n?void 0:n.dataset)||void 0===e?void 0:e.highlightKey)||"github";(n&&!n.innerText||!n)&&($.a[null!=o?o:""]||$.a.github)().then((function(t){return t.default})).then((function(e){if(n)n.innerText=e;else{var o=document.createElement("style");o.innerText=e,t.markdownBody.appendChild(o)}}))},rehype:function(p){return p.use(Y,{copyable:e,supportWebP:n})}}},et=n(717),nt=n(14),it=(n(1019),n(762));function ot(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return st(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return st(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,r=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw r}}}}function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var ct=Object(it.c)(C()(O.a));null===(Q=null===(K=null==ct?void 0:ct.attributes)||void 0===K?void 0:K["*"])||void 0===Q||Q.push("className");var at=function(t){var e=t.copyable,o=t.supportWebP,r=t.isMobile,l=t.postHighlight,f=[y()(),function(){return n.e(348).then(n.t.bind(null,4863,7)).then((function(t){return(0,t.default)({languages:it.b,subset:it.a})}))},v()(),function(){return n.e(97).then(n.bind(null,4940)).then((function(t){return(0,t.default)()}))},function(){return Promise.all([n.e(6),n.e(104)]).then(n.t.bind(null,4864,7)).then((function(t){return(0,t.default)()}))},function(){return Promise.all([n.e(54),n.e(359)]).then(n.t.bind(null,4865,7)).then((function(t){return(0,t.default)()}))},w()({background:"rgba(0,0,0,0.7)",filter:function(img){return!img.classList.contains("placeholder-image")}}),h()({test:N.e,internalProps:{target:"_blank"}}),Object(c.viewer)({auditingBackground:r?A.a:L.a,loadingBackground:r?H.a:R.a,optimize:r?{offset:{top:100,bottom:100}}:void 0}),{remark:function(p){return p.use(I.b)}},d()(),tt({copyable:e,supportWebP:o})];return l?f.concat((function(){return Promise.all([n.e(65),n.e(350)]).then(n.bind(null,4866)).then((function(t){return(0,t.default)()}))})):f};function lt(t){return ut.apply(this,arguments)}function ut(){return(ut=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,o,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],o=ot(at(e)),t.prev=2,o.s();case 4:if((r=o.n()).done){t.next=17;break}if("function"!=typeof(c=r.value)){t.next=14;break}return t.t0=n,t.next=10,c();case 10:t.t1=t.sent,t.t0.push.call(t.t0,t.t1),t.next=15;break;case 14:n.push(c);case 15:t.next=4;break;case 17:t.next=22;break;case 19:t.prev=19,t.t2=t.catch(2),o.e(t.t2);case 22:return t.prev=22,o.f(),t.finish(22);case 25:return t.abrupt("return",n);case 26:case"end":return t.stop()}}),t,null,[[2,19,22,25]])})))).apply(this,arguments)}var ft=Object(r.d)({components:{Viewer:function(){return n.e(38).then(n.bind(null,1978)).then((function(t){return t.Viewer}))}},props:{markdown:{type:String},html:{type:String},resultHtml:{type:String,default:""},hitCache:{type:Boolean,default:!1},copyable:{type:Boolean,default:!1},needLoginBeforeCopyCode:{type:Boolean,default:!1},isLogined:{type:Boolean,default:!1}},emits:["ready"],data:function(){return{sanitize:it.c,plugins:[],callbacks:[]}},computed:{renderFrom:function(){return this.resultHtml?"md2htmlResult":this.markdown?"markdown":this.html?"html":(console.warn("result html ".concat(this.resultHtml," markdown:").concat(this.markdown," html:").concat(this.html," are both empty, unknown render from")),"unknown")},withoutViewer:function(){return"markdown"!==this.renderFrom},supportWebP:function(){var t;return Object(nt.p)(null===(t=this.$nuxt)||void 0===t?void 0:t.context)},sanitizedHtml:function(){switch(this.renderFrom){case"md2htmlResult":return-1===this.resultHtml.indexOf("webp")||this.supportWebP?this.resultHtml:Object(k.a)().use(X,{supportWebP:this.supportWebP}).processSync(this.resultHtml);case"html":return Object(k.a)().use(S.a,ct).use(Y,{copyable:this.copyable,supportWebP:this.supportWebP}).processSync(this.html).toString("utf-8");default:return""}},remarkRehypeOptions:function(){return{handlers:Object.assign({},I.a)}}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="html"===t.renderFrom&&!Object(nt.o)(Object(nt.b)()),e.next=3,lt({supportWebP:t.supportWebP,copyable:t.copyable,isMobile:t.$device.isMobile,postHighlight:n});case 3:t.plugins=e.sent,t.withoutViewer&&t.plugins.forEach((function(p){var e,n=null===(e=p.viewerEffect)||void 0===e?void 0:e.call(p,{markdownBody:t.$el});t.callbacks.push(n)})),t.$nextTick((function(){return t.$emit("ready",t.$el)}));case 6:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.withoutViewer&&this.callbacks.forEach((function(t){return t?t():null}))},methods:{onContentElementClick:function(t){var e;if(this.copyable){var n=t.target;if("copy-code-btn"===n.className){var text=n.textContent||"",o=n.parentNode,content=null===(e=null==o?void 0:o.textContent)||void 0===e?void 0:e.replace(new RegExp("\n?".concat(text,"$")),"");try{if(this.needLoginBeforeCopyCode&&!this.isLogined)return this.$requestLogin(),void this.$TEA("login_guide_click",{from:D.a.code});Object(et.a)(content||""),this.$alertMsg("代码复制成功")}catch(t){this.$error("代码复制失败")}}}}}}),ht=(n(863),n(30)),component=Object(ht.a)(ft,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article-content",on:{"!click":function(e){return t.onContentElementClick(e)}}},["markdown"===t.renderFrom?n("Viewer",{directives:[{name:"show",rawName:"v-show",value:t.plugins.length,expression:"plugins.length"}],attrs:{value:t.markdown,plugins:t.plugins,sanitize:t.sanitize,"remark-rehype":t.remarkRehypeOptions}}):n("div",{staticClass:"markdown-body",class:{cache:t.hitCache,html:t.html},domProps:{innerHTML:t._s(t.sanitizedHtml)}})],1)}),[],!1,null,null,null);e.default=component.exports},884:function(t,e,n){},885:function(t,e,n){},892:function(t,e,n){"use strict";var o=n(65),r=n(9),c=Object(r.d)({props:{userId:{type:String,default:""},type:{type:String,default:"default"},teaType:{type:String,default:""}},setup:function(){return{handleTea:function(t){Object(o.d)("private_msg_page_show",{visit_source:t})}}}}),l=(n(916),n(30)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("NuxtLink",{staticClass:"im-button",class:{"has-icon":"hasIcon"===t.type},attrs:{to:"/notification/im?participantId="+t.userId},nativeOn:{click:function(e){return t.handleTea(t.teaType)}}},["hasIcon"===t.type?o("img",{staticClass:"im-icon",attrs:{src:n(915),alt:"私信"}}):t._e(),t._v(" "),o("div",[t._v("私信")])])}),[],!1,null,"11443840",null);e.a=component.exports},912:function(t,e,n){"use strict";n(76);var o=n(6),r=n(164),c=(n(1007),n(30)),l=Object(c.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"video-label"},[this._v("视频")])}),[],!1,null,"2f5eaa22",null).exports,d=n(48),f=n(8),h=Object(o.b)({components:{Thumb:r.a,VideoBookLabel:l},props:{book:{type:Object,default:function(){return{}}},width:{type:Number,default:0},height:{type:Number,default:0}},setup:function(t,e){var n=e.root.$device.isMobile,r=n?100:150,c=n?140:210,l=Object(o.a)((function(){var e;return(null===(e=t.book)||void 0===e?void 0:e.base_info)||{}}));return{isVideoBook:Object(o.a)((function(){var t;return(null===(t=l.value)||void 0===t?void 0:t.course_type)===f.BookletCourseType.Video})),defaultBookThumbUrl:d.c,coverSize:{width:t.width?t.width:r,height:t.height?t.height:c},bookBaseInfo:l}}}),m=(n(1008),Object(c.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-thumb"},[n("thumb",{staticClass:"book-thumb-img",attrs:{alt:"「"+t.bookBaseInfo.title+"」封面",url:t.bookBaseInfo.cover_img,default:t.defaultBookThumbUrl,quality:95,width:t.coverSize.width,height:t.coverSize.height}}),t._v(" "),t.isVideoBook?n("VideoBookLabel"):t._e()],1)}),[],!1,null,"077cd020",null));e.a=m.exports},913:function(t,e,n){"use strict";n(822)},915:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHLSURBVHgB7ZdbTsJAGIXPT9AXE8KjiRe6A3EH7EB2IK5AdsDPDlwC7ABXIEvAFdh4SXxsfNToeGqBTLFQCmOKyXxJ05lpO/P1NO1MAY/H4wRZbDhUE+wDXR44Qwl8AeEH0H9VCe32lOhU8o7FAOUSvgHnkUo0a6jYR/eAFsqXjAlqBh27ISUquyGZIKjb1Qr+CV7UNV7UNZWFyo0BrlicoCQ4/phvfDd2sdtl2QWBmiZniS6LF9zq+FviD/uQ442eVcZZJ0heDxSufwJtnnjNahMOidMTwahiMAytWSiLlOgRU6RUtDjPznCUcm56dYZzwOFeVCaZoqdqlLse73QUd/akMkK2cOGU10nvWE2LffYkmcr7jyo6O1bNuoAntrlrUzzkfvBOaTvl6UCDeMtJea30askNd7HiKVWxmoCbckWlJ2oyUw6Tx9OZpczyJd/YyAjGBdLLJU90TpGUl/WxbnpbiVoEyEl5kaLpZbGJ6JxVKW+THlyLWgSYptxQMzaJmNNvrivROWaLx7sKv3pyjRd1jRd1jRd1TVrUIMKuIHiwq+mfO/lZ+YQon5BLxFu74dc/E9eVARe6yqmwgRKg0D3T07x/KI/HsyHfQKq0yUCbcHQAAAAASUVORK5CYII="},916:function(t,e,n){"use strict";n(823)},917:function(t,e,n){"use strict";n(824)},918:function(t,e,n){"use strict";n(825)},919:function(t,e,n){"use strict";n(826)},952:function(t,e,n){"use strict";n(19),n(18),n(13),n(7),n(16);var o=n(0),r=n(86),c=n(250),l=n(49),d=n(257),f=n(3);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var m={components:{Avatar:c.a,DropDownList:function(){return n.e(31).then(n.bind(null,4963))}},data:function(){return{bdPageUrlForNav:d.e,isShowUserDropdownList:!1,translateGithubURL:l.f}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(r.mapGetters)({user:f.USER})),methods:{hideActionList:function(){this.isShowUserDropdownList=!1},onUserActionClick:function(){this.isShowUserDropdownList=!this.isShowUserDropdownList},openEditorPage:function(){var t=this.$getBean("editorBusiness");window.location.href=t.getPostEditUrl()},openXiaoceEditorPage:function(){var t=this.$getBean("editorBusiness");window.location.href=t.getXiaoceEditUrl()},openDraftIndexPage:function(){var t=this.$getBean("editorBusiness");window.location.href=t.getDraftIndexUrl()},login:function(){this.$requestLogin()},register:function(){this.$requestRegister()},logout:function(){window.confirm("确定登出吗？每一片贫瘠的土地都需要坚定的挖掘者！")&&this.$requestLogout()}},mounted:function(){var t=this,e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.ROOT_CONTAINER_CLICK,(function(){t.hideActionList()}))},watch:{isShowUserDropdownList:function(t){t&&this.$TEA("avatar_menu_visit")}}},v=(n(913),n(30)),component=Object(v.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-auth"},[t.user?n("div",{staticClass:"nav-item menu",on:{click:function(e){return e.stopPropagation(),t.onUserActionClick(e)}}},[n("avatar",{staticClass:"avatar",attrs:{user:t.user,decorative:!0,alt:t.user.username+"的头像"}}),t._v(" "),n("keep-alive",[t.isShowUserDropdownList?n("DropDownList"):t._e()],1)],1):t._e(),t._v(" "),t.user?t._e():n("div",{staticClass:"nav-item auth"},[n("span",{staticClass:"login",on:{click:t.login}},[t._v("登录")])])])}),[],!1,null,"340a18bc",null);e.a=component.exports},988:function(t,e,n){},992:function(t,e,n){}}]);
//# sourceMappingURL=e75da91.js.map