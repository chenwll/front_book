(window.webpackJsonp=window.webpackJsonp||[]).push([[182],{1645:function(t,e,r){r(17),r(15),r(11),r(7),r(14);var n=r(42),o=r(43);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}t.exports={functional:!0,render:function(t,e){var r=e._c,data=(e._v,e.data),l=e.children,v=void 0===l?[]:l,d=data.class,f=data.staticClass,style=data.style,h=data.staticStyle,O=data.attrs,_=void 0===O?{}:O,m=o(data,["class","staticClass","style","staticStyle","attrs"]);return r("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[d,f],style:[style,h],attrs:Object.assign({width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},m),v.concat([r("path",{attrs:{d:"M14.3029 3.69629L8.99959 8.99957L3.69629 14.3029",stroke:"#8A919F","stroke-width":"1.5","stroke-linecap":"round"}}),r("path",{attrs:{d:"M3.69629 3.69629L8.99959 8.99957L14.3029 14.3029",stroke:"#8A919F","stroke-width":"1.5","stroke-linecap":"round"}})]))}}},3107:function(t,e,r){t.exports=r.p+"d3c620c1b3d224c4f822ef78449a9303.svg"},3108:function(t,e,r){},4650:function(t,e,r){"use strict";r(3108)},4791:function(t,e,r){"use strict";r.r(e);r(17),r(15),r(11),r(7),r(14);var n,o=r(0),c=(r(23),r(5)),l=r(6),v=r(1645),d=r.n(v),f=r(108),h=r(100),O=r(849),_=r(67),m=r(173),w=r(8),y=(n={},Object(o.a)(n,w.ERROR_NO.GROWTH_LOTTERY_ZERO_CAP,"库存不足，兑换失败"),Object(o.a)(n,w.ERROR_NO.GROWTH_LACK_OF_POINT,"积分不足以兑换借阅卡"),Object(o.a)(n,w.ERROR_NO.EXCEED_REDEEM_LIMIT_YEARLY,"积分兑换已达上限"),Object(o.a)(n,w.ERROR_NO.EXCEED_BORROW_LIMIT_MONTHLY,"兑换超过上限"),Object(o.a)(n,0,"VIP课程借阅"),n),j=Object(o.a)({},w.ERROR_NO.EXCEED_BORROW_LIMIT_MONTHLY,"您本月已借满 6 门课程，请下个月再来哦~");function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function k(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var E=Object(l.b)({components:{CloseIcon:d.a,Thumb:O.a,BAlert:m.Alert},props:{bookInfo:{type:Object,default:function(){return{}}},teaParams:{type:Object,default:function(){return{}}}},emits:["closeVipBorrowModal","fetch"],setup:function(t,e){var r=Object(l.n)({}),n=Object(l.n)(0),o=Object(l.n)(!1),v=Object(l.n)(!1),d=Object(l.n)(!0),O=Object(l.n)(0),m=Object(l.n)(0),w=e.root.$getBean("eventBus"),C=Object(l.a)((function(){var t;return 2===(null===(t=r.value)||void 0===t?void 0:t.display_type)?r.value.discount||560:r.value.count||560})),E=function(){var l=Object(c.a)(regeneratorRuntime.mark((function c(){return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(d.value=!0,c.prev=1,!(O.value<=0)){c.next=9;break}return c.next=5,f.a.VipRedeem({lottery_type:6,got_channel:5,benefit_id:r.value.benefit_id});case 5:if(0===c.sent.err_no){c.next=9;break}return o.value=!0,c.abrupt("return");case 9:return c.next=11,h.a.BorrowBooklet({booklet_id:t.bookInfo.id});case 11:v.value=!0,e.root.$TEA("member_rent_result",k(k({},t.teaParams),{},{rent_count:t.bookInfo.borrowTimes+1})),setTimeout((function(){v.value=!1,R(),d.value=!1,w.emit(w.eventType.SHOW_VIP_FETCH)}),1e3),c.next=21;break;case 16:c.prev=16,c.t0=c.catch(1),o.value=!0,d.value=!1,n.value=(null===c.t0||void 0===c.t0?void 0:c.t0.statusCode)||0;case 21:case"end":return c.stop()}}),c,null,[[1,16]])})));return function(){return l.apply(this,arguments)}}();Object(l.j)(Object(c.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,d.value=!0,t.next=4,f.a.GetUserBorrowCondition();case 4:e=t.sent,O.value=e.data.borrow_card_num,m.value=e.data.get_all_point,O.value<=0&&(r.value=e.data.benefit.benefit_config),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),o.value=!0,n.value=(null===t.t0||void 0===t.t0?void 0:t.t0.statusCode)||0;case 14:d.value=!1;case 15:case"end":return t.stop()}}),t,null,[[0,10]])}))));var R=function(){e.emit("closeVipBorrowModal")};return{close:R,borrowCardNum:O,getAllPoint:m,borrow:E,defaultBookThumbUrl:_.c,loading:d,showError:o,showAlert:v,exchangePrice:C,titleMap:y,descriptMap:j,errorCode:n}}}),R=(r(4650),r(28)),component=Object(R.a)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"masker"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"vip-borrow"},[n("div",{staticClass:"title",class:{"is-error":t.showError}},[t._v("\n      "+t._s(t.titleMap[t.errorCode]||"借阅失败")+"\n    ")]),t._v(" "),n("CloseIcon",{staticClass:"close",on:{click:t.close}}),t._v(" "),t.showError?n("div",{staticClass:"result-content content"},[n("div",{staticClass:"descript"},[t._v("\n        "+t._s(t.descriptMap[t.errorCode])+"\n      ")]),t._v(" "),n("div",{staticClass:"enter-button",on:{click:t.close}},[t._v("我知道了")])]):n("div",{staticClass:"content"},[t.borrowCardNum>0?n("div",{staticClass:"enough box"},[n("div",{staticClass:"words"},[t._v("\n          "+t._s("将消耗")+"\n          "),n("span",{staticClass:"num"},[t._v("1")]),t._v("\n          "+t._s("张小册借阅卡 （剩余:")+"\n          "),n("span",{staticClass:"num"},[t._v(t._s(t.borrowCardNum||0))]),t._v("\n          "+t._s("张）")+"\n        ")]),t._v(" "),n("div",{staticClass:"descript"},[t._v("\n          "+t._s("21天内畅读该课程全部章节")+"\n        ")])]):n("div",{staticClass:"not-enough box"},[n("div",{staticClass:"words"},[t._v("\n          "+t._s("借阅卡已用尽，是否消耗")+"\n          "),n("span",{staticClass:"num"},[t._v(t._s(t.exchangePrice))]),t._v(" "),n("img",{staticClass:"coral",attrs:{src:r(3107)}}),t._v("\n          "+t._s(" 兑换1张借阅卡?")+"\n        ")]),t._v(" "),n("div",{staticClass:"descript"},[t._v("\n          "+t._s("(剩余："+(t.getAllPoint||0))+"\n          "),n("img",{staticClass:"coral",attrs:{src:r(3107)}}),t._v("\n          "+t._s(")")+"\n        ")])]),t._v(" "),n("div",{staticClass:"img-container"},[n("thumb",{staticClass:"img",attrs:{alt:"「"+t.bookInfo.title+"」封面",url:t.bookInfo.cover,default:t.defaultBookThumbUrl,quality:95,width:100,height:140}}),t._v(" "),n("div",{staticClass:"mark"},[t._v("VIP")])],1),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"borrow-button",on:{click:t.borrow}},[t._v("\n        "+t._s(t.borrowCardNum>0?"确定借阅":"兑换并借阅")+"\n      ")])])],1),t._v(" "),t.showAlert?n("b-alert",{attrs:{type:"success","show-icon":!0}},[t._v("\n    借阅成功！21天内畅读课程，快来学习吧~\n  ")]):t._e()],1)}),[],!1,null,"3fbc0b91",null);e.default=component.exports},849:function(t,e,r){"use strict";r(106);var n=r(6),o=r(266),c=r(67),l=r(18),v=r(264),d=Object(n.b)({components:{Lazy:o.a},props:{url:{type:String,default:""},default:{type:String,default:void 0},quality:{type:Number,default:void 0},width:{type:Number,default:0},height:{type:Number,default:0},shrink:{type:Boolean,default:!1},format:{type:String,default:void 0},alt:{type:String,default:"image"},blank:{type:String,default:""},hasMark:{type:Boolean,default:!1},lazy:{type:Boolean,default:!0}},computed:{defaultThumbUrl:function(){return this.default||c.h},thumbUrl:function(){var t,e,r=this.url||(this.blank?"":this.defaultThumbUrl);return this.shrink?Object(v.e)(r,this.width*c.l,this.height*c.l,{format:this.format,quality:this.quality,supportWebP:Object(l.n)(null===(t=this.$nuxt)||void 0===t?void 0:t.context)},this.hasMark?"zoomCrop":"noMark"):Object(v.b)(r,this.width*c.l,this.height*c.l,{format:this.format,quality:this.quality},this.hasMark?"zoomCrop":"noMark",{supportWebP:Object(l.n)(null===(e=this.$nuxt)||void 0===e?void 0:e.context)})}}}),f=r(28),component=Object(f.a)(d,(function(){var t=this.$createElement;return(this._self._c||t)("lazy",{attrs:{url:this.thumbUrl,alt:this.alt,lazy:this.lazy,"loading-style":{aspectRatio:""+this.width/this.height}}})}),[],!1,null,null,null);e.a=component.exports}}]);