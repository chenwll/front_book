(window.webpackJsonp=window.webpackJsonp||[]).push([[63,2,4,11,152,157],{1e3:function(e,t,n){"use strict";n(925)},1001:function(e,t,n){"use strict";n(926)},1002:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,y=data.attrs,m=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m)},_),h.concat([n("path",{attrs:{d:"M12.8 5.2C13.9532 6.46 14.8 8.2 14.8 10C14.7039 12.8937 12.6843 15.1706 9.97973 15.8159C10.359 12.3442 7.77588 9.35406 7.77588 9.35406C7.77588 9.35406 7.99512 13.7064 6.79514 15.8104C4.03715 15.1428 2 12.7806 2 9.8C2 7.776 2.9336 5.9728 4.4 4.8C5.8608 3.7056 6.8 1.9656 6.8 0C9.684 0.4368 11.894 2.9264 11.894 5.932C11.894 6.5012 11.746 7.0652 11.6 7.6C12.1264 6.9024 12.6184 6.0876 12.8 5.2Z",fill:"#F53F3F"}})]))}}},1003:function(e,t,n){"use strict";n(927)},1004:function(e,t,n){"use strict";n(928)},1035:function(e,t,n){"use strict";n.d(t,"c",(function(){return _})),n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return k}));var r=n(1280),o=n.n(r),c=n(1281),l=n.n(c),h=n(1282),f=n.n(h),d=n(1283),v=n.n(d),y=n(1284),m=n.n(y),_=function(s){return s.attributes["*"].push("data*"),s},w=["arduino","bash","c","cpp","csharp","css","diff","go","ini","java","javascript","json","kotlin","less","lua","makefile","markdown","objectivec","perl","php","phpTemplate","plaintext","python","pythonRepl","r","ruby","rust","scss","shell","sql","swift","typescript","vbnet","xml","yaml","html","dart","scala","vbscript","erlang","matlab"],k={vbscript:o.a,erlang:l.a,matlab:f.a,dart:v.a,scala:m.a}},1037:function(e,t,n){},1038:function(e,t,n){},1039:function(e,t,n){},1040:function(e,t,n){},1052:function(e,t,n){e.exports=n.p+"img/auditing-placeholder.1726838.png"},1053:function(e,t,n){e.exports=n.p+"img/auditing-placeholder-mobile.7c24b8f.png"},1054:function(e,t,n){e.exports=n.p+"img/loading-placeholder.9112506.png"},1055:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAq4AAAMMAQMAAACokrcUAAAABlBMVEUTGiQYIS3+UMXuAAAAgElEQVR42uzMMQ0AAAwCsPnXTMJU8LUCel2IVqvVarVarVar1Wq1Wq1Wq9VqtVqtVqvVttqFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPDtwSEBAAAAgKD/r11hAwAAAAAAAGATjapzHPFOaqgAAAAASUVORK5CYII="},1056:function(e,t,n){"use strict";n(946)},1083:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l}));n(47),n(87);function r(e){return e>=1e4?"".concat((e/1e4).toFixed(1),"w"):e>=1e3?"".concat((e/1e3).toFixed(1),"k"):"".concat(e)}function o(e){return e>1e8?"".concat(parseInt("".concat(e/1e8)),"亿+"):e>1e4?"".concat(parseInt("".concat(e/1e4)),"w+"):"".concat(e)}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(e/100).toFixed(2)}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return 0===e?0:e/100}},1085:function(e,t,n){"use strict";n(978)},1087:function(e,t,n){"use strict";n.r(t);n(139),n(47),n(22);var r=n(5),o=n(27),c=n(880),l=n(1294),h=n(1199),f=n.n(h),d=n(1300),v=n.n(d),y=n(1208),m=n(1342),_=n.n(m),w=n(1200),k=n.n(w),C=n(1371),O=n.n(C),x=n(1372),S=n.n(x),T=n(1201),V=n.n(T),E=n(1203),P=n.n(E),I=n(1041),L=n.n(I),j=n(1210),R=n(1641),A=n(1915),D=(n(70),n(15),n(54),n(69),n(37),n(24),n(25),n(140),n(11),n(7),n(14),n(43),n(51),n(1049)),html=n(4502),M=n(266);function B(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var H=1512*n(68).l;function F(e,t){var n;e.properties.src=Object(M.e)((null===(n=e.properties)||void 0===n?void 0:n.src)||"",H,0,{supportWebP:t},"zoomInCrop"),e.properties.loading="lazy"}var U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.copyable,n=e.supportWebP,r=void 0!==n&&n;return function(e,n){var c,l,h="juejin",f=null===(c=n.frontmatter)||void 0===c?void 0:c.theme;Object.keys(L.a).includes(f)&&(h=f),null===(l=e.children)||void 0===l||l.unshift({type:"element",tagName:"style",children:[{type:"text",value:L.a[h].style}]});var d=0;Object(D.a)(e,"element",(function(e,n,c){var l;switch(e.properties||(e.properties={}),e.tagName){case"a":var p=e.properties||{},h=p.href||"";h&&!h.toString().startsWith("#")&&(p.target="_blank"),p.title=h;var f=e.children;if(f&&f[0]&&"text"===f[0].type){/^(https?:\/\/)?[-a-z0-9@:%._+~#=]{1,256}\.[a-z]{2,6}/i.test(f[0].value)&&(f[0].value=f[0].value.replace(/^https?:\/\//i,"").replace(/\/(.*)$/,(function(e){return e.length>12?"".concat(e.slice(0,12),"…"):e})))}Object(o.e)(h)&&(p.ref="nofollow noopener noreferrer",p.href=Object(o.h)(h)?Object(o.d)(h):h);break;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":e.properties["data-id"]="heading-".concat(d++);break;case"img":F(e,r);break;case"code":if(!c||"pre"!==c.tagName)return;e.properties.className=null!==(l=e.properties.className)&&void 0!==l?l:[];var v,y=e.properties.className;t&&!y.includes("language-mermaid")&&(y.push("copyable"),e.children.push(Object(html.a)("span.copy-code-btn",["复制代码"])));var m,_=B(y);try{for(_.s();!(m=_.n()).done;){var w=m.value;if("lang-"===w.slice(0,5)){v=w.slice(5);break}if("language-"===w.slice(0,9)){v=w.slice(9);break}}}catch(e){_.e(e)}finally{_.f()}v&&(e.properties.lang=v)}}))}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.supportWebP,n=void 0!==t&&t;return function(e){Object(D.a)(e,"element",(function(e){switch(e.properties||(e.properties={}),e.tagName){case"img":F(e,n)}}))}},W=n(1204),z=n(9),G=n(1296),K=n(1035),Y=n(1587),Z=n.n(Y),X=n(944),J=n(1052),Q=n.n(J),ee=n(1053),te=n.n(ee),ne=n(1054),ie=n.n(ne),re=n(1055),oe=n.n(re),se=(n(1205),n(18)),ae=Object(z.d)({components:{Viewer:l.b},props:{markdown:{type:String},html:{type:String},copyable:{type:Boolean,default:!1},cachedHtml:{type:String,default:""},needLoginBeforeCopyCode:{type:Boolean,default:!1},isLogined:{type:Boolean,default:!1}},data:function(){return{sanitize:K.c,commonPlugins:(component=this,[O()(),f()({languages:K.b,subset:K.a}),_()(),Object(y.a)(),k()(),V()(),v()({background:"rgba(0,0,0,0.7)",filter:function(img){return!img.classList.contains("placeholder-image")}}),S()({test:o.e,internalProps:{target:"_blank"}}),Object(W.viewer)({auditingBackground:component.$device.isMobile?te.a:Q.a,loadingBackground:component.$device.isMobile?oe.a:ie.a,optimize:component.$device.isMobile?{offset:{top:100,bottom:100}}:void 0}),{remark:function(p){return p.use(G.b)}},Z()()]),callbacks:[]};var component},computed:{withoutViewer:function(){return!!this.cachedHtml||!this.markdown},supportWebP:function(){var e;return Object(se.n)(null===(e=this.$nuxt)||void 0===e?void 0:e.context)},sanitizedHtml:function(){return this.cachedHtml?-1===this.cachedHtml.indexOf("webp")||this.supportWebP?this.cachedHtml:Object(j.a)().use($,{supportWebP:this.supportWebP}).processSync(this.cachedHtml):this.html?Object(j.a)().use(R.a).use(A.a,{subset:K.a,languages:K.b}).use(U,{copyable:this.copyable,supportWebP:this.supportWebP}).processSync(this.html):this.cachedHtml||""},plugins:function(){var e=this,t={viewerEffect:function(e){var t,n,o=e.file,c=e.markdownBody;n=(null==o?void 0:o.frontmatter)&&"string"!=typeof o.frontmatter?o.frontmatter:{};var l=document.createElement("style");return null===(t=c||document.head)||void 0===t||t.appendChild(l),Object(r.a)(regeneratorRuntime.mark((function e(){var t,r,o,c,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=null!==(t=n.highlight)&&void 0!==t?t:null===(r=L.a[n.theme])||void 0===r?void 0:r.highlight,h=null!==(o=P.a[c])&&void 0!==o?o:P.a.github,e.next=4,h().then((function(e){return e.default}));case 4:f=e.sent,l.innerHTML=f;case 6:case"end":return e.stop()}}),e)})))(),function(){l.remove()}},rehype:function(u){return u.use(U,{copyable:e.copyable,supportWebP:e.supportWebP})}};return this.commonPlugins.concat(t)},remarkRehypeOptions:function(){return{handlers:Object.assign({},G.a)}}},mounted:function(){var e=this;this.withoutViewer&&this.plugins.forEach((function(p){var t,n=null===(t=p.viewerEffect)||void 0===t?void 0:t.call(p,{markdownBody:e.$el});e.callbacks.push(n)}))},beforeDestroy:function(){this.withoutViewer&&this.callbacks.forEach((function(e){return e?e():null}))},methods:{onContentElementClick:function(e){var t;if(this.copyable){var n=e.target;if("copy-code-btn"===n.className){var text=n.textContent||"",r=n.parentNode,content=null===(t=null==r?void 0:r.textContent)||void 0===t?void 0:t.replace(new RegExp("\n?".concat(text,"$")),"");try{if(this.needLoginBeforeCopyCode&&!this.isLogined)return this.$requestLogin(),void this.$TEA("login_guide_click",{from:X.a.code});Object(c.a)(content||""),this.$alertMsg("代码复制成功")}catch(e){this.$error("代码复制失败")}}}}}}),ce=(n(1056),n(29)),ue=Object(ce.a)(ae,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"article-content",on:{"!click":function(t){return e.onContentElementClick(t)}}},[!e.cachedHtml&&e.markdown?n("viewer",{attrs:{value:e.markdown,plugins:e.plugins,sanitize:e.sanitize,"remark-rehype":e.remarkRehypeOptions}}):n("div",{staticClass:"markdown-body",class:{cache:e.cachedHtml,html:e.html},domProps:{innerHTML:e._s(e.sanitizedHtml)}})],1)}),[],!1,null,null,null);t.default=ue.exports},1089:function(e,t,n){},1090:function(e,t,n){},1189:function(e,t,n){"use strict";var r=n(40),o=n(9),c=Object(o.d)({props:{userId:{type:String,default:""},type:{type:String,default:"default"},teaType:{type:String,default:""}},setup:function(){return{handleTea:function(e){Object(r.d)("private_msg_page_show",{visit_source:e})}}}}),l=(n(1216),n(29)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("NuxtLink",{staticClass:"im-button",class:{"has-icon":"hasIcon"===e.type},attrs:{to:"/notification/im?participantId="+e.userId},nativeOn:{click:function(t){return e.handleTea(e.teaType)}}},["hasIcon"===e.type?r("img",{staticClass:"im-icon",attrs:{src:n(1215),alt:"私信"}}):e._e(),e._v(" "),r("div",[e._v("私信")])])}),[],!1,null,"11443840",null);t.a=component.exports},1202:function(e,t,n){var map={"./locale":981,"./locale.js":981};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}r.keys=function(){return Object.keys(map)},r.resolve=o,e.exports=r,r.id=1202},1209:function(e,t,n){"use strict";n(124);var r=n(6),o=n(851),c=(n(1298),n(29)),l=Object(c.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("span",{staticClass:"video-label"},[this._v("视频")])}),[],!1,null,"2f5eaa22",null).exports,h=n(68),f=n(8),d=Object(r.b)({components:{Thumb:o.a,VideoBookLabel:l},props:{book:{type:Object,default:function(){return{}}},width:{type:Number,default:0},height:{type:Number,default:0}},setup:function(e,t){var n=t.root.$device.isMobile,o=n?100:150,c=n?140:210,l=Object(r.a)((function(){var t;return(null===(t=e.book)||void 0===t?void 0:t.base_info)||{}}));return{isVideoBook:Object(r.a)((function(){var e;return(null===(e=l.value)||void 0===e?void 0:e.course_type)===f.BookletCourseType.Video})),defaultBookThumbUrl:h.c,coverSize:{width:e.width?e.width:o,height:e.height?e.height:c},bookBaseInfo:l}}}),v=(n(1299),Object(c.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"book-thumb"},[n("thumb",{staticClass:"book-thumb-img",attrs:{alt:"「"+e.bookBaseInfo.title+"」封面",url:e.bookBaseInfo.cover_img,default:e.defaultBookThumbUrl,quality:95,width:e.coverSize.width,height:e.coverSize.height}}),e._v(" "),e.isVideoBook?n("VideoBookLabel"):e._e()],1)}),[],!1,null,"077cd020",null));t.a=v.exports},1214:function(e,t,n){"use strict";n(1037)},1215:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHLSURBVHgB7ZdbTsJAGIXPT9AXE8KjiRe6A3EH7EB2IK5AdsDPDlwC7ABXIEvAFdh4SXxsfNToeGqBTLFQCmOKyXxJ05lpO/P1NO1MAY/H4wRZbDhUE+wDXR44Qwl8AeEH0H9VCe32lOhU8o7FAOUSvgHnkUo0a6jYR/eAFsqXjAlqBh27ISUquyGZIKjb1Qr+CV7UNV7UNZWFyo0BrlicoCQ4/phvfDd2sdtl2QWBmiZniS6LF9zq+FviD/uQ442eVcZZJ0heDxSufwJtnnjNahMOidMTwahiMAytWSiLlOgRU6RUtDjPznCUcm56dYZzwOFeVCaZoqdqlLse73QUd/akMkK2cOGU10nvWE2LffYkmcr7jyo6O1bNuoAntrlrUzzkfvBOaTvl6UCDeMtJea30askNd7HiKVWxmoCbckWlJ2oyUw6Tx9OZpczyJd/YyAjGBdLLJU90TpGUl/WxbnpbiVoEyEl5kaLpZbGJ6JxVKW+THlyLWgSYptxQMzaJmNNvrivROWaLx7sKv3pyjRd1jRd1jRd1TVrUIMKuIHiwq+mfO/lZ+YQon5BLxFu74dc/E9eVARe6yqmwgRKg0D3T07x/KI/HsyHfQKq0yUCbcHQAAAAASUVORK5CYII="},1216:function(e,t,n){"use strict";n(1038)},1217:function(e,t,n){"use strict";n(1039)},1218:function(e,t,n){"use strict";n(1040)},1273:function(e,t,n){},1276:function(e,t,n){},1286:function(e,t,n){(function(t){e.exports=function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},n=function(e){return e&&e.Math==Math&&e},r=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")(),i={},o=function(e){try{return!!e()}catch(e){return!0}},c=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={},a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,h=l&&!a.call({1:2},1);s.f=h?function(e){var t=l(this,e);return!!t&&t.enumerable}:a;var u,f,d=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},v={}.toString,p=function(e){return v.call(e).slice(8,-1)},y=p,g="".split,m=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==y(e)?g.call(e,""):Object(e)}:Object,_=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},w=m,b=_,k=function(e){return w(b(e))},C=function(e){return"object"==typeof e?null!==e:"function"==typeof e},O=r,x=function(e){return"function"==typeof e?e:void 0},S=function(e,t){return arguments.length<2?x(O[e]):O[e]&&O[e][t]},T=S("navigator","userAgent")||"",V=r,E=T,P=V.process,I=V.Deno,L=P&&P.versions||I&&I.version,j=L&&L.v8;j?f=(u=j.split("."))[0]<4?1:u[0]+u[1]:E&&(!(u=E.match(/Edge\/(\d+)/))||u[1]>=74)&&(u=E.match(/Chrome\/(\d+)/))&&(f=u[1]);var R=f&&+f,A=R,D=o,M=!!Object.getOwnPropertySymbols&&!D((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&A&&A<41})),B=M&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,N=S,H=B?function(e){return"symbol"==typeof e}:function(e){var t=N("Symbol");return"function"==typeof t&&Object(e)instanceof t},F=C,U={exports:{}},$=r,W=function(e,t){try{Object.defineProperty($,e,{value:t,configurable:!0,writable:!0})}catch(n){$[e]=t}return t},z=W,G="__core-js_shared__",K=r[G]||z(G,{}),Y=K;(U.exports=function(e,t){return Y[e]||(Y[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.16.2",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var Z=_,q=function(e){return Object(Z(e))},X=q,J={}.hasOwnProperty,Q=Object.hasOwn||function(e,t){return J.call(X(e),t)},ee=0,te=Math.random(),ne=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++ee+te).toString(36)},ie=r,re=U.exports,oe=Q,se=ne,ae=M,ce=B,ue=re("wks"),le=ie.Symbol,he=ce?le:le&&le.withoutSetter||se,fe=function(e){return oe(ue,e)&&(ae||"string"==typeof ue[e])||(ae&&oe(le,e)?ue[e]=le[e]:ue[e]=he("Symbol."+e)),ue[e]},de=C,pe=H,ve=fe("toPrimitive"),ge=function(e,t){if(!de(e)||pe(e))return e;var n,i=e[ve];if(void 0!==i){if(void 0===t&&(t="default"),n=i.call(e,t),!de(n)||pe(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,i;if("string"===t&&"function"==typeof(n=e.toString)&&!F(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!F(i=n.call(e)))return i;if("string"!==t&&"function"==typeof(n=e.toString)&&!F(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}(e,t)},ye=ge,me=H,_e=function(e){var t=ye(e,"string");return me(t)?t:String(t)},be=C,we=r.document,ke=be(we)&&be(we.createElement),Ce=function(e){return ke?we.createElement(e):{}},Oe=Ce,xe=!c&&!o((function(){return 7!=Object.defineProperty(Oe("div"),"a",{get:function(){return 7}}).a})),Se=c,Te=s,Ve=d,Ee=k,Pe=_e,Ie=Q,Le=xe,je=Object.getOwnPropertyDescriptor;i.f=Se?je:function(e,t){if(e=Ee(e),t=Pe(t),Le)try{return je(e,t)}catch(e){}if(Ie(e,t))return Ve(!Te.f.call(e,t),e[t])};var Re={},Ae=C,De=function(e){if(!Ae(e))throw TypeError(String(e)+" is not an object");return e},Me=c,Be=xe,Ne=De,He=_e,Fe=Object.defineProperty;Re.f=Me?Fe:function(e,t,n){if(Ne(e),t=He(t),Ne(n),Be)try{return Fe(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var Ue=Re,$e=d,We=c?function(e,t,n){return Ue.f(e,t,$e(1,n))}:function(e,t,n){return e[t]=n,e},ze={exports:{}},qe=K,Ge=Function.toString;"function"!=typeof qe.inspectSource&&(qe.inspectSource=function(e){return Ge.call(e)});var Ke,Ye,Ze,Xe=qe.inspectSource,Je=Xe,Qe=r.WeakMap,et="function"==typeof Qe&&/native code/.test(Je(Qe)),tt=U.exports,nt=ne,it=tt("keys"),rt=function(e){return it[e]||(it[e]=nt(e))},ot={},st=et,at=C,ct=We,ut=Q,lt=K,ht=rt,ft=ot,dt="Object already initialized",pt=r.WeakMap;if(st||lt.state){var vt=lt.state||(lt.state=new pt),gt=vt.get,yt=vt.has,mt=vt.set;Ke=function(e,t){if(yt.call(vt,e))throw new TypeError(dt);return t.facade=e,mt.call(vt,e,t),t},Ye=function(e){return gt.call(vt,e)||{}},Ze=function(e){return yt.call(vt,e)}}else{var _t=ht("state");ft[_t]=!0,Ke=function(e,t){if(ut(e,_t))throw new TypeError(dt);return t.facade=e,ct(e,_t,t),t},Ye=function(e){return ut(e,_t)?e[_t]:{}},Ze=function(e){return ut(e,_t)}}var bt={set:Ke,get:Ye,has:Ze,enforce:function(e){return Ze(e)?Ye(e):Ke(e,{})},getterFor:function(e){return function(t){var n;if(!at(t)||(n=Ye(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},wt=r,kt=We,Ct=Q,Ot=W,xt=Xe,St=bt.get,Tt=bt.enforce,Vt=String(String).split("String");(ze.exports=function(e,t,n,i){var r,o=!!i&&!!i.unsafe,s=!!i&&!!i.enumerable,a=!!i&&!!i.noTargetGet;"function"==typeof n&&("string"!=typeof t||Ct(n,"name")||kt(n,"name",t),(r=Tt(n)).source||(r.source=Vt.join("string"==typeof t?t:""))),e!==wt?(o?!a&&e[t]&&(s=!0):delete e[t],s?e[t]=n:kt(e,t,n)):s?e[t]=n:Ot(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&St(this).source||xt(this)}));var Et={},Pt=Math.ceil,It=Math.floor,Lt=function(e){return isNaN(e=+e)?0:(e>0?It:Pt)(e)},jt=Lt,Rt=Math.min,At=function(e){return e>0?Rt(jt(e),9007199254740991):0},Dt=Lt,Mt=Math.max,Bt=Math.min,Nt=function(e,t){var n=Dt(e);return n<0?Mt(n+t,0):Bt(n,t)},Ht=k,Ft=At,Ut=Nt,$t=function(e){return function(t,n,i){var r,o=Ht(t),s=Ft(o.length),a=Ut(i,s);if(e&&n!=n){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===n)return e||a||0;return!e&&-1}},Wt={includes:$t(!0),indexOf:$t(!1)},zt=Q,qt=k,Gt=Wt.indexOf,Kt=ot,Yt=function(e,t){var n,i=qt(e),r=0,o=[];for(n in i)!zt(Kt,n)&&zt(i,n)&&o.push(n);for(;t.length>r;)zt(i,n=t[r++])&&(~Gt(o,n)||o.push(n));return o},Zt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Xt=Yt,Jt=Zt.concat("length","prototype");Et.f=Object.getOwnPropertyNames||function(e){return Xt(e,Jt)};var Qt={};Qt.f=Object.getOwnPropertySymbols;var en,tn=Et,nn=Qt,rn=De,on=S("Reflect","ownKeys")||function(e){var t=tn.f(rn(e)),n=nn.f;return n?t.concat(n(e)):t},sn=Q,an=on,cn=i,un=Re,ln=o,hn=/#|\.prototype\./,fn=function(e,t){var n=pn[dn(e)];return n==gn||n!=vn&&("function"==typeof t?ln(t):!!t)},dn=fn.normalize=function(e){return String(e).replace(hn,".").toLowerCase()},pn=fn.data={},vn=fn.NATIVE="N",gn=fn.POLYFILL="P",yn=fn,mn=r,_n=i.f,bn=We,wn=ze.exports,kn=W,Cn=function(e,t){for(var n=an(t),i=un.f,r=cn.f,o=0;o<n.length;o++){var s=n[o];sn(e,s)||i(e,s,r(t,s))}},On=yn,xn=function(e,t){var n,i,r,o,s,a=e.target,c=e.global,l=e.stat;if(n=c?mn:l?mn[a]||kn(a,{}):(mn[a]||{}).prototype)for(i in t){if(o=t[i],r=e.noTargetGet?(s=_n(n,i))&&s.value:n[i],!On(c?i:a+(l?".":"#")+i,e.forced)&&void 0!==r){if(typeof o==typeof r)continue;Cn(o,r)}(e.sham||r&&r.sham)&&bn(o,"sham",!0),wn(n,i,o,e)}},Sn=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},Tn=Yt,Vn=Zt,En=Object.keys||function(e){return Tn(e,Vn)},Pn=Re,In=De,Ln=En,jn=c?Object.defineProperties:function(e,t){In(e);for(var n,i=Ln(t),r=i.length,o=0;r>o;)Pn.f(e,n=i[o++],t[n]);return e},Rn=S("document","documentElement"),An=De,Dn=jn,Mn=Zt,Bn=ot,Nn=Rn,Hn=Ce,Fn=rt("IE_PROTO"),Un=function(){},$n=function(e){return"<script>"+e+"<\/script>"},Wn=function(e){e.write($n("")),e.close();var t=e.parentWindow.Object;return e=null,t},zn=function(){try{en=new ActiveXObject("htmlfile")}catch(e){}var e,t;zn="undefined"!=typeof document?document.domain&&en?Wn(en):((t=Hn("iframe")).style.display="none",Nn.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write($n("document.F=Object")),e.close(),e.F):Wn(en);for(var n=Mn.length;n--;)delete zn.prototype[Mn[n]];return zn()};Bn[Fn]=!0;var qn=Object.create||function(e,t){var n;return null!==e?(Un.prototype=An(e),n=new Un,Un.prototype=null,n[Fn]=e):n=zn(),void 0===t?n:Dn(n,t)},Gn=Sn,Kn=C,Yn=[].slice,Zn={},Xn=function(e,t,n){if(!(t in Zn)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";Zn[t]=Function("C,a","return new C("+i.join(",")+")")}return Zn[t](e,n)},Jn=Function.bind||function(e){var t=Gn(this),n=Yn.call(arguments,1),i=function(){var r=n.concat(Yn.call(arguments));return this instanceof i?Xn(t,r.length,r):t.apply(e,r)};return Kn(t.prototype)&&(i.prototype=t.prototype),i},Qn=xn,ei=Sn,ti=De,ni=C,ii=qn,ri=Jn,oi=o,si=S("Reflect","construct"),ai=oi((function(){function e(){}return!(si((function(){}),[],e)instanceof e)})),ci=!oi((function(){si((function(){}))})),li=ai||ci;function ui(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hi(e,t){return(hi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hi(e,t)}function di(e){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vi(e,t){if(t&&("object"===di(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pi(e)}function gi(e){return(gi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Qn({target:"Reflect",stat:!0,forced:li,sham:li},{construct:function(e,t){ei(e),ti(t);var n=arguments.length<3?e:ei(arguments[2]);if(ci&&!ai)return si(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(ri.apply(e,i))}var r=n.prototype,o=ii(ni(r)?r:Object.prototype),s=Function.apply.call(e,o,t);return ni(s)?s:o}});var mi=p,_i=Array.isArray||function(e){return"Array"==mi(e)},bi=H,wi=function(e){if(bi(e))throw TypeError("Cannot convert a Symbol value to a string");return String(e)},ki={},Ci=k,Oi=Et.f,xi={}.toString,Si="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];ki.f=function(e){return Si&&"[object Window]"==xi.call(e)?function(e){try{return Oi(e)}catch(e){return Si.slice()}}(e):Oi(Ci(e))};var Ti={},Vi=fe;Ti.f=Vi;var Ei=r,Pi=Q,Ii=Ti,Li=Re.f,ji=Re.f,Ri=Q,Ai=fe("toStringTag"),Di=function(e,t,n){e&&!Ri(e=n?e:e.prototype,Ai)&&ji(e,Ai,{configurable:!0,value:t})},Mi=Sn,Bi=function(e,t,n){if(Mi(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},Ni=C,Hi=_i,Fi=fe("species"),Ui=function(e,t){return new(function(e){var t;return Hi(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!Hi(t.prototype)?Ni(t)&&null===(t=t[Fi])&&(t=void 0):t=void 0),void 0===t?Array:t}(e))(0===t?0:t)},$i=Bi,Wi=m,zi=q,qi=At,Gi=Ui,Ki=[].push,Yi=function(e){var t=1==e,n=2==e,i=3==e,r=4==e,o=6==e,s=7==e,a=5==e||o;return function(c,l,u,h){for(var f,d,p=zi(c),v=Wi(p),g=$i(l,u,3),y=qi(v.length),m=0,_=h||Gi,b=t?_(c,y):n||s?_(c,0):void 0;y>m;m++)if((a||m in v)&&(d=g(f=v[m],m,p),e))if(t)b[m]=d;else if(d)switch(e){case 3:return!0;case 5:return f;case 6:return m;case 2:Ki.call(b,f)}else switch(e){case 4:return!1;case 7:Ki.call(b,f)}return o?-1:i||r?r:b}},Zi={forEach:Yi(0),map:Yi(1),filter:Yi(2),some:Yi(3),every:Yi(4),find:Yi(5),findIndex:Yi(6),filterReject:Yi(7)},Xi=xn,Ji=r,Qi=S,tr=c,er=M,nr=o,ir=Q,rr=_i,or=C,sr=H,ar=De,cr=q,ur=k,hr=_e,lr=wi,fr=d,dr=qn,pr=En,vr=Et,gr=ki,yr=Qt,mr=i,br=Re,_r=s,wr=We,kr=ze.exports,Cr=U.exports,Or=ot,xr=ne,Sr=fe,Tr=Ti,Vr=Di,Er=bt,Pr=Zi.forEach,Ir=rt("hidden"),Lr="Symbol",jr=Sr("toPrimitive"),Rr=Er.set,Ar=Er.getterFor(Lr),Dr=Object.prototype,Mr=Ji.Symbol,Br=Qi("JSON","stringify"),Nr=mr.f,Hr=br.f,Fr=gr.f,Ur=_r.f,$r=Cr("symbols"),Wr=Cr("op-symbols"),zr=Cr("string-to-symbol-registry"),qr=Cr("symbol-to-string-registry"),Gr=Cr("wks"),Kr=Ji.QObject,Yr=!Kr||!Kr.prototype||!Kr.prototype.findChild,Zr=tr&&nr((function(){return 7!=dr(Hr({},"a",{get:function(){return Hr(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=Nr(Dr,t);i&&delete Dr[t],Hr(e,t,n),i&&e!==Dr&&Hr(Dr,t,i)}:Hr,Xr=function(e,t){var n=$r[e]=dr(Mr.prototype);return Rr(n,{type:Lr,tag:e,description:t}),tr||(n.description=t),n},Jr=function(e,t,n){e===Dr&&Jr(Wr,t,n),ar(e);var i=hr(t);return ar(n),ir($r,i)?(n.enumerable?(ir(e,Ir)&&e[Ir][i]&&(e[Ir][i]=!1),n=dr(n,{enumerable:fr(0,!1)})):(ir(e,Ir)||Hr(e,Ir,fr(1,{})),e[Ir][i]=!0),Zr(e,i,n)):Hr(e,i,n)},Qr=function(e,t){ar(e);var n=ur(t),i=pr(n).concat(io(n));return Pr(i,(function(t){tr&&!eo.call(n,t)||Jr(e,t,n[t])})),e},eo=function(e){var t=hr(e),n=Ur.call(this,t);return!(this===Dr&&ir($r,t)&&!ir(Wr,t))&&(!(n||!ir(this,t)||!ir($r,t)||ir(this,Ir)&&this[Ir][t])||n)},to=function(e,t){var n=ur(e),i=hr(t);if(n!==Dr||!ir($r,i)||ir(Wr,i)){var r=Nr(n,i);return!r||!ir($r,i)||ir(n,Ir)&&n[Ir][i]||(r.enumerable=!0),r}},no=function(e){var t=Fr(ur(e)),n=[];return Pr(t,(function(e){ir($r,e)||ir(Or,e)||n.push(e)})),n},io=function(e){var t=e===Dr,n=Fr(t?Wr:ur(e)),i=[];return Pr(n,(function(e){!ir($r,e)||t&&!ir(Dr,e)||i.push($r[e])})),i};er||(kr((Mr=function(){if(this instanceof Mr)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?lr(arguments[0]):void 0,t=xr(e),n=function(e){this===Dr&&n.call(Wr,e),ir(this,Ir)&&ir(this[Ir],t)&&(this[Ir][t]=!1),Zr(this,t,fr(1,e))};return tr&&Yr&&Zr(Dr,t,{configurable:!0,set:n}),Xr(t,e)}).prototype,"toString",(function(){return Ar(this).tag})),kr(Mr,"withoutSetter",(function(e){return Xr(xr(e),e)})),_r.f=eo,br.f=Jr,mr.f=to,vr.f=gr.f=no,yr.f=io,Tr.f=function(e){return Xr(Sr(e),e)},tr&&(Hr(Mr.prototype,"description",{configurable:!0,get:function(){return Ar(this).description}}),kr(Dr,"propertyIsEnumerable",eo,{unsafe:!0}))),Xi({global:!0,wrap:!0,forced:!er,sham:!er},{Symbol:Mr}),Pr(pr(Gr),(function(e){!function(e){var t=Ei.Symbol||(Ei.Symbol={});Pi(t,e)||Li(t,e,{value:Ii.f(e)})}(e)})),Xi({target:Lr,stat:!0,forced:!er},{for:function(e){var t=lr(e);if(ir(zr,t))return zr[t];var n=Mr(t);return zr[t]=n,qr[n]=t,n},keyFor:function(e){if(!sr(e))throw TypeError(e+" is not a symbol");if(ir(qr,e))return qr[e]},useSetter:function(){Yr=!0},useSimple:function(){Yr=!1}}),Xi({target:"Object",stat:!0,forced:!er,sham:!tr},{create:function(e,t){return void 0===t?dr(e):Qr(dr(e),t)},defineProperty:Jr,defineProperties:Qr,getOwnPropertyDescriptor:to}),Xi({target:"Object",stat:!0,forced:!er},{getOwnPropertyNames:no,getOwnPropertySymbols:io}),Xi({target:"Object",stat:!0,forced:nr((function(){yr.f(1)}))},{getOwnPropertySymbols:function(e){return yr.f(cr(e))}}),Br&&Xi({target:"JSON",stat:!0,forced:!er||nr((function(){var e=Mr();return"[null]"!=Br([e])||"{}"!=Br({a:e})||"{}"!=Br(Object(e))}))},{stringify:function(e,t,n){for(var i,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(i=t,(or(t)||void 0!==e)&&!sr(e))return rr(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!sr(t))return t}),r[1]=t,Br.apply(null,r)}}),Mr.prototype[jr]||wr(Mr.prototype,jr,Mr.prototype.valueOf),Vr(Mr,Lr),Or[Ir]=!0;var ro=xn,oo=o,so=k,ao=i.f,co=c,uo=oo((function(){ao(1)}));ro({target:"Object",stat:!0,forced:!co||uo,sham:!co},{getOwnPropertyDescriptor:function(e,t){return ao(so(e),t)}});var lo=_e,ho=Re,fo=d,po=function(e,t,n){var i=lo(t);i in e?ho.f(e,i,fo(0,n)):e[i]=n},vo=on,go=k,yo=i,mo=po;function _o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bo(e,t,n){return t&&_o(e.prototype,t),n&&_o(e,n),e}function wo(e,t,n){return(wo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gi(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}xn({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(e){for(var t,n,i=go(e),r=yo.f,o=vo(i),s={},a=0;o.length>a;)void 0!==(n=r(i,t=o[a++]))&&mo(s,t,n);return s}});var ko=qn,Co=Re,Oo=fe("unscopables"),xo=Array.prototype;null==xo[Oo]&&Co.f(xo,Oo,{configurable:!0,value:ko(null)});var So=function(e){xo[Oo][e]=!0},To=xn,Vo=Zi.find,Eo=So,Po=!0;"find"in[]&&Array(1).find((function(){Po=!1})),To({target:"Array",proto:!0,forced:Po},{find:function(e){return Vo(this,e,arguments.length>1?arguments[1]:void 0)}}),Eo("find");var Io=o,Lo=R,jo=fe("species"),Ro=function(e){return Lo>=51||!Io((function(){var t=[];return(t.constructor={})[jo]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Ao=xn,Do=o,Mo=_i,Bo=C,No=q,Ho=At,Fo=po,Uo=Ui,$o=Ro,Wo=R,zo=fe("isConcatSpreadable"),qo=9007199254740991,Go="Maximum allowed index exceeded",Ko=Wo>=51||!Do((function(){var e=[];return e[zo]=!1,e.concat()[0]!==e})),Yo=$o("concat"),Zo=function(e){if(!Bo(e))return!1;var t=e[zo];return void 0!==t?!!t:Mo(e)};Ao({target:"Array",proto:!0,forced:!Ko||!Yo},{concat:function(e){var t,n,i,r,o,s=No(this),a=Uo(s,0),c=0;for(t=-1,i=arguments.length;t<i;t++)if(Zo(o=-1===t?s:arguments[t])){if(c+(r=Ho(o.length))>qo)throw TypeError(Go);for(n=0;n<r;n++,c++)n in o&&Fo(a,c,o[n])}else{if(c>=qo)throw TypeError(Go);Fo(a,c++,o)}return a.length=c,a}});var Xo={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Jo=o,Qo=function(e,t){var n=[][e];return!!n&&Jo((function(){n.call(null,t||function(){throw 1},1)}))},es=Zi.forEach,ts=r,ns=Xo,is=Qo("forEach")?[].forEach:function(e){return es(this,e,arguments.length>1?arguments[1]:void 0)},rs=We;for(var os in ns){var ss=ts[os],as=ss&&ss.prototype;if(as&&as.forEach!==is)try{rs(as,"forEach",is)}catch(e){as.forEach=is}}var cs=q,us=En;xn({target:"Object",stat:!0,forced:o((function(){us(1)}))},{keys:function(e){return us(cs(e))}});var ls=xn,hs=C,fs=_i,ds=Nt,ps=At,vs=k,gs=po,ys=fe,ms=Ro("slice"),_s=ys("species"),bs=[].slice,ws=Math.max;ls({target:"Array",proto:!0,forced:!ms},{slice:function(e,t){var n,i,r,o=vs(this),s=ps(o.length),a=ds(e,s),c=ds(void 0===t?s:t,s);if(fs(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!fs(n.prototype)?hs(n)&&null===(n=n[_s])&&(n=void 0):n=void 0,n===Array||void 0===n))return bs.call(o,a,c);for(i=new(void 0===n?Array:n)(ws(c-a,0)),r=0;a<c;a++,r++)a in o&&gs(i,r,o[a]);return i.length=r,i}});var ks=De,Cs=function(){var e=ks(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Os={},xs=o,Ss=r.RegExp;Os.UNSUPPORTED_Y=xs((function(){var e=Ss("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Os.BROKEN_CARET=xs((function(){var e=Ss("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));var Ts=o,Vs=r.RegExp,Es=Ts((function(){var e=Vs(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),Ps=o,Is=r.RegExp,Ls=Ps((function(){var e=Is("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),js=wi,Rs=Cs,As=Os,Ds=U.exports,Ms=qn,Bs=bt.get,Ns=Es,Hs=Ls,Fs=RegExp.prototype.exec,Us=Ds("native-string-replace",String.prototype.replace),$s=Fs,Ws=function(){var e=/a/,t=/b*/g;return Fs.call(e,"a"),Fs.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),zs=As.UNSUPPORTED_Y||As.BROKEN_CARET,qs=void 0!==/()??/.exec("")[1];(Ws||qs||zs||Ns||Hs)&&($s=function(e){var t,n,i,r,o,s,a,c=this,l=Bs(c),u=js(e),h=l.raw;if(h)return h.lastIndex=c.lastIndex,t=$s.call(h,u),c.lastIndex=h.lastIndex,t;var f=l.groups,d=zs&&c.sticky,p=Rs.call(c),v=c.source,g=0,y=u;if(d&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),y=u.slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==u.charAt(c.lastIndex-1))&&(v="(?: "+v+")",y=" "+y,g++),n=new RegExp("^(?:"+v+")",p)),qs&&(n=new RegExp("^"+v+"$(?!\\s)",p)),Ws&&(i=c.lastIndex),r=Fs.call(d?n:c,y),d?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=c.lastIndex,c.lastIndex+=r[0].length):c.lastIndex=0:Ws&&r&&(c.lastIndex=c.global?r.index+r[0].length:i),qs&&r&&r.length>1&&Us.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r&&f)for(r.groups=s=Ms(null),o=0;o<f.length;o++)s[(a=f[o])[0]]=r[a[1]];return r});var Gs=$s;xn({target:"RegExp",proto:!0,forced:/./.exec!==Gs},{exec:Gs});var Ks=ze.exports,Ys=Gs,Zs=o,Xs=fe,Js=We,Qs=Xs("species"),ea=RegExp.prototype,ta=function(e,t,n,i){var r=Xs(e),o=!Zs((function(){var t={};return t[r]=function(){return 7},7!=""[e](t)})),s=o&&!Zs((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Qs]=function(){return n},n.flags="",n[r]=/./[r]),n.exec=function(){return t=!0,null},n[r](""),!t}));if(!o||!s||n){var a=/./[r],c=t(r,""[e],(function(e,t,n,i,r){var s=t.exec;return s===Ys||s===ea.exec?o&&!r?{done:!0,value:a.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}));Ks(String.prototype,e,c[0]),Ks(ea,r,c[1])}i&&Js(ea[r],"sham",!0)},na=C,ia=p,ra=fe("match"),oa=function(e){var t;return na(e)&&(void 0!==(t=e[ra])?!!t:"RegExp"==ia(e))},sa=De,aa=Sn,ca=fe("species"),ua=function(e,t){var n,i=sa(e).constructor;return void 0===i||null==(n=sa(i)[ca])?t:aa(n)},la=Lt,ha=wi,fa=_,da=function(e){return function(t,n){var i,r,o=ha(fa(t)),s=la(n),a=o.length;return s<0||s>=a?e?"":void 0:(i=o.charCodeAt(s))<55296||i>56319||s+1===a||(r=o.charCodeAt(s+1))<56320||r>57343?e?o.charAt(s):i:e?o.slice(s,s+2):r-56320+(i-55296<<10)+65536}},pa={codeAt:da(!1),charAt:da(!0)},va=pa.charAt,ga=function(e,t,n){return t+(n?va(e,t).length:1)},ya=p,ma=Gs,_a=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==ya(e))throw TypeError("RegExp#exec called on incompatible receiver");return ma.call(e,t)},ba=ta,wa=oa,ka=De,Ca=_,Oa=ua,xa=ga,Sa=At,Ta=wi,Va=_a,Ea=Gs,Pa=o,Ia=Os.UNSUPPORTED_Y,La=[].push,ja=Math.min,Ra=4294967295;ba("split",(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=Ta(Ca(this)),r=void 0===n?Ra:n>>>0;if(0===r)return[];if(void 0===e)return[i];if(!wa(e))return t.call(i,e,r);for(var o,s,a,c=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,h=new RegExp(e.source,l+"g");(o=Ea.call(h,i))&&!((s=h.lastIndex)>u&&(c.push(i.slice(u,o.index)),o.length>1&&o.index<i.length&&La.apply(c,o.slice(1)),a=o[0].length,u=s,c.length>=r));)h.lastIndex===o.index&&h.lastIndex++;return u===i.length?!a&&h.test("")||c.push(""):c.push(i.slice(u)),c.length>r?c.slice(0,r):c}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=Ca(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,r,n):i.call(Ta(r),t,n)},function(e,r){var o=ka(this),s=Ta(e),a=n(i,o,s,r,i!==t);if(a.done)return a.value;var c=Oa(o,RegExp),l=o.unicode,u=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(Ia?"g":"y"),h=new c(Ia?"^(?:"+o.source+")":o,u),f=void 0===r?Ra:r>>>0;if(0===f)return[];if(0===s.length)return null===Va(h,s)?[s]:[];for(var d=0,p=0,v=[];p<s.length;){h.lastIndex=Ia?0:p;var g,y=Va(h,Ia?s.slice(p):s);if(null===y||(g=ja(Sa(h.lastIndex+(Ia?p:0)),s.length))===d)p=xa(s,p,l);else{if(v.push(s.slice(d,p)),v.length===f)return v;for(var m=1;m<=y.length-1;m++)if(v.push(y[m]),v.length===f)return v;p=d=g}}return v.push(s.slice(d)),v}]}),!!Pa((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Ia);var Aa=xn,Da=k,Ma=[].join,Ba=m!=Object,Na=Qo("join",",");Aa({target:"Array",proto:!0,forced:Ba||!Na},{join:function(e){return Ma.call(Da(this),void 0===e?",":e)}});var Ha=xn,Fa=Nt,Ua=Lt,$a=At,Wa=q,za=Ui,qa=po,Ga=Ro("splice"),Ka=Math.max,Ya=Math.min,Za=9007199254740991,Xa="Maximum allowed length exceeded";Ha({target:"Array",proto:!0,forced:!Ga},{splice:function(e,t){var n,i,r,o,s,a,c=Wa(this),l=$a(c.length),u=Fa(e,l),h=arguments.length;if(0===h?n=i=0:1===h?(n=0,i=l-u):(n=h-2,i=Ya(Ka(Ua(t),0),l-u)),l+n-i>Za)throw TypeError(Xa);for(r=za(c,i),o=0;o<i;o++)(s=u+o)in c&&qa(r,o,c[s]);if(r.length=i,n<i){for(o=u;o<l-i;o++)a=o+n,(s=o+i)in c?c[a]=c[s]:delete c[a];for(o=l;o>l-i+n;o--)delete c[o-1]}else if(n>i)for(o=l-i;o>u;o--)a=o+n-1,(s=o+i-1)in c?c[a]=c[s]:delete c[a];for(o=0;o<n;o++)c[o+u]=arguments[o+2];return c.length=l-i+n,r}});var Ja={};Ja[fe("toStringTag")]="z";var Qa="[object z]"===String(Ja),ec=Qa,tc=p,nc=fe("toStringTag"),ic="Arguments"==tc(function(){return arguments}()),rc=ec?tc:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),nc))?n:ic?tc(t):"Object"==(i=tc(t))&&"function"==typeof t.callee?"Arguments":i},oc=rc,sc=Qa?{}.toString:function(){return"[object "+oc(this)+"]"},ac=Qa,cc=ze.exports,uc=sc;ac||cc(Object.prototype,"toString",uc,{unsafe:!0});var lc=r.Promise,hc=ze.exports,fc=function(e,t,n){for(var i in t)hc(e,i,t[i],n);return e},dc=C,pc=De,vc=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return pc(n),function(e){if(!dc(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(i),t?e.call(n,i):n.__proto__=i,n}}():void 0),gc=S,yc=Re,mc=c,_c=fe("species"),bc=function(e){var t=gc(e),n=yc.f;mc&&t&&!t[_c]&&n(t,_c,{configurable:!0,get:function(){return this}})},wc=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},kc={},Cc=kc,Oc=fe("iterator"),xc=Array.prototype,Sc=function(e){return void 0!==e&&(Cc.Array===e||xc[Oc]===e)},Tc=rc,Vc=kc,Ec=fe("iterator"),Pc=function(e){if(null!=e)return e[Ec]||e["@@iterator"]||Vc[Tc(e)]},Ic=De,Lc=function(e){var t=e.return;if(void 0!==t)return Ic(t.call(e)).value},jc=De,Rc=Sc,Ac=At,Dc=Bi,Mc=Pc,Bc=Lc,Nc=function(e,t){this.stopped=e,this.result=t},Hc=fe("iterator"),Fc=!1;try{var Uc=0,$c={next:function(){return{done:!!Uc++}},return:function(){Fc=!0}};$c[Hc]=function(){return this},Array.from($c,(function(){throw 2}))}catch(e){}var Wc,zc,qc,Gc,Kc=/(?:ipad|iphone|ipod).*applewebkit/i.test(T),Yc="process"==p(r.process),Zc=r,Xc=o,Jc=Bi,Qc=Rn,eu=Ce,ol=Kc,tu=Yc,nu=Zc.setImmediate,iu=Zc.clearImmediate,ru=Zc.process,ul=Zc.MessageChannel,ou=Zc.Dispatch,su=0,dl={};try{Wc=Zc.location}catch(e){}var au=function(e){if(dl.hasOwnProperty(e)){var t=dl[e];delete dl[e],t()}},cu=function(e){return function(){au(e)}},uu=function(e){au(e.data)},lu=function(e){Zc.postMessage(String(e),Wc.protocol+"//"+Wc.host)};nu&&iu||(nu=function(e){for(var t=[],n=arguments.length,i=1;n>i;)t.push(arguments[i++]);return dl[++su]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},zc(su),su},iu=function(e){delete dl[e]},tu?zc=function(e){ru.nextTick(cu(e))}:ou&&ou.now?zc=function(e){ou.now(cu(e))}:ul&&!ol?(Gc=(qc=new ul).port2,qc.port1.onmessage=uu,zc=Jc(Gc.postMessage,Gc,1)):Zc.addEventListener&&"function"==typeof postMessage&&!Zc.importScripts&&Wc&&"file:"!==Wc.protocol&&!Xc(lu)?(zc=lu,Zc.addEventListener("message",uu,!1)):zc="onreadystatechange"in eu("script")?function(e){Qc.appendChild(eu("script")).onreadystatechange=function(){Qc.removeChild(this),au(e)}}:function(e){setTimeout(cu(e),0)});var hu,fu,du,pu,vu,gu,yu,mu,_u={set:nu,clear:iu},bu=r,wu=/ipad|iphone|ipod/i.test(T)&&void 0!==bu.Pebble,ku=/web0s(?!.*chrome)/i.test(T),Cu=r,Ou=i.f,xu=_u.set,Su=Kc,Tu=wu,Vu=ku,Eu=Yc,Pu=Cu.MutationObserver||Cu.WebKitMutationObserver,Iu=Cu.document,Lu=Cu.process,ju=Cu.Promise,Ru=Ou(Cu,"queueMicrotask"),Au=Ru&&Ru.value;Au||(hu=function(){var e,t;for(Eu&&(e=Lu.domain)&&e.exit();fu;){t=fu.fn,fu=fu.next;try{t()}catch(e){throw fu?pu():du=void 0,e}}du=void 0,e&&e.enter()},Su||Eu||Vu||!Pu||!Iu?!Tu&&ju&&ju.resolve?((yu=ju.resolve(void 0)).constructor=ju,mu=yu.then,pu=function(){mu.call(yu,hu)}):pu=Eu?function(){Lu.nextTick(hu)}:function(){xu.call(Cu,hu)}:(vu=!0,gu=Iu.createTextNode(""),new Pu(hu).observe(gu,{characterData:!0}),pu=function(){gu.data=vu=!vu}));var Du=Au||function(e){var t={fn:e,next:void 0};du&&(du.next=t),fu||(fu=t,pu()),du=t},Mu={},Bu=Sn,Nu=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=Bu(t),this.reject=Bu(n)};Mu.f=function(e){return new Nu(e)};var Hu,Fu,Uu,$u,Wu=De,zu=C,qu=Mu,Gu=r,Ku="object"==typeof window,Yu=xn,Zu=r,Xu=S,Ju=lc,Qu=ze.exports,el=fc,tl=vc,nl=Di,il=bc,rl=C,sl=Sn,al=wc,cl=Xe,ll=function(e,t,n){var i,r,o,s,a,c,l,u=n&&n.that,h=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),p=Dc(t,u,1+h+d),v=function(e){return i&&Bc(i),new Nc(!0,e)},g=function(e){return h?(jc(e),d?p(e[0],e[1],v):p(e[0],e[1])):d?p(e,v):p(e)};if(f)i=e;else{if("function"!=typeof(r=Mc(e)))throw TypeError("Target is not iterable");if(Rc(r)){for(o=0,s=Ac(e.length);s>o;o++)if((a=g(e[o]))&&a instanceof Nc)return a;return new Nc(!1)}i=r.call(e)}for(c=i.next;!(l=c.call(i)).done;){try{a=g(l.value)}catch(e){throw Bc(i),e}if("object"==typeof a&&a&&a instanceof Nc)return a}return new Nc(!1)},hl=ua,fl=_u.set,pl=Du,vl=Mu,gl=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},yl=bt,ml=yn,_l=Ku,bl=Yc,wl=R,kl=fe("species"),Cl="Promise",Ol=yl.get,xl=yl.set,Sl=yl.getterFor(Cl),Tl=Ju&&Ju.prototype,Vl=Ju,El=Tl,Pl=Zu.TypeError,Il=Zu.document,Ll=Zu.process,jl=vl.f,Rl=jl,Al=!!(Il&&Il.createEvent&&Zu.dispatchEvent),Dl="function"==typeof PromiseRejectionEvent,Ml="unhandledrejection",Bl=!1,Nl=ml(Cl,(function(){var e=cl(Vl),t=e!==String(Vl);if(!t&&66===wl)return!0;if(wl>=51&&/native code/.test(e))return!1;var n=new Vl((function(e){e(1)})),i=function(e){e((function(){}),(function(){}))};return(n.constructor={})[kl]=i,!(Bl=n.then((function(){}))instanceof i)||!t&&_l&&!Dl})),Hl=Nl||!function(e,t){if(!t&&!Fc)return!1;var n=!1;try{var i={};i[Hc]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}((function(e){Vl.all(e).catch((function(){}))})),Fl=function(e){var t;return!(!rl(e)||"function"!=typeof(t=e.then))&&t},Ul=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;pl((function(){for(var i=e.value,r=1==e.state,o=0;n.length>o;){var s,a,c,l=n[o++],u=r?l.ok:l.fail,h=l.resolve,f=l.reject,d=l.domain;try{u?(r||(2===e.rejection&&ql(e),e.rejection=1),!0===u?s=i:(d&&d.enter(),s=u(i),d&&(d.exit(),c=!0)),s===l.promise?f(Pl("Promise-chain cycle")):(a=Fl(s))?a.call(s,h,f):h(s)):f(i)}catch(e){d&&!c&&d.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Wl(e)}))}},$l=function(e,t,n){var i,r;Al?((i=Il.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),Zu.dispatchEvent(i)):i={promise:t,reason:n},!Dl&&(r=Zu["on"+e])?r(i):e===Ml&&function(e,t){var n=Gu.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Wl=function(e){fl.call(Zu,(function(){var t,n=e.facade,i=e.value;if(zl(e)&&(t=gl((function(){bl?Ll.emit("unhandledRejection",i,n):$l(Ml,n,i)})),e.rejection=bl||zl(e)?2:1,t.error))throw t.value}))},zl=function(e){return 1!==e.rejection&&!e.parent},ql=function(e){fl.call(Zu,(function(){var t=e.facade;bl?Ll.emit("rejectionHandled",t):$l("rejectionhandled",t,e.value)}))},th=function(e,t,n){return function(i){e(t,i,n)}},Gl=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Ul(e,!0))},Kl=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Pl("Promise can't be resolved itself");var i=Fl(t);i?pl((function(){var n={done:!1};try{i.call(t,th(Kl,n,e),th(Gl,n,e))}catch(t){Gl(n,t,e)}})):(e.value=t,e.state=1,Ul(e,!1))}catch(t){Gl({done:!1},t,e)}}};if(Nl&&(El=(Vl=function(e){al(this,Vl,Cl),sl(e),Hu.call(this);var t=Ol(this);try{e(th(Kl,t),th(Gl,t))}catch(e){Gl(t,e)}}).prototype,(Hu=function(e){xl(this,{type:Cl,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=el(El,{then:function(e,t){var n=Sl(this),i=jl(hl(this,Vl));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=bl?Ll.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&Ul(n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),Fu=function(){var e=new Hu,t=Ol(e);this.promise=e,this.resolve=th(Kl,t),this.reject=th(Gl,t)},vl.f=jl=function(e){return e===Vl||e===Uu?new Fu(e):Rl(e)},"function"==typeof Ju&&Tl!==Object.prototype)){$u=Tl.then,Bl||(Qu(Tl,"then",(function(e,t){var n=this;return new Vl((function(e,t){$u.call(n,e,t)})).then(e,t)}),{unsafe:!0}),Qu(Tl,"catch",El.catch,{unsafe:!0}));try{delete Tl.constructor}catch(e){}tl&&tl(Tl,El)}Yu({global:!0,wrap:!0,forced:Nl},{Promise:Vl}),nl(Vl,Cl,!1),il(Cl),Uu=Xu(Cl),Yu({target:Cl,stat:!0,forced:Nl},{reject:function(e){var t=jl(this);return t.reject.call(void 0,e),t.promise}}),Yu({target:Cl,stat:!0,forced:Nl},{resolve:function(e){return function(e,t){if(Wu(e),zu(t)&&t.constructor===e)return t;var n=qu.f(e);return(0,n.resolve)(t),n.promise}(this,e)}}),Yu({target:Cl,stat:!0,forced:Hl},{all:function(e){var t=this,n=jl(t),i=n.resolve,r=n.reject,o=gl((function(){var n=sl(t.resolve),o=[],s=0,a=1;ll(e,(function(e){var c=s++,l=!1;o.push(void 0),a++,n.call(t,e).then((function(e){l||(l=!0,o[c]=e,--a||i(o))}),r)})),--a||i(o)}));return o.error&&r(o.value),n.promise},race:function(e){var t=this,n=jl(t),i=n.reject,r=gl((function(){var r=sl(t.resolve);ll(e,(function(e){r.call(t,e).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}});var Yl=c,Zl=Re.f,Xl=Function.prototype,Jl=Xl.toString,Ql=/^\s*function ([^ (]*)/;Yl&&!("name"in Xl)&&Zl(Xl,"name",{configurable:!0,get:function(){try{return Jl.call(this).match(Ql)[1]}catch(e){return""}}});var eh=C,nh=vc,ih=function(e,t,n){var i,r;return nh&&"function"==typeof(i=t.constructor)&&i!==n&&eh(r=i.prototype)&&r!==n.prototype&&nh(e,r),e},rh=_,oh=wi,sh="[\t\n\v\f\r                　\u2028\u2029\ufeff]",ah=RegExp("^"+sh+sh+"*"),ch=RegExp(sh+sh+"*$"),uh=function(e){return function(t){var n=oh(rh(t));return 1&e&&(n=n.replace(ah,"")),2&e&&(n=n.replace(ch,"")),n}},lh={start:uh(1),end:uh(2),trim:uh(3)},hh=c,fh=r,dh=yn,ph=ze.exports,vh=Q,gh=p,yh=ih,mh=H,_h=ge,bh=o,wh=qn,kh=Et.f,Ch=i.f,Oh=Re.f,xh=lh.trim,Sh="Number",Th=fh.Number,Vh=Th.prototype,Eh=gh(wh(Vh))==Sh,Ph=function(e){if(mh(e))throw TypeError("Cannot convert a Symbol value to a number");var t,n,i,r,o,s,a,c,l=_h(e,"number");if("string"==typeof l&&l.length>2)if(43===(t=(l=xh(l)).charCodeAt(0))||45===t){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+l}for(s=(o=l.slice(2)).length,a=0;a<s;a++)if((c=o.charCodeAt(a))<48||c>r)return NaN;return parseInt(o,i)}return+l};if(dh(Sh,!Th(" 0o1")||!Th("0b1")||Th("+0x1"))){for(var Ih,Lh=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof Lh&&(Eh?bh((function(){Vh.valueOf.call(n)})):gh(n)!=Sh)?yh(new Th(Ph(t)),n,Lh):Ph(t)},jh=hh?kh(Th):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Rh=0;jh.length>Rh;Rh++)vh(Th,Ih=jh[Rh])&&!vh(Lh,Ih)&&Oh(Lh,Ih,Ch(Th,Ih));Lh.prototype=Vh,Vh.constructor=Lh,ph(fh,Sh,Lh)}var Ah=Zi.map;xn({target:"Array",proto:!0,forced:!Ro("map")},{map:function(e){return Ah(this,e,arguments.length>1?arguments[1]:void 0)}});var Dh=Zi.filter;xn({target:"Array",proto:!0,forced:!Ro("filter")},{filter:function(e){return Dh(this,e,arguments.length>1?arguments[1]:void 0)}});var Mh=c,Bh=o,Nh=En,Hh=Qt,Fh=s,Uh=q,$h=m,Wh=Object.assign,zh=Object.defineProperty,qh=!Wh||Bh((function(){if(Mh&&1!==Wh({b:1},Wh(zh({},"a",{enumerable:!0,get:function(){zh(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=Wh({},e)[n]||Nh(Wh({},t)).join("")!=i}))?function(e,t){for(var n=Uh(e),i=arguments.length,r=1,o=Hh.f,s=Fh.f;i>r;)for(var a,c=$h(arguments[r++]),l=o?Nh(c).concat(o(c)):Nh(c),u=l.length,h=0;u>h;)a=l[h++],Mh&&!s.call(c,a)||(n[a]=c[a]);return n}:Wh,Gh=qh;xn({target:"Object",stat:!0,forced:Object.assign!==Gh},{assign:Gh});var Kh={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,o||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},a.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},a.prototype.emit=function(e,t,i,r,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,r),!0;case 5:return u.fn.call(u.context,t,i,r,o),!0;case 6:return u.fn.call(u.context,t,i,r,o,s),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var f,d=u.length;for(l=0;l<d;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,i);break;case 4:u[l].fn.call(u[l].context,t,i,r);break;default:if(!c)for(f=1,c=new Array(h-1);f<h;f++)c[f-1]=arguments[f];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,i,r){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||r&&!a.once||i&&a.context!==i||s(this,o);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||r&&!a[c].once||i&&a[c].context!==i)&&l.push(a[c]);l.length?this._events[o]=1===l.length?l[0]:l:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}(Kh);var Yh=Kh.exports;function Zh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Xh(e){return function(e){if(Array.isArray(e))return Zh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Zh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zh(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Jh=De,Qh=At,ef=wi,tf=_,nf=ga,rf=_a;ta("match",(function(e,t,n){return[function(t){var n=tf(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](ef(n))},function(e){var i=Jh(this),r=ef(e),o=n(t,i,r);if(o.done)return o.value;if(!i.global)return rf(i,r);var s=i.unicode;i.lastIndex=0;for(var a,c=[],l=0;null!==(a=rf(i,r));){var u=ef(a[0]);c[l]=u,""===u&&(i.lastIndex=nf(r,Qh(i.lastIndex),s)),l++}return 0===l?null:c}]}));var of=c,sf=r,af=yn,cf=ih,uf=We,lf=Re.f,hf=Et.f,ff=oa,df=wi,pf=Cs,vf=Os,gf=ze.exports,yf=o,mf=Q,_f=bt.enforce,bf=bc,wf=Es,kf=Ls,Cf=fe("match"),Of=sf.RegExp,xf=Of.prototype,Sf=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Tf=/a/g,Vf=/a/g,Ef=new Of(Tf)!==Tf,Pf=vf.UNSUPPORTED_Y,If=of&&(!Ef||Pf||wf||kf||yf((function(){return Vf[Cf]=!1,Of(Tf)!=Tf||Of(Vf)==Vf||"/a/i"!=Of(Tf,"i")})));if(af("RegExp",If)){for(var Lf=function(e,t){var n,i,r,o,s,a,c=this instanceof Lf,l=ff(e),u=void 0===t,h=[],f=e;if(!c&&l&&u&&e.constructor===Lf)return e;if((l||e instanceof Lf)&&(e=e.source,u&&(t="flags"in f?f.flags:pf.call(f))),e=void 0===e?"":df(e),t=void 0===t?"":df(t),f=e,wf&&"dotAll"in Tf&&(i=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),n=t,Pf&&"sticky"in Tf&&(r=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),kf&&(e=(o=function(e){for(var t,n=e.length,i=0,r="",o=[],s={},a=!1,c=!1,l=0,u="";i<=n;i++){if("\\"===(t=e.charAt(i)))t+=e.charAt(++i);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:Sf.test(e.slice(i+1))&&(i+=2,c=!0),r+=t,l++;continue;case">"===t&&c:if(""===u||mf(s,u))throw new SyntaxError("Invalid capture group name");s[u]=!0,o.push([u,l]),c=!1,u="";continue}c?u+=t:r+=t}return[r,o]}(e))[0],h=o[1]),s=cf(Of(e,t),c?this:xf,Lf),(i||r||h.length)&&(a=_f(s),i&&(a.dotAll=!0,a.raw=Lf(function(e){for(var t,n=e.length,i=0,r="",o=!1;i<=n;i++)"\\"!==(t=e.charAt(i))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),r+=t):r+="[\\s\\S]":r+=t+e.charAt(++i);return r}(e),n)),r&&(a.sticky=!0),h.length&&(a.groups=h)),e!==f)try{uf(s,"source",""===f?"(?:)":f)}catch(e){}return s},jf=function(e){e in Lf||lf(Lf,e,{configurable:!0,get:function(){return Of[e]},set:function(t){Of[e]=t}})},Rf=hf(Of),Af=0;Rf.length>Af;)jf(Rf[Af++]);xf.constructor=Lf,Lf.prototype=xf,gf(sf,"RegExp",Lf)}bf("RegExp");var Df=ze.exports,Mf=De,Bf=wi,Nf=o,Hf=Cs,Ff="toString",Uf=RegExp.prototype,$f=Uf.toString,Wf=Nf((function(){return"/a/b"!=$f.call({source:"a",flags:"b"})})),td=$f.name!=Ff;(Wf||td)&&Df(RegExp.prototype,Ff,(function(){var e=Mf(this),t=Bf(e.source),n=e.flags;return"/"+t+"/"+Bf(void 0===n&&e instanceof RegExp&&!("flags"in Uf)?Hf.call(e):n)}),{unsafe:!0});var zf=o,qf="\t\n\v\f\r                　\u2028\u2029\ufeff",Gf=lh.trim;xn({target:"String",proto:!0,forced:function(e){return zf((function(){return!!qf[e]()||"​᠎"!="​᠎"[e]()||qf[e].name!==e}))}("trim")},{trim:function(){return Gf(this)}});var Kf=q,Yf=Math.floor,Zf="".replace,Xf=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Jf=/\$([$&'`]|\d{1,2})/g,Qf=ta,ed=o,nd=De,dd=Lt,id=At,rd=wi,od=_,sd=ga,ad=function(e,t,n,i,r,o){var s=n+e.length,a=i.length,c=Jf;return void 0!==r&&(r=Kf(r),c=Xf),Zf.call(o,c,(function(o,c){var l;switch(c.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(s);case"<":l=r[c.slice(1,-1)];break;default:var u=+c;if(0===u)return o;if(u>a){var h=Yf(u/10);return 0===h?o:h<=a?void 0===i[h-1]?c.charAt(1):i[h-1]+c.charAt(1):o}l=i[u-1]}return void 0===l?"":l}))},cd=_a,ud=fe("replace"),ld=Math.max,hd=Math.min,fd="$0"==="a".replace(/./,"$0"),pd=!!/./[ud]&&""===/./[ud]("a","$0");Qf("replace",(function(e,t,n){var i=pd?"$":"$0";return[function(e,n){var i=od(this),r=null==e?void 0:e[ud];return void 0!==r?r.call(e,i,n):t.call(rd(i),e,n)},function(e,r){var o=nd(this),s=rd(e);if("string"==typeof r&&-1===r.indexOf(i)&&-1===r.indexOf("$<")){var a=n(t,o,s,r);if(a.done)return a.value}var c="function"==typeof r;c||(r=rd(r));var l=o.global;if(l){var u=o.unicode;o.lastIndex=0}for(var h=[];;){var f=cd(o,s);if(null===f)break;if(h.push(f),!l)break;""===rd(f[0])&&(o.lastIndex=sd(s,id(o.lastIndex),u))}for(var d,p="",v=0,g=0;g<h.length;g++){f=h[g];for(var y=rd(f[0]),m=ld(hd(dd(f.index),s.length),0),_=[],b=1;b<f.length;b++)_.push(void 0===(d=f[b])?d:String(d));var w=f.groups;if(c){var k=[y].concat(_,m,s);void 0!==w&&k.push(w);var C=rd(r.apply(void 0,k))}else C=ad(y,s,m,_,w,r);m>=v&&(p+=s.slice(v,m)+C,v=m+y.length)}return p+s.slice(v)}]}),!!ed((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!fd||pd);var vd=Math.floor,gd=function(e,t){var n=e.length,i=vd(n/2);return n<8?yd(e,t):md(gd(e.slice(0,i),t),gd(e.slice(i),t),t)},yd=function(e,t){for(var n,i,r=e.length,o=1;o<r;){for(i=o,n=e[o];i&&t(e[i-1],n)>0;)e[i]=e[--i];i!==o++&&(e[i]=n)}return e},md=function(e,t,n){for(var i=e.length,r=t.length,o=0,s=0,a=[];o<i||s<r;)o<i&&s<r?a.push(n(e[o],t[s])<=0?e[o++]:t[s++]):a.push(o<i?e[o++]:t[s++]);return a},_d=gd,bd=T.match(/firefox\/(\d+)/i),wd=!!bd&&+bd[1],kd=/MSIE|Trident/.test(T),Cd=T.match(/AppleWebKit\/(\d+)\./),Od=!!Cd&&+Cd[1],xd=xn,Sd=Sn,Td=q,Vd=At,Ed=wi,Pd=o,Id=_d,Ld=Qo,jd=wd,Rd=kd,Ad=R,Dd=Od,Md=[],Bd=Md.sort,Nd=Pd((function(){Md.sort(void 0)})),Hd=Pd((function(){Md.sort(null)})),Fd=Ld("sort"),Ud=!Pd((function(){if(Ad)return Ad<70;if(!(jd&&jd>3)){if(Rd)return!0;if(Dd)return Dd<603;var e,t,n,i,r="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)Md.push({k:t+i,v:n})}for(Md.sort((function(e,t){return t.v-e.v})),i=0;i<Md.length;i++)t=Md[i].k.charAt(0),r.charAt(r.length-1)!==t&&(r+=t);return"DGBEFHACIJK"!==r}}));xd({target:"Array",proto:!0,forced:Nd||!Hd||!Fd||!Ud},{sort:function(e){void 0!==e&&Sd(e);var t=Td(this);if(Ud)return void 0===e?Bd.call(t):Bd.call(t,e);var n,i,r=[],o=Vd(t.length);for(i=0;i<o;i++)i in t&&r.push(t[i]);for(n=(r=Id(r,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Ed(t)>Ed(n)?1:-1}}(e))).length,i=0;i<n;)t[i]=r[i++];for(;i<o;)delete t[i++];return t}});var $d="undefined"!=typeof window&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,Wd={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},zd="%c[xgplayer]",qd={config:{debug:$d?3:1},logInfo:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.config.debug>=3&&(t=console).log.apply(t,[zd,Wd.info,e].concat(i))},logWarn:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.config.debug>=1&&(t=console).warn.apply(t,[zd,Wd.warn,e].concat(i))},logError:function(e){var t;if(!(this.config.debug<1)){for(var n=this.config.debug>=2?"trace":"error",i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];(t=console)[n].apply(t,[zd,Wd.error,e].concat(r))}}},Gd=function(){function e(t){ui(this,e),this.bufferedList=t}return bo(e,[{key:"start",value:function(e){return this.bufferedList[e].start}},{key:"end",value:function(e){return this.bufferedList[e].end}},{key:"length",get:function(){return this.bufferedList.length}}]),e}(),rp={};function Kd(e,t){for(var n=0,i=t.length;n<i;n++)if(e.indexOf(t[n])>-1)return!0;return!1}rp.createDom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement(e);return r.className=i,r.innerHTML=t,Object.keys(n).forEach((function(t){var i=t,o=n[t];"video"===e||"audio"===e||"live-video"===e?o&&r.setAttribute(i,o):r.setAttribute(i,o)})),r},rp.createDomFromHtml=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var i=document.createElement("div");i.innerHTML=e;var r=i.children;return i=null,r.length>0?(r=r[0],n&&rp.addClass(r,n),t&&Object.keys(t).forEach((function(e){r.setAttribute(e,t[e])})),r):null}catch(e){return qd.logError("util.createDomFromHtml",e),null}},rp.hasClass=function(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,(function(e){return e===t}))}catch(r){var n=e.className&&"object"===di(e.className)?e.getAttribute("class"):e.className;return n&&!!n.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},rp.addClass=function(e,t){if(e&&t)try{t.trim().split(/\s+/g).forEach((function(t){t&&e.classList.add(t)}))}catch(n){rp.hasClass(e,t)||(e.className&&"object"===di(e.className)?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t)}},rp.removeClass=function(e,t){if(e&&t)try{t.trim().split(/\s+/g).forEach((function(t){t&&e.classList.remove(t)}))}catch(n){rp.hasClass(e,t)&&t.split(/\s+/g).forEach((function(t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className&&"object"===di(e.className)?e.setAttribute("class",e.getAttribute("class").replace(n," ")):e.className=e.className.replace(n," ")}))}},rp.toggleClass=function(e,t){e&&t.split(/\s+/g).forEach((function(t){rp.hasClass(e,t)?rp.removeClass(e,t):rp.addClass(e,t)}))},rp.classNames=function(){for(var e=arguments,t=[],n=function(n){"String"===rp.typeOf(e[n])?t.push(e[n]):"Object"===rp.typeOf(e[n])&&Object.keys(e[n]).map((function(i){e[n][i]&&t.push(i)}))},i=0;i<arguments.length;i++)n(i);return t.join(" ")},rp.findDom=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1?arguments[1]:void 0;try{e=t.querySelector(n)}catch(r){qd.logError("util.findDom",r),0===n.indexOf("#")&&(e=t.getElementById(n.slice(1)))}return e},rp.getCss=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]},rp.padStart=function(e,t,n){for(var i=String(n),r=t>>0,o=Math.ceil(r/i.length),s=[],a=String(e);o--;)s.push(i);return s.join("").substring(0,r-a.length)+a},rp.format=function(e){if(window.isNaN(e))return"";e=Math.round(e);var t=rp.padStart(Math.floor(e/3600),2,0),n=rp.padStart(Math.floor((e-3600*t)/60),2,0),i=rp.padStart(Math.floor(e-3600*t-60*n),2,0);return("00"===t?[n,i]:[t,n,i]).join(":")},rp.event=function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement},rp.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},rp.deepCopy=function(e,t){if("Object"===rp.typeOf(t)&&"Object"===rp.typeOf(e))return Object.keys(t).forEach((function(n){"Object"!==rp.typeOf(t[n])||t[n]instanceof Node?"Array"===rp.typeOf(t[n])?e[n]="Array"===rp.typeOf(e[n])?e[n].concat(t[n]):t[n]:e[n]=t[n]:void 0===e[n]||void 0===e[n]?e[n]=t[n]:rp.deepCopy(e[n],t[n])})),e},rp.deepMerge=function(e,t){return Object.keys(t).map((function(n){var i;"Array"===rp.typeOf(t[n])&&"Array"===rp.typeOf(e[n])?"Array"===rp.typeOf(e[n])&&(i=e[n]).push.apply(i,Xh(t[n])):rp.typeOf(e[n])!==rp.typeOf(t[n])||null===e[n]||"Object"!==rp.typeOf(e[n])||t[n]instanceof window.Node?null!==t[n]&&(e[n]=t[n]):rp.deepMerge(e[n],t[n])})),e},rp.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||"none"===t)return"";var n=document.createElement("a");return n.href=t.replace(/url\("|"\)/g,""),n.href},rp.copyDom=function(e){if(e&&1===e.nodeType){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,(function(e){t.setAttribute(e.name,e.value)})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}return""},rp.setInterval=function(e,t,n,i){e._interval[t]||(e._interval[t]=setInterval(n.bind(e),i))},rp.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null},rp.setTimeout=function(e,t,n){e._timers||(e._timers=[]);var i=setTimeout((function(){t(),rp.clearTimeout(e,i)}),n);return e._timers.push(i),i},rp.clearTimeout=function(e,t){var n=e._timers;if("Array"===rp.typeOf(n)){for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1),clearTimeout(t);break}}else clearTimeout(t)},rp.clearAllTimers=function(e){var t=e._timers;"Array"===rp.typeOf(t)&&(t.map((function(e){clearTimeout(e)})),e._timerIds=[])},rp.createImgBtn=function(e,t,n,i){var r,o,s,a=rp.createDom("xg-".concat(e),"",{},"xgplayer-".concat(e,"-img"));return a.style.backgroundImage='url("'.concat(t,'")'),n&&i&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(e){return!(n.indexOf(e)>-1&&i.indexOf(e)>-1&&(r=parseFloat(n.slice(0,n.indexOf(e)).trim()),o=parseFloat(i.slice(0,i.indexOf(e)).trim()),s=e,1))})),a.style.width="".concat(r).concat(s),a.style.height="".concat(o).concat(s),a.style.backgroundSize="".concat(r).concat(s," ").concat(o).concat(s),a.style.margin="start"===e?"-".concat(o/2).concat(s," auto auto -").concat(r/2).concat(s):"auto 5px auto 5px"),a},rp.Hex2RGBA=function(e,t){var n=[];if(/^\#[0-9A-F]{3}$/i.test(e)){var i="#";e.replace(/[0-9A-F]/gi,(function(e){i+=e+e})),e=i}return/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/gi,(function(e){n.push(parseInt(e,16))})),"rgba(".concat(n.join(","),", ").concat(t,")")):"rgba(255, 255, 255, 0.1)"},rp.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},rp.checkIsFunction=function(e){return e&&"function"==typeof e},rp.checkIsObject=function(e){return null!==e&&"object"===di(e)},rp.hide=function(e){e.style.display="none"},rp.show=function(e,t){e.style.display=t||"block"},rp.isUndefined=function(e){if(null==e)return!0},rp.setStyleFromCsstext=function(e,t){t&&("String"===rp.typeOf(t)?t.replace(/\s+/g,"").split(";").map((function(t){if(t){var n=t.split(":");n.length>1&&(e.style[n[0]]=n[1])}})):Object.keys(t).map((function(n){e.style[n]=t[n]})))},rp.filterStyleFromText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=e.style.cssText;if(!n)return{};var i=n.replace(/\s+/g,"").split(";"),r={},o={};return i.map((function(e){if(e){var n=e.split(":");n.length>1&&(Kd(n[0],t)?r[n[0]]=n[1]:o[n[0]]=n[1])}})),e.setAttribute("style",""),Object.keys(o).map((function(t){e.style[t]=o[t]})),r},rp.getStyleFromCsstext=function(e){var t=e.style.cssText;if(!t)return{};var n=t.replace(/\s+/g,"").split(";"),i={};return n.map((function(e){if(e){var t=e.split(":");t.length>1&&(i[t[0]]=t[1])}})),i},rp.preloadImg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){var i=new window.Image;i.complete?t&&t():(i.onload=function(e){i=null,t&&t(e)},i.onerror=function(e){i=null,n&&n(e)}),i.src=e}},rp.stopPropagation=function(e){e&&(e.stopPropagation(),e.cancelable&&e.preventDefault())},rp.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},rp.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},rp.checkTouchSupport=function(){return"ontouchstart"in window},rp.getBuffered2=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=[],i=0;i<e.length;i++)n.push({start:e.start(i)<.5?0:e.start(i),end:e.end(i)});n.sort((function(e,t){return e.start-t.start||t.end-e.end}));var r=[];if(t)for(var o=0;o<n.length;o++){var s=r.length;if(s){var a=r[s-1].end;n[o].start-a<t?n[o].end>a&&(r[s-1].end=n[o].end):r.push(n[o])}else r.push(n[o])}else r=n;return new Gd(r)},rp.getEventPos=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{x:e.x/t,y:e.y/t,clientX:e.clientX/t,clientY:e.clientY/t,offsetX:e.offsetX/t,offsetY:e.offsetY/t,pageX:e.pageX/t,pageY:e.pageY/t}},rp.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e)},rp.getHostFromUrl=function(e){if(null==e||""===e||"string"!=typeof e)return"";var t=e.split("/"),n="";return t.length>3&&t[2]&&(n=t[2]),n},rp.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;t&&t(e)};var Yd=rp,Zd=/(Android)\s([\d.]+)/,Xd=/(Version)\/([\d.]+)/,Jd=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],Qd={get device(){return Qd.os.isPc?"pc":"mobile"},get browser(){if("undefined"==typeof navigator)return"";var e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter((function(n){return t[n].test(e)})))[0]},get os(){if("undefined"==typeof navigator)return{};var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,i=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),o=/(?:iPad|PlayBook)/.test(e)||i&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!o,a=!(s||i||n||o),c=/(?:iPad|PlayBook)/.test(e);return{isTablet:o,isPhone:s,isIpad:c,isIos:s||c,isAndroid:i,isPc:a,isSymbian:n,isWindowsPhone:t,isFireFox:r}},get osVersion(){var e=navigator.userAgent,t="",n=(t=/(?:iPhone)|(?:iPad|PlayBook)/.test(e)?Xd:Zd)?t.exec(e):[];if(n&&n.length>=3){var i=n[2].split(".");return i.length>0?parseInt(i[0]):0}return 0},get isWeixin(){return"undefined"!=typeof navigator&&(!!/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase())||void 0)},isSupportMP4:function(){if(this.supportResult)return this.supportResult;var e=document.createElement("video"),t={isSupport:!1,mime:""};return"function"==typeof e.canPlayType&&Jd.map((function(n){"probably"===e.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(t.isSupport=!0,t.mime+="||".concat(n))})),this.supportResult=t,e=null,t}},ep=Qd,tp="3.0.0-next.22",np={1:"network",2:"network",3:"decoder",4:"format"},ip=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};ui(this,e);var i=t&&t.i18n?t.i18n.ERROR_TYPES:null;if(t.video){var r=n.mediaError?n.mediaError:t.video.error||{},o=t.duration,s=t.currentTime,a=t.ended,c=t.src,l=t.currentSrc,u=t.video,h=u.readyState,f=u.networkState,d={playerVersion:tp,currentTime:s,duration:o,ended:a,readyState:h,networkState:f,src:c||l,errorType:n.errorType,errorCode:n.errorCode||r.code,message:n.errorMessage||r.message,mediaError:r,originError:n.originError?n.originError.stack:""};return n.ext&&Object.keys(n.ext).map((function(e){d[e]=n.ext[e]})),d}if(arguments.length>1){for(var p={playerVersion:tp,domain:document.domain},v=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],g=0;g<arguments.length;g++)p[v[g]]=arguments[g];return p.ex=i?(i[arguments[0]]||{}).msg:"",p}},op="play",sp="playing",ap="ended",cp="pause",up="error",lp="seeking",hp="seeked",fp="timeupdate",dp="waiting",pp="canplay",vp="durationchange",gp="volumechange",yp="loadeddata",mp="ratechange",_p="progress",bp="loadstart",wp="emptied",kp="focus",Cp="blur",Op="ready",xp="urlNull",Sp="autoplay_started",Tp="autoplay_was_prevented",Vp="complete",Ep="destroy",Pp="urlchange",Ip="fullscreen_change",Lp="cssFullscreen_change",jp="mini_state_change",Rp="definition_change",Ap="after_definition_change",Dp="video_resize",Mp="pip_change",Bp="rotate",Np="screenShot",Hp="playnext",Fp="shortcut",Up="user_action",$p=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","ratechange","progress","loadstart","emptied","stalled","suspend","abort"],Wp={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},zp=Object.freeze({__proto__:null,PLAY:op,PLAYING:sp,ENDED:ap,PAUSE:cp,ERROR:up,SEEKING:lp,SEEKED:hp,TIME_UPDATE:fp,WAITING:dp,CANPLAY:pp,CANPLAY_THROUGH:"canplaythrough",DURATION_CHANGE:vp,VOLUME_CHANGE:gp,LOADED_DATA:yp,RATE_CHANGE:mp,PROGRESS:_p,LOAD_START:bp,EMPTIED:wp,STALLED:"stalled",SUSPEND:"suspend",ABORT:"abort",BUFFER_CHANGE:"bufferedChange",PLAYER_FOCUS:kp,PLAYER_BLUR:Cp,READY:Op,URL_NULL:xp,AUTOPLAY_STARTED:Sp,AUTOPLAY_PREVENTED:Tp,COMPLETE:Vp,REPLAY:"replay",DESTROY:Ep,URL_CHANGE:Pp,FULLSCREEN_CHANGE:Ip,CSS_FULLSCREEN_CHANGE:Lp,MINI_STATE_CHANGE:jp,DEFINITION_CHANGE:Rp,BEFORE_DEFINITION_CHANGE:"before_definition_change",AFTER_DEFINITION_CHANGE:Ap,SEI_PARSED:"SEI_PARSED",RETRY:"retry",VIDEO_RESIZE:Dp,PIP_CHANGE:Mp,ROTATE:Bp,SCREEN_SHOT:Np,PLAYNEXT:Hp,SHORTCUT:Fp,XGLOG:"xglog",USER_ACTION:Up,USER_ACTION1:"user_action1",VIDEO_EVENTS:$p,STATS_EVENTS:Wp});function qp(e,t){this&&this.emit&&("error"===e?this.errorHandler(e):this.emit(e,t))}function Gp(e,t){return function(n){var i={player:t,eventName:e,originalEvent:n,detail:n.detail||{},timeStamp:n.timeStamp,currentTime:t.currentTime,duration:t.duration,paused:t.paused,ended:t.ended,isInternalOp:!!t._internalOp[n.type],muted:t.muted,volume:t.volume,host:Yd.getHostFromUrl(t.currentSrc),vtype:t.vtype};if(t.removeInnerOP(n.type),"timeupdate"===e&&(t._currentTime=t.video&&t.video.currentTime),"durationchange"===e&&(t._duration=t.video.duration),"volumechange"===e&&(i.isMutedChange=t._lastMuted!==t.muted,t._lastMuted=t.muted),t.videoEventMiddleware[e])try{t.videoEventMiddleware[e].call(t,i,qp.bind(t))}catch(n){throw qp.call(t,e,i),n}else qp.call(t,e,i)}}var Kp=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;ui(this,n),(i=t.call(this,e))._hasStart=!1,i._currentTime=0,i._duration=0,i._internalOp={},i._lastMuted=!1,i.vtype="MP4",i.videoConfig=Object.assign({},{controls:!1,autoplay:e.autoplay,playsinline:e.playsinline,"x5-playsinline":e.playsinline,"webkit-playsinline":e.playsinline,"x5-video-player-fullscreen":e["x5-video-player-fullscreen"]||e.x5VideoPlayerFullscreen,"x5-video-orientation":e["x5-video-orientation"]||e.x5VideoOrientation,airplay:e.airplay,"webkit-airplay":e.airplay,tabindex:2,mediaType:e.mediaType||"video"},e.videoConfig,e.videoAttributes);var r=e["x5-video-player-type"]||e.x5VideoPlayerType;return ep.isWeixin&&ep.os.isAndroid&&r&&(i.videoConfig["x5-video-player-type"]=r,delete i.videoConfig.playsinline,delete i.videoConfig["webkit-playsinline"],delete i.videoConfig["x5-playsinline"]),e.loop&&(i.videoConfig.loop="loop"),i.video=Yd.createDom(i.videoConfig.mediaType,"",i.videoConfig,""),e.defaultPlaybackRate&&(i.video.defaultPlaybackRate=i.video.playbackRate=e.defaultPlaybackRate),"Number"===Yd.typeOf(e.volume)&&(i.volume=e.volume),e.autoplayMuted&&(i.video.muted=!0,i._lastMuted=!0),e.autoplay&&(i.video.autoplay=!0),i._interval={},i.videoEventMiddleware={},i.attachVideoEvents(),i}return bo(n,[{key:"setEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(n){t.videoEventMiddleware[n]=e[n]}))}},{key:"removeEventsMiddleware",value:function(e){var t=this;Object.keys(e).map((function(e){delete t.videoEventMiddleware[e]}))}},{key:"attachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.video;this._evHandlers||(this._evHandlers=$p.map((function(t){var n="on".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));return"function"==typeof e[n]&&e.on(t,e[n]),yi({},t,Gp(t,e))}))),this._evHandlers.forEach((function(e){var n=Object.keys(e)[0];t.addEventListener(n,e[n],!1)}))}},{key:"detachVideoEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.video;this._evHandlers.forEach((function(e){var n=Object.keys(e)[0];t.removeEventListener(n,e[n],!1)})),this._evHandlers.forEach((function(t){var n=Object.keys(t)[0],i="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));"function"==typeof e[i]&&e.off(n,e[i])})),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,t){var n=this;e.removeAttribute("src"),t.forEach((function(e){n.video.appendChild(Yd.createDom("source","",{src:"".concat(e.src),type:"".concat(e.type||"")}))}));var i=e.children;if(i){this._videoSourceCount=i.length,!this._sourceError&&(this._sourceError=function(e){n._videoSourceCount--,0===n._videoSourceCount&&(n.videoEventMiddleware.error?n.videoEventMiddleware.error.call(n,e,(function(){n.errorHandler("error")})):n.errorHandler("error",{code:4,message:"sources load error"}))});for(var r=0;r<i.length;r++)i[r].addEventListener("error",this._sourceError)}}},{key:"_detachSourceEvents",value:function(e){var t=e.children;if(t&&0!==t.length&&this._sourceError){for(var n=0;n<t.length;n++)t[n].removeEventListener("error",this._sourceError);for(;t.length>0;)e.removeChild(t[0])}}},{key:"errorHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.video&&(this.video.error||t)){var n=this.video.error||t,i=n.code?np[n.code]:"other";n.message,this.video.currentSrc||(n={code:6,message:"empty_src"}),this.emit(e,new ip(this,{errorType:i,errorCode:n.code,errorMessage:n.message||"",mediaError:n}))}}},{key:"destroy",value:function(){for(var e in this.video&&(this.video.pause&&(this.video.pause(),this.video.muted=!0),this.video.removeAttribute("src"),this.video.load()),this._currentTime=0,this._duration=0,this.videoConfig=null,this._interval)clearInterval(this._interval[e]),this._interval[e]=null;this.detachVideoEvents(),this.video=null,this.videoEventMiddleware={},this.removeAllListeners()}},{key:"play",value:function(){return this.video?this.video.play():null}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"canPlayType",value:function(e){return!!this.video&&this.video.canPlayType(e)}},{key:"getBufferedRange",value:function(e){var t=[0,0];if(!this.video)return t;e||(e=this.video.buffered);var n=this.video.currentTime;if(e)for(var i=0,r=e.length;i<r&&(t[0]=e.start(i),t[1]=e.end(i),!(t[0]<=n&&n<=t[1]));i++);return t[0]-n<=0&&n-t[1]<=0?t:[0,0]}},{key:"autoplay",get:function(){return!!this.video&&this.video.autoplay},set:function(e){this.video&&(this.video.autoplay=e)}},{key:"buffered",get:function(){return this.video?this.video.buffered:null}},{key:"buffered2",get:function(){return this.video?Yd.getBuffered2(this.video.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.video)return e;var t=this.video.buffered;if(!t||0===t.length)return e;for(var n=0;n<t.length;n++)if((t.start(n)<=this.currentTime||t.start(n)<.1)&&t.end(n)>=this.currentTime)return{start:t.start(n),end:t.end(n)};return e}},{key:"crossOrigin",get:function(){return this.video?this.video.crossOrigin:""},set:function(e){this.video&&(this.video.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.video?this.video.currentSrc:""},set:function(e){this.video&&(this.video.currentSrc=e)}},{key:"currentTime",get:function(){return this.video?void 0!==this.video.currentTime?this.video.currentTime:this._currentTime:0},set:function(e){this.video&&(this.video.currentTime=e)}},{key:"defaultMuted",get:function(){return!!this.video&&this.video.defaultMuted},set:function(e){this.video&&(this.video.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.video&&this.video.ended}},{key:"error",get:function(){return this.video.error}},{key:"errorNote",get:function(){return this.video.error?["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][this.video.error.code-1]:""}},{key:"loop",get:function(){return!!this.video&&this.video.loop},set:function(e){this.video&&(this.video.loop=e)}},{key:"muted",get:function(){return!!this.video&&this.video.muted},set:function(e){this.video&&this.video.muted!==e&&(this._lastMuted=this.video.muted,this.video.muted=e)}},{key:"networkState",get:function(){return this.video.networkState}},{key:"paused",get:function(){return!this.video||this.video.paused}},{key:"playbackRate",get:function(){return this.video?this.video.playbackRate:0},set:function(e){this.video&&e!==1/0&&(this.video.defaultPlaybackRate=e,this.video.playbackRate=e)}},{key:"played",get:function(){return this.video?this.video.played:null}},{key:"preload",get:function(){return!!this.video&&this.video.preload},set:function(e){this.video&&(this.video.preload=e)}},{key:"readyState",get:function(){return this.video.readyState}},{key:"seekable",get:function(){return!!this.video&&this.video.seekable}},{key:"seeking",get:function(){return!!this.video&&this.video.seeking}},{key:"src",get:function(){return this.video?this.video.src:""},set:function(e){this.video&&(this.emit(Pp,e),this.emit(dp),this._currentTime=0,this._duration=0,/^blob/.test(this.video.currentSrc)||/^blob/.test(this.video.src)?this.onWaiting():(this._detachSourceEvents(this.video),"Array"===Yd.typeOf(e)?this._attachSourceEvents(this.video,e):this.video.src=e,this.load()))}},{key:"volume",get:function(){return this.video?this.video.volume:0},set:function(e){e!==1/0&&this.video&&(this.video.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=wo(gi(n.prototype),"emit",this)).call.apply(i,[this,e,t].concat(o))}},{key:"on",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=wo(gi(n.prototype),"on",this)).call.apply(i,[this,e,t].concat(o))}},{key:"once",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=wo(gi(n.prototype),"once",this)).call.apply(i,[this,e,t].concat(o))}},{key:"off",value:function(e,t){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=wo(gi(n.prototype),"off",this)).call.apply(i,[this,e,t].concat(o))}},{key:"offAll",value:function(){wo(gi(n.prototype),"removeAllListeners",this).call(this)}}]),n}(Yh),Yp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};ui(this,e),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=t}return bo(e,[{key:"openDB",value:function(e){var t=this,n=this,i=this.myDB.version||1,r=n.indexedDB.open(n.myDB.name,i);r.onerror=function(e){},r.onsuccess=function(i){t.myDB.db=i.target.result,e.call(n)},r.onupgradeneeded=function(e){var t=e.target.result;e.target.transaction,t.objectStoreNames.contains(n.myDB.ojstore.name)||t.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(e,t){for(var n,i=this.myDB.db.transaction(e,"readwrite").objectStore(e),r=0;r<t.length;r++)(n=i.add(t[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function(e,t){for(var n,i=this.myDB.db.transaction(e,"readwrite").objectStore(e),r=0;r<t.length;r++)(n=i.put(t[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function(e,t,n){var i=this,r=this.myDB.db.transaction(e,"readwrite").objectStore(e).get(t);r.onerror=function(){n.call(i,null)},r.onsuccess=function(e){var t=e.target.result;n.call(i,t)}}},{key:"deleteData",value:function(e,t){this.myDB.db.transaction(e,"readwrite").objectStore(e).delete(t)}},{key:"clearData",value:function(e){this.myDB.db.transaction(e,"readwrite").objectStore(e).clear()}}]),e}(),Zp=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Xp=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Jp=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"];function Qp(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];var s=t.call.apply(t,[e].concat(r));n&&"function"==typeof n&&(s&&s.then?s.then((function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];n.call.apply(n,[e].concat(i))})):n.call.apply(n,[e].concat(r)))}function ev(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[e]&&(this.__hooks[e]=null),function(){var i=arguments,r=this;if(n.pre)try{var o;(o=n.pre).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,":pre error] >> ").concat(t.message),t}if(this.__hooks&&this.__hooks[e])try{var s,a=(s=this.__hooks[e]).call.apply(s,[this,this].concat(Array.prototype.slice.call(arguments)));a?a.then?a.then((function(e){!1!==e&&Qp.apply(void 0,[r,t,n.next].concat(Xh(i)))})).catch((function(e){throw e})):Qp.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments))):void 0===a&&Qp.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}catch(t){throw t.message="[pluginName: ".concat(this.pluginName,":").concat(e,"] >> ").concat(t.message),t}else Qp.apply(void 0,[this,t,n.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function tv(e,t){var n=this.__hooks;if(n)return n.hasOwnProperty(e)?(n&&(n[e]=t),!0):(console.warn("has no supported hook which name [".concat(e,"]")),!1)}function nv(e){if(this.plugins&&this.plugins[e.toLowerCase()]){for(var t=this.plugins[e.toLowerCase()],n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.useHooks&&t.useHooks.apply(t,i)}}function iv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e.__hooks={},t&&t.map((function(t){e.__hooks[t]=null})),Object.defineProperty(e,"hooks",{get:function(){return e.__hooks&&Object.keys(e.__hooks).map((function(t){if(e.__hooks[t])return t}))}})}function rv(e){e.__hooks=null}function ov(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];if(!e.__hooks||!e.__hooks[t])return n.call.apply(n,[e,e].concat(r));var s,a=(s=e.__hooks[t]).call.apply(s,[e,e].concat(r));if(a&&a.then)a.then((function(t){return!1===t?null:n.call.apply(n,[e,e].concat(r))})).catch((function(e){console.warn("[runHooks]".concat(t," reject"),e.message)}));else if(!1!==a)return n.call.apply(n,[e,e].concat(r))}function sv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function av(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sv(Object(n),!0).forEach((function(t){yi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cv(e,t){qd.logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}var uv=function(){function e(t){ui(this,e),Yd.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),iv(this),this.__args=t,this.__events={},this.config=t.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(t)}return bo(e,[{key:"beforeCreate",value:function(e){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(e){this.player=e.player,this.playerConfig=e.player&&e.player.config,this.pluginName=e.pluginName?e.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=e.player&&e.player.logger}},{key:"updateLang",value:function(e){}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var e=Yd.checkTouchSupport()?"touch":"mouse";return!this.playerConfig||"touch"!==this.playerConfig.domEventType&&"mouse"!==this.playerConfig.domEventType||(e=this.playerConfig.domEventType),e}},{key:"on",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(this.__events[e]=t,this.player.on(e,t)):Array.isArray(e)&&e.forEach((function(e){n.__events[e]=t,n.player.on(e,t)})):cv(this.pluginName,"plugin.on(event, callback)")}},{key:"once",value:function(e,t){e&&t&&this.player?this.player.once(e,t):cv(this.pluginName,"plugin.once(event, callback)")}},{key:"off",value:function(e,t){var n=this;e&&t&&this.player?"string"==typeof e?(delete this.__events[e],this.player.off(e,t)):Array.isArray(e)&&e.forEach((function(i){delete n.__events[e],n.player.off(i,t)})):cv(this.pluginName,"plugin.off(event, callback)")}},{key:"offAll",value:function(){var e=this;Object.keys(this.__events).map((function(t){e.__events[t]&&e.off(t,e.__events[t]),t&&delete e.__events[t]})),this.__events={}}},{key:"emit",value:function(e){var t;if(this.player){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.player).emit.apply(t,[e].concat(i))}}},{key:"emitUserAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=av(av({},n),{},{pluginName:this.pluginName});this.player.emitUserAction(e,t,i)}},{key:"hook",value:function(e,t){return ev.call.apply(ev,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return tv.call.apply(tv,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return n&&(t.pluginName=n),this.player.registerPlugin({plugin:e,options:t})}},{key:"getPlugin",value:function(e){return this.player?this.player.getPlugin(e):null}},{key:"__destroy",value:function(){var e=this,t=this.player,n=this.pluginName;this.offAll(),Yd.clearAllTimers(this),Yd.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map((function(t){e[t]=null})),t.unRegisterPlugin(n),rv(this)}}],[{key:"defineGetterOrSetter",value:function(e,t){for(var n in t)Object.defineProperty(e,n,t[n])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),e}();if("undefined"!=typeof Element&&!Element.prototype.matches){var lv=Element.prototype;lv.matches=lv.matchesSelector||lv.mozMatchesSelector||lv.msMatchesSelector||lv.oMatchesSelector||lv.webkitMatchesSelector}function hv(e,t,n,i,r){var o=fv.apply(this,arguments);return e.addEventListener(n,o,r),{destroy:function(){e.removeEventListener(n,o,r)}}}function fv(e,t,n,i){return function(n){n.delegateTarget=function(e,t){for(;e&&9!==e.nodeType;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}(n.target,t),n.delegateTarget&&i.call(e,n)}}var dv=function(e,t,n,i,r){return"function"==typeof e.addEventListener?hv.apply(null,arguments):"function"==typeof n?hv.bind(null,document).apply(null,arguments):("string"==typeof e&&(e=document.querySelectorAll(e)),Array.prototype.map.call(e,(function(e){return hv(e,t,n,i,r)})))},pv={CONTROLS:"controls",ROOT:"root"},vv={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function gv(e){return!!e&&e.indexOf&&/^http/.test(e)}function yv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=null;if(e instanceof window.Element)return Yd.addClass(e,n),Object.keys(i).map((function(t){e.setAttribute(t,i[t])})),e;if(gv(e)||gv(e.url))return i.src=gv(e)?e:e.url||"",o=Yd.createDom(e.tag||"img","",i,"xg-img ".concat(n));if("function"==typeof e)try{return(o=e())instanceof window.Element?(Yd.addClass(o,n),Object.keys(i).map((function(e){o.setAttribute(e,i[e])})),o):(qd.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(r,"] is a function mast return an Element Object")),null)}catch(e){return qd.logError("Plugin named [".concat(r,"]:createIcon"),e),null}return"string"==typeof e?Yd.createDomFromHtml(e,i,n):(qd.logWarn("warn>>icons.".concat(t," in config of plugin named [").concat(r,"] is invalid")),null)}var mv,_v,bv,wv=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ui(this,n),(e=t.call(this,i)).__delegates=[],e}return bo(n,[{key:"__init",value:function(e){if(wo(gi(n.prototype),"__init",this).call(this,e),e.root){var t=e.root,i=null;this.icons={},this.root=null,this.parent=null,function(e,t){var n=t.config.icons||t.playerConfig.icons;Object.keys(e).map((function(i){var r=e[i],o=r&&r.class?r.class:"",s=r&&r.attr?r.attr:{},a=null;n&&n[i]&&(o=function(e,t){return"object"===di(e)&&e.class&&"string"==typeof e.class?"".concat(t," ").concat(e.class):t}(n[i],o),s=function(e,t){return"object"===di(e)&&e.attr&&"object"===di(e.attr)&&Object.keys(e.attr).map((function(n){t[n]=e.attr[n]})),t}(n[i],s),a=yv(n[i],i,o,s,t.pluginName)),!a&&r&&(a=yv(r.icon?r.icon:r,s,o,{},t.pluginName)),t.icons[i]=a}))}(this.registerIcons()||{},this),this.langText={};var r,o,s=this.registerLanguageTexts()||{};r=s,o=this,Object.keys(r).map((function(e){Object.defineProperty(o.langText,e,{get:function(){var t=o.lang,n=o.i18n;return n[e]?n[e]:r[e]&&r[e][t]||""}})}));var a="";try{a=this.render()}catch(e){throw qd.logError("Plugin:".concat(this.pluginName,":render"),e),new Error("Plugin:".concat(this.pluginName,":render:").concat(e.message))}if(a)(i=n.insert(a,t,e.index)).setAttribute("data-index",e.index);else{if(!e.tag)return;(i=Yd.createDom(e.tag,"",e.attr,e.name)).setAttribute("data-index",e.index),t.appendChild(i)}this.root=i,this.parent=t;var c=this.config.attr||{},l=this.config.style||{};this.setAttr(c),this.setStyle(l),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var t=this.children();t&&"object"===di(t)&&Object.keys(t).length>0&&Object.keys(t).map((function(n){var i,r,o=n,s=t[o],a={root:e.root};"function"==typeof s?(i=e.config[o]||{},r=s):"object"===di(s)&&"function"==typeof s.plugin&&(i=s.options?Yd.deepCopy(e.config[o]||{},s.options):e.config[o]||{},r=s.plugin),a.config=i,void 0!==i.index&&(a.index=i.index),i.root&&(a.root=i.root),e.registerPlugin(r,a,o)}))}}},{key:"updateLang",value:function(e){e||(e=this.lang);var t=this.root,n=this.i18n,i=this.langText;t&&function e(t,n){for(var i=0;i<t.children.length;i++)t.children[i].children.length>0?e(t.children[i],n):n(t.children[i])}(t,(function(t){var r=t.getAttribute&&t.getAttribute("lang-key");if(r){var o=n[r.toUpperCase()]||i[r];o&&(t.innerHTML="function"==typeof o?o(e):o)}}))}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.i18n||{},i=this.langText;e.setAttribute&&e.setAttribute("lang-key",t);var r=n[t]||i[t]||"";r&&(e.innerHTML=r)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.root=t.root||this.root;var r=wo(gi(n.prototype),"registerPlugin",this).call(this,e,t,i);return this._children.push(r),r}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,t,i){var r=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){r.bindEL(e,t)})):this.bindEL(e,t);else{var o=n.delegate.call(this,this.root,e,t,i);this.__delegates=this.__delegates.concat(o)}}},{key:"unbind",value:function(e,t){var n=this;if(arguments.length<3&&"function"==typeof t)Array.isArray(e)?e.forEach((function(e){n.unbindEL(e,t)})):this.unbindEL(e,t);else for(var i="".concat(e,"_").concat(t),r=0;r<this.__delegates.length;r++)if(this.__delegates[r].key===i){this.__delegates[r].destroy(),this.__delegates.splice(r,1);break}}},{key:"setStyle",value:function(e,t){var n=this;if(this.root)return"String"===Yd.typeOf(e)?this.root.style[e]=t:void("Object"===Yd.typeOf(e)&&Object.keys(e).map((function(t){n.root.style[t]=e[t]})))}},{key:"setAttr",value:function(e,t){var n=this;if(this.root)return"String"===Yd.typeOf(e)?this.root.setAttribute(e,t):void("Object"===Yd.typeOf(e)&&Object.keys(e).map((function(t){n.root.setAttribute(t,e[t])})))}},{key:"setHtml",value:function(e,t){this.root&&(this.root.innerHTML=e,"function"==typeof t&&t())}},{key:"bindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.addEventListener(e,t,n)}},{key:"unbindEL",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(e)in this.root&&"function"==typeof t&&this.root.removeEventListener(e,t,n)}},{key:"show",value:function(e){if(this.root)return this.root.style.display=void 0!==e?e:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,t){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!(t&&t instanceof window.Element))return null;try{return"string"==typeof e?this.find(e).appendChild(t):e.appendChild(t)}catch(e){return qd.logError("Plugin:appendChild",e),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,t=this.player;this.__delegates.map((function(e){e.destroy()})),this.__delegates=[],this._children instanceof Array&&(this._children.map((function(e){t.unRegisterPlugin(e.pluginName)})),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),wo(gi(n.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map((function(t){e[t]=null}))}}],[{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t.children.length,r=Number(n),o=e instanceof window.Node;if(i){for(var s=0,a=null,c="";s<i;s++){a=t.children[s];var l=Number(a.getAttribute("data-index"));if(l>=r){c="beforebegin";break}l<r&&(c="afterend")}return o?"afterend"===c?t.appendChild(e):t.insertBefore(e,a):a.insertAdjacentHTML(c,e),"afterend"===c?t.children[t.children.length-1]:t.children[s]}return o?t.appendChild(e):t.insertAdjacentHTML("beforeend",e),t.children[t.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[];if(e instanceof window.Node&&"function"==typeof i)if(Array.isArray(n))n.forEach((function(n){var s=dv(e,t,n,i,r);s.key="".concat(t,"_").concat(n),o.push(s)}));else{var s=dv(e,t,n,i,r);s.key="".concat(t,"_").concat(n),o.push(s)}return o}},{key:"ROOT_TYPES",get:function(){return pv}},{key:"POSITIONS",get:function(){return vv}}]),n}(uv),kv=!o((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Cv=Q,Ov=q,xv=kv,Sv=rt("IE_PROTO"),Tv=Object.prototype,Vv=xv?Object.getPrototypeOf:function(e){return e=Ov(e),Cv(e,Sv)?e[Sv]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Tv:null},Ev=o,Pv=Vv,Iv=We,Lv=Q,jv=fe("iterator"),Rv=!1;[].keys&&("next"in(bv=[].keys())?(_v=Pv(Pv(bv)))!==Object.prototype&&(mv=_v):Rv=!0),(null==mv||Ev((function(){var e={};return mv[jv].call(e)!==e})))&&(mv={}),Lv(mv,jv)||Iv(mv,jv,(function(){return this}));var Av={IteratorPrototype:mv,BUGGY_SAFARI_ITERATORS:Rv},Dv=Av.IteratorPrototype,Mv=qn,Bv=d,Nv=Di,Hv=kc,Fv=function(){return this},Uv=function(e,t,n){var i=t+" Iterator";return e.prototype=Mv(Dv,{next:Bv(1,n)}),Nv(e,i,!1),Hv[i]=Fv,e},$v=xn,Wv=Uv,zv=Vv,qv=vc,Gv=Di,Kv=We,Yv=ze.exports,Zv=kc,Xv=Av.IteratorPrototype,Jv=Av.BUGGY_SAFARI_ITERATORS,Qv=fe("iterator"),eg="values",tg="entries",ng=function(){return this},ig=function(e,t,n,i,r,o,s){Wv(n,t,i);var a,c,l,u=function(e){if(e===r&&v)return v;if(!Jv&&e in d)return d[e];switch(e){case"keys":case eg:case tg:return function(){return new n(this,e)}}return function(){return new n(this)}},h=t+" Iterator",f=!1,d=e.prototype,p=d[Qv]||d["@@iterator"]||r&&d[r],v=!Jv&&p||u(r),g="Array"==t&&d.entries||p;if(g&&(a=zv(g.call(new e)),Xv!==Object.prototype&&a.next&&(zv(a)!==Xv&&(qv?qv(a,Xv):"function"!=typeof a[Qv]&&Kv(a,Qv,ng)),Gv(a,h,!0))),r==eg&&p&&p.name!==eg&&(f=!0,v=function(){return p.call(this)}),d[Qv]!==v&&Kv(d,Qv,v),Zv[t]=v,r)if(c={values:u(eg),keys:o?v:u("keys"),entries:u(tg)},s)for(l in c)(Jv||f||!(l in d))&&Yv(d,l,c[l]);else $v({target:t,proto:!0,forced:Jv||f},c);return c},rg=k,og=So,sg=kc,ag=bt,cg=ig,ug="Array Iterator",lg=ag.set,hg=ag.getterFor(ug),fg=cg(Array,"Array",(function(e,t){lg(this,{type:ug,target:rg(e),index:0,kind:t})}),(function(){var e=hg(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values");sg.Arguments=sg.Array,og("keys"),og("values"),og("entries");var dg=pa.charAt,pg=wi,vg=bt,gg=ig,yg="String Iterator",mg=vg.set,_g=vg.getterFor(yg);gg(String,"String",(function(e){mg(this,{type:yg,string:pg(e),index:0})}),(function(){var e,t=_g(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=dg(n,i),t.index+=e.length,{value:e,done:!1})}));var bg=r,wg=Xo,kg=fg,Cg=We,Og=fe,xg=Og("iterator"),Sg=Og("toStringTag"),Tg=kg.values;for(var Vg in wg){var Eg=bg[Vg],Pg=Eg&&Eg.prototype;if(Pg){if(Pg[xg]!==Tg)try{Cg(Pg,xg,Tg)}catch(e){Pg[xg]=Tg}if(Pg[Sg]||Cg(Pg,Sg,Vg),wg[Vg])for(var Ig in kg)if(Pg[Ig]!==kg[Ig])try{Cg(Pg,Ig,kg[Ig])}catch(e){Pg[Ig]=kg[Ig]}}}var Lg=function(){function e(){var t=this;if(ui(this,e),this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver((function(e){var n=(new Date).getTime();n-t.timeStamp<100||(t.timeStamp=n,t.__trigger(e))})),this.timeStamp=(new Date).getTime()}catch(e){console.error(e)}}return bo(e,[{key:"addObserver",value:function(e,t){if(this.observer){this.observer&&this.observer.observe(e);for(var n=this.__handlers,i=-1,r=0;r<n.length;r++)n[r]&&e===n[r].target&&(i=r);i>-1?this.__handlers[i].handler=t:this.__handlers.push({target:e,handler:t})}}},{key:"unObserver",value:function(e){var t=-1;this.__handlers.map((function(n,i){e===n.target&&(t=i)}));try{this.observer&&this.observer.unobserve(e)}catch(e){}this.observer&&this.observer.unobserve(e),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(e){for(var t=this.__handlers,n=0;n<t.length;n++)if(t[n]&&e===t[n].target){try{t[n].handler(e)}catch(e){console.error(e)}return!0}return!1}},{key:"__trigger",value:function(e){for(var t=0;t<e.length&&!this.__runHandler(e[t].target);t++);}}]),e}(),jg=null,Rg={init:function(e){var t,n,i=e._pluginInfoId;i||(i=(new Date).getTime(),e._pluginInfoId=i),this.pluginGroup||(this.pluginGroup={}),!e.config.closeResizeObserver&&(t=e.root,n=function(){e.resize()},jg||(jg=new Lg),jg.addObserver(t,n)),0===Object.keys(this.pluginGroup).length&&(e.isUserActive=!0),this.pluginGroup[i]={_player:e,_originalOptions:e.config||{}}},checkPlayerRoot:function(e){if(this.pluginGroup){for(var t=Object.keys(this.pluginGroup),n=0;n<t.length;n++){var i=this.pluginGroup[t[n]]._player;if(i.root===e)return i}return null}return null},lazyRegister:function(e,t){var n=this,i=t.timeout||1500;return Promise.race([t.loader().then((function(t){var i;i=t&&t.__esModule?t.default:t,n.register(e,i,t.options)})),new Promise((function(e,t){setTimeout((function(){t(new Error("timeout"))}),i)}))])},register:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t&&"function"==typeof t&&void 0!==t.prototype){var i=e._pluginInfoId;i&&this.pluginGroup&&this.pluginGroup[i]||(this.init(e),i=e._pluginInfoId),this.pluginGroup[i]._plugins||(this.pluginGroup[i]._plugins=[]);var r=this.pluginGroup[i]._plugins,o=this.pluginGroup[i]._originalOptions;n.player=this.pluginGroup[i]._player;var s=n.pluginName||t.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(!t.isSupported||t.isSupported()){n.config||(n.config={});for(var a=Object.keys(o),c=0;c<a.length;c++)if(s.toLowerCase()===a[c].toLowerCase()){var l=o[a[c]];"Object"===Yd.typeOf(l)?n.config=Object.assign({},n.config,o[a[c]]):"Boolean"===Yd.typeOf(l)&&(n.config.disable=!l);break}t.defaultConfig&&Object.keys(t.defaultConfig).map((function(e){void 0===n.config[e]&&(n.config[e]=t.defaultConfig[e])})),n.root?"string"==typeof n.root&&(n.root=e[n.root]):n.root=e.root,n.index=n.config.index||0;try{r[s.toLowerCase()]&&(this.unRegister(i,s.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(s,"] exist, destroy the old instance")));var u=new t(n);return r[s.toLowerCase()]=u,r[s.toLowerCase()].func=t,u&&"function"==typeof u.afterCreate&&u.afterCreate(),u}catch(e){throw console.error(e),e}}else console.warn("not supported plugin [".concat(s,"]"))}},unRegister:function(e,t){e._pluginInfoId&&(e=e._pluginInfoId),t=t.toLowerCase();try{var n=this.pluginGroup[e]._plugins[t];n&&(n.pluginName&&n.__destroy(),delete this.pluginGroup[e]._plugins[t])}catch(n){console.error("[unRegister:".concat(t,"] cgid:[").concat(e,"] error"),n)}},deletePlugin:function(e,t){var n=e._pluginInfoId;n&&this.pluginGroup&&this.pluginGroup[n]&&this.pluginGroup[n]._plugins&&delete this.pluginGroup[n]._plugins[t]},getPlugins:function(e){var t=e._pluginInfoId;return t&&this.pluginGroup[t]?this.pluginGroup[t]._plugins:{}},findPlugin:function(e,t){var n=e._pluginInfoId;if(!this.pluginGroup||!n)return null;var i=t.toLowerCase();return this.pluginGroup[n]._plugins[i]},beforeInit:function(e){var t=this;function n(e){return e&&e.then?e:new Promise((function(e){e()}))}return new Promise((function(i){if(t.pluginGroup)return(e._loadingPlugins&&e._loadingPlugins.length?Promise.all(e._loadingPlugins):Promise.resolve()).then((function(){var r=e._pluginInfoId;if(t.pluginGroup[r]){for(var o=t.pluginGroup[r]._plugins,s=[],a=0,c=Object.keys(o);a<c.length;a++){var l=c[a];if(o[l]&&o[l].beforePlayerInit)try{var u=o[l].beforePlayerInit();s.push(n(u))}catch(e){throw s.push(n(null)),e}}Promise.all([].concat(s)).then((function(){i()})).catch((function(e){console.error(e),i()}))}else i()}))}))},afterInit:function(e){var t=e._pluginInfoId;if(this.pluginGroup&&t)for(var n=this.pluginGroup[t]._plugins,i=0,r=Object.keys(n);i<r.length;i++){var o=r[i];n[o]&&n[o].afterPlayerInit&&n[o].afterPlayerInit()}},setLang:function(e,t){var n=t._pluginInfoId;if(this.pluginGroup&&n){var i=this.pluginGroup[n]._plugins;Object.keys(i).map((function(t){if(i[t].updateLang)i[t].updateLang(e);else try{i[t].lang=e}catch(e){console.warn("".concat(t," setLang"))}}))}},reRender:function(e){var t=e._pluginInfoId;if(t){for(var n={},i=this.pluginGroup[t]._plugins,r=0,o=Object.keys(i);r<o.length;r++){var s=o[r];n[s]={plugin:i[s].func,options:i[s]._args},this.unRegister(t,s)}for(var a=0,c=Object.keys(n);a<c.length;a++){var l=c[a];this.register(t,l,n[l].plugin,n[l].options)}}},onPluginsReady:function(e){var t=e._pluginInfoId,n=this.pluginGroup[t]._plugins;t&&n&&Object.keys(n).map((function(e){n[e].onPluginsReady&&"function"==typeof n[e].onPluginsReady&&n[e].onPluginsReady()}))},setCurrentUserActive:function(e,t){if(this.pluginGroup&&this.pluginGroup[e]){if(!t)return this.pluginGroup[e]._player.isUserActive=t,e;for(var n=Object.keys(this.pluginGroup),i=0;i<n.length;i++){var r=this.pluginGroup[n[i]];if(r&&r._player){this.pluginGroup[n[i]]._player.isUserActive=!1;break}}return this.pluginGroup[e]._player.isUserActive=t,e}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var e=Object.keys(this.pluginGroup),t=0;t<e.length;t++){var n=this.pluginGroup[e[t]];if(n&&n._player&&n._player.isUserActive)return e[t]}return null}},destroy:function(e){var t=e._pluginInfoId;if(this.pluginGroup[t]){var n;n=e.root,jg.unObserver(n,void 0);for(var r=this.pluginGroup[t]._plugins,o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];this.unRegister(t,a)}var c=e.isUseActive;if(delete this.pluginGroup[t],delete e._pluginInfoId,c){var l=Object.keys(this.pluginGroup);l.length>0&&this.setCurrentUserActive(l[l.length-1],!0)}}}},Ag={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"},Dg=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],Mg=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(e=t.call.apply(t,[this].concat(r))),"onMouseEnter",(function(t){var n=pi(e).player;n.userTimer&&(Yd.clearTimeout(n,n.userTimer),clearTimeout(n.userTimer))})),yi(pi(e),"onMouseLeave",(function(){pi(e).player.focus()})),e}return bo(n,[{key:"beforeCreate",value:function(e){e.config.mode||"mobile"!==ep.device||(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,t=this.config,n=t.disable,i=t.height,r=t.mode;if(!n){"flex"===r&&this.player.addClass(Ag.FLEX_CONTROLS);var o={height:"".concat(i,"px")};Object.keys(o).map((function(t){e.root.style[t]=o[t]})),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(jp,(function(t){t?Yd.addClass(e.root,"mini-controls"):Yd.removeClass(e.root,"mini-controls")})),"mobile"!==ep.device&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&Yd.addClass(this.root,Ag.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){Yd.removeClass(this.root,Ag.CONTROLS_AUTOHIDE)}},{key:"show",value:function(){Yd.addClass(this.root,"show")}},{key:"hide",value:function(){Yd.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(this.root){var r=e.defaultConfig||{};if(!t.root){var o=t.position?t.position:t.config&&t.config.position?t.config.position:r.position;switch(o){case vv.CONTROLS_LEFT:t.root=this.left;break;case vv.CONTROLS_RIGHT:t.root=this.right;break;case vv.CONTROLS_CENTER:t.root=this.center;break;case vv.CONTROLS:t.root=this.root;break;default:t.root=this.left}return wo(gi(n.prototype),"registerPlugin",this).call(this,e,t,i)}}}},{key:"destroy",value:function(){"mobile"!==ep.device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,t=e.mode,n=e.autoHide,i=e.initShow;if(!e.disable){var r=Yd.classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===t},{"bottom-controls":"bottom"===t},yi({},Ag.CONTROLS_AUTOHIDE,n),{"xgplayer-controls-initshow":i||!n});return'<xg-controls class="'.concat(r,'" unselectable="on" onselectstart="return false">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),n}(wv),Bg={},Ng={},Hg=[],Fg={};function Ug(){Object.keys(Bg.en).map((function(e){Ng[e]=e}))}function $g(e){("Array"!==Yd.typeOf(e)?Object.keys(e).map((function(t){return{LANG:"zh"===t?"zh-cn":t,TEXT:e[t]}})):e).map((function(e){Bg[e.LANG]?Yd.deepMerge(Bg[e.LANG]||{},e.TEXT||{}):Fg[e.LANG]=e.TEXT})),Ug()}function Wg(e){var t=e.LANG,n=e.TEXT||{};Bg[t]||Hg.push(t),Bg[t]?Yd.deepMerge(n,Bg[t]):Bg[t]=n,Fg[t]&&($g([{LANG:t,TEXT:Fg[t]}]),delete Fg[t]),"zh-cn"===t&&(Bg.zh=Bg["zh-cn"]),Ug()}Wg({LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}});var zg={get textKeys(){return Ng},get langKeys(){return Hg},get lang(){var e={};return Hg.map((function(t){e[t]=Bg[t]})),e.zh=Bg["zh-cn"],e},extend:$g,use:Wg};function qg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Gg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qg(Object(n),!0).forEach((function(t){yi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kg=["play","pause","replay","retry"],Yg=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;ui(this,n);var r,o=Yd.deepMerge({id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!1,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!1,closeControlsBlur:!1,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),controls:!0,marginControls:!1,fullscreenTarget:null,controlsList:[],screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],thumbnail:null,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}},e);iv(pi(i=t.call(this,o)),Kg),i.config=o,(r=pi(i)).logInfo=qd.logInfo.bind(r),r.logWarn=qd.logWarn.bind(r),r.logError=qd.logError.bind(r);var s=i.constructor.defaultPreset;if(i.config.presets.length){var a=i.config.presets.indexOf("default");a>=0&&s&&(i.config.presets[a]=s)}else s&&i.config.presets.push(s);if(i.userTimer=null,i.waitTimer=null,i._state=1,i._hasStart=!1,i.isSeeking=!1,i.isCanplay=!1,i._runPending=!1,i.rotateDeg=0,i.isActive=!1,i.fullscreen=!1,i.cssfullscreen=!1,i.isRotateFullscreen=!1,i._fullscreenEl=null,i._cssfullscreenEl=null,i.curDefinition=null,i._orgCss="",i._fullScreenOffset=null,i._videoHeight=0,i._videoWidth=0,i._accPlayed={t:0,acc:0,loopAcc:0},i.innerContainer=null,i.controls=null,i.topBar=null,i.root=null,ep.os.isAndroid&&ep.osVersion>0&&ep.osVersion<6&&(i.config.autoplay=!1),i.database=new Yp,i.isUserActive=!1,!i._initDOM())return console.error(new Error("can't find the dom which id is ".concat(i.config.id," or this.config.el does not exist"))),vi(i);var c=i.config,l=c.definition,u=void 0===l?{}:l;if(!c.url&&u.list&&u.list.length>0){var h=u.list.find((function(e){return e.definition&&e.definition===u.defaultDefinition}));h||(u.defaultDefinition=u.list[0].definition,h=u.list[0]),i.config.url=h.url,i.curDefinition=h.definition}return i._bindEvents(),i._registerPresets(),i._registerPlugins(),Rg.onPluginsReady(pi(i)),i.setState(2),i.emit(Op),i.onReady&&i.onReady(),(i.config.videoInit||i.config.autoplay)&&(!i.hasStart||i.state<4)&&i.start(),i}return bo(n,[{key:"_initDOM",value:function(){var e=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var t=this.config.el;if(!t||1!==t.nodeType)return this.emit(up,new ip("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=t}var n=Rg.checkPlayerRoot(this.root);n&&(qd.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),n.destroy()),this._initBaseDoms();var i=this.constructor.XgVideoProxy;if(i&&this.videoConfig.mediaType===i.mediaType){var r=this.innerContainer||this.root;this.detachVideoEvents(this.video);var o=new i(r,this.config,this.videoConfig);this.attachVideoEvents(o),this.video=o}if(this.config.controls){var s=Rg.register(this,Mg);this.controls=s}var a=this.config.isMobileSimulateMode?"mobile":ep.device;if(this.addClass("".concat(Ag.DEFAULT," ").concat(Ag.INACTIVE," xgplayer-").concat(a," ").concat(this.config.controls?"":Ag.NO_CONTROLS)),this.config.autoplay?this.addClass(Ag.ENTER):this.addClass(Ag.NO_START),this.config.fluid){var c=this.config,l=c.width,u=c.height;"number"==typeof l&&"number"==typeof u||(l=600,u=337.5);var h={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(100*u/l,"%")};Object.keys(h).forEach((function(t){e.root.style[t]=h[t]}))}else["width","height"].forEach((function(t){e.config[t]&&("number"!=typeof e.config[t]?e.root.style[t]=e.config[t]:e.root.style[t]="".concat(e.config[t],"px"))}));return!0}},{key:"_initBaseDoms",value:function(){this.topBar=Yd.createDom("xg-bar","",{"data-index":-1},"xg-top-bar"),this.leftBar=Yd.createDom("xg-bar","",{"data-index":-1},"xg-left-bar"),this.rightBar=Yd.createDom("xg-bar","",{"data-index":-1},"xg-right-bar"),this.config.marginControls&&(this.innerContainer=Yd.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer)),this.config.topBarAutoHide&&Yd.addClass(this.topBar,Ag.TOP_BAR_AUTOHIDE),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar)}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach((function(t){e.on(t,e["on"+t.charAt(0).toUpperCase()+t.slice(1)])})),this.onFullscreenChange=function(t,n){var i=Yd.getFullScreenEl();if(e._fullActionFrom?e._fullActionFrom="":e.emit(Up,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,props:[{prop:"fullscreen",from:!0,to:!1}]}),n||i&&(i===e._fullscreenEl||"VIDEO"===i.tagName))Yd.setTimeout(e,(function(){e.resize()}),100),!e.config.closeFocusVideoFocus&&e.video.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,i,Ag.FULLSCREEN),e.emit(Ip,!0,e._fullScreenOffset),e.cssfullscreen&&e.exitCssFullscreen();else if(e.fullscreen){Yd.setTimeout(e,(function(){e.resize()}),100);var r=e._fullScreenOffset;e.config.needFullscreenScroll?(window.scrollTo(r.left,r.top),Yd.setTimeout(e,(function(){e.fullscreen=!1,e._fullScreenOffset=null}),100)):(!e.config.closeFocusVideoFocus&&e.video.focus(),e.fullscreen=!1,e._fullScreenOffset=null),e.cssfullscreen?e.removeClass(Ag.FULLSCREEN):e.recoverFullStyle(e.root,e._fullscreenEl,Ag.FULLSCREEN),e._fullscreenEl=null,e.emit(Ip,!1)}},Zp.forEach((function(t){document&&document.addEventListener(t,e.onFullscreenChange)})),this.__webkitbeginfullscreen=function(t){e._fullscreenEl=e.video,e.onFullscreenChange(t,!0)},this.__webkitendfullscreen=function(t){e.onFullscreenChange(t,!1)},ep.os.isIos&&(this.video.addEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.addEventListener("webkitendfullscreen",this.__webkitendfullscreen)),this.once(yp,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.video.focus()},this.once(op,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),Zp.forEach((function(t){document.removeEventListener(t,e.onFullscreenChange)})),this.playFunc&&this.off(op,this.playFunc),this.canPlayFunc&&this.off(pp,this.canPlayFunc),this.video.removeEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.removeEventListener("webkitendfullscreen",this.__webkitendfullscreen)}},{key:"_startInit",value:function(e){var t=this;if(this.video&&(e&&""!==e&&("Array"!==Yd.typeOf(e)||0!==e.length)||(e="",this.emit(xp),qd.logWarn("config.url is null, please get url and run player._startInit(url)"),!this.config.nullUrlStart))){this.canPlayFunc=function(){if(t.config){var e=t.config,n=e.autoplay,i=e.startTime,r=e.defaultPlaybackRate;qd.logInfo("player","canPlayFunc",i),i&&(t.currentTime=i>t.duration?t.duration:i,t.config.startTime=0),1!==r&&(t.playbackRate=r),n&&t.videoPlay(),t.off(pp,t.canPlayFunc),t.removeClass(Ag.ENTER)}},this._detachSourceEvents(this.video),"Array"===Yd.typeOf(e)?this._attachSourceEvents(this.video,e):this.video.src=e,"Number"===Yd.typeOf(this.config.volume)&&(this.volume=this.config.volume),this.loadeddataFunc&&this.once(yp,this.loadeddataFunc);var n=this.innerContainer?this.innerContainer:this.root;this.video instanceof window.Element&&!n.contains(this.video)&&n.insertBefore(this.video,n.firstChild);var i=this.video.readyState;qd.logInfo("_startInit readyState",i),this.config.autoplay&&(!/^blob/.test(this.video.currentSrc)&&!/^blob/.test(this.video.src)&&this.load(),(ep.os.isIpad||ep.os.isPhone)&&this.videoPlay()),i>=2?this.canPlayFunc():this.once(pp,this.canPlayFunc),(!this.hasStart||this.state<4)&&Rg.afterInit(this),this.hasStart=!0,this.setState(4),Yd.setTimeout(this,(function(){t.emit(Vp)}),0)}}},{key:"_registerPlugins",value:function(){var e=this;this._loadingPlugins=[];var t=this.config.ignores||[],n=this.config.plugins||[];(this.config.i18n||[]).forEach((function(e){zg.use(e)}));var i=t.join("||").toLowerCase().split("||");n.forEach((function(t){try{var n=t.plugin?t.plugin.pluginName:t.pluginName;if(n&&i.indexOf(n.toLowerCase())>-1)return;if(t.lazy&&t.loader){var r=Rg.lazyRegister(e,t);return void(t.forceBeforeInit&&(r.then((function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(r),1)})).catch((function(t){qd.logError("_registerPlugins:loadingPlugin",t),e._loadingPlugins.splice(e._loadingPlugins.indexOf(r),1)})),e._loadingPlugins.push(r)))}return e.registerPlugin(t)}catch(e){qd.logError("_registerPlugins:",e)}}))}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach((function(t){var n,i,r,o,s,a,c,l,u,h,f,d,p,v;n=e,l=void 0===(c=(a=(i=t).preset&&i.options?new i.preset(i.options,n.config):new i({},n.config)).plugins)?[]:c,h=void 0===(u=a.ignores)?[]:u,f=a.icons,d=void 0===f?{}:f,v=void 0===(p=a.i18n)?[]:p,n.config.plugins||(n.config.plugins=[]),n.config.ignores||(n.config.ignores=[]),(r=n.config.plugins).push.apply(r,Xh(l)),(o=n.config.ignores).push.apply(o,Xh(h)),Object.keys(d).map((function(e){n.config.icons[e]||(n.config.icons[e]=d[e])})),(s=n.config.i18n).push.apply(s,Xh(v))}))}},{key:"registerPlugin",value:function(e,t){var n=null,i=null;e.plugin&&"function"==typeof e.plugin?(n=e.plugin,i=e.options):(n=e,i={}),t&&(i.config=t);for(var r=Object.keys(this.config),o=0;o<r.length;o++)if(n.pluginName.toLowerCase()===r[o].toLowerCase()){var s=this.config[r[o]];"Object"===Yd.typeOf(s)&&(s.root&&(i.root=s.root),s.position&&(i.position=s.position));break}var a=i.position?i.position:i.config&&i.config.position||n.defaultConfig&&n.defaultConfig.position,c=wv.POSITIONS;if(!i.root&&"string"==typeof a&&a.indexOf("controls")>-1)return this.controls&&this.controls.registerPlugin(n,i,n.pluginName);if(!i.root)switch(a){case c.ROOT_RIGHT:i.root=this.rightBar;break;case c.ROOT_LEFT:i.root=this.leftBar;break;case c.ROOT_TOP:i.root=this.topBar;break;default:i.root=this.innerContainer||this.root}return Rg.register(this,n,i)}},{key:"deregister",value:function(e){"string"==typeof e?Rg.unRegister(this,e):e instanceof uv&&Rg.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){this.deregister(e)}},{key:"plugins",get:function(){return Rg.getPlugins(this)}},{key:"getPlugin",value:function(e){var t=Rg.findPlugin(this,e);return t&&t.pluginName?t:null}},{key:"addClass",value:function(e){this.root&&(Yd.hasClass(this.root,e)||Yd.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&Yd.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return Yd.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,t){this.root&&this.root.setAttribute(e,t)}},{key:"removeAttribute",value:function(e,t){this.root&&this.root.removeAttribute(e,t)}},{key:"start",value:function(e){var t=this;return this.hasStart||this.state>=3?Promise.resolve():(this.hasStart=!0,this.setState(3),Rg.beforeInit(this).then((function(){if(t.config)return e||(e=t.url||t.config.url),t._startInit(e)})).catch((function(e){throw e.fileName="player",e.lineNumber="236",qd.logError("start:beforeInit:",e),e})))}},{key:"switchURL",value:function(e){var t=this,n=e;"Object"===Yd.typeOf(e)&&(n=e.url);var i=this.currentTime,r=this.paused;return this.src=n,new Promise((function(e){var n=function(){t.currentTime=i,r&&t.once("canplay",(function(){t.pause()})),e()};ep.os.isAndroid?t.once("timeupdate",(function(){n()})):t.once("canplay",(function(){n()})),t.play()}))}},{key:"load",value:function(){this.video&&this.video.load()}},{key:"videoPlay",value:function(){var e=this;if(this.hasStart||!(this.state<4)){this.state<6&&(this.removeClass(Ag.NO_START),!this.isCanplay&&this.addClass(Ag.ENTER));var t=wo(gi(n.prototype),"play",this).call(this);return void 0!==t&&t&&t.then?t.then((function(){e.removeClass(Ag.NOT_ALLOW_AUTOPLAY),e.addClass(Ag.PLAYING),e.state<6&&(qd.logInfo(">>>>playPromise.then"),e.setState(6),e.emit(Sp))})).catch((function(t){if(qd.logWarn(">>>>playPromise.catch",t.name),e.video&&e.video.error)return e.onError(),e.removeClass(Ag.ENTER),void e.setState(0);"NotAllowedError"===t.name&&(e._errorTimer=Yd.setTimeout(e,(function(){e._errorTimer=null,e.emit(Tp),e.addClass(Ag.NOT_ALLOW_AUTOPLAY),e.removeClass(Ag.ENTER),e.pause(),e.setState(5)}),0))})):(qd.logWarn("video.play not return promise"),this.state<6&&(this.setState(6),this.removeClass(Ag.NOT_ALLOW_AUTOPLAY),this.removeClass(Ag.NO_START),this.removeClass(Ag.ENTER),this.addClass(Ag.PLAYING),this.emit(Sp))),t}this.removeClass(Ag.NO_START),this.addClass(Ag.ENTER);var i=this.start();i&&i.then((function(t){!e.config.autoplay&&e.videoPlay()}))}},{key:"videoPause",value:function(){wo(gi(n.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;this.removeClass(Ag.PAUSED),ov(this,"play",(function(){e.videoPlay()}))}},{key:"pause",value:function(){var e=this;ov(this,"pause",(function(){wo(gi(n.prototype),"pause",e).call(e)}))}},{key:"seek",value:function(e,t){var n=this;if(this.video&&!isNaN(Number(e))){var i=this.config,r=i.isSeekedPlay,o=i.seekedStatus,s=t||(r?"play":o);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,this.once(pp,(function(){switch(n.removeClass(Ag.ENTER),n.isSeeking=!1,s){case"play":n.play();break;case"pause":n.pause();break;default:!n.paused&&n.play()}})),this.state<6?(this.removeClass(Ag.NO_START),this.addClass(Ag.ENTER),this.currentTime=e,"play"===s&&this.play()):this.currentTime=e}}},{key:"changeDefinition",value:function(e,t){var n=this;if(this.emit(Rp,{from:t,to:e}),this.curDefinition=e.definition,this.hasStart){var i=this.switchURL(e.url);i&&i.then?i.then((function(){n.emit(Ap,{from:t,to:e})})):this.emit(Ap,{from:t,to:e})}else this.config.url=e.url}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(yp,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,t=[Ag.NOT_ALLOW_AUTOPLAY,Ag.PLAYING,Ag.NO_START,Ag.PAUSED,Ag.REPLAY,Ag.ENTER,Ag.ENDED,Ag.ERROR,Ag.LOADING];this.hasStart=!1,this.videoPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,t.forEach((function(t){e.removeClass(t)})),this.addClass(Ag.ENTER),this.emit(wp)}},{key:"destroy",value:function(){var e=this,t=this.innerContainer,i=this.root,r=this.video;if(i&&r){if(this._hasStart=!1,this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.video),Yd.clearAllTimers(this),this.emit(Ep),Rg.destroy(this),rv(this),wo(gi(n.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),t)for(var o=t.children,s=0;s<o.length;s++)t.removeChild(o[s]);!t&&r instanceof window.Node&&i.contains(r)&&i.removeChild(r),["topBar","leftBar","rightBar","innerContainer"].map((function(t){e[t]&&i.removeChild(e[t]),e[t]=null}));var a=i.className.split(" ");a.length>0?i.className=a.filter((function(e){return e.indexOf("xgplayer")<0})).join(" "):i.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach((function(t){e[t]=!1}))}}},{key:"replay",value:function(){var e=this;this.removeClass(Ag.ENDED),this.currentTime=0,this.isSeeking=!1,ov(this,"replay",(function(){e.once(pp,(function(){var t=e.videoPlay();t&&t.catch&&t.catch((function(e){console.log(e)}))})),e.play(),e.emit("replay"),e.onPlay()}))}},{key:"retry",value:function(){var e=this;this.removeClass(Ag.ERROR),this.addClass(Ag.LOADING),ov(this,"retry",(function(){var t=e.currentTime;e.videoPause(),e.src=e.config.url,!e.config.isLive&&(e.currentTime=t),e.once(pp,(function(){e.videoPlay()}))}))}},{key:"changeFullStyle",value:function(e,t,n,i){e&&(i||(i=Ag.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=Yd.filterStyleFromText(e)),Yd.addClass(e,n),t&&t!==e&&!this._orgPCss&&(this._orgPCss=Yd.filterStyleFromText(t),Yd.addClass(t,i)))}},{key:"recoverFullStyle",value:function(e,t,n,i){i||(i=Ag.PARENT_FULLSCREEN),this._orgCss&&(Yd.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),Yd.removeClass(e,n),t&&t!==e&&this._orgPCss&&(Yd.setStyleFromCsstext(t,this._orgPCss),this._orgPCss="",Yd.removeClass(t,i))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,t=this.root,n=this.video;e||(e=t),this._fullScreenOffset={top:Yd.scrollTop(),left:Yd.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var i=Yd.getFullScreenEl();if(i!==this._fullscreenEl)try{for(var r=0;r<Xp.length;r++){var o=Xp[r];if(e[o]){var s="webkitRequestFullscreen"===o?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[o]();return s&&s.then?s:Promise.resolve()}}return n.fullscreenEnabled||n.webkitSupportsFullscreen?(n.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(e){return Promise.reject(new Error("call getFullscreen fail"))}else this.onFullscreenChange()}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),this._fullscreenEl||Yd.getFullScreenEl()){this.root;var t=this.video;this._fullActionFrom="exit";try{for(var n=0;n<Jp.length;n++){var i=Jp[n];if(document[i]){var r=document[i]();return r&&r.then?r:Promise.resolve()}}return t&&t.webkitSupportsFullscreen?(t.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch(e){return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var t=e?"".concat(Ag.INNER_FULLSCREEN," ").concat(Ag.CSS_FULLSCREEN):Ag.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,t);var n=this.config.fullscreen,i=void 0===n?{}:n,r=!0===i.useCssFullscreen||"function"==typeof i.useCssFullscreen&&i.useCssFullscreen();r&&(this.fullscreen=!0,this.emit(Ip,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(Lp,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(Ag.INNER_FULLSCREEN," ").concat(Ag.CSS_FULLSCREEN):Ag.CSS_FULLSCREEN;if(this.fullscreen){var t=this.config.fullscreen,n=void 0===t?{}:t;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(Ip,!1)):this.removeClass(e)}else this.recoverFullStyle(this.root,this._cssfullscreenEl,e);this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(Lp,!1)}},{key:"getRotateFullscreen",value:function(e){this.cssfullscreen&&this.exitCssFullscreen(e);var t=e?"".concat(Ag.INNER_FULLSCREEN," ").concat(Ag.ROTATE_FULLSCREEN):Ag.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,t,Ag.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this.emit(Ip,!0)}},{key:"exitRotateFullscreen",value:function(e){var t=this._fullscreenEl!==this.root?"".concat(Ag.INNER_FULLSCREEN," ").concat(Ag.ROTATE_FULLSCREEN):Ag.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,t,Ag.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(Ip,!1)}},{key:"setRotateDeg",value:function(e){90===window.orientation||-90===window.orientation?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closePlayerBlur,delay:this.config.inactive};this.isActive?this.onFocus(e):this.emit(kp,Gg({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};this.isActive?this.emit(Cp,Gg({paused:this.paused,ended:this.ended},e)):this.onBlur(e)}},{key:"onFocus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.autoHide,i=void 0===n?!this.config.closePlayerBlur:n,r=t.delay,o=void 0===r?this.config.inactive:r;this.isActive=!0,this.removeClass(Ag.INACTIVE),this.userTimer&&Yd.clearTimeout(this,this.userTimer),i&&(this.userTimer=Yd.setTimeout(this,(function(){e.blur()}),o))}},{key:"onBlur",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ignorePaused,n=void 0!==t&&t;if(this.isActive){var i=this.config.closePauseVideoFocus;this.isActive=!1,(n||i||!this.paused&&!this.ended)&&this.addClass(Ag.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.state>=6&&this.removeClass(Ag.ENTER),this.removeClass(Ag.LOADING),this.isCanplay=!0,this.waitTimer&&Yd.clearTimeout(this,this.waitTimer)}},{key:"onPlay",value:function(){7===this.state&&this.setState(6),this.removeClass(Ag.PAUSED),this.ended&&this.removeClass(Ag.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(Ag.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&Yd.clearTimeout(this,this.userTimer),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(Ag.ENDED),this.setState(7)}},{key:"onError",value:function(){this.setState(0),this.updateAcc("error"),this.removeClass(Ag.NOT_ALLOW_AUTOPLAY),this.removeClass(Ag.NO_START),this.removeClass(Ag.ENTER),this.removeClass(Ag.LOADING),this.addClass(Ag.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(Ag.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&Yd.clearTimeout(this,this.waitTimer),this.removeClass(Ag.LOADING),this.removeClass(Ag.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&Yd.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=Yd.setTimeout(this,(function(){e.addClass(Ag.LOADING),Yd.clearTimeout(e,e.waitTimer),e.waitTimer=null}),200)}},{key:"onPlaying",value:function(){var e=this;[Ag.NO_START,Ag.PAUSED,Ag.ENDED,Ag.ERROR,Ag.REPLAY,Ag.LOADING].forEach((function(t){e.removeClass(t)}))}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.resize(),(this.waitTimer||this.hasClass(Ag.LOADING))&&this.video.readyState>2&&(this.removeClass(Ag.LOADING),Yd.clearTimeout(this,this.waitTimer),this.waitTimer=null),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=(new Date).getTime())}},{key:"onVolumechange",value:function(){"Number"===Yd.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,t,n){if(this.video&&t&&e){var i="String"===Yd.typeOf(e)?e:e.type||"";n.props&&"Array"!==Yd.typeOf(n.props)&&(n.props=[n.props]),this.emit(Up,Gg({eventType:i,action:t,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},n))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var t=(new Date).getTime()-this._accPlayed.t;this._accPlayed.acc+=t,this._accPlayed.t=0,("ended"===e||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var t=this.video.buffered;if(!t||0===t.length||!this.duration)return!0;for(var n=e||this.video.currentTime||.2,i=t.length,r=0;r<i;r++)if(t.start(r)<=n&&t.end(r)>n)return!0;return!1}},{key:"position",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};if(this.video&&e&&e.h){var t=1/e.h,n=1!==t?"scale(".concat(t,")"):"",i=0,r=0;e.y&&(r=(100-100*e.h)/2-100*e.y),e.w&&e.x&&(i=(100-100*e.w)/2-100*e.x),n+=" translate(".concat(i,"%, ").concat(r,"%)"),this.video.style.transform=n,this.video.style.webkitTransform=n}}},{key:"setConfig",value:function(e){var t=this;e&&Object.keys(e).forEach((function(n){t.config[n]=e[n];var i=t.plugins[n.toLowerCase()];i&&"Function"===Yd.typeOf(i.setConfig)&&i.setConfig(e[n])}))}},{key:"playNext",value:function(e){this.resetState(),this.setConfig(e),this.play(),this.emit(Hp,e)}},{key:"resize",value:function(){var e=this;if(this.video){var t=this.video,n=t.videoWidth,i=t.videoHeight,r=this.config,o=r.fitVideoSize,s=r.videoFillMode;if("fill"!==s&&"cover"!==s||this.setAttribute("data-xgfill",s),i&&n){this._videoHeight=i,this._videoWidth=n;var a=this.root.getBoundingClientRect(),c=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,l=a.width,u=a.height-c,h=parseInt(n/i*1e3,10),f=parseInt(l/u*1e3,10),d=l,p=u,v={};"auto"===o&&f>h||"fixWidth"===o?(p=l/h*1e3,this.config.fluid?v.paddingTop="".concat(100*p/d,"%"):v.height="".concat(p+c,"px")):("auto"===o&&f<h||"fixHeight"===o)&&(d=h*u/1e3,v.width="".concat(d,"px")),this.fullscreen||this.cssfullscreen||Object.keys(v).forEach((function(t){e.root.style[t]=v[t]})),("fillHeight"===s&&f<h||"fillWidth"===s&&f>h)&&this.setAttribute("data-xgfill","cover");var g={videoScale:h,vWidth:d,vHeight:p,cWidth:d,cHeight:p+c};this.emit(Dp,g)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.video.updateObjectPosition?this.video.updateObjectPosition(e,t):this.video.style.objectPosition="".concat(100*e,"% ").concat(100*t,"%")}},{key:"setState",value:function(e){qd.logInfo("setState","state from:".concat(Dg[this.state]," to:").concat(Dg[e])),this._state=e}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){"boolean"==typeof e&&(this._hasStart=e,!1===e&&(this._state=2),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return 6===this._state||7===this._state}},{key:"definitionList",get:function(){return this.config.definition.list||[]},set:function(e){var t=this,n=this.config.definition;n.list=e,this.emit("resourceReady",e);var i=null,r=null;e.forEach((function(e){t.curDefinition===e.definition&&(i=e),n.defaultDefinition===e.definition&&(r=e)})),!r&&e.length>0&&(r=e[0]),i?this.changeDefinition(i):r&&this.changeDefinition(r)}},{key:"lang",get:function(){return this.config.lang},set:function(e){0!==zg.langKeys.filter((function(t){return t===e})).length||"zh"===e?(this.config.lang=e,Rg.setLang(e,this)):console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(zg.langKeys.join(),"] "))}},{key:"i18n",get:function(){var e=this.config.lang;return zg.lang[e]||zg.lang.en}},{key:"i18nKeys",get:function(){return zg.textKeys||{}}},{key:"version",get:function(){return tp}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){var e=wo(gi(n.prototype),"readyState",this);return this.i18n[e]||e}},{key:"error",get:function(){var e=wo(gi(n.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){var e=wo(gi(n.prototype),"networkState",this);return this.i18n[e]||e}},{key:"fullscreenChanging",get:function(){return!(null===this._fullScreenOffset)}},{key:"cumulateTime",get:function(){var e=this._accPlayed;return this.updateAcc("get"),e.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"hook",value:function(e,t){return ev.call.apply(ev,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,t){return tv.call.apply(tv,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];return nv.call.apply(nv,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,t){"boolean"==typeof t&&t!==this.muted&&(this.addInnerOP("volumechange"),this.muted=t),Rg.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return qd.config.debug},set:function(e){qd.config.debug=e}},{key:"getCurrentUserActivePlayerId",value:function(){return Rg.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(e,t){Rg.setCurrentUserActive(e,t)}},{key:"install",value:function(e,t){n.plugins||(n.plugins={}),n.plugins[e]||(n.plugins[e]=t)}},{key:"use",value:function(e,t){n.plugins||(n.plugins={}),n.plugins[e]=t}}]),n}(Kp);function Zg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Xg(){return(new Date).getTime()}yi(Yg,"defaultPreset",null),yi(Yg,"XgVideoProxy",null);var Jg=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(e=t.call.apply(t,[this].concat(r))),"_onTimeupdate",(function(){qd.logInfo("[xgLogger]Events._onTimeupdate"),e._state.isTimeUpdate=!0,e._sendFirstFrame()})),yi(pi(e),"_onAutoplayStart",(function(){qd.logInfo("[xgLogger]Events._onAutoplayStart"),e._state.autoplayStart=!0,e._sendFirstFrame()})),yi(pi(e),"_onReset",(function(){e.vt=0,e.pt=0,e.fvt=0,e._isSeeking=!1,e.seekingStart=0,e.waitingStart=0,e._isWaiting=!1,e._waitTimer&&Yd.clearTimeout(pi(e),e._waitTimer),e._waittTimer&&Yd.clearTimeout(pi(e),e._waittTimer),e._waitTimer=null,e._waittTimer=null,e._waitType=0})),yi(pi(e),"_onSeeking",(function(){e.seekingStart||(e.suspendWaitingStatus("seek"),e.seekingStart=Xg(),e.emitLog("seekStart",{start:Xg()}))})),yi(pi(e),"_onSeeked",(function(){e.suspendSeekingStatus("seeked")})),yi(pi(e),"_onWaitingLoadStart",(function(){e._isWaiting||e.vt||(e._isWaiting=!0,e.waitingStart=Xg(),e._waitType=1,e.emitLog("waitingStart",{start:e.waitingStart,type:1,endType:"loadstart"}))})),yi(pi(e),"_onWaiting",(function(){!e._isWaiting&&e.vt&&(e._isWaiting=!0,e._waitTimer=Yd.setTimeout(pi(e),(function(){e._isWaiting&&(e.waitingStart=Xg(),Yd.clearTimeout(pi(e),e._waitTimer),e._waitTimer=null,e.vt?e.seekingStart?e._waitType=2:e._waitType=0:e._waitType=1,e._startWaitTimeout(),e.emitLog("waitingStart",{start:e.waitingStart,type:e._waitType,endType:2===e._waitType?"seek":"playing"}))}),200))})),yi(pi(e),"_onError",(function(){e.suspendSeekingStatus("error"),e.suspendWaitingStatus("error")})),yi(pi(e),"_onPlaying",(function(){e._isWaiting&&e.suspendWaitingStatus("playing")})),e}return bo(n,[{key:"afterCreate",value:function(){var e=this;this._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1},this._onReset(),this._waitType="firstFrame",this.on(bp,(function(){var t=e._state.autoplayStart;e._state.isTimeUpdate=!1,e._state.isFFLoading=!0,qd.logInfo("[xgLogger]Events.LOAD_START",t),e.pt=Xg(),e.vt=0,e.fvt=0,e.off(Sp,e._onAutoplayStart),e.off(fp,e._onTimeupdate),e._onWaitingLoadStart(),t?e.once(fp,e._onTimeupdate):e.once(Sp,e._onAutoplayStart)})),this.on(yp,(function(){e.vt=Xg(),e.fvt=e.vt-e.pt,qd.logInfo("[xgLogger]Events.LOADED_DATA",e.fvt,e._state.isTimeUpdate),e._state.isTimeUpdate&&e._sendFirstFrame(),e.suspendWaitingStatus("loadeddata")})),this.on(lp,this._onSeeking),this.on(hp,this._onSeeked),this.on(Ep,(function(){e.endState("destroy")})),this.on(Pp,(function(){e.endState("urlChange"),e._onReset()})),this.on([sp,pp],this._onPlaying),this.on(dp,this._onWaiting),this.on(up,this._onError),this.on(wp,(function(){e.endState("emptied"),e._onReset()}))}},{key:"_sendFirstFrame",value:function(){this.s=Xg(),this.vt>0&&this._state.isFFLoading&&(qd.logInfo("[xgLogger]Events._sendFirstFrame",this.vt),this._state.isFFLoading=!1,this.emitLog("firstFrame",{fvt:this.fvt,costTime:this.fvt,vt:this.vt}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&Yd.clearTimeout(this,this._waittTimer),this._waittTimer=Yd.setTimeout(this,(function(){e.suspendWaitingStatus("timeout"),Yd.clearTimeout(e,e._waittTimer),e._waittTimer=null}),3e4)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var t=Xg(),n=t-this.seekingStart;this.seekingStart=0,this.emitLog("seekEnd",{end:t,costTime:n,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(Yd.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(Yd.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,this.waitingStart){var t=Xg()-this.waitingStart;this._isWaiting=!1,this.waitingStart=0,this.emitLog("waitingEnd",{costTime:t,type:this._waitType,endType:2===this._waitType?"seek":e})}}},{key:"emitLog",value:function(e,t){var n=this.player;this.emit("xglog",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zg(Object(n),!0).forEach((function(t){yi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({t:Xg(),host:Yd.getHostFromUrl(n.currentSrc),vtype:n.vtype,eventType:e,currentTime:this.player.currentTime,readyState:n.video.readyState,networkState:n.video.networkState},t))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{}}}]),n}(wv);function Qg(){return(new DOMParser).parseFromString('<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">\n  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var ey=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return bo(n,[{key:"registerIcons",value:function(){return{replay:Qg}}},{key:"afterCreate",value:function(){var e=this;wv.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",(function(){e.player.replay()}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(ap,(function(){if(e.playerConfig.loop||Yd.addClass(e.player.root,"replay"),!e.config.disable){e.show();var t=e.root.querySelector("path");if(t){var n=window.getComputedStyle(t).getPropertyValue("transform");if("string"==typeof n&&n.indexOf("none")>-1)return null;t.setAttribute("transform",n)}}})),this.on(op,(function(){e.hide()}))}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),Yd.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="'.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,"</xg-replay-txt>\n    </xg-replay>")}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),n}(wv),ty=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return bo(n,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){Yd.addClass(this.root,"hide")}},{key:"show",value:function(){Yd.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){"string"==typeof e.player.config.poster&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(ap,(function(){e.isEndedShow&&Yd.removeClass(e.root,"hide")})),this.config.hideCanplay?(this.once(fp,(function(){e.onTimeUpdate()})),this.on(Pp,(function(){Yd.removeClass(e.root,"hide"),Yd.addClass(e.root,"xg-showplay"),e.once(fp,(function(){e.onTimeUpdate()}))}))):this.on(op,(function(){Yd.addClass(e.root,"hide")}))}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?Yd.removeClass(this.root,"xg-showplay"):this.once(fp,(function(){e.onTimeUpdate()}))}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"render",value:function(){var e=this.config,t=e.poster,n=e.hideCanplay,i=t?"background-image:url(".concat(t,");"):"";return'<xg-poster class="xgplayer-poster '.concat(n?"xg-showplay":"",'" style="').concat(i,'">\n    </xg-poster>')}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),n}(wv);function ny(){return(new DOMParser).parseFromString('<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',"image/svg+xml").firstChild}function iy(){return(new DOMParser).parseFromString('<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n',"image/svg+xml").firstChild}var ry={},oy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),(i=t.call(this,e)).autoPlayStart=!1,i}return bo(n,[{key:"afterCreate",value:function(){var e=this,t=this.player,n=this.playerConfig;this.initIcons(),this.once(Op,(function(){n&&(n.lang&&"en"===n.lang?Yd.addClass(t.root,"lang-is-en"):"jp"===n.lang&&Yd.addClass(t.root,"lang-is-jp"))})),this.on(Sp,(function(){var t="auto"===e.config.mode?"auto-hide":"hide";Yd.addClass(e.root,t),e.autoPlayStart=!0,e.onPlayPause("play")})),n.autoplay||this.show(),this.on(Tp,(function(){var t="auto"===e.config.mode?"auto-hide":"hide";e.setAttr("data-state","play"),Yd.removeClass(e.root,t),e.show()})),this.on(op,(function(){e.onPlayPause("play")})),this.on(cp,(function(){e.onPlayPause("pause")})),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(t){t.cancelable&&t.preventDefault(),t.stopPropagation();var n=e.player.paused;e.emitUserAction(t,"switch_play_pause",{props:"paused",from:n,to:!n})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"preventDefault",value:function(e){}},{key:"registerIcons",value:function(){return{startPlay:{icon:ny,class:"xg-icon-play"},startPause:{icon:iy,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){Yd.addClass(this.root,"hide")}},{key:"show",value:function(){Yd.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){Yd.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){Yd.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var t=this;!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:null,end:null};ry[e]&&window.clearTimeout(ry[e].id),ry[e]={},n.start&&n.start(),ry[e].id=window.setTimeout((function(){n.end&&n.end(),window.clearTimeout(ry[e].id),delete ry[e]}),t)}("pauseplay",400,{start:function(){Yd.addClass(t.root,"interact"),t.show(),t.switchStatus(!0)},end:function(){Yd.removeClass(t.root,"interact"),!e&&t.hide()}})}},{key:"switchPausePlay",value:function(e){var t=this.player;e.cancelable&&e.preventDefault(),e.stopPropagation(),t.state<2||(this.player.paused||6!==t.state?t.play():t.pause())}},{key:"onPlayPause",value:function(e){var t=this.config,n=this.player;if(!(n.state<6)&&this.autoPlayStart){if("show"===t.mode)return this.switchStatus(),void this.show();if("auto"!==t.mode){if(t.isShowPause&&n.paused&&!n.ended||t.isShowEnd&&n.ended)return this.switchStatus(),void this.show();if(t.disableAnimate)return this.switchStatus(),void this.hide();if("play"===e)this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||n.ended)return;this.animate()}}else this.switchStatus()}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Object.keys(ry).map((function(e){window.clearTimeout(ry[e].id),delete ry[e]}))}},{key:"render",value:function(){var e=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(e,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),n}(wv),sy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return bo(n,[{key:"render",value:function(){var e=this.config.innerHtml,t=Yd.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)t.appendChild(e);else if(e&&"string"==typeof e)t.innerHTML=e;else{for(var n="",i=1;i<=12;i++)n+='<div class="xgplayer-enter-bar'.concat(i,'"></div>');t.innerHTML='<div class="xgplayer-enter-spinner">'.concat(n,"</div>")}return t}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),n}(wv),ay=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return bo(n,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</span></div>\n      </xg-icon>")}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:10}}}]),n}(wv);function cy(e){var t=parseFloat(e);return-1===e.indexOf("%")&&!isNaN(t)&&t}var uy=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],ly=uy.length;function hy(e){if("string"==typeof e&&(e=document.querySelector(e)),e&&"object"===di(e)&&e.nodeType){var t=function(e){return window.getComputedStyle(e)}(e);if("none"===t.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<ly;t++)e[uy[t]]=0;return e}();var n={};n.width=e.offsetWidth,n.height=e.offsetHeight;for(var i=n.isBorderBox="border-box"===t.boxSizing,r=0;r<ly;r++){var o=uy[r],s=t[o],a=parseFloat(s);n[o]=isNaN(a)?0:a}var c=n.paddingLeft+n.paddingRight,l=n.paddingTop+n.paddingBottom,u=n.marginLeft+n.marginRight,h=n.marginTop+n.marginBottom,f=n.borderLeftWidth+n.borderRightWidth,d=n.borderTopWidth+n.borderBottomWidth,p=i,v=cy(t.width);!1!==v&&(n.width=v+(p?0:c+f));var g=cy(t.height);return!1!==g&&(n.height=g+(p?0:l+d)),n.innerWidth=n.width-(c+f),n.innerHeight=n.height-(l+d),n.outerWidth=n.width+u,n.outerHeight=n.height+h,n}}function fy(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.identifier===t)return i}}var dy={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},py=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ui(this,n),(i=t.call(this)).isEnabled=!0,i.isDragging=!1,i.isDown=!1,i.position={},i.downPoint={},i.dragPoint={x:0,y:0},i.startPos={x:0,y:0},i._root=e instanceof Element?e:document.querySelector(e),i._handlerDom=r.handle instanceof Element?r.handle:document.querySelector(r.handle),i._root&&i._handlerDom?(i._bindStartEvent(),i):vi(i)}return bo(n,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),dy[this._startKey].map((function(t){e["on".concat(t)]=e["on".concat(t)].bind(e)}))}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var t=this;if(e){var n=dy[this._startKey];n.map((function(e){window.addEventListener(e,t["on".concat(e)])})),this._boundPointerEvents=n}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map((function(t){window.removeEventListener(t,e["on".concat(t)])})),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame((function(){e.animate()})))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var t=e.changedTouches[0];this.dragStart(e,t),this.touchIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var t=fy(e.changedTouches,this.touchIdentifier);t&&this.dragMove(e,t)}},{key:"ontouchend",value:function(e){var t=fy(e.changedTouches,this.touchIdentifier);t&&this.dragEnd(e,t),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var t=fy(e.changedTouches,this.touchIdentifier);t&&this.dragCancel(e,t)}},{key:"dragStart",value:function(e,t){if(this._root&&!this.isDown&&this.isEnabled){this.downPoint=t,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var n=hy(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-n.height,this.startPos.maxX=window.innerWidth-n.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,t){this.isDragging=!0,this.animate(),this.emit("dragStart",this.startPos)}},{key:"dragEnd",value:function(e,t){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit("dragEnded")),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,t){var n={x:t.pageX-this.downPoint.pageX,y:t.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this.dragRealStart(e,t),n}},{key:"dragMove",value:function(e,t){if(e=e||window.event,this.isDown){var n=this.startPos,i=n.x,r=n.y,o=this._dragPointerMove(e,t),s=o.x,a=o.y;s=this.checkContain("x",s,i),a=this.checkContain("y",a,r),this.position.x=i+s,this.position.y=r+a,this.dragPoint.x=s,this.dragPoint.y=a,this.emit("dragMove",this.position)}}},{key:"dragCancel",value:function(e,t){this.dragEnd(e,t)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,t,n){return t+n<0?0-n:"x"===e&&t+n>this.startPos.maxX?this.startPos.maxX-n:"y"===e&&t+n>this.startPos.maxY?this.startPos.maxY-n:t}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),t=this._getPositionCoord(e.left,"width"),n=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t,this.position.y=isNaN(n)?0:n,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var t=e.transform;if(0===t.indexOf("matrix")){var n=t.split(","),i=0===t.indexOf("matrix3d")?12:4,r=parseInt(n[i],10),o=parseInt(n[i+1],10);this.position.x+=r,this.position.y+=o}}},{key:"_getPositionCoord",value:function(e,t){if(-1!==e.indexOf("%")){var n=hy(this._root.parentNode);return n?parseFloat(e)/100*n[t]:0}return parseInt(e,10)}}]),n}(Yh),vy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;ui(this,n),yi(pi(i=t.call(this,e)),"onCancelClick",(function(e){i.exitMini(),i.isClose=!0})),yi(pi(i),"onCenterClick",(function(e){var t=pi(i).player;t.paused?t.play():t.pause()})),yi(pi(i),"onScroll",(function(e){if(!(!window.scrollY&&0!==window.scrollY||Math.abs(window.scrollY-i.pos.scrollY)<50)){var t=parseInt(Yd.getCss(i.player.root,"height"));t+=i.config.scrollTop,i.pos.scrollY=window.scrollY,window.scrollY>t+5?!i.isMini&&!i.isClose&&i.getMini():window.scrollY<=t&&(i.isMini&&i.exitMini(),i.isClose=!1)}})),i.isMini=!1,i.isClose=!1;var r=pi(i).config;return i.pos={left:r.left<0?window.innerWidth-r.width-20:r.left,top:r.top<0?window.innerHeight-r.height-20:r.top,height:i.config.height,width:i.config.width,scrollY:window.scrollY||0},i.lastStyle=null,i}return bo(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.mini&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(cp,(function(){e.setAttr("data-state","pause")})),this.on(op,(function(){e.setAttr("data-state","play")}))}},{key:"onPluginsReady",value:function(){var e=this,t=this.player;if(!this.config.disable){if(this.config.isShowIcon){var n={config:{onClick:function(){e.getMini()}}};t.controls.registerPlugin(ay,n,ay.pluginName)}var i=Yd.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",i,this.onCancelClick),this.bind(".play-icon",i,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new py(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:ny,class:"xg-icon-play"},pause:{icon:iy,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var t=this.player,n=this.playerConfig,i=this.config.target||this.player.root;this.lastStyle={},Yd.addClass(t.root,"xgplayer-mini"),["width","height","top","left"].map((function(t){e.lastStyle[t]=i.style[t],i.style[t]="".concat(e.pos[t],"px")})),n.fluid&&(i.style["padding-top"]=""),this.emit(jp,!0),t.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var t=this.player,n=this.playerConfig,i=this.config.target||this.player.root;Yd.removeClass(t.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map((function(t){i.style[t]=e.lastStyle[t]})),this.lastStyle=null,n.fluid&&(t.root.style.width="100%",t.root.style.height="0",t.root.style["padding-top"]="".concat(100*n.height/n.width,"%")),this.emit(jp,!1),this.isMini=t.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=Yd.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <xg-mini-header class="xgplayer-mini-header">\n      <div lang-key="'.concat(this.i18nKeys.MINI_DRAG,'">').concat(this.i18n.MINI_DRAG,'</div>\n      </xg-mini-header>\n      <div class="mini-cancel-btn">\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>\n        </svg>\n      </div>\n      <div class="play-icon">\n      </div>\n      </xg-mini-layer>')}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),n}(wv),gy={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},yy=["videoClick","videoDbClick"],my=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(e=t.call.apply(t,[this].concat(r))),"onMouseMove",(function(t){var n=pi(e),i=n.player,r=n.playerConfig;i.isActive||(i.focus({autoHide:!r.closeDelayBlur}),!r.closeFocusVideoFocus&&i.video.focus())})),yi(pi(e),"onMouseEnter",(function(t){var n=pi(e),i=n.playerConfig,r=n.player;r.focus({autoHide:!i.closeDelayBlur}),!i.closeFocusVideoFocus&&r.video.focus()})),yi(pi(e),"onMouseLeave",(function(t){var n=e.playerConfig,i=n.closePlayerBlur,r=n.leavePlayerTime;i||(r?e.player.focus({autoHide:!0,delay:r}):e.player.blur())})),yi(pi(e),"onVideoClick",(function(t){var n=pi(e),i=n.player,r=n.playerConfig;t.target&&r.closeVideoClick||t.target!==i.video&&t.target!==i.innerContainer&&t.target!==i.video.__canvas||(t.preventDefault(),r.closeVideoStopPropagation||t.stopPropagation(),e._clickCount++,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),e.clickTimer=setTimeout((function(){e._clickCount&&(e._clickCount--,ov(pi(e),yy[0],(function(t,n){e.switchPlayPause(n.e)}),{e:t,paused:i.paused}),clearTimeout(e.clickTimer),e.clickTimer=null)}),300))})),yi(pi(e),"onVideoDblClick",(function(t){var n=pi(e),i=n.player,r=n.playerConfig;!t.target||t.target!==i.video&&t.target!==i.video.__canvas||r.closeVideoDblclick||(e._clickCount<2?e._clickCount=0:(e._clickCount=0,e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),t.preventDefault(),t.stopPropagation(),ov(pi(e),yy[1],(function(t,n){e.emitUserAction(n.e,"switch_fullscreen",{props:"fullscreen",from:i.fullscreen,to:!i.fullscreen}),i.fullscreen?i.exitFullscreen():i.getFullscreen()}),{e:t,fullscreen:i.fullscreen})))})),e}return bo(n,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,yy.map((function(t){e.__hooks[t]=null}));var t=this.playerConfig,n=t.enableContextmenu;t.isMobileSimulateMode||"mobile"===ep.device&&!ep.os.isIpad||(this.config.disableContextmenu=!n,this.initEvents())}},{key:"initEvents",value:function(){var e=this,t=this.player,n=t.video,i=t.root;n.addEventListener("click",this.onVideoClick,!1),n.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(gy).map((function(t){i.addEventListener(t,e[gy[t]],!1)})),this.config.disableContextmenu&&n.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var t=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:t.paused,to:!t.paused}),t.ended?t.duration!==1/0&&t.duration>0&&t.replay():t.paused?t.play():t.pause()}},{key:"onContextmenu",value:function(e){(e=e||window.event).preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,t=this.player,n=t.video,i=t.root;this.clickTimer&&clearTimeout(this.clickTimer),i.removeEventListener("click",this.onVideoClick,!1),n.removeEventListener("dblclick",this.onVideoDblClick,!1),n.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(gy).map((function(t){i.removeEventListener(t,e[gy[t]],!1)}))}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{disableContextmenu:!0}}}]),n}(uv),_y=p,by=Lt,wy=wi,ky=_,Cy=xn,Oy=Lt,xy=function(e){var t=wy(ky(this)),n="",i=by(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n},Sy=o,Ty=1..toFixed,Vy=Math.floor,Ey=function(e,t,n){return 0===t?n:t%2==1?Ey(e,t-1,n*e):Ey(e*e,t/2,n)},Py=function(e,t,n){for(var i=-1,r=n;++i<6;)r+=t*e[i],e[i]=r%1e7,r=Vy(r/1e7)},Iy=function(e,t){for(var n=6,i=0;--n>=0;)i+=e[n],e[n]=Vy(i/t),i=i%t*1e7},Ly=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var i=String(e[t]);n=""===n?i:n+xy.call("0",7-i.length)+i}return n};Cy({target:"Number",proto:!0,forced:Ty&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!Sy((function(){Ty.call({})}))},{toFixed:function(e){var t,n,i,r,o=function(e){if("number"!=typeof e&&"Number"!=_y(e))throw TypeError("Incorrect invocation");return+e}(this),s=Oy(e),a=[0,0,0,0,0,0],c="",l="0";if(s<0||s>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(c="-",o=-o),o>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(o*Ey(2,69,1))-69)<0?o*Ey(2,-t,1):o/Ey(2,t,1),n*=4503599627370496,(t=52-t)>0){for(Py(a,0,n),i=s;i>=7;)Py(a,1e7,0),i-=7;for(Py(a,Ey(10,i,1),0),i=t-1;i>=23;)Iy(a,1<<23),i-=23;Iy(a,1<<i),Py(a,1,1),Iy(a,2),l=Ly(a)}else Py(a,0,n),Py(a,1<<-t,0),l=Ly(a)+xy.call("0",s);return s>0?c+((r=l.length)<=s?"0."+xy.call("0",s-r)+l:l.slice(0,r-s)+"."+l.slice(r-s)):c+l}});var jy="pressend",Ry={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},Ay={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function Dy(e){return e&&e.length>0?e[e.length-1]:null}function My(e){var t=navigator.userAgent;/(?:iPhone|iPad)/.test(t)&&e.cancelable&&e.preventDefault()}var By=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{eventType:"touch"};ui(this,e),this._pos={moving:!1,start:!1,x:0,y:0},this.config={pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0},Object.keys(i).map((function(e){n.config[e]=i[e]})),this.root=t,this.events="mouse"===i.eventType?Ay:Ry,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return bo(e,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(e){var t=this,n=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout((function(){t.trigger("press",e),t._pos.press=!0,t.__clearPress()}),n.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(e){var t=this,n=this.config;if(this.dbIntrvalId)return this.__clearDb(),void this.trigger("doubleclick",e);this.dbIntrvalId=setTimeout((function(){t.__clearDb(),t._pos.start||t._pos.press||t._pos.moving||t.trigger("click",e)}),n.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(e,t){this.__handlers[e]||(this.__handlers[e]=[]),this.__handlers[e].push(t)}},{key:"off",value:function(e,t){if(this.__handlers[e]){for(var n=this.__handlers[e],i=-1,r=0;r<n.length;r++)if(n[r]===t){i=r;break}i>=0&&this.__handlers[e].splice(i,1)}}},{key:"trigger",value:function(e,t){this.__handlers[e]&&this.__handlers[e].map((function(n){try{n(t)}catch(t){console.error("trigger>>:".concat(e),t)}}))}},{key:"onTouchStart",value:function(e){var t=this._pos,n=this.root;this.config.needPreventDefault&&My(e);var i=Dy(e.touches);t.x=i?parseInt(i.pageX,10):e.pageX,t.y=i?parseInt(i.pageX,10):e.pageX,t.start=!0,this.__setPress(e),n.addEventListener(this.events.end,this.onTouchEnd),n.addEventListener(this.events.cancel,this.onTouchCancel),n.addEventListener(this.events.move,this.onTouchMove),this.trigger("touchstart",e)}},{key:"onTouchCancel",value:function(e){this.onTouchEnd(e)}},{key:"onTouchEnd",value:function(e){var t=this._pos,n=this.root;this.config.needPreventDefault&&My(e),this.__clearPress(),n.removeEventListener(this.events.cancel,this.onTouchCancel),n.removeEventListener(this.events.end,this.onTouchEnd),n.removeEventListener(this.events.move,this.onTouchMove),e.moving=t.moving,e.press=t.press,t.press&&this.trigger(jy,e),this.trigger("touchend",e),!t.press&&!t.moving&&this.__setDb(e),t.press=!1,t.start=!1,t.moving=!1}},{key:"onTouchMove",value:function(e){var t=this._pos,n=this.config,i=Dy(e.touches),r=i?parseInt(i.pageX,10):e.pageX,o=i?parseInt(i.pageY,10):e.pageX,s=r-t.x,a=o-t.y;Math.abs(a)<n.miniStep&&Math.abs(s)<n.miniStep||(this.__clearPress(),t.press&&this.trigger(jy,e),t.press=!1,t.moving=!0,this.trigger("touchmove",e))}},{key:"destroy",value:function(){var e=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).map((function(n){e.root.removeEventListener("touchend",e[t[n]])}))}}]),e}();function Ny(){return(new DOMParser).parseFromString('<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"\n  xmlns:xlink="http://www.w3.org/1999/xlink">\n  <path opacity="0.54"\n    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"\n    fill="white" />\n  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>\n</svg>',"image/svg+xml").firstChild}var Hy="auto",Fy="seeking",Uy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),yi(pi(i=t.call(this,e)),"onTouchStart",(function(e){var t=pi(i),n=t.player,r=t.config,o=t.pos,s=t.playerConfig,a=i.getTouche(e);if(a&&!r.disableGesture&&i.duration>0&&!n.ended){o.isStart=!0,Yd.checkIsFunction(s.disableSwipeHandler)&&s.disableSwipeHandler(),i.find(".xg-dur").innerHTML=Yd.format(i.duration);var c=i.root.getBoundingClientRect();90===n.rotateDeg?(o.top=c.left,o.left=c.top,o.width=c.height,o.height=c.width):(o.top=c.top,o.left=c.left,o.width=c.width,o.height=c.height);var l=parseInt(a.pageX-o.left,10),u=parseInt(a.pageY-o.top,10);o.x=90===n.rotateDeg?u:l,o.y=90===n.rotateDeg?l:u,o.scopeL=r.scopeL*o.width,o.scopeR=(1-r.scopeR)*o.width,o.scopeM1=o.width*(1-r.scopeM)/2,o.scopeM2=o.width-o.scopeM1}})),yi(pi(i),"onTouchMove",(function(e){var t=i.getTouche(e),n=pi(i),r=n.pos,o=n.config,s=n.player;if(t&&!o.disableGesture&&i.duration&&r.isStart){var a=o.miniMoveStep,c=o.hideControlsActive,l=parseInt(t.pageX-r.left,10),u=parseInt(t.pageY-r.top,10),h=90===s.rotateDeg?u:l,f=90===s.rotateDeg?l:u;if(Math.abs(h-r.x)>a||Math.abs(f-r.y)>a){var d=h-r.x,p=f-r.y,v=r.scope;if(-1===v&&(0===(v=i.checkScope(h,f,d,p,r))&&(c?s.blur():s.focus({autoHide:!1}),!r.time&&(r.time=parseInt(1e3*s.currentTime,10)+1e3*i.timeOffset)),r.scope=v),-1===v||v>0&&!o.gestureY||0===v&&!o.gestureX)return;e.cancelable&&e.preventDefault(),i.executeMove(d,p,v,r.width,r.height),r.x=h,r.y=f}}})),yi(pi(i),"onTouchEnd",(function(e){var t=pi(i),n=t.player,r=t.pos,o=t.playerConfig;r.isStart&&(r.scope>-1&&e.cancelable&&e.preventDefault(),i.endLastMove(r.scope),setTimeout((function(){n.getPlugin("progress")&&n.getPlugin("progress").resetSeekState()}),10),r.scope=-1,i.resetPos(),Yd.checkIsFunction(o.enableSwipeHandler)&&o.enableSwipeHandler(),i.changeAction(Hy))})),yi(pi(i),"onRootTouchMove",(function(e){!i.config.disableGesture&&i.config.gestureX&&i.checkIsRootTarget(e)&&(e.stopPropagation(),i.pos.isStart?i.onTouchMove(e):i.onTouchStart(e))})),yi(pi(i),"onRootTouchEnd",(function(e){i.pos.isStart&&i.checkIsRootTarget(e)&&(e.stopPropagation(),i.onTouchEnd(e))})),i.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},i.timer=null,i}return bo(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:Ny,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this,t=this.playerConfig,n=this.config,i=this.player;!0===t.closeVideoDblclick&&(n.closedbClick=!0),this.resetPos(),Yd.isUndefined(t.disableGesture)||(n.disableGesture=!!t.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=Yd.createDom("xg-mask","",{},"xgmask"),i.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var r=this.domEventType;this.touch=new By(this.root,{eventType:r,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",(function(e){e.preventDefault()})),i.root.addEventListener("touchmove",this.onRootTouchMove,!0),i.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(vp,(function(){var t=e.player,n=e.config;1e3*t.duration<n.moveDuration&&(n.moveDuration=1e3*t.duration)})),this.on([pp,ap],(function(){var t=e.pos,n=t.time;!t.isStart&&n>0&&(e.pos.time=0)}));var o={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(o).map((function(t){e.touch.on(t,(function(n){e[o[t]](n)}))})),!n.disableActive){var s=i.plugins.progress;s&&(s.addCallBack("dragmove",(function(t){e.activeSeekNote(t.currentTime,t.forward)})),s.addCallBack("dragend",(function(){e.changeAction(Hy)})))}}},{key:"registerThumbnail",value:function(){var e=this.player.plugins.thumbnail;if(e&&e.usable){this.thumbnail=e.createThumbnail(null,"mobile-thumbnail");var t=this.find(".time-preview");t.insertBefore(this.thumbnail,t.children[0])}}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle,t=e.playedColor,n=e.progressColor;t&&(this.find(".xg-curbar").style.backgroundColor=t,this.find(".xg-cur").style.color=t),n&&(this.find(".xg-bar").style.backgroundColor=n,this.find(".time-preview").style.color=n),this.config.disableTimeProgress&&Yd.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map((function(t){e.pos[t]=0}))):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var t=this.player;this.root.setAttribute("data-xg-action",e);var n=t.plugins.start;n&&n.recover()}},{key:"getTouche",value:function(e){this.player.rotateDeg;var t=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return{pageX:t.pageX,pageY:t.pageY}}},{key:"checkScope",value:function(e,t,n,i,r){var o=r.width,s=-1;if(e<0||e>o)return s;var a=0===i?Math.abs(n):Math.abs(n/i);return Math.abs(n)>0&&a>=1.73&&e>r.scopeM1&&e<r.scopeM2?s=0:(0===Math.abs(n)||a<=.57)&&(s=e<r.scopeL?1:e>r.scopeR?2:3),s}},{key:"executeMove",value:function(e,t,n,i,r){switch(n){case 0:this.updateTime(e/i*this.config.scopeM);break;case 1:this.updateBrightness(t/r);break;case 2:ep.os.isIos||this.updateVolume(t/r)}}},{key:"endLastMove",value:function(e){var t=this,n=this.pos,i=this.player,r=this.config,o=(n.time-this.timeOffset)/1e3;switch(e){case 0:i.seek(Number(o).toFixed(1)),r.hideControlsEnd?i.blur():i.focus(),this.timer=setTimeout((function(){t.pos.time=0}),500)}this.changeAction(Hy)}},{key:"checkIsRootTarget",value:function(e){var t=this.player.plugins||{};return(!t.progress||!t.progress.root.contains(e.target))&&(t.start&&t.start.root.contains(e.target)||t.controls&&t.controls.root.contains(e.target))}},{key:"sendUseAction",value:function(e){var t=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t,to:!t})}},{key:"onClick",value:function(e){var t=this.player,n=this.config,i=this.playerConfig;t.state<6?i.closeVideoClick||(this.sendUseAction(new Event("click")),t.play()):!n.closedbClick||i.closeVideoClick?t.isActive?t.blur():t.focus():i.closeVideoClick||((t.isActive||n.focusVideoClick)&&(this.emitUserAction("click","switch_play_pause"),this.switchPlayPause()),t.focus())}},{key:"onDbClick",value:function(e){var t=this.config,n=this.player;!t.closedbClick&&n.state>=6&&(this.sendUseAction(new Event("dblclick")),this.switchPlayPause())}},{key:"onPress",value:function(e){var t=this.pos,n=this.config,i=this.player;n.disablePress||(t.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:i.playbackRate,to:n.pressRate}),i.playbackRate=n.pressRate,this.changeAction("playbackrate"))}},{key:"onPressEnd",value:function(e){var t=this.pos,n=this.config,i=this.player;n.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:i.playbackRate,to:t.rate}),i.playbackRate=t.rate,t.rate=1,this.changeAction(Hy))}},{key:"updateTime",value:function(e){var t=this.player,n=this.config,i=this.player.duration;e=Number(e.toFixed(4));var r=parseInt(e*n.moveDuration,10)+this.timeOffset;r=(r+=this.pos.time)<0?0:r>1e3*i?1e3*i-200:r,t.getPlugin("time")&&t.getPlugin("time").updateTime(r/1e3),t.getPlugin("progress")&&t.getPlugin("progress").updatePercent(r/1e3/this.duration,!0),this.activeSeekNote(r/1e3,e>0),n.isTouchingSeek&&t.seek(Number((r-this.timeOffset)/1e3).toFixed(1)),this.pos.time=r}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.player,n=this.pos;if(e=parseInt(100*e,10),n.volume+=e,!(Math.abs(n.volume)<10)){var i=parseInt(10*t.volume,10)-parseInt(n.volume/10,10);i=i>10?10:i<1?0:i,t.volume=i/10,n.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var t=this.pos,n=this.config,i=this.xgMask,r=t.light+.8*e;r=r>n.maxDarkness?n.maxDarkness:r<0?0:r,i&&(i.style.backgroundColor="rgba(0,0,0,".concat(r,")")),t.light=r}},{key:"activeSeekNote",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player,i=this.config,r=!(this.duration!==1/0&&this.duration>0);if(e&&"number"==typeof e&&!r&&!i.disableActive){e<0?e=0:e>n.duration&&(e=n.duration-.2),this.changeAction(Fy);var o=n.plugins.start;o&&o.focusHide(),this.find(".xg-dur").innerHTML=Yd.format(this.duration),this.find(".xg-cur").innerHTML=Yd.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),t?Yd.removeClass(this.find(".xg-seek-show"),"xg-back"):Yd.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var t=this.player.plugins.thumbnail;t&&t.usable&&this.thumbnail&&t.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<4)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e="normal"!==this.config.gradient?"gradient ".concat(this.config.gradient):"gradient";return'\n     <xg-trigger class="trigger">\n     <div class="'.concat(e,'"></div>\n        <div class="time-preview">\n            <div class="xg-seek-show ').concat(this.config.disableSeekIcon?" hide-seek-icon":"",'">\n              <i class="xg-seek-icon"></i>\n              <span class="xg-cur">00:00</span>\n              <span>/</span>\n              <span class="xg-dur">00:00</span>\n            </div>\n              <div class="xg-bar xg-timebar">\n                <div class="xg-curbar"></div>\n              </div>\n        </div>\n        <div class="xg-playbackrate xg-top-note">\n            <span><i>').concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,"</span>\n        </div>\n     </xg-trigger>\n    ")}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:36e4,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),n}(wv);function $y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Wy(e){e.preventDefault(),e.returnValue=!1}function zy(e){var t=e.tagName;return!("INPUT"!==t&&"TEXTAREA"!==t&&!e.isContentEditable)}var qy=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(e=t.call.apply(t,[this].concat(r))),"onBodyKeyDown",(function(t){var n=t||window.event;if(e.player&&(e.player.isUserActive||e.config.isIgnoreUserActive)&&!(e.config.disable||e.config.disableBodyTrigger||!e.checkIsVisible()||n.metaKey||n.altKey||n.ctrlKey)){var i=n.keyCode;return!(n.target!==document.body&&(!e.config.isGlobalTrigger||zy(n.target))||!e.checkCode(i,!0)||(Wy(n),e.handleKeyCode(i,t),1))}})),yi(pi(e),"onKeydown",(function(t){var n=t||window.event;if(!(e.config.disable||e.config.disableRootTrigger||n.metaKey||n.altKey||n.ctrlKey)&&(e.player.isUserActive||e.config.isIgnoreUserActive)&&(e.player.isUserActive||e.config.isIgnoreUserActive)){if(!n||37!==n.keyCode&&!e.checkCode(n.keyCode)||n.target!==e.player.root&&n.target!==e.player.video&&n.target!==e.player.controls.el)return!0;Wy(n),e.handleKeyCode(n.keyCode,t)}})),e}return bo(n,[{key:"mergekeyCodeMap",value:function(){var e=this,t=this.config.keyCodeMap;t&&Object.keys(t).map((function(n){e.keyCodeMap[n]?["keyCode","action","disable","isBodyTarget"].map((function(i){t[n][i]&&(e.keyCodeMap[n][i]=t[n][i])})):e.keyCodeMap[n]=t[n]}))}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e="function"==typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;e&&"number"==typeof e&&(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),t=e.height,n=e.top,i=e.bottom,r=window.innerHeight;return!(n<0&&n<0-.9*t||i>0&&i-r>.9*t)}},{key:"checkCode",value:function(e,t){var n=this,i=!1;return Object.keys(this.keyCodeMap).map((function(r){n.keyCodeMap[r]&&e===n.keyCodeMap[r].keyCode&&!n.keyCodeMap[r].disable&&(i=!t||t&&!n.keyCodeMap[r].noBodyTarget)})),i}},{key:"downVolume",value:function(e){var t=this.player,n=parseFloat((t.volume-.1).toFixed(1)),i={volume:{from:t.volume,to:n}};this.emitUserAction(e,"change_volume",{props:i}),t.volume=n>=0?n:0}},{key:"upVolume",value:function(e){var t=this.player,n=parseFloat((t.volume+.1).toFixed(1)),i={volume:{from:t.volume,to:n}};this.emitUserAction(e,"change_volume",{props:i}),t.volume=n<=1?n:1}},{key:"seek",value:function(e){var t,n=this.player,r=n.currentTime,i=n.duration,o={currentTime:{from:r,to:t=r+this.seekStep<=i?r+this.seekStep:i-1}};this.emitUserAction(e,"seek",{props:o}),this.player.currentTime=t}},{key:"seekBack",value:function(e){var t=this.player.currentTime,n=0;t-this.seekStep>=0&&(n=t-this.seekStep);var i={currentTime:{from:t,to:n}};this.emitUserAction(e,"seek",{props:i}),this.player.currentTime=n}},{key:"playPause",value:function(e){var t=this.player;t&&(this.emitUserAction(e,"switch_play_pause"),t.paused?t.play():t.pause())}},{key:"exitFullscreen",value:function(e){var t=this.player,n=t.fullscreen,i=t.cssfullscreen;n&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:n,to:!n}),t.exitFullscreen()),i&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:i,to:!i}),t.exitCssFullscreen())}},{key:"handleKeyCode",value:function(e,t){var n=this;Object.keys(this.keyCodeMap).map((function(i){var r=n.keyCodeMap[i],o=r.action,s=r.keyCode,a=r.disable;s!==e||a||("function"==typeof o?o(t,n.player):"string"==typeof o&&"function"==typeof n[o]&&n[o](t,n.player),n.emit(Fp,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$y(Object(n),!0).forEach((function(t){yi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:i,target:t.target},n.keyCodeMap[i])))}))}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),n}(uv);function Gy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">\n  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>\n</svg>\n',"image/svg+xml").firstChild}var Ky=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return bo(n,[{key:"registerIcons",value:function(){return{loadingIcon:Gy}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      <xg-loading-inner></xg-loading-inner>\n    </xg-loading>'}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:vv.ROOT}}}]),n}(wv),Yy=xn,Zy=Zi.findIndex,Xy=So,Jy="findIndex",Qy=!0;Jy in[]&&Array(1).findIndex((function(){Qy=!1})),Yy({target:"Array",proto:!0,forced:Qy},{findIndex:function(e){return Zy(this,e,arguments.length>1?arguments[1]:void 0)}}),Xy(Jy);var tm=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],nm=function(){function e(t){ui(this,e),this.fragments=t.fragments||[],this.focusClass="inner-focus",this.style=t.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0}return bo(e,[{key:"updateDuration",value:function(e){var t=this;this.duration=parseInt(1e3*e);var n=0,i=this.fragments;this.fragments=i.map((function(e){return e.start=n,e.end=n+e.percent*t.duration,e.duration=e.percent*t.duration,n+=e.percent*t.duration,e}))}},{key:"updateProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"played",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},n=this.progressList,i=this.fragments,r=t.newIndex,o=t.curIndex,s=t.millisecond;r!==o&&n.map((function(t,n){n<r?t[e].style.width="100%":n>r&&(t[e].style.width=0)}));var a=i[r],c=0===s?0:(s-a.start)/a.duration;n[r][e].style.width=c<0?0:"".concat(100*c,"%")}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(1e3*t,10)!==this.duration){if(!t&&0!==t)return;this.updateDuration(t)}var n=this.playedIndex,i=this.cachedIndex;if("Undefined"!==Yd.typeOf(e.played)){var r=this.findIndex(1e3*e.played,n);this.updateProgress("played",{newIndex:r,curIndex:n,millisecond:parseInt(1e3*e.played,10)}),this.playedIndex=r}if("Undefined"!==Yd.typeOf(e.cached)){var o=this.findIndex(1e3*e.cached,i);this.updateProgress("cached",{newIndex:o,curIndex:i,millisecond:parseInt(1e3*e.cached,10)}),this.cachedIndex=o}}},{key:"findIndex",value:function(e,t){var n=this.fragments;return 1===n.length?0:(e>n[t].start&&e<n[t].end||this.fragments.map((function(n,i){e>n.start&&e<=n.end&&(t=i)})),t)}},{key:"findHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)if(Yd.hasClass(e[t],this.focusClass))return{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"findFragment",value:function(e){var t=this.root.children;return e<0||e>=t.length?null:{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)Yd.removeClass(e[t],this.focusClass)}},{key:"setHightLight",value:function(e){var t=this.root.children;if(e<t.length)return Yd.addClass(t[e],this.focusClass),{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"render",value:function(){var e=this,t=this.style.progressColor;return this.root=Yd.createDom("xg-inners","",{},"progress-list"),this.fragments&&(this.progressList=this.fragments.map((function(n){var i=Yd.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(n.percent):"flex: ".concat(n.percent)},"".concat(n.isFocus?"inner-focus":""," xgplayer-progress-inner"));return e.root.appendChild(i),tm.map((function(t){i.appendChild(Yd.createDom(t.tag,"",{style:t.styleKey?"background: ".concat(e.style[t.styleKey],"; width:0;"):"width:0;"},t.className))})),{cached:i.children[0],played:i.children[1]}}))),this.root}}]),e}(),im=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),yi(pi(i=t.call(this,e)),"onMoveOnly",(function(e){var t=pi(i),n=t.pos,r=t.config,o=t.player;Yd.event(e);var s=Yd.getEventPos(e,o.zoom),a=90===o.rotateDeg?s.clientY:s.clientX;if(!(n.moving&&Math.abs(n.x-a)<r.miniMoveStep)){n.moving=!0,n.x=a;var c=i.computeTime(e);i.triggerCallbacks("dragmove",c,e)}})),yi(pi(i),"onBodyClick",(function(e){e.preventDefault(),e.stopPropagation()})),yi(pi(i),"_mouseDownHandler",(function(e,t){i._state.time=t.currentTime,i.updateWidth(t.currentTime,t.percent,0)})),yi(pi(i),"_mouseUpHandler",(function(e,t){pi(i).pos.moving&&i.updateWidth(t.currentTime,t.percent,2)})),yi(pi(i),"_mouseMoveHandler",(function(e,t){var n=pi(i),r=n._state,o=n.pos,s=n.config,a=n.player;r.time<t.currentTime?t.forward=!0:t.forward=!1,r.time=t.currentTime,o.isDown&&!o.moving&&(o.moving=!0,s.isPauseMoving&&a.pause(),i.triggerCallbacks("dragstart",t,e)),i.updateWidth(t.currentTime,t.percent,1),i.triggerCallbacks("dragmove",t,e)})),yi(pi(i),"onMouseDown",(function(e){var t=pi(i),n=t.player,r=t.pos,o=t.config,s=t.playerConfig,a=Yd.getEventPos(e,n.zoom),c=90===n.rotateDeg?a.clientY:a.clientX;if(!(n.isMini||o.closeMoveSeek||!s.allowSeekAfterEnded&&n.ended)){e.stopPropagation(),i.focus(),Yd.checkIsFunction(s.disableSwipeHandler)&&s.disableSwipeHandler(),Yd.checkIsFunction(o.onMoveStart)&&o.onMoveStart(),Yd.event(e),r.x=c,r.isDown=!0,r.moving=!1,n.focus({autoHide:!1}),i.isProgressMoving=!0,Yd.addClass(i.progressBtn,"active");var l=i.computeTime(e);return i._mouseDownHandlerHook(e,l),"touch"===i.domEventType?(i.root.addEventListener("touchmove",i.onMouseMove),i.root.addEventListener("touchend",i.onMouseUp)):(i.unbind("mousemove",i.onMoveOnly),document.addEventListener("mousemove",i.onMouseMove,!1),document.addEventListener("mouseup",i.onMouseUp,!1),n.root.addEventListener("click",i.onBodyClick,!1)),!0}})),yi(pi(i),"onMouseUp",(function(e){var t=pi(i),n=t.player,r=t.config,o=t.pos,s=t.playerConfig,a=t._state;e.stopPropagation(),e.preventDefault(),Yd.checkIsFunction(s.enableSwipeHandler)&&s.enableSwipeHandler(),Yd.checkIsFunction(r.onMoveEnd)&&r.onMoveEnd(),Yd.event(e),Yd.removeClass(i.progressBtn,"active");var c=i.computeTime(e);o.moving?i.triggerCallbacks("dragend",c,e):i.triggerCallbacks("click",c,e),i._mouseUpHandlerHook(e,c),o.moving=!1,o.isDown=!1,o.x=0,o.y=0,a.time=0,"touch"===i.domEventType?(i.root.removeEventListener("touchmove",i.onMouseMove),i.root.removeEventListener("touchend",i.onMouseUp),i.blur()):(document.removeEventListener("mousemove",i.onMouseMove,!1),document.removeEventListener("mouseup",i.onMouseUp,!1),n.root.removeEventListener("click",i.onBodyClick,!1),o.isEnter?!s.isMobileSimulateMode&&i.bind("mousemove",i.onMoveOnly):i.onMouseLeave(e)),Yd.setTimeout(pi(i),(function(){i.resetSeekState()}),10),n.focus()})),yi(pi(i),"onMouseMove",(function(e){var t=pi(i),n=t.pos,r=t.player,o=t.config;Yd.checkTouchSupport()&&e.preventDefault(),Yd.event(e);var s=Yd.getEventPos(e,r.zoom),a=90===r.rotateDeg?s.clientY:s.clientX,c=Math.abs(n.x-a);if(!(n.moving&&c<o.miniMoveStep||!n.moving&&c<o.miniStartStep)){n.x=a;var l=i.computeTime(e);i._mouseMoveHandlerHook(e,l)}})),yi(pi(i),"onMouseOut",(function(e){i.triggerCallbacks("mouseout",null,e)})),yi(pi(i),"onMouseOver",(function(e){i.triggerCallbacks("mouseover",null,e)})),yi(pi(i),"onMouseEnter",(function(e){var t=pi(i),n=t.player,r=t.pos;i.triggerCallbacks("mouseenter",null,e),r.isDown||r.isEnter||n.isMini||!n.config.allowSeekAfterEnded&&n.ended||(r.isEnter=!0,i.bind("mousemove",i.onMoveOnly),i.bind("mouseleave",i.onMouseLeave),i.focus())})),yi(pi(i),"onMouseLeave",(function(e){i.triggerCallbacks("mouseleave",null,e);var t=pi(i),n=t.player,r=t.pos;r.isEnter=!1,n.isMini||(i.unbind("mousemove",i.onMoveOnly),r.isDown?i.unbind("mouseleave",i.onMouseLeave):i.blur())})),i.useable=!1,i.isProgressMoving=!1,i.__dragCallBacks=[],i._state={now:-1,direc:0,time:0},i._disableBlur=!1,i}return bo(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.useable=e}},{key:"createInner",value:function(){var e=this;this.innerList=new nm({fragments:this.config.fragments,style:this.playerConfig.commonStyle||{}}),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map((function(t){e[t]=e.innerList[t].bind(e.innerList)}))}},{key:"afterCreate",value:function(){var e=this;this.config.disable||this.playerConfig.isLive||(this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1},this.outer=this.find("xg-outer"),this.createInner(),"mobile"===ep.device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(fp,(function(){e.onTimeupdate()})),this.on(hp,(function(){e.onTimeupdate(),e.onCacheUpdate()})),this.on(_p,(function(){e.onCacheUpdate()})),this.on(ap,(function(){e.onCacheUpdate(),e._state.now=0})),this.on(wp,(function(){e.onReset()})),this.bindDomEvents(),this.initCustomStyle())}},{key:"initCustomStyle",value:function(){var e=(this.playerConfig||{}).commonStyle.sliderBtnStyle,t=this.progressBtn;e&&("string"==typeof e?t.style.boxShadow=e:"object"===di(e)&&Object.keys(e).map((function(n){t.style[n]=e[n]})))}},{key:"triggerCallbacks",value:function(e,t,n){this.__dragCallBacks.length>0&&this.__dragCallBacks.map((function(i){if(i&&i.handler&&i.type===e)try{i.handler(t,n)}catch(e){console.error("[XGPLAYER][triggerCallbacks] ".concat(i," error"),e)}}))}},{key:"addCallBack",value:function(e,t){t&&"function"==typeof t&&this.__dragCallBacks.push({type:e,handler:t})}},{key:"removeCallBack",value:function(e,t){var n=this.__dragCallBacks,i=-1;n.map((function(n,r){n&&n.type===e&&n.handler===t&&(i=r)})),i>-1&&n.splice(i,1)}},{key:"bindDomEvents",value:function(){var e=this.player,t=e.controls,n=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),"touch"===this.domEventType?(this.root.addEventListener("touchstart",this.onMouseDown),t&&(t.root&&t.root.addEventListener("touchmove",Yd.stopPropagation),t.center&&t.center.addEventListener("touchend",Yd.stopPropagation))):(this.bind("mousedown",this.onMouseDown),!n.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut))}},{key:"focus",value:function(){Yd.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),Yd.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,t,n){var i=this.config,r=this.player;if(!i.isCloseClickSeek||0!==n){var o=e>r.duration?r.duration-.2:Number(e).toFixed(1);this.updatePercent(t),this.updateTime(e),(1!==n||i.isDragingSeek&&"audio"!==r.videoConfig.mediaType)&&(this._state.now=o,this._state.direc=o>r.currentTime?0:1,r.seek(o))}}},{key:"computeTime",value:function(e){var t,n,i,r=this.player,o=this.root.getBoundingClientRect(),s=o.width,a=o.height,c=o.top,l=o.left,u=Yd.getEventPos(e,r.zoom);90===r.rotateDeg?(t=a,n=c,i=u.clientY):(t=s,n=l,i=u.clientX);var h=i-n,f=(h=h>t?t:h<0?0:h)/t;return{percent:f=f<0?0:f>1?1:f,currentTime:parseInt(f*this.duration*1e3,10)/1e3,offset:h,width:t,left:n,e:e}}},{key:"updateTime",value:function(e){var t=this.player,n=this.duration;e>n?e=n:e<0&&(e=0);var i=t.plugins.time;i&&i.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,t){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(100*e,"%"),this.innerList.update({played:e*this.duration},this.duration);var n=this.player.plugins.miniprogress;n&&n.update({played:e*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(){var e=this.player,t=this._state,n=this.duration;if(!(e.isSeeking||this.isProgressMoving||e.state<6)){if(t.now>-1){var i=parseInt(1e3*t.now,10)-parseInt(1e3*e.currentTime,10);if(0===t.direc&&i>300||1===t.direc&&i>-300)return void(t.now=-1);t.now=-1}var r=this.timeOffset+e.currentTime;this.innerList.update({played:r},n),this.progressBtn.style.left="".concat(r/n*100,"%");var o=this.player.plugins.miniprogress;o&&o.update({played:r},n)}}},{key:"onCacheUpdate",value:function(){var e=this.player,t=this.duration,n=e.bufferedPoint;this.innerList.update({cached:n.end},t);var i=this.player.plugins.miniprogress;i&&i.update({cached:n.end},t)}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var e=this.player,t=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null,"touch"===this.domEventType?(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),t&&(t.root&&t.root.removeEventListener("touchmove",Yd.stopPropagation),t.center&&t.center.removeEventListener("touchend",Yd.stopPropagation))):(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!1))}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var e=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===e?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){}}}}]),n}(wv),rm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return bo(n,[{key:"afterCreate",value:function(){var e=this,t=this.player;this.config.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on(cp,(function(){e.animate(t.paused)})),this.on(op,(function(){e.animate(t.paused)})),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:ny,class:"xg-icon-play"},pause:{icon:iy,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:t.paused,to:!t.paused}),t.ended?t.replay():t.paused?(t.play(),this.animate(!1)):(t.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){var t=this.i18nKeys;e?(this.setAttr("data-state","pause"),this.changeLangTextKey(this.find(".xg-tips"),t.PLAY_TIPS)):(this.setAttr("data-state","play"),this.changeLangTextKey(this.find(".xg-tips"),t.PAUSE_TIPS))}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PLAY_TIPS,'">').concat(this.i18n.PLAY_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_LEFT,index:0,disable:!1}}}]),n}(wv);function om(){return(new DOMParser).parseFromString('<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>\n    </g>\n</svg>',"image/svg+xml").firstChild}var sm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return bo(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(t){t.preventDefault(),t.stopPropagation(),e.config.onClick(t)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:om,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){Yd.addClass(this.root,"show")}},{key:"hide",value:function(){Yd.removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-back">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:vv.ROOT_TOP,index:0}}}]),n}(wv);function am(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n',"image/svg+xml").firstChild}function cm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n',"image/svg+xml").firstChild}var um=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(e=t.call.apply(t,[this].concat(r))),"_onOrientationChange",(function(t){e.player.fullscreen&&e.config.rotateFullscreen&&(90===window.orientation||-90===window.orientation?e.player.setRotateDeg(0):e.player.setRotateDeg(90))})),e}return bo(n,[{key:"afterCreate",value:function(){var e=this,t=this.config,n=this.playerConfig;if(!t.disable){t.target&&(this.playerConfig.fullscreenTarget=this.config.target);var i=Yd.getFullScreenEl();n.fullscreenTarget===i&&this.player.getFullscreen(),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(t){var n=e.player.fullscreen;e.emitUserAction(t,"switch_fullscreen",{prop:"fullscreen",from:n,to:!n})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(Ip,(function(t){e.changeLangTextKey(e.find(".xg-tips"),t?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(t)})),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:sm,options:{config:{onClick:function(t){e.handleFullscreen(t)}}}})),"mobile"===ep.device&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:am,class:"xg-get-fullscreen"},exitFullscreen:{icon:cm,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon","mobile"===ep.device?"touchend":"click",this.handleFullscreen),"mobile"===ep.device&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=this.player,n=this.config;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(t.fullscreen?t.exitCssFullscreen():t.getCssFullscreen(),this.animate(t.fullscreen)):n.rotateFullscreen?(t.fullscreen?t.exitRotateFullscreen():t.getRotateFullscreen(),this.animate(t.fullscreen)):n.switchCallback&&"function"==typeof n.switchCallback?n.switchCallback(t.fullscreen):t.fullscreen?t.exitFullscreen():t.getFullscreen()}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){wo(gi(n.prototype),"show",this).call(this)}},{key:"hide",value:function(){wo(gi(n.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),n}(wv),lm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),(i=t.call(this,e)).isActiving=!1,i}return bo(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"currentTime",get:function(){return this.player.currentTime||0}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,t=this.player.controls.config.mode;this.mode="flex"===t?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(vp,(function(){e.onTimeUpdate()})),this.on(fp,(function(){e.onTimeUpdate()})),this.on(wp,(function(){e.onReset()})))}},{key:"show",value:function(){"flex"!==this.mode&&wo(gi(n.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(){var e=this.player;if(!(this.config.disable||this.isActiving||e.state<6&&4!==e.state)){var t=this.currentTime+this.timeOffset;"flex"===this.mode?(this.centerCurDom.innerHTML=Yd.format(t),this.duration!==1/0&&this.duration>0&&(this.centerDurDom.innerHTML=Yd.format(this.duration))):(this.timeDom.innerHTML=Yd.format(t),this.duration!==1/0&&this.duration>0&&(this.durationDom.innerHTML=Yd.format(this.duration)))}}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=Yd.format(0),this.centerDurDom.innerHTML=Yd.format(0)):(this.timeDom.innerHTML=Yd.format(0),this.durationDom.innerHTML=Yd.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(e.controls&&e.controls.center){var t=e.controls.center;this.centerCurDom=Yd.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=Yd.createDom("xg-icon","00:00",{},"xgplayer-time right"),t.children.length>0?t.insertBefore(this.centerCurDom,t.children[0]):t.appendChild(this.centerCurDom),t.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;this.duration===1/0||this.playerConfig.isLive?(Yd.hide(this.durationDom),Yd.hide(this.timeDom),Yd.hide(this.find(".time-separator")),Yd.show(this.find(".time-live-tag"))):Yd.hide(this.find(".time-live-tag")),e.hide?this.hide():this.show()}},{key:"changeLiveState",value:function(e){e?(Yd.hide(this.durationDom),Yd.hide(this.timeDom),Yd.hide(this.find(".time-separator")),Yd.show(this.find(".time-live-tag"))):(Yd.hide(this.find(".time-live-tag")),Yd.show(this.find(".time-separator")),Yd.show(this.durationDom),Yd.show(this.timeDom))}},{key:"updateTime",value:function(e){this.isActiving=!0,!e&&0!==e||e>this.duration||("flex"!==this.mode?this.timeDom.innerHTML=Yd.format(e):this.centerCurDom.innerHTML=Yd.format(e))}},{key:"resetActive",value:function(){var e=this,t=this.player,n=function(){e.isActiving=!1};this.off(hp,n),t.isSeeking?this.once(hp,n):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_LEFT,index:2,disable:!1}}}]),n}(wv);function hm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function fm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function dm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n',"image/svg+xml").firstChild}var pm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(e=t.call.apply(t,[this].concat(r))),"onBarMousedown",(function(t){var n=pi(e).player,i=e.find(".xgplayer-slider"),r=e.find(".xgplayer-bar");i.focus(),Yd.event(t);var o=r.getBoundingClientRect(),s=Yd.getEventPos(t,n.zoom),a=o.height-(s.clientY-o.top);if(s.h=a,s.barH=o.height,e.pos=s,!(a<-2))return e.updateVolumePos(a,t),document.addEventListener("mouseup",e.onBarMouseUp),e.isStart=!0,!1})),yi(pi(e),"onBarMouseMove",(function(t){if(e.isStart){var n=pi(e),i=n.pos,r=n.player;t.preventDefault(),t.stopPropagation(),Yd.event(t);var o=Yd.getEventPos(t,r.zoom);e.isMoving=!0;var s=i.h-o.clientY+i.clientY;s>i.barH||e.updateVolumePos(s,t)}})),yi(pi(e),"onBarMouseUp",(function(t){Yd.event(t),document.removeEventListener("mouseup",e.onBarMouseUp),e.isStart=!1,e.isMoving=!1})),yi(pi(e),"onMouseenter",(function(t){e._timerId&&(Yd.clearTimeout(pi(e),e._timerId),e._timerId=null),Yd.addClass(e.root,"slide-show")})),yi(pi(e),"onMouseleave",(function(t){e._timerId&&(Yd.clearTimeout(pi(e),e._timerId),e._timerId=null),e._timerId=Yd.setTimeout(pi(e),(function(){Yd.removeClass(e.root,"slide-show"),e.isStart&&e.onBarMouseUp(t),e._timerId=null}),200)})),yi(pi(e),"onVolumeChange",(function(t){if(e.player){var n=e.player,i=n.muted,r=n.volume;e.isMoving||(e.find(".xgplayer-drag").style.height=i||0===r?"4px":"".concat(100*r,"%"),e.config.showValueLabel&&e.updateVolumeValue()),e.animate(i,r)}})),e}return bo(n,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:fm,class:"xg-volume-small"},volumeLarge:{icon:hm,class:"xg-volume"},volumeMuted:{icon:dm,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,!this.config.disable){this.initIcons();var t=this.playerConfig,n=t.commonStyle,i=t.volume;n.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=n.volumeColor),this.changeMutedHandler=this.hook("mutedChange",(function(t){e.changeMuted(t)}),{pre:function(e){e.preventDefault(),e.stopPropagation()}}),"mobile"===ep.device||this.playerConfig.isMobileSimulateMode||(this.bind("mouseenter",this.onMouseenter),this.bind(["blur","mouseleave"],this.onMouseleave),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(gp,this.onVolumeChange),this.once(yp,this.onVolumeChange),"Number"!==Yd.typeOf(i)&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,t){var n=this.player,i=this.find(".xgplayer-drag"),r=this.find(".xgplayer-bar");if(r&&i){var o=parseInt(e/r.getBoundingClientRect().height*1e3,10);i.style.height="".concat(e,"px");var s=Math.max(Math.min(o/1e3,1),0),a={volume:{from:n.volume,to:s}};n.muted&&(a.muted={from:!0,to:!1}),this.emitUserAction(t,"change_volume",{muted:n.muted,volume:n.volume,props:a}),n.volume=Math.max(Math.min(o/1e3,1),0),n.muted&&(n.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,t=e.volume,n=e.muted,i=this.find(".xgplayer-value-label"),r=Math.max(Math.min(t,1),0);i.innerText=n?0:Math.ceil(100*r)}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var t=this.player;this.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:t.muted,volume:t.volume,props:{muted:{from:t.muted,to:!t.muted}}}),t.volume>0&&(t.muted=!t.muted),t.volume<.01&&(t.volume=this.config.miniVolume)}},{key:"animate",value:function(e,t){e||0===t?this.setAttr("data-state","mute"):t<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon","mobile"===ep.device?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,t=this.config.showValueLabel;return'\n    <xg-icon class="xgplayer-volume" data-state="normal">\n      <div class="xgplayer-icon">\n      </div>\n      <xg-slider class="xgplayer-slider">\n        '.concat(t?'<div class="xgplayer-value-label">'.concat(100*e,"</div>"):"",'\n        <div class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: ').concat(100*e,'%"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>')}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),n}(wv);function vm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n',"image/svg+xml").firstChild}var gm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),(i=t.call(this,e)).rotateDeg=i.config.rotateDeg||0,i}return bo(n,[{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(Dp,(function(){e.rotateDeg&&Yd.setTimeout(e,(function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)}),100)})),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,t){var n=this.player;e||(e=0);var i=this.player,r=i.root,o=i.innerContainer,s=i.video,a=r.offsetWidth,c=o&&t?o.offsetHeight:r.offsetHeight,l="100%",u="100%",h=0,f=0;.75!==e&&.25!==e||(l="".concat(c,"px"),u="".concat(a,"px"),h=-(c-a)/2,f=-(a-c)/2);var d="translate(".concat(h,"px,").concat(f,"px) rotate(").concat(e,"turn)"),p={transformOrigin:"center center",transform:d,webKitTransform:d,height:u,width:l},v=t?s:r,g=t?n.getPlugin("poster"):null;Object.keys(p).map((function(e){v.style[e]=p[e],g&&g.root&&(g.root.style[e]=p[e])}))}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.player;this.rotateDeg||(this.rotateDeg=0);var r=e?1:-1;this.rotateDeg=(this.rotateDeg+1+.25*r*n)%1,this.updateRotateDeg(this.rotateDeg,t),i.emit(Bp,360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:vm}}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.ROTATE_TIPS,'">\n      ').concat(this.i18n.ROTATE_TIPS,"\n      </div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),n}(wv);function ym(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}function mm(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}var _m="picture-in-picture",bm="fullscreen",wm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(e=t.call.apply(t,[this].concat(r))),"switchPIP",(function(t){if(!e.isPIPAvailable())return!1;t.stopPropagation(),e.isPip?(e.exitPIP(),e.emitUserAction(t,"change_pip",{props:"pip",from:!0,to:!1}),e.setAttr("data-state","normal")):4===e.player.video.readyState&&(e.requestPIP(),e.emitUserAction(t,"change_pip",{props:"pip",from:!1,to:!0}),e.setAttr("data-state","pip"))})),e}return bo(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.pip&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(this.pMode="inline",this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(Vp,(function(){e.config.showIcon&&(Yd.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))})))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:ym,class:"xg-get-pip"},pipIconExit:{icon:mm,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,t=this.player;this.leavePIPCallback=function(){var n=t.paused;Yd.setTimeout(e,(function(){!n&&t.videoPlay()}),0),!n&&t.videoPlay(),e.setAttr("data-state","normal"),t.emit(Mp,!1)},this.enterPIPCallback=function(n){t.emit(Mp,!0),e.pipWindow=n.pictureInPictureWindow,e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(n){var i=t.video.webkitPresentationMode;e.pMode===bm&&i!==bm&&t.onFullscreenChange(null,!1),e.pMode=i,i===_m?e.enterPIPCallback(n):"inline"===i&&e.leavePIPCallback(n)},t.video&&(t.video.addEventListener("enterpictureinpicture",this.enterPIPCallback),t.video.addEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(t.video)&&t.video.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var e=this.player,t=this.playerConfig;if(this.isPIPAvailable()&&!this.isPip)try{var i=t.poster;return i&&(e.video.poster="String"===Yd.typeOf(i)?i:i.poster),n.checkWebkitSetPresentationMode(e.video)?e.video.webkitSetPresentationMode("picture-in-picture"):e.video.requestPictureInPicture(),!0}catch(e){return console.error("requestPiP",e),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{return this.isPIPAvailable()&&this.isPip&&(n.checkWebkitSetPresentationMode(e.video)?e.video.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(e){return console.error("exitPIP",e),!1}}},{key:"isPip",get:function(){var e=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===e.video||e.video.webkitPresentationMode===_m}},{key:"isPIPAvailable",value:function(){var e=this.player.video;return("Boolean"!==Yd.typeOf(document.pictureInPictureEnabled)||document.pictureInPictureEnabled)&&("Boolean"===Yd.typeOf(e.disablePictureInPicture)&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&"Function"===Yd.typeOf(e.webkitSetPresentationMode))}},{key:"destroy",value:function(){var e=this.player;e.video.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.removeEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(e.video)&&e.video.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(this.config.showIcon&&this.isPIPAvailable())return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon xg-icon-disable">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PIP,'">').concat(this.i18n.PIP,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(e){return"function"==typeof e.webkitSetPresentationMode}}]),n}(wv);function km(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Cm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),yi(pi(i=t.call(this,e)),"playNext",(function(e){var t=pi(i).player;e.preventDefault(),e.stopPropagation(),i.idx+1<i.config.urlList.length?(i.idx++,i.nextHandler(i.config.urlList[i.idx],i.idx),t.emit(Hp,i.idx+1)):(i.nextHandler(),t.emit(Hp))})),i.idx=-1,i}return bo(n,[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:km}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e="mobile"===ep.device?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var t=this.player;e&&(t.pause(),t.currentTime=0,t.switchURL?t.switchURL(e):t.src=e,t.config.url=e,t.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="PLAYNEXT_TIPS">'.concat(this.i18n.PLAYNEXT_TIPS,"</div>\n     </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),n}(wv),Om={exports:{}};!function(e,t){e.exports=function e(t,n,i){var r,o,s=window,a="application/octet-stream",c=i||a,l=t,u=!n&&!i&&l,h=document.createElement("a"),f=function(e){return String(e)},d=s.Blob||s.MozBlob||s.WebKitBlob||f,p=n||"download";if(d=d.call?d.bind(s):Blob,"true"===String(this)&&(c=(l=[l,c])[0],l=l[1]),u&&u.length<2048&&(p=u.split("/").pop().split("?")[0],h.href=u,-1!==h.href.indexOf(u))){var v=new XMLHttpRequest;return v.open("GET",u,!0),v.responseType="blob",v.onload=function(t){e(t.target.response,p,a)},setTimeout((function(){v.send()}),0),v}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l)){if(!(l.length>2096103.424&&d!==f))return navigator.msSaveBlob?navigator.msSaveBlob(_(l),p):b(l);c=(l=_(l)).type||a}else if(/([\x80-\xff])/.test(l)){for(var g=0,y=new Uint8Array(l.length),m=y.length;g<m;++g)y[g]=l.charCodeAt(g);l=new d([y],{type:c})}function _(e){for(var t=e.split(/[:;,]/),n=t[1],i=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),r=i.length,o=0,s=new Uint8Array(r);o<r;++o)s[o]=i.charCodeAt(o);return new d([s],{type:n})}function b(e,t){if("download"in h)return h.href=e,h.setAttribute("download",p),h.className="download-js-link",h.innerHTML="downloading...",h.style.display="none",document.body.appendChild(h),setTimeout((function(){h.click(),document.body.removeChild(h),!0===t&&setTimeout((function(){s.URL.revokeObjectURL(h.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,a)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,a)),n.src=e,setTimeout((function(){document.body.removeChild(n)}),333)}if(r=l instanceof d?l:new d([l],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(r,p);if(s.URL)b(s.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===f)try{return b("data:"+c+";base64,"+s.btoa(r))}catch(e){return b("data:"+c+","+encodeURIComponent(r))}(o=new FileReader).onload=function(e){b(this.result)},o.readAsDataURL(r)}return!0}}(Om);var xm=Om.exports;function Sm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n',"image/svg+xml").firstChild}var Tm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),yi(pi(i=t.call(this,e)),"download",(function(e){if(!i.isLock){i.emitUserAction(e,"download");var t=i.getAbsoluteURL(i.player.src);xm(t),i.isLock=!0,i.timer=window.setTimeout((function(){i.isLock=!1,window.clearTimeout(i.timer),i.timer=null}),300)}})),i.timer=null,i.isLock=!1,i}return bo(n,[{key:"afterCreate",value:function(){this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:Sm}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var t=document.createElement("div");t.innerHTML='<a href="'.concat(e,'">x</a>'),e=t.firstChild.href}return e}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-download">\n   <div class="xgplayer-icon">\n   </div>\n   <div class="xg-tips" lang-key="'.concat(this.i18nKeys.DOWNLOAD_TIPS,'">').concat(this.i18n.DOWNLOAD_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:3,disable:!0}}}]),n}(wv),Vm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return bo(n,[{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.screenShot&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(t){e.fitVideo&&(e.width=t.vWidth,e.height=t.vHeight)},this.once(Dp,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,t){var n=document.createElement("a");n.href=e,n.download=t;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}},{key:"createCanvans",value:function(e,t){var n=document.createElement("canvas");this.canvasCtx=n.getContext("2d"),this.canvas=n,n.width=e||this.config.width,n.height=t||this.config.height}},{key:"onClickBtn",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot"),this.shot().then((function(e){t.emit(Np,e),t.saveScreenShot(e,t.config.name+t.config.format)}))}},{key:"shot",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{quality:.92,type:"image/png"},r=this.config,o=this.player,s=i.quality||r.quality,a=i.type||r.type;return new Promise((function(i,c){n.canvas?(n.canvas.width=e||r.width,n.canvas.height=t||r.height):n.createCanvans(e,t),n.canvasCtx.drawImage(o.video,0,0,e||r.width,t||r.height);var l=n.canvas.toDataURL(a,s).replace(a,"image/octet-stream");i(l=l.replace(/^data:image\/[^;]+/,"data:application/octet-stream"))}))}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.onClickBtn),this.off(Dp,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",t="SCREENSHOT";return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'.concat(e,'">\n      ').concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[t],'">').concat(this.i18n[t],"</span>")," \n      </div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),n}(wv),Em=function(){function e(t){ui(this,e),this.config=t.config,this.parent=t.root,this.root=Yd.createDom("ul","",{},"xg-options-list ".concat(this.config.className)),t.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var n="mobile"===ep.device?"touchend":"click";this._delegates=wv.delegate.call(this,this.root,"li",n,this.onItemClick)}return bo(e,[{key:"renderItemList",value:function(e){var t=this,n=this.config,i=this.root;e?n.data=e:e=n.data,n.style&&Object.keys(n.style).map((function(e){i.style[e]=n[e]})),e.length>0&&(this.attrKeys=Object.keys(e[0])),this.root.innerHTML="",e.map((function(e,n){var i=e.selected?"option-item selected":"option-item";e["data-index"]=n,t.root.appendChild(Yd.createDom("li","<span>".concat(e.showText,"</span>"),e,i))}))}},{key:"onItemClick",value:function(e){e.delegateTarget||(e.delegateTarget=e.target);var t=e.delegateTarget;if(t&&Yd.hasClass(t,"selected"))return!1;var n="function"==typeof this.config.onItemClick?this.config.onItemClick:null,i=this.root.querySelector(".selected");Yd.addClass(t,"selected"),i&&Yd.removeClass(i,"selected"),n(e,{from:i?this.getAttrObj(i,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(e,t){if(!e||!t)return{};var n={};t.map((function(t){n[t]=e.getAttribute(t)}));var i=e.getAttribute("data-index");return i&&(n.index=Number(i)),n}},{key:"show",value:function(){Yd.removeClass(this.root,"hide"),Yd.addClass(this.root,"active")}},{key:"hide",value:function(){Yd.removeClass(this.root,"active"),Yd.addClass(this.root,"hide")}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map((function(e){e.destroy&&e.destroy()})),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),e}(),Pm="mobile"===ep.device,Im=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),(i=t.call(this,e)).isActive=!1,i.curValue=null,i.curIndex=0,i}return bo(n,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,t=this.config;Pm&&"middle"!==t.listType&&(t.listType="rightSide"),t.hidePortrait&&Yd.addClass(this.root,"portrait"),this.once(pp,(function(){t.list&&t.list.length>0&&(e.renderItemList(t.list),e.show())})),Pm&&this.on(kp,(function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)})),this.activeEvent=Pm?"touchend":"mouseenter",this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||Yd.addClass(this.root,"show")}},{key:"hide",value:function(){Yd.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,t,n){if(void 0===e)return"";var i=this.config.list;return!n&&(n=this.player.lang),t=!t||Yd.isUndefined(e[t])?"text":t,"number"==typeof e&&(e=i[e]),"object"===di(e[t])?e[t][n]||e[t].zh:e[t]||""}},{key:"onEnter",value:function(e){e.preventDefault(),e.stopPropagation(),this.onToggle(!0)}},{key:"onLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.isActive&&this.onToggle(!1)}},{key:"onToggle",value:function(e){if(this.isActive!==e){var t=this.player.controls,n=this.config.listType;e?("rightSide"===n?t.blur():t.focus(),this.optionsList&&this.optionsList.show()):("rightSide"===n?t.focus():t.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,t){e.preventDefault(),e.stopPropagation();var n=this.config,i=n.listType,r=n.list;(Pm||"rightSide"===i)&&this.onToggle(!1),this.curIndex=t.to.index,this.curItem=r[this.curIndex],this.changeCurrentText(),this.onToggle(!1)}},{key:"changeCurrentText",value:function(){var e=this.config.list,t=e[this.curIndex<e.length?this.curIndex:0];t&&(this.find(".icon-text").innerHTML=this.getTextByLang(t,"iconText"))}},{key:"renderItemList",value:function(e,t){var n=this,i=this.config,r=this.optionsList,o=this.player;if("number"==typeof t&&(this.curIndex=t,this.curItem=i.list[t]),r)return r.renderItemList(e),void this.changeCurrentText();var s={config:{data:e||[],className:"rightSide"===i.listType?"right-side":"",onItemClick:function(e,t){n.onItemClick(e,t)}},root:"rightSide"===i.listType?o.root:this.root};this.config.isShowIcon&&(this.optionsList=new Em(s),this.changeCurrentText(),this.show())}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onToggle),this.unbind("mouseleave",this.onToggle),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",'">\n    <div class="xgplayer-icon btn-text">\n    <span class="icon-text"></span>\n    </div>\n   </xg-icon>')}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1}}}]),n}(wv),Lm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),(i=t.call(this,e)).curTime=0,i.isPaused=!0,i}return bo(n,[{key:"beforeCreate",value:function(e){var t=e.config.list;Array.isArray(t)&&t.length>0&&(e.config.list=t.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})))}},{key:"afterCreate",value:function(){var e=this;wo(gi(n.prototype),"afterCreate",this).call(this),this.on("resourceReady",(function(t){e.changeDefinitionList(t)})),this.on(Rp,(function(t){e.renderItemList(e.config.list,t.to)})),this.player.definitionList.length<2&&this.hide()}},{key:"initDefinition",value:function(){var e=this.config,t=e.list,n=e.defaultDefinition;if(t.length>0){var i=null;t.map((function(e){e.definition===n&&(i=e)})),i||(i=t[0]),this.changeDefinition(i)}}},{key:"renderItemList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.list||[],i=arguments.length>1?arguments[1]:void 0,r=i&&i.definition?i.definition:this.config.defaultDefinition;i&&t.forEach((function(e){e.selected=!1}));var o=0,s=t.map((function(t,n){var i={url:t.url,definition:t.definition||"",showText:e.getTextByLang(t)||t.definition,selected:!1};return(t.selected||t.definition&&t.definition===r)&&(i.selected=!0,o=n),i}));wo(gi(n.prototype),"renderItemList",this).call(this,s,o)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map((function(e){return!e.text&&e.name&&(e.text=e.name),e.text||(e.text=e.definition),e})),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,t){this.player.changeDefinition(e,t)}},{key:"onItemClick",value:function(e,t){wo(gi(n.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:t.from,to:t.to}),this.player.changeDefinition(t.to,t.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0}}}]),n}(Im),jm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),(i=t.call(this,e)).curRate=1,i}return bo(n,[{key:"beforeCreate",value:function(e){var t=e.player.config.playbackRate,n=t?Array.isArray(t)?t:e.config.list:[];Array.isArray(n)&&(e.config.list=n.map((function(e){return"number"==typeof e?e={rate:e,text:"".concat(e,"x")}:!e.text&&e.rate&&(e.text="".concat(e.rate,"x")),e})))}},{key:"afterCreate",value:function(){var e=this;wo(gi(n.prototype),"afterCreate",this).call(this),this.on(mp,(function(){e.curValue!==e.player.playbackRate&&e.renderItemList()})),this.renderItemList()}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&wo(gi(n.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,t){wo(gi(n.prototype),"onItemClick",this).apply(this,arguments);var i=e.delegateTarget,r=Number(i.getAttribute("rate"));if(!r||r===this.curValue)return!1;var o={playbackRate:{from:this.player.playbackRate,to:r}};this.emitUserAction(e,"change_rate",{props:o}),this.curValue=r,this.player.playbackRate=r}},{key:"renderItemList",value:function(){var e=this,t=this.player.playbackRate||1;this.curValue=t;var i=0,r=this.config.list.map((function(n,r){var o={rate:n.rate};return o.rate===t&&(o.selected=!0,i=r),o.showText=e.getTextByLang(n),o}));wo(gi(n.prototype),"renderItemList",this).call(this,r,i)}},{key:"destroy",value:function(){wo(gi(n.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1}}}]),n}(Im);function Rm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Am(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Dm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return bo(n,[{key:"afterCreate",value:function(){var e=this;this.config.disable||(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(Lp,(function(t){e.animate(t)})),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,t=this.find(".xgplayer-icon");t.appendChild(e.cssFullscreen),t.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:t}),t?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var t=this.i18nKeys;this.changeLangTextKey(this.find(".xg-tips"),e?t.EXITCSSFULLSCREEN_TIPS:t.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:Rm,class:"xg-get-cssfull"},exitCssFullscreen:{icon:Am,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class=\'xgplayer-cssfullscreen\'>\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.EXITCSSFULLSCREEN_TIPS,'">').concat(this.i18n.CSSFULLSCREEN_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),n}(wv),Mm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return bo(n,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(e){e.preventDefault(),e.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(pp,(function(){e.handleCanPlay()})),this.on(up,(function(t){e.onError(t)}))}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleCanPlay",value:function(){Yd.removeClass(this.player.root,"xgplayer-is-error")}},{key:"handleError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.player,n=e.errorType,i=t.errorNote?this.i18n[t.errorNote]:"";if(!i)switch(n){case"decoder":i=this.i18n.MEDIA_ERR_DECODE;break;case"network":i=this.i18n.MEDIA_ERR_NETWORK;break;default:i=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=i,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],[{key:"pluginName",get:function(){return"error"}}]),n}(wv),Bm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return bo(n,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],(function(t){(e.config.onClick||e.customOnClick)&&(t.preventDefault(),t.stopPropagation(),e.customOnClick?e.customOnClick(t):e.config.onClick(t))})),this.player.showPrompt=function(){e.show.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var t=this;Object.keys(e).map((function(n){t.root.style[n]=e[n]}))}},{key:"show",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e){this.customOnClick=i;var r=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),Yd.addClass(this.root,"show"),"arrow"===n.mode&&Yd.addClass(this.root,"arrow"),this.find(".xgplayer-prompt-detail").innerHTML="string"==typeof e?e:"".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),n.style&&this.setStyle(n.style);var o="boolean"==typeof n.autoHide?n.autoHide:this.config.autoHide;if(o){var s=n.interval||r;this.intervalId=setTimeout((function(){t.hide()}),s)}}}},{key:"hide",value:function(){Yd.removeClass(this.root,"show"),Yd.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(Ag.CONTROLS_FOLLOW,'">\n    <span class="xgplayer-prompt-detail"></span>\n    </xg-prompt>')}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),n}(wv),Nm={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function Hm(e){Object.keys(Nm).map((function(t){void 0===e[t]&&(e[t]=Nm[t])}))}var Fm={initDots:function(){var e=this;this._ispots.map((function(t){e.createDot(t,!1)})),this._ispotsInit=!0},createDot:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player.plugins.progress;if(n&&(t&&(Hm(e),this._ispots.push(e)),this._ispotsInit||!t)){var i=this.calcuPosition(e.time,e.duration),r=e.style||{};r.left="".concat(i.left,"%"),r.width="".concat(i.width,"%");var o="xgspot_".concat(e.id," xgplayer-spot");i.isMini&&(o+=" mini");var s=Yd.createDom("xg-spot",e.template||"",{"data-text":e.text,"data-time":e.time,"data-id":e.id},o);Object.keys(r).map((function(e){s.style[e]=r[e]})),n.outer&&n.outer.appendChild(s)}},findDot:function(e){if(this.player.plugins.progress){var t=this._ispots.filter((function(t,n){return t.id===e}));return t.length>0?t[0]:null}},updateDot:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.player.plugins.progress;if(n){var i=this.findDot(e.id);if(i&&Object.keys(e).map((function(t){i[t]=e[t]})),this._ispotsInit){var r=n.find('xg-spot[data-id="'.concat(e.id,'"]'));if(r){var o=this.calcuPosition(e.time,e.duration),s=e.style||{};s.left="".concat(o.left,"%"),s.width="".concat(o.width,"%"),r.setAttribute("data-text",e.text),r.setAttribute("data-time",e.time),o.isMini?Yd.addClass(r,"mini"):Yd.removeClass(r,"mini"),Object.keys(s).map((function(e){r.style[e]=s[e]})),t&&this.showDot(e.id)}}}},deleteDot:function(e){var t=this._ispots,n=this.player.plugins.progress;if(n){for(var i=[],r=0;r<t.length;r++)t[r].id===e&&i.push(r);for(var o=i.length-1;o>=0;o--)if(t.splice(i[o],1),this._ispotsInit){var s=n.find('xg-spot[data-id="'.concat(e,'"]'));s&&s.parentElement.removeChild(s)}}},deleteAllDots:function(){var e=this.player.plugins.progress;if(e)if(this._ispotsInit){for(var t=e.root.getElementsByTagName("xg-spot"),n=t.length-1;n>=0;n--)e.outer.removeChild(t[n]);this._ispots=[]}else this._ispots=[]},updateAllDots:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.player.plugins.progress;if(n)if(this._ispotsInit){this._ispots=[];var i=n.root.getElementsByTagName("xg-spot"),r=i.length;if(r>t.length)for(var o=r-1;o>t.length-1;o--)n.outer.removeChild(i[o]);t.map((function(t,n){n<r?(i[n].setAttribute("data-id","".concat(t.id)),e._ispots.push(t),e.updateDot(t)):e.createDot(t)}))}else this._ispots=t},getAllDotsDom:function(){var e=this.player.plugins.progress;return e?e.root.getElementsByTagName("xg-spot"):[]},getDotDom:function(e){var t=this.player.plugins.progress;if(t)return t.find('xg-spot[data-id="'.concat(e,'"]'))}},Um={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver"},$m=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),yi(pi(i=t.call(this,e)),"onMousemove",(function(e){(i._state.f||Yd.hasClass(e.target,"xg-spot-content"))&&(Yd.event(e),e.stopPropagation())})),yi(pi(i),"onMousedown",(function(e){(i._state.f||Yd.hasClass(e.target,"xg-spot-content"))&&(Yd.event(e),e.stopPropagation())})),yi(pi(i),"onDotMouseLeave",(function(e){i._curDot.removeEventListener("mouseleave",i.onDotMouseLeave),i.blurDot(e.target),i._curDot=null;var t=i.player.plugins.progress;t&&t.enableBlur(),i.show()})),yi(pi(i),"onProgressMouseOver",(function(e,t){if(Yd.hasClass(t.target,"xgplayer-spot")&&!i._curDot){i._curDot=t.target,i.focusDot(t.target),i._curDot.children.length>0&&i.hide();var n=i.player.plugins.progress;n&&n.disableBlur(),i._curDot.addEventListener("mouseleave",i.onDotMouseLeave)}})),i._ispots=[],i.videoPreview=null,i.videothumbnail=null,i.thumbnail=null,i._state={now:0,f:!1},i}return bo(n,[{key:"beforeCreate",value:function(e){var t=e.player.plugins.progress;t&&(e.root=t.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",(function(t,n){n.time&&e.player.seek(n.time)})),function(e){var t=e.config,n=e.player;Object.keys(Fm).map((function(t){e[t]=Fm[t].bind(e)}));var i=n.config.progressDot||t.ispots||[];e._ispots=i.map((function(e){return Hm(e),e})),e._ispotsInit=!1,n.once(vp,(function(){e.initDots()}))}(this)}},{key:"onPluginsReady",value:function(){this.player.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,t=this.player.plugins.progress;if(t&&(Object.keys(Um).map((function(n){e[Um[n]]=e[Um[n]].bind(e),t.addCallBack(n,e[Um[n]])})),"mobile"!==ep.device)){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown);var n=this.hook("previewClick",(function(){}));this.handlerPreviewClick=function(t){t.stopPropagation(),n(parseInt(1e3*e._state.now,10)/1e3,t)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,t){this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){console.log("onProgressDragStart"),this.isDrag=!0,this.videoPreview&&Yd.addClass(this.videoPreview,"show")}},{key:"onProgressDragEnd",value:function(e){this.isDrag=!1,this.videoPreview&&Yd.removeClass(this.videoPreview,"show")}},{key:"onProgressClick",value:function(e,t){if(Yd.hasClass(t.target,"xgplayer-spot")){t.stopPropagation(),t.preventDefault();var n={};["time","id","text"].map((function(e){n[e]=t.target.getAttribute("data-".concat(e))})),n.time&&(n.time=Number(n.time)),this.handlerSpotClick(t,n)}}},{key:"updateLinePos",value:function(e,t){var n,i,r=this.root,o=this.previewLine,s=this.timePoint,a="flex"===this.player.controls.mode,c=r.getBoundingClientRect().width,l=s.getBoundingClientRect().width,u=e-c/2;u<0&&!a?(u=0,n=e-c/2,!this.thumbnail&&(i=e-c/2-l/2)):u>t-c&&!a?(n=u-(t-c),!this.thumbnail&&(i=u-(t-c)-l/2),u=t-c):!this.thumbnail&&(i=-l/2),o.style.transform=void 0!==n?"translateX(".concat(n,"px)"):"",s.style.transform=void 0!==i?"translateX(".concat(i,"px)"):"",r.style.transform="translateX(".concat(u,"px)")}},{key:"updateTimeText",value:function(e){var t=this.timeText,n=this.timePoint;t.textContent=e,!this.thumbnail&&(n.textContent=e)}},{key:"updatePosition",value:function(e,t,n,i){var r=this.root,o=this.config,s=this._state;if(r){this.updateLinePos(e,t),s.now=n;var a=Yd.format(n);i&&i.target&&Yd.hasClass(i.target,"xgplayer-spot")?(this.showTips(i.target.getAttribute("data-text"),!1,a),this.focusDot(i.target),s.f=!0,o.isFocusDots&&s.f&&(s.now=parseInt(i.target.getAttribute("data-time"),10))):o.defaultText?(s.f=!1,this.showTips(o.defaultText,!0,a)):(s.f=!1,this.hideTips("")),this.updateTimeText(a),this.updateThumbnails(s.now)}}},{key:"updateThumbnails",value:function(e){var t=this.player,n=this.videoPreview,i=t.plugins.thumbnail;if(i&&i.usable){this.thumbnail&&i.update(this.thumbnail,e,160,90);var r=n&&n.getBoundingClientRect();this.videothumbnail&&i.update(this.videothumbnail,e,r.width,r.height)}}},{key:"changeThumbnail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==ep.device){var t=this.player,n=this.config,i=t.getPlugin("thumbnail");if(i.changeConfig(e),i&&i.usable&&n.isShowThumbnail){Yd.removeClass(this.root,"short-line no-thumbnail"),this._hasThumnail=!0;var r=this.find(".xg-spot-thumbnail");this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.thumbnail&&r.removeChild(this.thumbnail),this.thumbnail=i.createThumbnail(r,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=Yd.createDom("xg-video-preview","",{},"xgvideo-preview"),t.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}else{Yd.addClass(this.root,"short-line no-thumbnail");var o=this.find(".xg-spot-thumbnail");this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.thumbnail&&o.removeChild(this.thumbnail),this.videothumbnail=null,this.thumbnail=null,this._hasThumnail=!1}}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==ep.device){var t=this.player,n=this.config,i=t.getPlugin("thumbnail");if(i&&Object.keys(e).map((function(t){i.config[t]=e[t]})),i&&i.usable&&n.isShowThumbnail){Yd.removeClass(this.root,"short-line no-thumbnail"),this._hasThumnail=!0;var r=this.find(".xg-spot-thumbnail");this.thumbnail=i.createThumbnail(r,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=Yd.createDom("xg-video-preview","",{},"xgvideo-preview"),t.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}else Yd.addClass(this.root,"short-line no-thumbnail")}}},{key:"calcuPosition",value:function(e,t){var n=this.player.plugins.progress,i=this.player,r=n.root.getBoundingClientRect().width,o=i.duration/r*6;return e+t>i.duration&&(t=i.duration-e),i.duration,i.duration,{left:e/i.duration*100,width:t/i.duration*100,isMini:t<o}}},{key:"showDot",value:function(e){var t=this.findDot(e);if(t){var n=this.root.getBoundingClientRect().width,i=t.time/this.player.duration*n;this.updatePosition(i,n,t.time)}}},{key:"focusDot",value:function(e,t){e&&(t||(t=e.getAttribute("data-id")),Yd.addClass(e,"active"),this._activeDotId=t)}},{key:"blurDot",value:function(e){if(!e){var t=this._activeDotId;e=this.getDotDom(t)}e&&(Yd.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Yd.addClass(this.root,"no-timepoint"),e&&(Yd.addClass(this.find(".xg-spot-content"),"show-text"),t&&"production"===this.config.mode?(Yd.addClass(this.root,"product"),this.tipText.textContent=e):(Yd.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(n," ").concat(e)))}},{key:"hideTips",value:function(){Yd.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",Yd.removeClass(this.find(".xg-spot-content"),"show-text"),Yd.removeClass(this.root,"product")}},{key:"hide",value:function(){Yd.addClass(this.root,"hide")}},{key:"show",value:function(){Yd.removeClass(this.root,"hide")}},{key:"destroy",value:function(){var e=this,t=this.player.plugins.progress;t&&Object.keys(Um).map((function(n){t.removeCallBack(n,e[Um[n]])})),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return"mobile"===ep.device||this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info '.concat("short"===this.config.mode?"short-line":"",'">\n      <div class="xg-spot-content">\n        <div class="xg-spot-thumbnail">\n          <span class="xg-spot-time"></span>\n        </div>\n        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>\n      </div>\n      <div class="xgplayer-progress-point">00:00</div>\n      <div class="xg-spot-line"></div>\n    </div>')}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:""}}}]),n}(wv),Wm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(e){var i;return ui(this,n),(i=t.call(this,e)).ratio=1,i.interval=-1,i.preloadMark={},i}return bo(n,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([vp],(function(){var t=e.config,n=t.pic_num,i=t.interval;e.usable&&(e.interval=i>0?i:Math.round(1e3*e.player.duration/n)/1e3)}))}},{key:"usable",get:function(){var e=this.config,t=e.urls,n=e.pic_num;return t&&t.length>0&&n>0}},{key:"initThumbnail",value:function(){var e=this.config,t=e.width,n=e.height,i=e.pic_num,r=e.interval;this.ratio=t/n*100,this.interval=r>0?r:Math.round(1e3*this.player.duration/i)/1e3,this.preload(0)}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var t=this,n=this.config.urls,i=n.length;[e-1,e,e+1,e+2].map((function(e){!t.preloadMark[e]&&e>=0&&e<i&&(Yd.preloadImg(n[e]),t.preloadMark[e]=!0)}))}},{key:"getPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.config,r=i.pic_num,o=i.row,s=i.col,a=i.width,c=i.height,l=Math.ceil(e/this.interval),u=(l=l>r?r:l)<o*s?0:Math.ceil(l/(o*s))-1,h=l-u*(s*o),f=h>0?Math.ceil(h/s)-1:0,d=h>0?h-f*s-1:0,p=0,v=0;if(t&&n){var g=t/n;g<a/c?v=(p=t)/(a/c):p=(v=n)*(a/c)}else v=(p=t||a)/(a/c);var y=this.getUrlByIndex(u);return{urlIndex:u,rowIndex:f,colIndex:d,url:y,height:v,width:p,style:{backgroundImage:"url(".concat(y,")"),backgroundSize:"".concat(p*s,"px auto"),backgroundPosition:"-".concat(d*p,"px -").concat(f*v,"px"),width:"".concat(p,"px"),height:"".concat(v,"px")}}}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=this.config,s=o.pic_num,a=o.urls;if(!(s<1)&&a&&0!==a.length){var c=this.getPosition(t,n,i);this.preload(c.urlIndex),Object.keys(c.style).map((function(t){e.style[t]=c.style[t]})),Object.keys(r).map((function(t){e.style[t]=r[t]}))}}},{key:"changeConfig",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(t).forEach((function(n){void 0!==e.config[n]&&(e.config[n]=t[n])})),this.usable&&this.initThumbnail()}},{key:"createThumbnail",value:function(e,t){var n=Yd.createDom("xg-thumbnail","",{},"thumbnail ".concat(t));return e&&e.appendChild(n),n}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,width:160,height:90,scale:1,className:"",hidePortrait:!1}}}]),n}(wv),zm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return bo(n,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;t&&this.root&&(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/t*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/t*100,"%")))}},{key:"render",value:function(){if(this.playerConfig.progress&&this.playerConfig.miniprogress)return'<xg-mini-progress class="xg-mini-progress">\n    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>\n    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>\n    </xg-mini-progress>'}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),n}(wv),qm="realtime",Gm="firstframe";function Km(){try{return window.performance.now()}catch(e){return(new Date).getTime()}}function Ym(e){return"safari"!==ep.browser||!/^blob/.test(e.currentSrc)&&!/^blob/.test(e.src)}var Zm=null,Xm=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(e=t.call.apply(t,[this].concat(r))),"onLoadedData",(function(){if(e.player){var t=e.player.video;e.videoPI=parseInt(t.videoWidth/t.videoHeight*100,10)}})),yi(pi(e),"start",(function(){var t=e.player.video,n=Km();Ym(t)&&e.canvasCtx&&(e.stop(),(e.config.mode===qm||n-e.preTime>=e.interval)&&(t&&t.videoWidth&&e.update(t,t.videoWidth,t.videoHeight),e.preTime=n),e.frameId=window.setTimeout((function(){e.start()}),e.interval))})),yi(pi(e),"stop",(function(){e.frameId&&(window.clearTimeout(e.frameId),e.frameId=null)})),e}return bo(n,[{key:"afterCreate",value:function(){var e=this;!0===this.playerConfig.dynamicBg&&(this.config.disable=!1),n.isSupport||(this.config.disable=!0);var t=this.config,i=t.disable,r=t.mode;i||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0},this.isStart=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/this.config.frameRate,10),this.canvas=null,this.canvasCtx=null,this.once(Vp,(function(){e.player&&(e.init(),!e.player.paused&&e.start())})),this.once(yp,this.onLoadedData),this.on(Pp,(function(){e.once(yp,e.onLoadedData)})),r!==Gm&&(this.on(op,(function(){e.start()})),this.on(cp,(function(){e.stop()}))),r===Gm&&this.once(fp,(function(){var t=e.player.video;t&&Ym(t)&&t.videoWidth&&e.update(t,t.videoWidth,t.videoHeight)})))}},{key:"init",value:function(){var e=this.player,t=this.config;this.canvasFilter=n.supportCanvasFilter();try{var i=this.config.isInnerRender&&e.innerContainer||e.root;i.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg"><canvas>\n        </canvas><xgmask></xgmask></div>'),this.root=i.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=t.filter,this.canvas.style.webkitFilter=t.filter),this.mask=this.find("xgmask"),t.addMask&&(this.mask.style.background=t.maskBg),this.canvasCtx=this.canvas.getContext("2d");var r=this.playerConfig.poster;if(r){var o="String"===Yd.typeOf(r)?r:"String"===Yd.typeOf(r.poster)?r.poster:null;this.updateImg(o)}}catch(e){qd.logError("plugin:DynamicBg",e)}}},{key:"updateImg",value:function(e){var t=this;if(e){var n=this.canvas.getBoundingClientRect(),i=n.width,r=n.height,o=new window.Image;o.onload=function(){t.canvas&&(t.canvas.height=r,t.canvas.width=i,o=null)},o.src=e}}},{key:"update",value:function(e,t,n){if(this.canvas&&this.canvasCtx&&this.videoPI)try{var i=this._pos,r=this.config,o=this.canvas.getBoundingClientRect(),s=o.width,a=o.height;if(this.videoPI=parseInt(t/n*100,10),s!==i.width||a!==i.height){var c=parseInt(s/a*100,10);i.width=this.canvas.width=s,i.height=this.canvas.height=a;var l=a,u=s;c<this.videoPI?u=parseInt(a*this.videoPI/100,10):c>this.videoPI&&(l=parseInt(100*s/this.videoPI,10)),c<this.videoPI?u=parseInt(a*this.videoPI/100,10):c>this.videoPI&&(l=parseInt(100*s/this.videoPI,10)),i.rwidth=1.2*u,i.rheight=1.2*l,i.x=(s-i.rwidth)/2,i.y=(a-i.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=r.filter),this.canvasCtx.drawImage(e,i.x,i.y,i.rwidth,i.rheight)}catch(e){qd.logError("plugin:DynamicBg",e)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,mode:"framerate",frameRate:10,filter:"blur(50px)",addMask:!0,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return"boolean"==typeof Zm?Zm:Zm=function(){try{return!!document.createElement("canvas").getContext}catch(e){return!1}}()}},{key:"supportCanvasFilter",value:function(){return!("safari"===ep.browser||"firefox"===ep.browser)}}]),n}(wv),Jm={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}},Qm=o,e_=fe("iterator"),t_=!Qm((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),n+=i+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[e_]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),n_=De,i_=Lc,r_=Bi,o_=q,s_=function(e,t,n,i){try{return i?t(n_(n)[0],n[1]):t(n)}catch(t){throw i_(e),t}},a_=Sc,c_=At,u_=po,l_=Pc,h_=2147483647,f_=/[^\0-\u007E]/,d_=/[.\u3002\uFF0E\uFF61]/g,p_="Overflow: input needs wider integers to process",v_=Math.floor,g_=String.fromCharCode,y_=function(e){return e+22+75*(e<26)},m_=function(e,t,n){var i=0;for(e=n?v_(e/700):e>>1,e+=v_(e/t);e>455;i+=36)e=v_(e/35);return v_(i+36*e/(e+38))},__=function(e){var t,n,i=[],r=(e=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&r)<<10)+(1023&o)+65536):(t.push(r),n--)}else t.push(r)}return t}(e)).length,o=128,s=0,a=72;for(t=0;t<e.length;t++)(n=e[t])<128&&i.push(g_(n));var c=i.length,l=c;for(c&&i.push("-");l<r;){var u=h_;for(t=0;t<e.length;t++)(n=e[t])>=o&&n<u&&(u=n);var h=l+1;if(u-o>v_((h_-s)/h))throw RangeError(p_);for(s+=(u-o)*h,o=u,t=0;t<e.length;t++){if((n=e[t])<o&&++s>h_)throw RangeError(p_);if(n==o){for(var f=s,d=36;;d+=36){var p=d<=a?1:d>=a+26?26:d-a;if(f<p)break;var v=f-p,g=36-p;i.push(g_(y_(p+v%g))),f=v_(v/g)}i.push(g_(y_(f))),a=m_(s,h,l==c),s=0,++l}}++s,++o}return i.join("")},b_=De,w_=Pc,k_=xn,C_=S,O_=t_,x_=ze.exports,S_=fc,T_=Di,V_=Uv,E_=bt,P_=wc,I_=Q,L_=Bi,j_=rc,R_=De,A_=C,D_=wi,M_=qn,B_=d,N_=function(e){var t=w_(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return b_(t.call(e))},H_=Pc,F_=fe,U_=C_("fetch"),$_=C_("Request"),W_=$_&&$_.prototype,z_=C_("Headers"),q_=F_("iterator"),G_="URLSearchParams",K_="URLSearchParamsIterator",Y_=E_.set,Z_=E_.getterFor(G_),X_=E_.getterFor(K_),J_=/\+/g,Q_=Array(4),eb=function(e){return Q_[e-1]||(Q_[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},tb=function(e){try{return decodeURIComponent(e)}catch(t){return e}},nb=function(e){var t=e.replace(J_," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(eb(n--),tb);return t}},ib=/[!'()~]|%20/g,rb={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ob=function(e){return rb[e]},sb=function(e){return encodeURIComponent(e).replace(ib,ob)},ab=function(e,t){if(t)for(var n,i,r=t.split("&"),o=0;o<r.length;)(n=r[o++]).length&&(i=n.split("="),e.push({key:nb(i.shift()),value:nb(i.join("="))}))},cb=function(e){this.entries.length=0,ab(this.entries,e)},ub=function(e,t){if(e<t)throw TypeError("Not enough arguments")},lb=V_((function(e,t){Y_(this,{type:K_,iterator:N_(Z_(e).entries),kind:t})}),"Iterator",(function(){var e=X_(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n})),hb=function(){P_(this,hb,G_);var e,t,n,i,r,o,s,a,c,l=arguments.length>0?arguments[0]:void 0,u=this,h=[];if(Y_(u,{type:G_,entries:h,updateURL:function(){},updateSearchParams:cb}),void 0!==l)if(A_(l))if("function"==typeof(e=H_(l)))for(n=(t=e.call(l)).next;!(i=n.call(t)).done;){if((s=(o=(r=N_(R_(i.value))).next).call(r)).done||(a=o.call(r)).done||!o.call(r).done)throw TypeError("Expected sequence with length 2");h.push({key:D_(s.value),value:D_(a.value)})}else for(c in l)I_(l,c)&&h.push({key:c,value:D_(l[c])});else ab(h,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:D_(l))},fb=hb.prototype;if(S_(fb,{append:function(e,t){ub(arguments.length,2);var n=Z_(this);n.entries.push({key:D_(e),value:D_(t)}),n.updateURL()},delete:function(e){ub(arguments.length,1);for(var t=Z_(this),n=t.entries,i=D_(e),r=0;r<n.length;)n[r].key===i?n.splice(r,1):r++;t.updateURL()},get:function(e){ub(arguments.length,1);for(var t=Z_(this).entries,n=D_(e),i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){ub(arguments.length,1);for(var t=Z_(this).entries,n=D_(e),i=[],r=0;r<t.length;r++)t[r].key===n&&i.push(t[r].value);return i},has:function(e){ub(arguments.length,1);for(var t=Z_(this).entries,n=D_(e),i=0;i<t.length;)if(t[i++].key===n)return!0;return!1},set:function(e,t){ub(arguments.length,1);for(var n,i=Z_(this),r=i.entries,o=!1,s=D_(e),a=D_(t),c=0;c<r.length;c++)(n=r[c]).key===s&&(o?r.splice(c--,1):(o=!0,n.value=a));o||r.push({key:s,value:a}),i.updateURL()},sort:function(){var e,t,n,i=Z_(this),r=i.entries,o=r.slice();for(r.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===n&&r.push(e)}i.updateURL()},forEach:function(e){for(var t,n=Z_(this).entries,i=L_(e,arguments.length>1?arguments[1]:void 0,3),r=0;r<n.length;)i((t=n[r++]).value,t.key,this)},keys:function(){return new lb(this,"keys")},values:function(){return new lb(this,"values")},entries:function(){return new lb(this,"entries")}},{enumerable:!0}),x_(fb,q_,fb.entries),x_(fb,"toString",(function(){for(var e,t=Z_(this).entries,n=[],i=0;i<t.length;)e=t[i++],n.push(sb(e.key)+"="+sb(e.value));return n.join("&")}),{enumerable:!0}),T_(hb,G_),k_({global:!0,forced:!O_},{URLSearchParams:hb}),!O_&&"function"==typeof z_){var db=function(e){if(A_(e)){var t,n=e.body;if(j_(n)===G_)return(t=e.headers?new z_(e.headers):new z_).has("content-type")||t.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),M_(e,{body:B_(0,String(n)),headers:B_(0,t)})}return e};if("function"==typeof U_&&k_({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return U_(e,arguments.length>1?db(arguments[1]):{})}}),"function"==typeof $_){var pb=function(e){return P_(this,pb,"Request"),new $_(e,arguments.length>1?db(arguments[1]):{})};W_.constructor=pb,pb.prototype=W_,k_({global:!0,forced:!0},{Request:pb})}}var vb,gb={URLSearchParams:hb,getState:Z_},yb=xn,mb=c,_b=t_,bb=r,wb=jn,kb=ze.exports,Cb=wc,Ob=Q,xb=qh,Sb=function(e){var t,n,i,r,o,s,a=o_(e),c="function"==typeof this?this:Array,l=arguments.length,u=l>1?arguments[1]:void 0,h=void 0!==u,f=l_(a),d=0;if(h&&(u=r_(u,l>2?arguments[2]:void 0,2)),null==f||c==Array&&a_(f))for(n=new c(t=c_(a.length));t>d;d++)s=h?u(a[d],d):a[d],u_(n,d,s);else for(o=(r=f.call(a)).next,n=new c;!(i=o.call(r)).done;d++)s=h?s_(r,u,[i.value,d],!0):i.value,u_(n,d,s);return n.length=d,n},Tb=pa.codeAt,Vb=wi,Eb=Di,Pb=gb,Ib=bt,Lb=bb.URL,jb=Pb.URLSearchParams,Rb=Pb.getState,Ab=Ib.set,Db=Ib.getterFor("URL"),Mb=Math.floor,Bb=Math.pow,Nb="Invalid scheme",Hb="Invalid host",Fb="Invalid port",Ub=/[A-Za-z]/,$b=/[\d+-.A-Za-z]/,Wb=/\d/,zb=/^0x/i,qb=/^[0-7]+$/,Gb=/^\d+$/,Kb=/^[\dA-Fa-f]+$/,Yb=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Zb=/[\0\t\n\r #/:<>?@[\\\]^|]/,Xb=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Jb=/[\t\n\r]/g,Qb=function(e,t){var n,i,r;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return Hb;if(!(n=tw(t.slice(1,-1))))return Hb;e.host=n}else if(uw(e)){if(t=function(e){var t,n,i=[],r=e.toLowerCase().replace(d_,".").split(".");for(t=0;t<r.length;t++)n=r[t],i.push(f_.test(n)?"xn--"+__(n):n);return i.join(".")}(t),Yb.test(t))return Hb;if(null===(n=ew(t)))return Hb;e.host=n}else{if(Zb.test(t))return Hb;for(n="",i=Sb(t),r=0;r<i.length;r++)n+=aw(i[r],iw);e.host=n}},ew=function(e){var t,n,i,r,o,s,a,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(t=c.length)>4)return e;for(n=[],i=0;i<t;i++){if(""==(r=c[i]))return e;if(o=10,r.length>1&&"0"==r.charAt(0)&&(o=zb.test(r)?16:8,r=r.slice(8==o?1:2)),""===r)s=0;else{if(!(10==o?Gb:8==o?qb:Kb).test(r))return e;s=parseInt(r,o)}n.push(s)}for(i=0;i<t;i++)if(s=n[i],i==t-1){if(s>=Bb(256,5-t))return null}else if(s>255)return null;for(a=n.pop(),i=0;i<n.length;i++)a+=n[i]*Bb(256,3-i);return a},tw=function(e){var t,n,i,r,o,s,a,c=[0,0,0,0,0,0,0,0],l=0,u=null,h=0,f=function(){return e.charAt(h)};if(":"==f()){if(":"!=e.charAt(1))return;h+=2,u=++l}for(;f();){if(8==l)return;if(":"!=f()){for(t=n=0;n<4&&Kb.test(f());)t=16*t+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,l>6)return;for(i=0;f();){if(r=null,i>0){if(!("."==f()&&i<4))return;h++}if(!Wb.test(f()))return;for(;Wb.test(f());){if(o=parseInt(f(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;h++}c[l]=256*c[l]+r,2!=++i&&4!=i||l++}if(4!=i)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;c[l++]=t}else{if(null!==u)return;h++,u=++l}}if(null!==u)for(s=l-u,l=7;0!=l&&s>0;)a=c[l],c[l--]=c[u+s-1],c[u+--s]=a;else if(8!=l)return;return c},nw=function(e){var t,n,i,r;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=Mb(e/256);return t.join(".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,n=1,i=null,r=0,o=0;o<8;o++)0!==e[o]?(r>n&&(t=i,n=r),i=null,r=0):(null===i&&(i=o),++r);return r>n&&(t=i,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),i===n?(t+=n?":":"::",r=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},iw={},rw=xb({},iw,{" ":1,'"':1,"<":1,">":1,"`":1}),ow=xb({},rw,{"#":1,"?":1,"{":1,"}":1}),sw=xb({},ow,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),aw=function(e,t){var n=Tb(e,0);return n>32&&n<127&&!Ob(t,e)?e:encodeURIComponent(e)},cw={ftp:21,file:null,http:80,https:443,ws:80,wss:443},uw=function(e){return Ob(cw,e.scheme)},lw=function(e){return""!=e.username||""!=e.password},hw=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},fw=function(e,t){var n;return 2==e.length&&Ub.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},dw=function(e){var t;return e.length>1&&fw(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},pw=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&fw(t[0],!0)||t.pop()},vw=function(e){return"."===e||"%2e"===e.toLowerCase()},gw={},yw={},mw={},_w={},bw={},ww={},kw={},Cw={},Ow={},xw={},Sw={},Tw={},Vw={},Ew={},Pw={},Iw={},Lw={},jw={},Rw={},Aw={},Dw={},Mw=function(e,t,n,i){var r,o,s,a,c,l=n||gw,u=0,h="",f=!1,d=!1,p=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(Xb,"")),t=t.replace(Jb,""),r=Sb(t);u<=r.length;){switch(o=r[u],l){case gw:if(!o||!Ub.test(o)){if(n)return Nb;l=mw;continue}h+=o.toLowerCase(),l=yw;break;case yw:if(o&&($b.test(o)||"+"==o||"-"==o||"."==o))h+=o.toLowerCase();else{if(":"!=o){if(n)return Nb;h="",l=mw,u=0;continue}if(n&&(uw(e)!=Ob(cw,h)||"file"==h&&(lw(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=h,n)return void(uw(e)&&cw[e.scheme]==e.port&&(e.port=null));h="","file"==e.scheme?l=Ew:uw(e)&&i&&i.scheme==e.scheme?l=_w:uw(e)?l=Cw:"/"==r[u+1]?(l=bw,u++):(e.cannotBeABaseURL=!0,e.path.push(""),l=Rw)}break;case mw:if(!i||i.cannotBeABaseURL&&"#"!=o)return Nb;if(i.cannotBeABaseURL&&"#"==o){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,l=Dw;break}l="file"==i.scheme?Ew:ww;continue;case _w:if("/"!=o||"/"!=r[u+1]){l=ww;continue}l=Ow,u++;break;case bw:if("/"==o){l=xw;break}l=jw;continue;case ww:if(e.scheme=i.scheme,o==vb)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==o||"\\"==o&&uw(e))l=kw;else if("?"==o)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",l=Aw;else{if("#"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),l=jw;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=Dw}break;case kw:if(!uw(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,l=jw;continue}l=xw}else l=Ow;break;case Cw:if(l=Ow,"/"!=o||"/"!=h.charAt(u+1))continue;u++;break;case Ow:if("/"!=o&&"\\"!=o){l=xw;continue}break;case xw:if("@"==o){f&&(h="%40"+h),f=!0,s=Sb(h);for(var v=0;v<s.length;v++){var g=s[v];if(":"!=g||p){var y=aw(g,sw);p?e.password+=y:e.username+=y}else p=!0}h=""}else if(o==vb||"/"==o||"?"==o||"#"==o||"\\"==o&&uw(e)){if(f&&""==h)return"Invalid authority";u-=Sb(h).length+1,h="",l=Sw}else h+=o;break;case Sw:case Tw:if(n&&"file"==e.scheme){l=Iw;continue}if(":"!=o||d){if(o==vb||"/"==o||"?"==o||"#"==o||"\\"==o&&uw(e)){if(uw(e)&&""==h)return Hb;if(n&&""==h&&(lw(e)||null!==e.port))return;if(a=Qb(e,h))return a;if(h="",l=Lw,n)return;continue}"["==o?d=!0:"]"==o&&(d=!1),h+=o}else{if(""==h)return Hb;if(a=Qb(e,h))return a;if(h="",l=Vw,n==Tw)return}break;case Vw:if(!Wb.test(o)){if(o==vb||"/"==o||"?"==o||"#"==o||"\\"==o&&uw(e)||n){if(""!=h){var m=parseInt(h,10);if(m>65535)return Fb;e.port=uw(e)&&m===cw[e.scheme]?null:m,h=""}if(n)return;l=Lw;continue}return Fb}h+=o;break;case Ew:if(e.scheme="file","/"==o||"\\"==o)l=Pw;else{if(!i||"file"!=i.scheme){l=jw;continue}if(o==vb)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==o)e.host=i.host,e.path=i.path.slice(),e.query="",l=Aw;else{if("#"!=o){dw(r.slice(u).join(""))||(e.host=i.host,e.path=i.path.slice(),pw(e)),l=jw;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",l=Dw}}break;case Pw:if("/"==o||"\\"==o){l=Iw;break}i&&"file"==i.scheme&&!dw(r.slice(u).join(""))&&(fw(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),l=jw;continue;case Iw:if(o==vb||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&fw(h))l=jw;else if(""==h){if(e.host="",n)return;l=Lw}else{if(a=Qb(e,h))return a;if("localhost"==e.host&&(e.host=""),n)return;h="",l=Lw}continue}h+=o;break;case Lw:if(uw(e)){if(l=jw,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=vb&&(l=jw,"/"!=o))continue}else e.fragment="",l=Dw;else e.query="",l=Aw;break;case jw:if(o==vb||"/"==o||"\\"==o&&uw(e)||!n&&("?"==o||"#"==o)){if(".."===(c=(c=h).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(pw(e),"/"==o||"\\"==o&&uw(e)||e.path.push("")):vw(h)?"/"==o||"\\"==o&&uw(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&fw(h)&&(e.host&&(e.host=""),h=h.charAt(0)+":"),e.path.push(h)),h="","file"==e.scheme&&(o==vb||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",l=Aw):"#"==o&&(e.fragment="",l=Dw)}else h+=aw(o,ow);break;case Rw:"?"==o?(e.query="",l=Aw):"#"==o?(e.fragment="",l=Dw):o!=vb&&(e.path[0]+=aw(o,iw));break;case Aw:n||"#"!=o?o!=vb&&("'"==o&&uw(e)?e.query+="%27":e.query+="#"==o?"%23":aw(o,iw)):(e.fragment="",l=Dw);break;case Dw:o!=vb&&(e.fragment+=aw(o,rw))}u++}},Bw=function(e){var t,n,i=Cb(this,Bw,"URL"),r=arguments.length>1?arguments[1]:void 0,o=Vb(e),s=Ab(i,{type:"URL"});if(void 0!==r)if(r instanceof Bw)t=Db(r);else if(n=Mw(t={},Vb(r)))throw TypeError(n);if(n=Mw(s,o,null,t))throw TypeError(n);var a=s.searchParams=new jb,c=Rb(a);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(a)||null},mb||(i.href=Hw.call(i),i.origin=Fw.call(i),i.protocol=Uw.call(i),i.username=$w.call(i),i.password=Ww.call(i),i.host=zw.call(i),i.hostname=qw.call(i),i.port=Gw.call(i),i.pathname=Kw.call(i),i.search=Yw.call(i),i.searchParams=Zw.call(i),i.hash=Xw.call(i))},Nw=Bw.prototype,Hw=function(){var e=Db(this),t=e.scheme,n=e.username,i=e.password,r=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,l=t+":";return null!==r?(l+="//",lw(e)&&(l+=n+(i?":"+i:"")+"@"),l+=nw(r),null!==o&&(l+=":"+o)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},Fw=function(){var e=Db(this),t=e.scheme,n=e.port;if("blob"==t)try{return new Bw(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&uw(e)?t+"://"+nw(e.host)+(null!==n?":"+n:""):"null"},Uw=function(){return Db(this).scheme+":"},$w=function(){return Db(this).username},Ww=function(){return Db(this).password},zw=function(){var e=Db(this),t=e.host,n=e.port;return null===t?"":null===n?nw(t):nw(t)+":"+n},qw=function(){var e=Db(this).host;return null===e?"":nw(e)},Gw=function(){var e=Db(this).port;return null===e?"":String(e)},Kw=function(){var e=Db(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Yw=function(){var e=Db(this).query;return e?"?"+e:""},Zw=function(){return Db(this).searchParams},Xw=function(){var e=Db(this).fragment;return e?"#"+e:""},Jw=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(mb&&wb(Nw,{href:Jw(Hw,(function(e){var t=Db(this),n=Vb(e),i=Mw(t,n);if(i)throw TypeError(i);Rb(t.searchParams).updateSearchParams(t.query)})),origin:Jw(Fw),protocol:Jw(Uw,(function(e){var t=Db(this);Mw(t,Vb(e)+":",gw)})),username:Jw($w,(function(e){var t=Db(this),n=Sb(Vb(e));if(!hw(t)){t.username="";for(var i=0;i<n.length;i++)t.username+=aw(n[i],sw)}})),password:Jw(Ww,(function(e){var t=Db(this),n=Sb(Vb(e));if(!hw(t)){t.password="";for(var i=0;i<n.length;i++)t.password+=aw(n[i],sw)}})),host:Jw(zw,(function(e){var t=Db(this);t.cannotBeABaseURL||Mw(t,Vb(e),Sw)})),hostname:Jw(qw,(function(e){var t=Db(this);t.cannotBeABaseURL||Mw(t,Vb(e),Tw)})),port:Jw(Gw,(function(e){var t=Db(this);hw(t)||(""==(e=Vb(e))?t.port=null:Mw(t,e,Vw))})),pathname:Jw(Kw,(function(e){var t=Db(this);t.cannotBeABaseURL||(t.path=[],Mw(t,Vb(e),Lw))})),search:Jw(Yw,(function(e){var t=Db(this);""==(e=Vb(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Mw(t,e,Aw)),Rb(t.searchParams).updateSearchParams(t.query)})),searchParams:Jw(Zw),hash:Jw(Xw,(function(e){var t=Db(this);""!=(e=Vb(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Mw(t,e,Dw)):t.fragment=null}))}),kb(Nw,"toJSON",(function(){return Hw.call(this)}),{enumerable:!0}),kb(Nw,"toString",(function(){return Hw.call(this)}),{enumerable:!0}),Lb){var Qw=Lb.createObjectURL,ek=Lb.revokeObjectURL;Qw&&kb(Bw,"createObjectURL",(function(e){return Qw.apply(Lb,arguments)})),ek&&kb(Bw,"revokeObjectURL",(function(e){return ek.apply(Lb,arguments)}))}function tk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function nk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tk(Object(n),!0).forEach((function(t){yi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tk(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Eb(Bw,"URL"),yb({global:!0,forced:!_b,sham:!mb},{URL:Bw});var ik=Wp,rk=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var e;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(e=t.call.apply(t,[this].concat(r))),"_recordUserActions",(function(t){var n=e._getTime(),i=Object.assign({},t,{msg:t.msg||t.action});e._stats.info.push(nk(nk({type:"userAction"},n),{},{payload:i}))})),yi(pi(e),"_onReset",(function(){e.reset()})),yi(pi(e),"_recordInfo",(function(t){e.info(t)})),yi(pi(e),"_downloadStats",(function(){var t=e.getStats(),n=new Blob([JSON.stringify(t)],{type:"application/json"}),i=window.URL.createObjectURL(n),r=document.createElement("a");r.style.display="none",r.href=i,console.log("linkhref",i),r.download="player.txt",r.disabled=!1,r.click()})),e}return bo(n,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:(new Date).toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(Up,this._recordUserActions),this.on(ik.STATS_INFO,this._recordInfo),this.on(ik.STATS_DOWNLOAD,this._downloadStats),this.on(ik.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var t=this._getTime();this._stats.info.push(nk(nk({},t),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var t=nk({cat:"function",dur:Date.now()-e.startMs,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(t)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(yi(e={},"info",[]),yi(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player.video,t=[],n=0;n<e.buffered.length;n++)t.push({start:e.buffered.start(n),end:e.buffered.end(n)});var i={currentTime:e.currentTime,readyState:e.readyState,buffered:t,paused:e.paused,ended:e.ended};return this._stats.media=i,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){return this._stats.info.map((function(e){var t=e.payload.data,n="";try{t instanceof Error?n=t.msg:void 0!==t&&(n=JSON.stringify(t))}catch(e){console.log("err",e)}return"[".concat(e.timeFormat,"] : ").concat(e.payload.msg," ").concat(n," ")}))}},{key:"_getProfile",value:function(){var e={traceEvents:[]};return this._stats.info.forEach((function(t){t.payload.profile&&e.traceEvents.push(t.payload)})),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),n}(uv),ok=function(e){fi(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gi(e);if(t){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),t.apply(this,arguments)}return n}(Yg);return yi(ok,"defaultPreset",(function e(t,n){var i,r,o;ui(this,e);var s=n&&n.isMobileSimulateMode,a=n.isLive,c=[].concat(a?[]:[im,zm,$m,lm],[rm,um,gm,Cm,Lm,jm,Tm,Vm,pm,wm]),l=[ey,ty,oy,Ky,sy,Mm,Bm,Wm,vy];this.plugins=[rk,Jg].concat(Xh(c),l);var u=s?"mobile":ep.device;switch(u){case"pc":(i=this.plugins).push.apply(i,[qy,my,Dm]);break;case"mobile":(r=this.plugins).push.apply(r,[Uy]);break;default:(o=this.plugins).push.apply(o,[qy,my,Dm])}(ep.os.isIpad||"pc"===u)&&this.plugins.push(Xm),ep.os.isIpad&&this.plugins.push(my),this.ignores=[],this.i18n=[Jm]})),yi(ok,"Util",Yd),yi(ok,"Sniffer",ep),yi(ok,"Errors",ip),yi(ok,"Events",zp),yi(ok,"Plugin",wv),yi(ok,"BasePlugin",uv),yi(ok,"I18N",zg),yi(ok,"STATE_CLASS",Ag),ok}()}).call(this,n(75))},1298:function(e,t,n){"use strict";n(1089)},1299:function(e,t,n){"use strict";n(1090)},1634:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return w}));n(22);var r=n(5),o=n(108),c=n(30),l=n(6),h=n(8),f=n(179);function d(e){var t=Object(f.j)({maxDurationMS:9e4}),n=t.stayDuration,d=t.isCancelled,v=t.cancel;function y(){return(y=Object(r.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d.value){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,o.a.AddPointReport({growth_type:c.GrowthType.JScore,task_id:c.GrowthTaskID.ViewContent,item_id:t});case 5:(n=e.sent).err_no!==h.ERROR_NO.OK?console.warn("error reportViewContentJScore reason:".concat(n.err_msg)):v(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.warn("error reportViewContentJScore err:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}Object(l.z)((function(){n.value>=9e4&&function(e){y.apply(this,arguments)}(e)}))}function v(){return y.apply(this,arguments)}function y(){return(y=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.AddPointReport({growth_type:c.GrowthType.JScore,task_id:c.GrowthTaskID.BindPhone,item_id:"0"});case 3:(t=e.sent).err_no!==h.ERROR_NO.OK&&console.warn("error reportBindPhoneJScore reason:".concat(t.err_msg)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("error reportBindPhoneJScore err:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function m(){return _.apply(this,arguments)}function _(){return(_=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.AddPointReport({growth_type:c.GrowthType.JScore,task_id:c.GrowthTaskID.UploadFavicon,item_id:"0"});case 3:(t=e.sent).err_no!==h.ERROR_NO.OK&&console.warn("error reportUploadAvatarJScore reason:".concat(t.err_msg)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("error reportUploadAvatarJScore err:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function w(){return k.apply(this,arguments)}function k(){return(k=Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.AddPointReport({growth_type:c.GrowthType.JScore,task_id:c.GrowthTaskID.ModifyScreenName,item_id:"0"});case 3:(t=e.sent).err_no!==h.ERROR_NO.OK&&console.warn("error reportModifyScreenNameJScore reason:".concat(t.err_msg)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn("error reportModifyScreenNameJScore err:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}},1650:function(e,t,n){},1667:function(e,t,n){"use strict";n(37);var r=n(6),o=n(1682),c=n.n(o),l=n(1683),h=n.n(l),f=Object(r.b)({components:{LabelLeftIcon:c.a,LabelRightIcon:h.a},props:{book:{type:Object,default:function(){return{}}},isCountDown:{type:Boolean,default:!1},isOnlyDay:{type:Boolean,default:!1},isFloatDiscountLabel:{type:Boolean,default:!1},showWapStyle:{type:Boolean,default:!1}},setup:function(e,t){var n=t.root.$device.isMobile,o=Object(r.n)({days:"0",hours:"0",minutes:"0",seconds:"0"}),c=Object(r.n)(),l=Object(r.n)(),h=Object(r.n)(99),f=Object(r.a)((function(){var t,n,r;return!(0!==(null===(n=null===(t=e.book)||void 0===t?void 0:t.base_info)||void 0===n?void 0:n.price)&&!(null===(r=e.book)||void 0===r?void 0:r.is_buy))})),d=Object(r.a)((function(){var t;return(null===(t=e.book.max_discount)||void 0===t?void 0:t.name)||""})),v=Object(r.a)((function(){var t;return!!(null===(t=e.book.max_discount)||void 0===t?void 0:t.is_limited_time)})),y=Object(r.a)((function(){return!f.value&&!e.isFloatDiscountLabel&&e.isCountDown&&d.value&&v.value})),m=Object(r.a)((function(){if(!y.value)return"";if(e.isOnlyDay){var t=e.book.max_discount;return t&&1e3*(null==t?void 0:t.end_time)-Date.now()>0?"剩余 ".concat(Math.floor((1e3*(null==t?void 0:t.end_time)-Date.now())/1e3/60/60/24)," 天"):""}return n?"":"剩余 ".concat(o.value.days," 天 ").concat(o.value.hours,":").concat(o.value.minutes,":").concat(o.value.seconds,".").concat(_(h.value))})),_=function(e){return e<10?"0".concat(e):"".concat(e)},w=function(){var t=e.book.max_discount;if(t&&v.value){var n=1e3*(null==t?void 0:t.end_time)-Date.now();if(n>0){var r="".concat(Math.floor(n/1e3/60/60/24)),l=_(Math.floor(n/1e3/60/60%24)),f=_(Math.floor(n/1e3/60%60)),d=_(Math.floor(n/1e3%60));o.value={days:r,hours:l,minutes:f,seconds:d}}else clearInterval(c.value),h.value=0,window.location.reload();c.value||(c.value=setInterval((function(){var e=h.value;e>0?e-=1:e=99,h.value=e}),10))}};return Object(r.j)((function(){n||!y.value||e.isOnlyDay||(w(),l.value=setInterval((function(){w()}),1e3))})),Object(r.k)((function(){clearInterval(l.value),clearInterval(c.value)})),{isOwner:f,isWap:n,showLabel:d,countDownText:m}}}),d=(n(1684),n(29)),component=Object(d.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return!e.isOwner&&e.showLabel?n("div",{staticClass:"sale-tooltip-wrap",class:{"sale-tooltip-wrap-wap":e.showWapStyle,"sale-tooltip-wrap-float":e.isFloatDiscountLabel}},[e.isFloatDiscountLabel?n("LabelLeftIcon",{staticClass:"label-icon label-icon-left"}):e._e(),e._v(" "),e.isFloatDiscountLabel?n("div",{staticClass:"sale-tooltip"},[e._v("\n    "+e._s(e.showLabel)+"\n    "),e.countDownText?n("span",{staticClass:"count-down-text"},[e._v("\n      "+e._s(e.countDownText)+"\n    ")]):e._e()]):n("div",{staticClass:"sale-tooltip"},[e._v("\n    "+e._s(e.showLabel)+"\n    "),e.countDownText?n("span",{staticClass:"count-down-text"},[e._v("\n      "+e._s(e.countDownText)+"\n    ")]):e._e(),e._v(" "),n("div",{staticClass:"sale-tooltip-content"},[e._v("\n      "+e._s(e.showLabel)+"\n      "),e.countDownText?n("span",{staticClass:"count-down-text"},[e._v("\n        "+e._s(e.countDownText)+"\n      ")]):e._e()])]),e._v(" "),e.isFloatDiscountLabel?n("LabelRightIcon",{staticClass:"label-icon label-icon-right"}):e._e()],1):e._e()}),[],!1,null,"6a0ef028",null);t.a=component.exports},1677:function(e,t,n){e.exports=n.p+"5e2cfe768dbb98a0bf497ff46eec11fe.svg"},1678:function(e,t,n){e.exports=n.p+"37ca4f63b2d6ce3142b550147fe4476c.svg"},1679:function(e,t,n){"use strict";n(1273)},1682:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,y=data.attrs,m=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,d],style:[style,v],attrs:Object.assign({width:"7",height:"20",viewBox:"0 0 7 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m)},_),h.concat([n("path",{attrs:{d:"M0 5.33333C0 2.38781 2.38781 0 5.33333 0H76C76 0 72.0072 0 72.0072 4.11765C72.0072 4.91035 72.0072 5.89927 72.0072 6.97946C72.0072 12.8705 67.2534 17.6471 61.3624 17.6471C43.6926 17.6471 9.85589 17.6471 5.99862 17.6471C0.749827 17.6471 0 20 0 20V5.33333Z",fill:"#FFF2EF"}}),n("path",{attrs:{d:"M72.653 0.666667C72.4433 0.869927 72.2462 1.10455 72.0712 1.3752C71.619 2.07469 71.3405 2.97571 71.3405 4.11765V4.12229V4.12695V4.1316V4.13626V4.14093V4.1456V4.15027V4.15495V4.15963V4.16432V4.16901V4.17371V4.17841V4.18311V4.18782V4.19253V4.19725V4.20198V4.2067V4.21143V4.21617V4.22091V4.22566V4.2304V4.23516V4.23991V4.24468V4.24944V4.25421V4.25899V4.26377V4.26855V4.27334V4.27813V4.28293V4.28773V4.29254V4.29735V4.30216V4.30698V4.3118V4.31663V4.32146V4.3263V4.33114V4.33598V4.34083V4.34568V4.35054V4.3554V4.36027V4.36514V4.37001V4.37489V4.37977V4.38466V4.38955V4.39444V4.39934V4.40425V4.40916V4.41407V4.41898V4.4239V4.42883V4.43376V4.43869V4.44363V4.44857V4.45351V4.45846V4.46342V4.46838V4.47334V4.4783V4.48327V4.48825V4.49323V4.49821V4.5032V4.50819V4.51318V4.51818V4.52319V4.52819V4.53321V4.53822V4.54324V4.54827V4.55329V4.55833V4.56336V4.5684V4.57345V4.57849V4.58355V4.5886V4.59366V4.59873V4.6038V4.60887V4.61394V4.61902V4.62411V4.6292V4.63429V4.63939V4.64449V4.64959V4.6547V4.65981V4.66493V4.67005V4.67517V4.6803V4.68543V4.69057V4.69571V4.70085V4.706V4.71115V4.71631V4.72147V4.72663V4.7318V4.73697V4.74215V4.74733V4.75251V4.7577V4.76289V4.76808V4.77328V4.77848V4.78369V4.7889V4.79411V4.79933V4.80455V4.80978V4.81501V4.82024V4.82548V4.83072V4.83596V4.84121V4.84646V4.85172V4.85698V4.86224V4.86751V4.87278V4.87806V4.88334V4.88862V4.89391V4.8992V4.90449V4.90979V4.91509V4.92039V4.9257V4.93102V4.93633V4.94165V4.94698V4.9523V4.95763V4.96297V4.96831V4.97365V4.979V4.98435V4.9897V4.99506V5.00042V5.00578V5.01115V5.01652V5.0219V5.02728V5.03266V5.03804V5.04343V5.04883V5.05422V5.05963V5.06503V5.07044V5.07585V5.08126V5.08668V5.0921V5.09753V5.10296V5.10839V5.11383V5.11927V5.12471V5.13016V5.13561V5.14107V5.14652V5.15199V5.15745V5.16292V5.16839V5.17387V5.17935V5.18483V5.19032V5.19581V5.2013V5.2068V5.2123V5.2178V5.22331V5.22882V5.23433V5.23985V5.24537V5.25089V5.25642V5.26195V5.26749V5.27303V5.27857V5.28411V5.28966V5.29521V5.30077V5.30633V5.31189V5.31745V5.32302V5.3286V5.33417V5.33975V5.34533V5.35092V5.35651V5.3621V5.3677V5.3733V5.3789V5.3845V5.39011V5.39573V5.40134V5.40696V5.41258V5.41821V5.42384V5.42947V5.43511V5.44075V5.44639V5.45203V5.45768V5.46333V5.46899V5.47465V5.48031V5.48598V5.49164V5.49732V5.50299V5.50867V5.51435V5.52004V5.52572V5.53141V5.53711V5.54281V5.54851V5.55421V5.55992V5.56563V5.57134V5.57706V5.58278V5.5885V5.59423V5.59996V5.60569V5.61143V5.61717V5.62291V5.62865V5.6344V5.64015V5.64591V5.65166V5.65743V5.66319V5.66896V5.67473V5.6805V5.68628V5.69206V5.69784V5.70362V5.70941V5.7152V5.721V5.7268V5.7326V5.7384V5.74421V5.75002V5.75583V5.76165V5.76747V5.77329V5.77911V5.78494V5.79077V5.79661V5.80244V5.80828V5.81413V5.81997V5.82582V5.83168V5.83753V5.84339V5.84925V5.85511V5.86098V5.86685V5.87272V5.8786V5.88448V5.89036V5.89624V5.90213V5.90802V5.91391V5.91981V5.92571V5.93161V5.93752V5.94342V5.94934V5.95525V5.96116V5.96708V5.97301V5.97893V5.98486V5.99079V5.99672V6.00266V6.0086V6.01454V6.02049V6.02643V6.03238V6.03834V6.04429V6.05025V6.05621V6.06218V6.06815V6.07412V6.08009V6.08606V6.09204V6.09802V6.10401V6.10999V6.11598V6.12198V6.12797V6.13397V6.13997V6.14597V6.15198V6.15799V6.164V6.17001V6.17603V6.18205V6.18807V6.1941V6.20012V6.20615V6.21219V6.21822V6.22426V6.2303V6.23634V6.24239V6.24844V6.25449V6.26054V6.2666V6.27266V6.27872V6.28479V6.29085V6.29692V6.303V6.30907V6.31515V6.32123V6.32731V6.3334V6.33948V6.34557V6.35167V6.35776V6.36386V6.36996V6.37607V6.38217V6.38828V6.39439V6.4005V6.40662V6.41274V6.41886V6.42498V6.43111V6.43724V6.44337V6.4495V6.45564V6.46178V6.46792V6.47406V6.48021V6.48636V6.49251V6.49866V6.50482V6.51097V6.51713V6.5233V6.52946V6.53563V6.5418V6.54797V6.55415V6.56033V6.56651V6.57269V6.57887V6.58506V6.59125V6.59744V6.60364V6.60983V6.61603V6.62223V6.62844V6.63464V6.64085V6.64706V6.65328V6.65949V6.66571V6.67193V6.67815V6.68438V6.6906V6.69683V6.70306V6.7093V6.71553V6.72177V6.72801V6.73426V6.7405V6.74675V6.753V6.75925V6.76551V6.77176V6.77802V6.78428V6.79055V6.79681V6.80308V6.80935V6.81562V6.8219V6.82817V6.83445V6.84073V6.84702V6.8533V6.85959V6.86588V6.87217V6.87847V6.88476V6.89106V6.89736V6.90366V6.90997V6.91628V6.92259V6.9289V6.93521V6.94153V6.94784V6.95416V6.96048V6.96681V6.97313V6.97946C71.3405 12.5042 66.8834 16.9804 61.3624 16.9804H5.99862C3.2911 16.9804 1.65133 17.5844 0.666667 18.2649V5.33333C0.666667 2.756 2.756 0.666667 5.33333 0.666667H72.653Z",stroke:"#F64242","stroke-opacity":"0.1","stroke-width":"1.33333"}})]))}}},1683:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,y=data.attrs,m=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,d],style:[style,v],attrs:Object.assign({width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m)},_),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.9997 0C12.5147 0 10.4266 1.69963 9.83447 3.99987H20.165C19.5729 1.69963 17.4848 0 14.9997 0Z",fill:"#FFB6B6"}}),n("path",{attrs:{d:"M-61 5.33333C-61 2.38781 -58.6122 0 -55.6667 0H15C15 0 11.0072 0 11.0072 4.11765C11.0072 4.91035 11.0072 5.89927 11.0072 6.97946C11.0072 12.8705 6.25343 17.6471 0.362395 17.6471C-17.3074 17.6471 -51.1441 17.6471 -55.0014 17.6471C-60.2502 17.6471 -61 20 -61 20V5.33333Z",fill:"#FFF2EF"}}),n("path",{attrs:{d:"M11.653 0.666667C11.4433 0.869927 11.2462 1.10455 11.0712 1.3752C10.619 2.07469 10.3405 2.97571 10.3405 4.11765V4.12229V4.12695V4.1316V4.13626V4.14093V4.1456V4.15027V4.15495V4.15963V4.16432V4.16901V4.17371V4.17841V4.18311V4.18782V4.19253V4.19725V4.20198V4.2067V4.21143V4.21617V4.22091V4.22566V4.2304V4.23516V4.23991V4.24468V4.24944V4.25421V4.25899V4.26377V4.26855V4.27334V4.27813V4.28293V4.28773V4.29254V4.29735V4.30216V4.30698V4.3118V4.31663V4.32146V4.3263V4.33114V4.33598V4.34083V4.34568V4.35054V4.3554V4.36027V4.36514V4.37001V4.37489V4.37977V4.38466V4.38955V4.39444V4.39934V4.40425V4.40916V4.41407V4.41898V4.4239V4.42883V4.43376V4.43869V4.44363V4.44857V4.45351V4.45846V4.46342V4.46838V4.47334V4.4783V4.48327V4.48825V4.49323V4.49821V4.5032V4.50819V4.51318V4.51818V4.52319V4.52819V4.53321V4.53822V4.54324V4.54827V4.55329V4.55833V4.56336V4.5684V4.57345V4.57849V4.58355V4.5886V4.59366V4.59873V4.6038V4.60887V4.61394V4.61902V4.62411V4.6292V4.63429V4.63939V4.64449V4.64959V4.6547V4.65981V4.66493V4.67005V4.67517V4.6803V4.68543V4.69057V4.69571V4.70085V4.706V4.71115V4.71631V4.72147V4.72663V4.7318V4.73697V4.74215V4.74733V4.75251V4.7577V4.76289V4.76808V4.77328V4.77848V4.78369V4.7889V4.79411V4.79933V4.80455V4.80978V4.81501V4.82024V4.82548V4.83072V4.83596V4.84121V4.84646V4.85172V4.85698V4.86224V4.86751V4.87278V4.87806V4.88334V4.88862V4.89391V4.8992V4.90449V4.90979V4.91509V4.92039V4.9257V4.93102V4.93633V4.94165V4.94698V4.9523V4.95763V4.96297V4.96831V4.97365V4.979V4.98435V4.9897V4.99506V5.00042V5.00578V5.01115V5.01652V5.0219V5.02728V5.03266V5.03804V5.04343V5.04883V5.05422V5.05963V5.06503V5.07044V5.07585V5.08126V5.08668V5.0921V5.09753V5.10296V5.10839V5.11383V5.11927V5.12471V5.13016V5.13561V5.14107V5.14652V5.15199V5.15745V5.16292V5.16839V5.17387V5.17935V5.18483V5.19032V5.19581V5.2013V5.2068V5.2123V5.2178V5.22331V5.22882V5.23433V5.23985V5.24537V5.25089V5.25642V5.26195V5.26749V5.27303V5.27857V5.28411V5.28966V5.29521V5.30077V5.30633V5.31189V5.31745V5.32302V5.3286V5.33417V5.33975V5.34533V5.35092V5.35651V5.3621V5.3677V5.3733V5.3789V5.3845V5.39011V5.39573V5.40134V5.40696V5.41258V5.41821V5.42384V5.42947V5.43511V5.44075V5.44639V5.45203V5.45768V5.46333V5.46899V5.47465V5.48031V5.48598V5.49164V5.49732V5.50299V5.50867V5.51435V5.52004V5.52572V5.53141V5.53711V5.54281V5.54851V5.55421V5.55992V5.56563V5.57134V5.57706V5.58278V5.5885V5.59423V5.59996V5.60569V5.61143V5.61717V5.62291V5.62865V5.6344V5.64015V5.64591V5.65166V5.65743V5.66319V5.66896V5.67473V5.6805V5.68628V5.69206V5.69784V5.70362V5.70941V5.7152V5.721V5.7268V5.7326V5.7384V5.74421V5.75002V5.75583V5.76165V5.76747V5.77329V5.77911V5.78494V5.79077V5.79661V5.80244V5.80828V5.81413V5.81997V5.82582V5.83168V5.83753V5.84339V5.84925V5.85511V5.86098V5.86685V5.87272V5.8786V5.88448V5.89036V5.89624V5.90213V5.90802V5.91391V5.91981V5.92571V5.93161V5.93752V5.94342V5.94934V5.95525V5.96116V5.96708V5.97301V5.97893V5.98486V5.99079V5.99672V6.00266V6.0086V6.01454V6.02049V6.02643V6.03238V6.03834V6.04429V6.05025V6.05621V6.06218V6.06815V6.07412V6.08009V6.08606V6.09204V6.09802V6.10401V6.10999V6.11598V6.12198V6.12797V6.13397V6.13997V6.14597V6.15198V6.15799V6.164V6.17001V6.17603V6.18205V6.18807V6.1941V6.20012V6.20615V6.21219V6.21822V6.22426V6.2303V6.23634V6.24239V6.24844V6.25449V6.26054V6.2666V6.27266V6.27872V6.28479V6.29085V6.29692V6.303V6.30907V6.31515V6.32123V6.32731V6.3334V6.33948V6.34557V6.35167V6.35776V6.36386V6.36996V6.37607V6.38217V6.38828V6.39439V6.4005V6.40662V6.41274V6.41886V6.42498V6.43111V6.43724V6.44337V6.4495V6.45564V6.46178V6.46792V6.47406V6.48021V6.48636V6.49251V6.49866V6.50482V6.51097V6.51713V6.5233V6.52946V6.53563V6.5418V6.54797V6.55415V6.56033V6.56651V6.57269V6.57887V6.58506V6.59125V6.59744V6.60364V6.60983V6.61603V6.62223V6.62844V6.63464V6.64085V6.64706V6.65328V6.65949V6.66571V6.67193V6.67815V6.68438V6.6906V6.69683V6.70306V6.7093V6.71553V6.72177V6.72801V6.73426V6.7405V6.74675V6.753V6.75925V6.76551V6.77176V6.77802V6.78428V6.79055V6.79681V6.80308V6.80935V6.81562V6.8219V6.82817V6.83445V6.84073V6.84702V6.8533V6.85959V6.86588V6.87217V6.87847V6.88476V6.89106V6.89736V6.90366V6.90997V6.91628V6.92259V6.9289V6.93521V6.94153V6.94784V6.95416V6.96048V6.96681V6.97313V6.97946C10.3405 12.5042 5.88338 16.9804 0.362396 16.9804H-55.0014C-57.7089 16.9804 -59.3487 17.5844 -60.3333 18.2649V5.33333C-60.3333 2.756 -58.244 0.666667 -55.6667 0.666667H11.653Z",stroke:"#F64242","stroke-opacity":"0.1","stroke-width":"1.33333"}})]))}}},1684:function(e,t,n){"use strict";n(1276)},1710:function(e,t,n){"use strict";var r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header"},[t("div",{staticClass:"title"},[this._v("未登录")]),this._v(" "),t("div",{staticClass:"desc"},[this._v("注册或登录后即可继续操作")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("img",{attrs:{src:n(1677)}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("img",{attrs:{src:n(1678)}})])}],o=n(18),c={data:function(){return{show:!1}},computed:{isWechat:function(){return Object(o.h)()}},filters:{},methods:{loginWithWechat:function(){return this.$getBean("oauthBusiness").loginWithWechat()},close:function(){this.show=!1},authoLogin:function(){this.show=!1,this.$requestLogin()}},mounted:function(){var e=this,t=this.$getBean("eventBus");t.onVmLife(this,t.eventType.AUTH_WECHAT_QUICK_LOGIN,(function(){e.$requestLogin()}))}},l=(n(1679),n(29)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"wechat-quick-login"},[n("div",{staticClass:"quick-box"},[e._m(0),e._v(" "),n("div",{staticClass:"auth-box"},[n("div",{staticClass:"auth-btn wx",on:{click:e.loginWithWechat}},[e._m(1),e._v(" "),n("span",[e._v("微信快捷登录")])]),e._v(" "),n("div",{staticClass:"auth-btn jj",on:{click:e.authoLogin}},[e._m(2),e._v(" "),n("span",[e._v("稀土掘金账号登录")])])]),e._v(" "),n("div",{staticClass:"agreement-box"},[e._v("\n      注册登录即表示同意\n      "),n("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/terms",expression:"'/terms'",modifiers:{blank:!0}}]},[e._v("用户协议")]),e._v("\n      、\n      "),n("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/privacy",expression:"'/privacy'",modifiers:{blank:!0}}]},[e._v("隐私政策")])]),e._v(" "),n("div",{staticClass:"footer"},[n("div",{staticClass:"box",on:{click:e.close}},[e._v("取消")])])])]):e._e()}),r,!1,null,"3a1cf91f",null);t.a=component.exports},1712:function(e,t,n){"use strict";n(43),n(51);var r=n(6),o=n(174),c=n(26),l=n(176),h=n(107),f=Object(r.b)({components:{BTooltip:o.Tooltip},props:{bookInfo:{type:Object,default:function(){return{}}},eventPage:{type:String,default:""}},emits:["read","fetch"],setup:function(e,t){var n=Object(r.a)((function(){var e,n;return(null===(n=null===(e=t.root.$store.state)||void 0===e?void 0:e.auth)||void 0===n?void 0:n.user)||null})),o=t.root.$getBean("eventBus"),f=Object(r.w)(),d=Object(r.a)((function(){var t,r,o;if(e.bookInfo.isBorrowing){var c=null===(r=null===(t=e.bookInfo)||void 0===t?void 0:t.reading_progress)||void 0===r?void 0:r.last_section_id;return"0"!==c&&c?"继续学习":"立即学习"}return(null===(o=e.bookInfo)||void 0===o?void 0:o.borrowTimes)>0&&n.value.is_vip?"再次借阅":"VIP借阅"})),v=Object(r.a)((function(){return e.bookInfo.isBorrowing?"有效期至 ".concat(Object(c.a)(1e3*e.bookInfo.validEndTime,"YYYY-MM-DD")):"借过".concat(e.bookInfo.borrowTimes,"次")})),y=Object(r.f)("refreshBook",(function(){return null})),m=Object(h.b)((function(){t.emit("fetch"),y()}),500);Object(r.j)((function(){o.on(o.eventType.SHOW_VIP_FETCH,(function(){m()}))})),Object(r.k)((function(){o.off(o.eventType.SHOW_VIP_FETCH)}));return{buttonVipTitle:d,buttonVipDescript:v,handleClick:function(){var r={event_page:e.eventPage,book_id:e.bookInfo.id,author_id:e.bookInfo.user_info.user_id,platform:t.root.$device.isMobile?"h5":"web"};return t.root.$TEA("member_rent_click",r),n.value?n.value.isBindedPhone?void(e.bookInfo.isBorrowing?t.emit("read"):n.value.is_vip?o.emit(o.eventType.SHOW_VIP_BORROW_MODAL,e.bookInfo,r):f.push({name:"vipIndex",query:{utm_source:window.location.pathname.includes("section")?"course_section":"course_detail",utm_medium:"rent"}})):t.root.$requestBindPhoneNumber(l.c,{toUrl:location.href}):t.root.$requestLogin()},currentUser:n}}}),d=(n(1934),n(29)),component=Object(d.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.bookInfo.canVipBorrow?r("div",{staticClass:"vip-borrow-button"},[r("BTooltip",{staticClass:"tooltip",attrs:{content:"如果您下单购买了借阅中或曾经借阅过的课程，我们将把消耗的借阅卡退还给您，每门课程最多退还1张",theme:"light",placement:"bottom",disabled:!e.bookInfo.isBorrowing||e.$device.isMobile,"max-width":"244px"}},[r("div",{staticClass:"vip-borrow",on:{click:e.handleClick}},[e.bookInfo.isBorrowing?r("img",{staticClass:"mark",attrs:{src:n(1933),alt:"借阅中"}}):e._e(),e._v(" "),r("div",{staticClass:"title"},[e._v(e._s(e.buttonVipTitle))]),e._v(" "),e.bookInfo.borrowTimes>0&&e.currentUser.is_vip?r("div",{staticClass:"descript"},[e._v("\n        "+e._s(e.buttonVipDescript)+"\n      ")]):e._e()])])],1):e._e()}),[],!1,null,"3a33652f",null);t.a=component.exports},1720:function(e,t,n){},1721:function(e,t,n){},1724:function(e,t,n){},1763:function(e,t,n){"use strict";n(37);var r=n(6),o=n(1667),c=n(1083),l=Object(r.b)({components:{SaleTooltip:o.a},props:{book:{type:Object,default:function(){return{}}},isOwner:{type:Boolean,default:!1},sectionRoute:{type:Object,default:function(){return{}}},isFloatDiscountLabel:{type:Boolean,default:!1}},emits:["buyBook"],setup:function(e,t){var n,o=t.emit;return{isWap:null===(n=t.root.$device)||void 0===n?void 0:n.isMobile,bookId:Object(r.a)((function(){var t;return(null===(t=e.book)||void 0===t?void 0:t.booklet_id)||""})),hasReadSection:Object(r.a)((function(){var t,n;return!!(null===(n=null===(t=e.book)||void 0===t?void 0:t.reading_progress)||void 0===n?void 0:n.last_section_id)})),hasBorrow:Object(r.a)((function(){var t,n;return!!(null===(n=null===(t=e.book)||void 0===t?void 0:t.reading_progress)||void 0===n?void 0:n.borrow_times)})),hasDiscount:Object(r.a)((function(){var t,n;return(null===(t=e.book.max_discount)||void 0===t?void 0:t.pay_money)!==(null===(n=e.book.max_discount)||void 0===n?void 0:n.price)})),currentPrice:Object(r.a)((function(){var t;return Object(c.d)((null===(t=e.book.max_discount)||void 0===t?void 0:t.pay_money)||0)})),originPrice:Object(r.a)((function(){var t;return Object(c.d)((null===(t=e.book.max_discount)||void 0===t?void 0:t.price)||0)})),showLabel:Object(r.a)((function(){var t;return(null===(t=e.book.max_discount)||void 0===t?void 0:t.name)||""})),buyBook:function(){o("buyBook")}}}}),h=(n(1935),n(29)),component=Object(h.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"book-buy-button-wrap",class:{"discount-label-show":e.showLabel&&!e.isOwner&&!e.hasBorrow,"discount-label-float":e.isFloatDiscountLabel}},[!e.showLabel||e.isOwner||e.hasBorrow?e._e():n("SaleTooltip",{staticClass:"sale-tooltip-entry",attrs:{book:e.book,"is-count-down":!e.isWap,"is-float-discount-label":e.isFloatDiscountLabel}}),e._v(" "),n("div",{staticClass:"book-buy-button"},[e.isOwner?n("router-link",{staticClass:"book-owner",attrs:{"data-book-id":e.bookId,to:e.sectionRoute}},[e._v("\n      "+e._s(e.hasReadSection?"继续学习":"立即学习")+"\n    ")]):n("div",{staticClass:"buy-button",on:{click:function(t){return t.stopPropagation(),e.buyBook(t)}}},[n("div",{staticClass:"price-box",class:{"price-box-line":!(e.hasBorrow||e.hasDiscount)}},[n("span",{staticClass:"price-unit"},[e._v("¥")]),e._v(" "),n("span",[e._v("\n          "+e._s(e.currentPrice+" 立即购买")+"\n        ")])]),e._v(" "),e.hasBorrow?n("div",{staticClass:"borrow-desc"},[e._v("\n        "+e._s("退还 1 张借阅卡")+"\n      ")]):e.hasDiscount?n("div",{staticClass:"origin-price"},[e._v("\n        "+e._s("原价 ¥"+e.originPrice)+"\n      ")]):e._e()])],1)],1)}),[],!1,null,"495d186a",null);t.a=component.exports},1772:function(e,t,n){"use strict";n(1650)},1893:function(e,t,n){"use strict";n(17),n(15),n(11),n(7),n(14);var r=n(0),o=n(277),c=n(86),l=n(3),h=n(175),f=n(46),d=n(293);function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var y={components:{Avatar:h.a,DropDownList:d.a},data:function(){return{bdPageUrlForNav:o.e,isShowUserDropdownList:!1,translateGithubURL:f.f}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(c.mapGetters)({user:l.USER})),methods:{hideActionList:function(){this.isShowUserDropdownList=!1},onUserActionClick:function(){this.isShowUserDropdownList=!this.isShowUserDropdownList},openEditorPage:function(){var e=this.$getBean("editorBusiness");window.location.href=e.getPostEditUrl()},openXiaoceEditorPage:function(){var e=this.$getBean("editorBusiness");window.location.href=e.getXiaoceEditUrl()},openDraftIndexPage:function(){var e=this.$getBean("editorBusiness");window.location.href=e.getDraftIndexUrl()},login:function(){this.$requestLogin()},register:function(){this.$requestRegister()},logout:function(){window.confirm("确定登出吗？每一片贫瘠的土地都需要坚定的挖掘者！")&&this.$requestLogout()}},mounted:function(){var e=this,t=this.$getBean("eventBus");t.onVmLife(this,t.eventType.ROOT_CONTAINER_CLICK,(function(){e.hideActionList()}))},watch:{isShowUserDropdownList:function(e){e&&this.$TEA("avatar_menu_visit")}}},m=(n(1772),n(29)),component=Object(m.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-auth"},[e.user?n("div",{staticClass:"nav-item menu",on:{click:function(t){return t.stopPropagation(),e.onUserActionClick(t)}}},[n("avatar",{staticClass:"avatar",attrs:{user:e.user,decorative:!0,alt:e.user.username+"的头像"}}),e._v(" "),n("DropDownList",{attrs:{"is-show-user-dropdown-list":e.isShowUserDropdownList}})],1):e._e(),e._v(" "),e.user?e._e():n("div",{staticClass:"nav-item auth"},[n("span",{staticClass:"login",on:{click:e.login}},[e._v("登录")])])])}),[],!1,null,"27c6ac96",null);t.a=component.exports},1933:function(e,t,n){e.exports=n.p+"d9fd35ba8ea6d69f1746f621a0dd8433.svg"},1934:function(e,t,n){"use strict";n(1720)},1935:function(e,t,n){"use strict";n(1721)},1936:function(e,t,n){},1937:function(e,t,n){},1938:function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){"use strict";var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,n){"use strict";var r=n(12)("wks"),o=n(13),i=n(0).Symbol,u="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=u&&i[e]||(u?i:o)("Symbol."+e))}).store=r},function(e,t,n){"use strict";var r=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=r)},function(e,t,n){"use strict";var r=n(4);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(e){return"object"===(void 0===e?"undefined":r(e))?null!==e:"function"==typeof e}},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";e.exports=!n(15)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,n){"use strict";var r=n(3),o=n(26),i=n(27),u=Object.defineProperty;t.f=n(7)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return u(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";e.exports=!1},function(e,t,n){"use strict";var r=n(8),o=n(1)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,u;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:i?r(t):"Object"==(u=r(t))&&"function"==typeof t.callee?"Arguments":u}},function(e,t,n){"use strict";var r=n(2),o=n(0),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(10)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){"use strict";var r=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+o).toString(36))}},function(e,t,n){"use strict";var r=n(9),o=n(28);e.exports=n(7)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var r=n(4),o=n(0).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){"use strict";var r=n(0),o=n(14),i=n(18),u=n(13)("src"),c=n(29),s=(""+c).split("toString");n(2).inspectSource=function(e){return c.call(e)},(e.exports=function(e,t,n,c){var l="function"==typeof n;l&&(i(n,"name")||o(n,"name",t)),e[t]!==n&&(l&&(i(n,u)||o(n,u,e[t]?""+e[t]:s.join(String(t)))),e===r?e[t]=n:c?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[u]||c.call(this)}))},function(e,t,n){"use strict";var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";var r,o,i,u=n(5),c=n(38),s=n(39),l=n(16),a=n(0),h=a.process,p=a.setImmediate,f=a.clearImmediate,d=a.MessageChannel,v=a.Dispatch,y=0,m={},_=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},w=function(e){_.call(e.data)};p&&f||(p=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++y]=function(){c("function"==typeof e?e:Function(e),t)},r(y),y},f=function(e){delete m[e]},"process"==n(8)(h)?r=function(e){h.nextTick(u(_,e,1))}:v&&v.now?r=function(e){v.now(u(_,e,1))}:d?(i=(o=new d).port2,o.port1.onmessage=w,r=u(i.postMessage,i,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts?(r=function(e){a.postMessage(e+"","*")},a.addEventListener("message",w,!1)):r="onreadystatechange"in l("script")?function(e){s.appendChild(l("script")).onreadystatechange=function(){s.removeChild(this),_.call(e)}}:function(e){setTimeout(u(_,e,1),0)}),e.exports={set:p,clear:f}},function(e,t,n){"use strict";var r=n(6);function o(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new o(e)}},function(e,t,n){e.exports=n(23)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(24);var r,i=(r=n(48))&&r.__esModule?r:{default:r};t.default={url:i.default},e.exports=t.default},function(e,t,n){"use strict";var r,o,i,u,c=n(10),s=n(0),l=n(5),a=n(11),h=n(25),p=n(4),f=n(6),d=n(30),v=n(31),y=n(37),m=n(20).set,_=n(40)(),w=n(21),b=n(41),g=n(42),k=n(43),C=s.TypeError,O=s.process,x=O&&O.versions,S=x&&x.v8||"",T=s.Promise,V="process"==a(O),E=function(){},P=o=w.f,I=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[n(1)("species")]=function(e){e(E,E)};return(V||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t&&0!==S.indexOf("6.6")&&-1===g.indexOf("Chrome/66")}catch(e){}}(),L=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;_((function(){for(var r=e._v,o=1==e._s,i=0,u=function(t){var n,i,u,c=o?t.ok:t.fail,s=t.resolve,l=t.reject,a=t.domain;try{c?(o||(2==e._h&&D(e),e._h=1),!0===c?n=r:(a&&a.enter(),n=c(r),a&&(a.exit(),u=!0)),n===t.promise?l(C("Promise-chain cycle")):(i=L(n))?i.call(n,s,l):s(n)):l(r)}catch(e){a&&!u&&a.exit(),l(e)}};n.length>i;)u(n[i++]);e._c=[],e._n=!1,t&&!e._h&&R(e)}))}},R=function(e){m.call(s,(function(){var t,n,r,o=e._v,i=A(e);if(i&&(t=b((function(){V?O.emit("unhandledRejection",o,e):(n=s.onunhandledrejection)?n({promise:e,reason:o}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",o)})),e._h=V||A(e)?2:1),e._a=void 0,i&&t.e)throw t.v}))},A=function(e){return 1!==e._h&&0===(e._a||e._c).length},D=function(e){m.call(s,(function(){var t;V?O.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})}))},M=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},B=function e(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw C("Promise can't be resolved itself");(n=L(t))?_((function(){var o={_w:r,_d:!1};try{n.call(t,l(e,o,1),l(M,o,1))}catch(e){M.call(o,e)}})):(r._v=t,r._s=1,j(r,!1))}catch(e){M.call({_w:r,_d:!1},e)}}};I||(T=function(e){d(this,T,"Promise","_h"),f(e),r.call(this);try{e(l(B,this,1),l(M,this,1))}catch(e){M.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(44)(T.prototype,{then:function(e,t){var n=P(y(this,T));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=V?O.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=l(B,e,1),this.reject=l(M,e,1)},w.f=P=function(e){return e===T||e===u?new i(e):o(e)}),h(h.G+h.W+h.F*!I,{Promise:T}),n(45)(T,"Promise"),n(46)("Promise"),u=n(2).Promise,h(h.S+h.F*!I,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),h(h.S+h.F*(c||!I),"Promise",{resolve:function(e){return k(c&&this===u?T:this,e)}}),h(h.S+h.F*!(I&&n(47)((function(e){T.all(e).catch(E)}))),"Promise",{all:function(e){var t=this,n=P(t),r=n.resolve,o=n.reject,i=b((function(){var n=[],i=0,u=1;v(e,!1,(function(e){var c=i++,s=!1;n.push(void 0),u++,t.resolve(e).then((function(e){s||(s=!0,n[c]=e,--u||r(n))}),o)})),--u||r(n)}));return i.e&&o(i.v),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,o=b((function(){v(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},function(e,t,n){"use strict";var r=n(0),o=n(2),i=n(14),u=n(17),c=n(5),s=function e(t,n,s){var l,a,h,p,f=t&e.F,d=t&e.G,v=t&e.P,y=t&e.B,m=d?r:t&e.S?r[n]||(r[n]={}):(r[n]||{}).prototype,_=d?o:o[n]||(o[n]={}),w=_.prototype||(_.prototype={});for(l in d&&(s=n),s)h=((a=!f&&m&&void 0!==m[l])?m:s)[l],p=y&&a?c(h,r):v&&"function"==typeof h?c(Function.call,h):h,m&&u(m,l,h,t&e.U),_[l]!=h&&i(_,l,p),v&&w[l]!=h&&(w[l]=h)};r.core=o,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){"use strict";e.exports=!n(7)&&!n(15)((function(){return 7!=Object.defineProperty(n(16)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";var r=n(4);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";e.exports=n(12)("native-function-to-string",Function.toString)},function(e,t,n){"use strict";e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";var r=n(5),o=n(32),i=n(33),u=n(3),c=n(34),s=n(36),l={},a={},h=e.exports=function(e,t,n,h,p){var f,d,v,y,m=p?function(){return e}:s(e),_=r(n,h,t?2:1),w=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(i(m)){for(f=c(e.length);f>w;w++)if((y=t?_(u(d=e[w])[0],d[1]):_(e[w]))===l||y===a)return y}else for(v=m.call(e);!(d=v.next()).done;)if((y=o(v,_,d.value,t))===l||y===a)return y};h.BREAK=l,h.RETURN=a},function(e,t,n){"use strict";var r=n(3);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,n){"use strict";var r=n(19),o=n(1)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[o]===e)}},function(e,t,n){"use strict";var r=n(35),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){"use strict";var r=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:r)(e)}},function(e,t,n){"use strict";var r=n(11),o=n(1)("iterator"),i=n(19);e.exports=n(2).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){"use strict";var r=n(3),o=n(6),i=n(1)("species");e.exports=function(e,t){var n,u=r(e).constructor;return void 0===u||null==(n=r(u)[i])?t:o(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){"use strict";var r=n(0).document;e.exports=r&&r.documentElement},function(e,t,n){"use strict";var r=n(0),o=n(20).set,i=r.MutationObserver||r.WebKitMutationObserver,u=r.process,c=r.Promise,s="process"==n(8)(u);e.exports=function(){var e,t,n,l=function(){var r,o;for(s&&(r=u.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(s)n=function(){u.nextTick(l)};else if(!i||r.navigator&&r.navigator.standalone)if(c&&c.resolve){var a=c.resolve(void 0);n=function(){a.then(l)}}else n=function(){o.call(r,l)};else{var h=!0,p=document.createTextNode("");new i(l).observe(p,{characterData:!0}),n=function(){p.data=h=!h}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){"use strict";e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){"use strict";var r=n(0).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(3),o=n(4),i=n(21);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(17);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t,n){"use strict";var r=n(9).f,o=n(18),i=n(1)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){"use strict";var r=n(0),o=n(9),i=n(7),u=n(1)("species");e.exports=function(e){var t=r[e];i&&t&&!t[u]&&o.f(t,u,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(1)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i=[7],u=i[r]();u.next=function(){return{done:n=!0}},i[r]=function(){return u},e(i)}catch(e){}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&e){try{e=JSON.parse(r.default.base64decode(e))}catch(e){return Promise.reject("base64 decode error")}var i=[];for(var u in n)i.push(u+"="+n[u]);var c="//"+t+"?"+e.GetPlayInfoToken+"&ssl=true";return i.length>0&&(c+="&"+i.join("&")),new o.default({type:"json",method:"GET",url:c}).then((function(e){return e.response&&e.response.Result?e.response.Result:e.response||e}))}return Promise.reject("vid, host and token can't be empty")};var r=i(n(49)),o=i(n(50));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={base64decode:function(e){var t,n,r,o,i,u,c,s=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];for(u=e.length,i=0,c="";i<u;){do{t=s[255&e.charCodeAt(i++)]}while(i<u&&-1===t);if(-1===t)break;do{n=s[255&e.charCodeAt(i++)]}while(i<u&&-1===n);if(-1===n)break;c+=String.fromCharCode(t<<2|(48&n)>>4);do{if(61==(r=255&e.charCodeAt(i++)))return c;r=s[r]}while(i<u&&-1===r);if(-1===r)break;c+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(61==(o=255&e.charCodeAt(i++)))return c;o=s[o]}while(i<u&&-1===o);if(-1===o)break;c+=String.fromCharCode((3&r)<<6|o)}return c}};t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.url,o=t.method,i=void 0===o?"GET":o,u=t.type,c=void 0===u?"arraybuffer":u,s=t.data,l=void 0===s?{}:s,a=t.headers,h=void 0===a?{}:a;return r(this,e),new Promise((function(e,t){var r=new window.XMLHttpRequest,o=i.toUpperCase(),u=[];for(var s in l)u.push(s+"="+l[s]);if("GET"!==o)throw new Error("xhr "+o+" is not supported");for(var a in r.open(o,""+n),c&&(r.responseType=c),h)r.setRequestHeader(a,""+h[a]);r.send(),r.onload=function(){200===r.status||206===r.status?e(r):t(r)},r.onerror=function(){t(r)}}))},e.exports=t.default}])},1939:function(e,t,n){},1940:function(e,t,n){var r;r=function(){return function(e){var i={};function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}return t.m=e,t.c=i,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.appendData=f,t.checkIsBlob=function(e){return!!e&&/^blob:/.test(e)},t.checkIsEmptySrc=function(e,t){return!(!e.video||1!==Number(e.video.getAttribute("data-empty")))||1768===t&&!e.config.dashOpts&&!e.config.mp4Opts},t.checkVideoSrcIsEmpty=function(e){return!e||-1<window.location.href.indexOf(e)},t.computeWatchDur=function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=0,n=0;n<e.length;n++)isNaN(Number(e[n].end))||isNaN(Number(e[n].begin))||e[n].begin<0||e[n].end<0||e[n].end<e[n].begin||(t+=e[n].end-e[n].begin);return parseInt(1e3*t,10)},t.curTimestamp=function(){return(new Date).getTime()},t.formatData=function(e,t){var i={ext:e.ext||{},data:{}};return Object.keys(e).map((function(n){t[n]?i.data[t[n]]=e[n]:"ext"!==n&&(i.ext[n]=e[n])})),i},t.generateSessionId=function(e){var t=(new Date).getTime();try{e=parseInt(e)}catch(t){e=0}return t+=e,window.performance&&"function"==typeof window.performance.now&&(t+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))},t.getHostFromUrl=function(e){if(null==e||""===e||"string"!=typeof e)return"";var t="";return 3<(e=e.split("/")).length&&e[2]&&(t=e[2]),t},t.getResponseHeaders=c,t.getValue=function(e,t){return t=t[e]},t.getXhr=function(a){var s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(e,t){try{a||t(new Error("url is undefined"));var n=0,i=0,r={},o=new window.XMLHttpRequest;o.open("get",a),o.onreadystatechange=function(){2===o.readyState&&(r.headers=c(o),r.connectTime=l()-i,r.status=o.status,r.statusText=o.statusText,n=l()),1===o.readyState&&(i=l())},o.onload=function(){e(r)},o.onprogress=function(e){var t=l()-n;t<5&&(t=l()-i),e=parseInt(e.loaded/1e3/(t/1e3),10),r.speed=e,r.costTime=t},o.onerror=function(e){t(e)},o.ontimeout=function(){r.status||(r.status=-2),e(r)},o.onabort=function(){e(r)},o.responseType="arraybuffer",o.timeout=s.timeout||1e4,o.setRequestHeader("Range","bytes=".concat(s.range||"0-1048576")),o.send()}catch(e){t(e)}}))},t.hasClass=function(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,(function(e){return e===t}))}catch(n){return(e=e.className&&"object"===r(e.className)?e.getAttribute("class"):e.className)&&!!e.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}},t.isType=function(e){return function(t){return Object.prototype.toString.call(t)==="[object ".concat(e,"]")}},t.log=function(e){for(var t,n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];o&&(t=console).log.apply(t,["[logger]",e].concat(i))},t.navigationStart=function(){try{return window.performance.timing.navigationStart}catch(e){return(new Date).getTime()}},t.nowTime=l,t.parseTempData=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";return Object.keys(t).map((function(n){e[n]="append"===i?f(e[n],t[n]):t[n]})),e},t.transformHeader=function(e){if(!e)return{};var i={};return Object.keys(h).map((function(t){var n;e[t]||"string"!=typeof h[t]?!e[t]&&h[t]instanceof Array&&(0<(n=h[t].filter((function(t){return void 0!==e[t]}))).length?i[t]=e[n[0]]:i[t]=""):i[t]=e[h[t]]||""})),i},t.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]};var o="undefined"!=typeof window&&-1<window.location.href.indexOf("loggerdebug");function c(e){var t={};if(e instanceof window.XMLHttpRequest)try{e.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((function(e){var n=(e=e.split(": ")).shift();e=e.join(": "),t[n]=e}))}catch(e){}return t}function l(){try{return Math.round(window.performance.now())}catch(e){return(new Date).getTime()}}var h={x_response_sinfo:"x-response-sinfo",x_response_cache:"x-response-cache",x_response_cinfo:"x-response-cinfo"};function f(e,t){return!e||"string"!=typeof t&&"number"!=typeof t?t:e+""+t}},function(e,t,n){e.exports=n(2)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(3)),r=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}function c(e){var t;e&&e.player?(t=e.player.config.vodLogOpts||{},e.player.vodLogger=new r.default(e.player,t),e.player.plugins.xgVodLogger=e.player.vodLogger):this.vodLogger=new r.default(this,this.config.vodLogOpts||{})}r.default.TEA_ID=1300,r.default.Collector=i.default,c.pluginName="__xgVodLogger",c.playerConfig={},c.Collector=i.default,c.setABSdkVersion=function(e){r.default.AB_SDK_VERSION=e},t.default=c,e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);var a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function o(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e}function c(e,t){return t?"__tea_cache_tokens_"+e:"__tea_cache_events_"+e}function l(e,i,t,n){try{var r=e.match(/\/v\d\//),o=r?r[0]:-1!==e.indexOf("/v1/")?"/v1/":"/v2/",a=e.split(o)[0];if(!a)return void n(e,i,_.NO_URL);i.forEach((function(r){r=function(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&void 0!==e[t]&&(n+="&"+t+"="+encodeURIComponent(JSON.stringify(e[t])));return"&"===n[0]?n.slice(1):n}(r);var o=new Image(1,1);o.onload=function(){o=null,t&&t()},o.onerror=function(){o=null,n&&n(e,i,_.IMG_ON)},o.src=a+"/gif?"+r}))}catch(t){n&&n(e,i,_.IMG_CATCH,t.message)}}function h(e,t,n,i,r,o,a,c,p,s){var h=window.navigator.userAgent,u=(h=-1!==window.navigator.appName.indexOf("Microsoft Internet Explorer")&&(-1!==h.indexOf("MSIE 8.0")||-1!==h.indexOf("MSIE 9.0")),!!i);if(!u&&h)l(e,n,r,o);else if(!u&&c)return window.navigator&&window.navigator.sendBeacon?(s&&s(),void(window.navigator.sendBeacon(e,JSON.stringify(n))?r():o(e,n,_.BEACON_FALSE))):void l(e,n,r,o);a&&delete n.app_key,function(e,t,i,n,r,o,a){try{var s=new XMLHttpRequest;s.open("POST",""+e,!0),s.setRequestHeader("Content-Type","application/json; charset=utf-8"),r&&s.setRequestHeader("X-MCS-AppKey",""+r),a&&(s.withCredentials=!0),s.onload=function(){if(i){var e=null;if(s.responseText){try{e=JSON.parse(s.responseText)}catch(t){e={}}i(e,t)}}};try{o&&(s.timeout=o),o&&(s.ontimeout=function(){n&&n(t,_.TIMEOUT)}),s.onerror=function(){s.abort(),n&&n(t,_.XHR_ON)},s.send(JSON.stringify(t))}catch(e){}}catch(e){}}(e,n,r,o,i,t,p)}!function(e){e.exports=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n,i=arguments[e];for(n in i)t[n]=i[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function i(u){function n(){}function r(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},n.defaults,i)).expires&&(i.expires=new Date(+new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var o=JSON.stringify(r);/^[\{\[]/.test(o)&&(r=o)}catch(e){}r=u.write?u.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a,s="";for(a in i)i[a]&&(s+="; "+a,!0!==i[a]&&(s+="="+i[a].split(";")[0]));return document.cookie=t+"="+r+s}}function s(e,n){if("undefined"!=typeof document){for(var i={},r=document.cookie?document.cookie.split("; "):[],o=0;o<r.length;o++){var a=r[o].split("="),s=a.slice(1).join("=");n||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var c=t(a[0]);if(s=(u.read||u)(s,c)||t(s),n)try{s=JSON.parse(s)}catch(e){}if(i[c]=s,e===c)break}catch(e){}}return e?i[e]:i}}return n.set=r,n.get=function(e){return s(e,!1)},n.getJSON=function(e){return s(e,!0)},n.remove=function(t,n){r(t,"",e(n,{expires:-1}))},n.defaults={},n.withConverter=i,n}((function(){}))}()}(n={exports:{}});var u=n.exports,f=function(){function e(){this.cache={}}return e.prototype.setItem=function(e,t){this.cache[e]=t},e.prototype.getItem=function(e){return this.cache[e]},e.prototype.removeItem=function(e){this.cache[e]=void 0},e}(),p={getItem:function(e){try{var t=localStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||void 0}catch(e){}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){try{return u.get(e,{domain:t||document.domain})}catch(e){return""}},setCookie:function(e,t,n,i){try{var r=i||document.domain,o=+new Date+n;u.set(e,t,{expires:new Date(o),path:"/",domain:r})}catch(e){}},isSupportLS:function(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},d={getItem:function(e){try{var t=sessionStorage.getItem(e),n=t;try{t&&"string"==typeof t&&(n=JSON.parse(t))}catch(e){}return n||void 0}catch(e){}},setItem:function(e,t){try{var n="string"==typeof t?t:JSON.stringify(t);sessionStorage.setItem(e,n)}catch(e){}},removeItem:function(e){try{sessionStorage.removeItem(e)}catch(e){}},isSupportSession:function(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}()},v=function(){function e(e,t){this._storage=t&&"session"===t?d:!e&&p.isSupportLS?p:new f}return e.prototype.getItem=function(e){return this._storage.getItem(e)},e.prototype.setItem=function(e,t){this._storage.setItem(e,t)},e.prototype.getCookie=function(e,t){return this._storage.getCookie(e,t)},e.prototype.setCookie=function(e,t,n,i){this._storage.setCookie(e,t,n,i)},e.prototype.removeItem=function(e){this._storage.removeItem(e)},e}(),s={cn:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"},y="/webid",m="4.2.9",_={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005};function b(e){return e?(e^16*Math.random()>>e/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,b)}function w(){return b().replace(/-/g,"").slice(0,19)}function k(e){return function(e,t){if("string"==typeof e&&"number"==typeof t){for(var n=[],i=(t=t<=25?t:t%25,String.fromCharCode(t+97)),r=e.split(i),o=0;o<r.length;o++){var a=64^+parseInt(r[o],t);a=String.fromCharCode(a),n.push(a)}return n.join("")}}(e,25)}function C(e){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1)}function O(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var x=function(e){var t=document.createElement("a");return t.href=e,t},S=function(e){e=(e=x(e).search).slice(1);var t={};return e.split("&").forEach((function(e){var n,r,i=e.split("=");i.length&&(n=i[0],r=i[1]);try{t[n]=decodeURIComponent(void 0===r?"":r)}catch(e){t[n]=r}})),t},g=function(){function e(e,t,n,i){this.enableCustomWebid=!1,this.config=e,this.cfg=t,this.storage=new v(!1),this.appInfo=e.app_key||e.app_id,this.isNoWebid=e.disable_webid,this.enable_ttwebid=e.enable_ttwebid||!1,this.domain=e.channel_domain||k(s[e.channel]),this.tokenReady=!1,this.enableCustomWebid=e.enable_custom_webid,this.checkExp=e.checkExp||!1,this.enableCookie=e.cross_subdomain||!1,this.expiresTime=e.cookie_expire||6048e5,this.fetchUrl=this.domain+y,this.hook=n,this.session=i,this.cookieDomain=e.cookie_domain||""}return e.prototype._getToken=function(){var e=this;try{if(this.tokensKey=c(this.appInfo,!0),this.cookieKey="__tea_cookie_tokens_"+this.appInfo,this.enableCustomWebid)return void this.hook.on("custom-webid",(function(){e.tokenReady=!0,e.hook.emit("token-ready")}));if(this._checkEnv())return;var t,n=this.storage.getItem(this.tokensKey);if(this.enable_ttwebid)n?(t={user_unique_id:n.user_unique_id||"",timestamp:Date.now()},this.storage.setItem(this.tokensKey,t),this._setTtWid(n,!1)):this._setTtWid(n,!0);else if(this.enableCookie){var i=this.storage.getCookie(this.cookieKey,this.cookieDomain);if(i){var r=(i=JSON.parse(decodeURIComponent(i))).user_unique_id,o=i.web_id,a=i.timestamp;this._setToken(o,r,a)}else{if(!n)return void this._requestWebId();this.storage.setCookie(this.cookieKey,encodeURIComponent(JSON.stringify(n)),this.expiresTime,this.cookieDomain),this._checkLocal(n)}}else{if(!n)return void this._requestWebId();this._checkLocal(n)}}catch(e){console.log(""+e.message)}},e.prototype._checkEnv=function(){var e;return-1!==window.navigator.userAgent.indexOf("miniProgram")&&!(!(e=S(window.location.href))||!e.Web_ID||(this._setTokenId(""+e.Web_ID),0))},e.prototype._checkLocal=function(e){var t=e.user_unique_id,n=e.web_id;e=e.timestamp,n&&t?this._setToken(n,t,e):this._requestWebId()},e.prototype._setToken=function(e,t,n){if(this.checkExp){if(7344e6<(n=Date.now()-parseFloat(n)))return void this._requestWebId();if(432e7<n)return void this._updateWebId(e)}this.cfg.envInfo.user.user_unique_id=t,this.cfg.envInfo.user.web_id=e,this.storage.setItem(this.tokensKey,{user_unique_id:t,web_id:e,timestamp:Date.now()}),this.tokenReady=!0},e.prototype._requestWebId=function(){this.isNoWebid?this._setTokenId(w()):this._fetchWebId(this.fetchUrl,!1)},e.prototype._updateWebId=function(e){e=this.domain+y+"/"+e+"/update",this._fetchWebId(e,!0)},e.prototype._fetchWebId=function(e,t){var n=this;h(e,3e3,{app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""},this.config.app_key,(function(e){e&&0===e.e?n._setTokenId(e.web_id):(n.hook.emit("token-error"),console.warn("[]appid: "+n.config.app_id+", "+(t?" update":"get")+" webid error, init error~"))}),(function(){n.hook.emit("token-error"),console.warn("[]appid: "+n.config.app_id+", get webid error, init error~")}),!0,!1,this.enable_ttwebid)},e.prototype._setTtWid=function(e,t){t||(t={web_id:e.web_id||"",timestamp:Date.now()},e=e.user_unique_id||"",this.cfg.envInfo.user.user_unique_id=this.cfg.envInfo.user.user_unique_id||e,this.storage.setCookie(this.cookieKey,encodeURIComponent(JSON.stringify(t)),108e5,this.cookieDomain)),this.tokenReady=!0,this.hook.emit("token-ready")},e.prototype._setTokenId=function(e){var t={web_id:e=this.cfg.envInfo.user.web_id||e,user_unique_id:this.cfg.envInfo.user.user_unique_id||e,timestamp:Date.now()};this.enableCookie&&this.storage.setCookie(this.cookieKey,encodeURIComponent(JSON.stringify(t)),this.expiresTime,this.cookieDomain),this.storage.setItem(this.tokensKey,t),this.cfg.envInfo.user.web_id=this.cfg.envInfo.user.web_id||e,this.cfg.envInfo.user.user_unique_id=this.cfg.envInfo.user.user_unique_id||e,this.tokenReady=!0,this.hook.emit("token-ready")},e.prototype._setUuid=function(e){try{var t=this.storage.getItem(this.tokensKey);if(e){"string"!=typeof e&&console.warn("user_unique_id must be string!!! please check");var n=String(e);if(n===this.cfg.envInfo.user.user_unique_id)return;this.cfg.envInfo.user.user_unique_id=n,t&&t.user_unique_id?t.user_unique_id!==n&&(t.user_unique_id=n):(t={}).user_unique_id=n,t.timestamp=Date.now(),this.storage.setItem(this.tokensKey,t),this.session._resetSessionId(),this.hook.emit("token-change","uuid")}else this._clearUuid(t)}catch(e){}},e.prototype._clearUuid=function(e){this.enable_ttwebid||e&&e.web_id&&(this.cfg.envInfo.user.user_unique_id=e.web_id||void 0,e.user_unique_id=e.web_id||void 0,e.timestamp=Date.now(),this.storage.setItem(this.tokensKey,e))},e.prototype._setWebid=function(e){var t;this.enable_ttwebid||((t=this.storage.getItem(this.tokensKey))&&t.web_id?t.web_id!==e&&(t.user_unique_id=t.web_id===t.user_unique_id?e:t.user_unique_id,t.web_id=e):((t={}).web_id=e,t.user_unique_id=e),t.timestamp=Date.now(),this.storage.setItem(this.tokensKey,t),this.cfg.envInfo.user.user_unique_id&&this.cfg.envInfo.user.user_unique_id!==this.cfg.envInfo.user.web_id||(this.cfg.envInfo.user.user_unique_id=e,this.hook.emit("token-change","uuid")),e!==this.cfg.envInfo.user.web_id&&(this.cfg.envInfo.user.web_id=e,this.hook.emit("token-change","webid")))},e.prototype.isTokenReady=function(){return this.tokenReady},e.prototype._getTobId=function(e){h(this.domain+"/tobid",3e4,{app_id:this.config.app_id,user_unique_id:this.cfg.envInfo.user.user_unique_id,web_id:this.cfg.envInfo.user.web_id},this.config.app_key,(function(t){t&&0===t.e?e(t.tobid):e(null)}),(function(){e(null)}),!0,!1,this.enable_ttwebid)},e}(),T=function(){function e(e,t,n,i,r,o,a){this.collect=e,this.cfg=n,this.config=t,this._token=i,this.appInfo=t.app_id||t.app_key,this.debugMode=!!t.log,this.evtDataKey=c(this.appInfo,!1),e=t.channel_domain||k(s[t.channel]),this.reportUrl=t.report_url||e+"/list",this.storage=new v(!0),this.EventStorage=new v(!1),this.maxStorage=t.max_storage_num||-1,this.maxReport=t.max_report||10,this.reportTime=t.reportTime||30,this.timeout=t.timeout||1e5,this.closeStorage=!0,this.plugin=r,this.session=o,this.match=a,this.filter=t.filter,this.addListener()}return e.prototype.addListener=function(){var e=this;window.addEventListener("unload",(function(){e.report(!0)}),!1),C((function(){e.report(!0)})),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.report(!0)}),!1)},e.prototype.setReady=function(){this.isReady=!0,this.report()},e.prototype.event=function(e){var t=this;void 0===e&&(e=[]);try{var i=o(e,this.storage.getItem(this.evtDataKey)||[]);this.storage.setItem(this.evtDataKey,i),this.reportTimer&&clearTimeout(this.reportTimer),i.length>=this.maxReport?this.report(!1):this.reportTimer=setTimeout((function(){t.report(!1),t.reportTimer=null}),this.reportTime)}catch(e){}},e.prototype.beconEvent=function(e){e=this._mergeEvents(e=void 0===e?[]:e),this._dealData(e,!0)},e.prototype.report=function(e){var t;void 0===e&&(e=!1),!this.collect.destroyInstance&&this._token.isTokenReady()&&this.isReady&&(t=this.storage.getItem(this.evtDataKey)||[],t=this._mergeEvents(t),this.storage.removeItem(this.evtDataKey),this._dealData(t,e))},e.prototype.clearEventCache=function(){this.report(!1)},e.prototype._mergeEvents=function(e){var t=this;if(!e.length)return e;var n=this.cfg.get(),i=(n.header.custom=JSON.stringify(n.header.custom),[]);return i.push(e),i.map((function(e){return{events:e.map((function(e){var n=a({},t.cfg.get("evtParams"),e.params);try{return e.event&&"applog_trace"!==e.event?(delete n.__disable_storage__,a({},e,{params:JSON.stringify(n),session_id:t.session._getSessionId()})):a({},e,{params:JSON.stringify(e.params)})}catch(n){return a({},e,{params:JSON.stringify(e.params)})}})),user:n.user,header:n.header,verbose:t.debugMode?1:void 0,local_time:parseInt(""+(new Date).getTime()/1e3),user_unique_type:t.config.enable_ttwebid?t.config.user_unique_type:void 0}}))},e.prototype._dealData=function(e,i){var t=this;if(!this.config.disable_track_event){if(!e.length)return e;e.map((function(e){var t=[];return t.push(e),t})).forEach((function(e){var n=w(),r=JSON.parse(JSON.stringify(e));try{t.filter&&(r=t.filter(r)),t.collect.eventFilter&&(r=t.collect.eventFilter(r))}catch(e){}t._send(n,r||e,i)}))}},e.prototype._send=function(e,t,n){function r(){i.isSending=!1}var i=this;this.isSending=!0,h(this.reportUrl,this.timeout,t,this.config.app_key,(function(e,t){r(),e&&0!==e.e&&i.collect&&i.collect.tracer&&1!==i.cfg.staging&&i.collect.tracer.addErrorCount(t,"f_data",e.e,e)}),(function(e,t){r(),i.cfg.get("reportErrorCallback")(e,t),i.collect&&i.collect.tracer&&1!==i.cfg.staging&&i.collect.tracer.addErrorCount(e,"f_net",t)}),!1,n,this.config.enable_ttwebid,r)},e.prototype.checkStorageEvent=function(){},e}(),V=void 0,E=(n=(new Date).getTimezoneOffset(),parseInt(""+-n/60,10)),P=60*n,I=function(){function e(e,t,n){t=function(e,t,p){var n=window.screen.width,r=window.screen.height,o=window.navigator.appVersion,c=window.navigator.userAgent,l=window.navigator.language,i=document.referrer,h=i?x(i).hostname:"",g=S(window.location.href),f="",d="",a="",s=""+parseFloat(o);-1!==(u=c.indexOf("Opera"))&&(a="Opera",s=c.substring(u+6),-1!==(u=c.indexOf("Version"))&&(s=c.substring(u+8))),-1!==c.indexOf("Edge")||-1!==c.indexOf("Edg")?(a="Microsoft Edge",s=-1!==c.indexOf("Edge")?(u=c.indexOf("Edge"),c.substring(u+5)):(u=c.indexOf("Edg"),c.substring(u+4))):-1!==(u=c.indexOf("MSIE"))?(a="Microsoft Internet Explorer",s=c.substring(u+5)):-1!==(u=c.indexOf("Lark"))?(a="Lark",s=c.substring(u+5,u+11)):-1!==c.indexOf("Chrome")?-1!==(u=c.indexOf("MicroMessenger"))?(a="weixin",s=c.substring(u+15,u+20)):-1!==(u=c.indexOf("MQQBrowser"))?(a="qqbrowser",s=c.substring(u+11,u+15)):-1!==(u=c.indexOf("360"))?(a="360browser",s=c.substring(c.indexOf("Chrome")+7)):-1!==c.indexOf("baidubrowser")||-1!==c.indexOf("BIDUBrowser")?(-1!==c.indexOf("baidubrowser")?(u=c.indexOf("baidubrowser"),s=c.substring(u+13,u+16)):-1!==c.indexOf("BIDUBrowser")&&(u=c.indexOf("BIDUBrowser"),s=c.substring(u+12,u+15)),a="baidubrowser"):-1!==(u=c.indexOf("xiaomi"))?s=-1!==c.indexOf("openlanguagexiaomi")?(a="openlanguage xiaomi",c.substring(u+7,u+13)):(a="xiaomi",c.substring(u-7,u-1)):-1!==(u=c.indexOf("TTWebView"))?(a="TTWebView",s=c.substring(u+10,u+23)):-1!==(u=c.indexOf("Chrome"))&&(a="Chrome",s=c.substring(u+7)):-1!==c.indexOf("Safari")?-1!==(u=c.indexOf("QQ"))?(a="qqbrowser",s=c.substring(u+10,u+16)):-1!==(u=c.indexOf("Safari"))&&(a="Safari",s=c.substring(u+7),-1!==(u=c.indexOf("Version"))&&(s=c.substring(u+8))):-1!==(u=c.indexOf("Firefox"))?(a="Firefox",s=c.substring(u+8)):-1!==(u=c.indexOf("MicroMessenger"))?(a="weixin",s=c.substring(u+15,u+20)):-1!==(u=c.indexOf("QQ"))&&(a="qqbrowser",s=c.substring(u+3,u+8)),-1!==(u=(s=-1!==(u=(s=-1!==(u=s.indexOf(";"))?s.substring(0,u):s).indexOf(" "))?s.substring(0,u):s).indexOf(")"))&&(s=s.substring(0,u));for(var y,u=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(o)?"wap":"web",m=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],_=0;_<m.length;_++){var w=m[_];if(w.r.test(c)){f=w.s;break}}function k(e,t){return(e=e.exec(t))&&e[1]?e[1]:""}switch(/Windows/.test(f)&&(d=k(/Windows (.*)/,f),f="windows"),f){case"Mac OS X":y=c,d=(y=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?)","i").exec(y))?y.slice(1)[0]:"",f="mac";break;case"Android":d=function(e){return k(/Android ([\.\_\d]+)/,e)||k(/Android\/([\.\_\d]+)/,e)}(c),f="android";break;case"iOS":d=(d=/OS (\d+)_(\d+)_?(\d+)?/.exec(o))?d[1]+"."+d[2]+"."+(0|d[3]):"",f="ios"}return e=function(e,t,n,r){var i=new v(!1),o=new v(!1,"session"),c=e?"_tea_utm_cache_"+e:"_tea_utm_cache",p=e?"_$utm_from_url_"+e:"_$utm_from_url",a={},l=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],s={creative_id:Number(t.creative_id),ad_id:Number(t.ad_id),campaign_id:Number(t.campaign_id),utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,tr_shareuser:t.tr_shareuser,tr_admaster:t.tr_admaster,tr_param1:t.tr_param1,tr_param2:t.tr_param2,tr_param3:t.tr_param3,tr_param4:t.tr_param4};t=r;try{var h,u,f=!1;for(h in s)s[h]&&(-1!==l.indexOf(h)?(a.hasOwnProperty("tracer_data")||(a.tracer_data={}),a.tracer_data[h]=s[h]):a[h]=s[h],f=!0);f?(o.setItem(p,"1"),i.setCookie(c,JSON.stringify(a),t,n)):((u=i.getCookie(c,n))&&(a=JSON.parse(u)),i.setCookie(c,u,t,n)),o.getItem(p)&&(a.hasOwnProperty("tracer_data")||(a.tracer_data={}),a.tracer_data.$utm_from_url=1)}catch(e){return s}return a}(e,g,t,p),{browser:a,browser_version:s,platform:u,os_name:f,os_version:d,userAgent:c,screen_width:n,screen_height:r,device_model:function(e){var t,n,i="";try{"android"===e?navigator.userAgent.split(";").forEach((function(e){-1<e.indexOf("Build/")&&(i=e.slice(0,e.indexOf("Build/")))})):"ios"!==e&&"mac"!==e&&"windows"!==e||(n=(t=navigator.userAgent.replace("Mozilla/5.0 (","")).indexOf(";"),i=t.slice(0,n))}catch(e){}return i.trim()}(f),language:l,referrer:i,referrer_host:h,creative_id:e.creative_id,ad_id:e.ad_id,campaign_id:e.campaign_id,utm_source:e.utm_source,utm_medium:e.utm_medium,utm_campaign:e.utm_campaign,utm_term:e.utm_term,utm_content:e.utm_content,tracer_data:e.tracer_data}}(e,(this.initConfig=t).cookie_domain||"",t.cookie_expire||6048e5),this.configKey=function(e){return"__tea_cache_config_"+e}(""+e),this.sessionStorage=new v(!1,"session"),this.localStorage=new v(!1,"local"),n&&(this.storage=1===n?this.sessionStorage:this.localStorage),this.envInfo={user:{user_unique_id:V,user_type:V,user_id:V,user_is_auth:V,user_is_login:V,device_id:V,web_id:V,ip_addr_id:V,ssid:V},header:{app_id:V,app_name:V,app_install_id:V,install_id:V,app_package:V,app_channel:V,app_version:V,os_name:t.os_name,os_version:t.os_version,device_model:t.device_model,ab_client:V,ab_version:V,ab_sdk_version:V,traffic_type:V,client_ip:V,device_brand:V,os_api:V,access:V,language:t.language,region:V,app_language:V,app_region:V,creative_id:t.creative_id,ad_id:t.ad_id,campaign_id:t.campaign_id,log_type:V,rnd:V,platform:t.platform,sdk_version:m,sdk_lib:"js",province:V,city:V,timezone:E,tz_offset:P,tz_name:V,sim_region:V,carrier:V,resolution:t.screen_width+"x"+t.screen_height,browser:t.browser,browser_version:t.browser_version,referrer:t.referrer,referrer_host:t.referrer_host,width:t.screen_width,height:t.screen_height,screen_width:t.screen_width,screen_height:t.screen_height,utm_term:t.utm_term,utm_content:t.utm_content,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,tracer_data:JSON.stringify(t.tracer_data),custom:{},wechat_openid:V,wechat_unionid:V}},this.evtParams={},this.reportErrorCallback=function(){}}return e.prototype.set=function(e,t){var n=this;if(null==t&&(this.delete(e),t=void 0),"evtParams"===e||"_staging_flag"===e){var i="evtParams"===e?t:{_staging_flag:Number(t)},r=a({},i);Object.keys(r).forEach((function(e){n.evtParams[e]=r[e]}))}else if("reportErrorCallback"===e&&"function"==typeof t)this.reportErrorCallback=t;else{var o;if(i="",-1<e.indexOf(".")&&(i=(o=e.split("."))[0],e=o[1]),"user_unique_id"===e){if(!t)return;if(-1!==["0","Null","None","","undefined"].indexOf(t))return}"os_version"===e&&(e=""+t),i?"user"===i||"header"===i?this.envInfo[i][e]=t:this.envInfo.header.custom[e]=t:this.envInfo.user.hasOwnProperty(e)?-1<["user_type","ip_addr_id"].indexOf(e)?this.envInfo.user[e]=t&&Number(t):-1<["user_id","web_id","user_unique_id","ssid"].indexOf(e)?this.envInfo.user[e]=t&&String(t):-1<["user_is_auth","user_is_login"].indexOf(e)?this.envInfo.user[e]=Boolean(t):"device_id"===e&&(this.envInfo.user[e]=t):this.envInfo.header.hasOwnProperty(e)?this.envInfo.header[e]=t:this.envInfo.header.custom[e]=t}},e.prototype.get=function(e){try{return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this[e]:JSON.parse(JSON.stringify(this.envInfo[e])):JSON.parse(JSON.stringify(this.envInfo))}catch(e){console.log("get config stringify error ")}},e.prototype.setStore=function(e){try{var t,n=this.storage.getItem(this.configKey);Object.keys(e).length&&(t=Object.assign(e,n),this.storage.setItem(this.configKey,t))}catch(e){}},e.prototype.getStore=function(){try{var e=this.storage.getItem(this.configKey);return Object.keys(e).length?e:null}catch(e){return null}},e.prototype.delete=function(e){try{var t=this.storage.getItem(this.configKey);t&&t.hasOwnProperty(e)&&(delete t[e],this.storage.setItem(this.configKey,t))}catch(e){}},e}(),L=function(){function e(e,t){this.isLog=t||!1,this.name=e||""}var t=e.prototype;return t.info=function(e){this.isLog&&console.log("["+this.name+"] "+e)},t.warn=function(e){this.isLog&&console.warn("["+this.name+"] "+e)},t.error=function(e){this.isLog&&console.error("["+this.name+"] "+e)},t.throw=function(e){throw this.error(this.name),new Error(e)},e}(),j=function(){function e(){this._hooks={}}return e.prototype.on=function(e,t){e&&t&&"function"==typeof t&&(this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t))},e.prototype.once=function(e,i){var t=this;e&&i&&"function"==typeof i&&this.on(e,(function n(r){i(r),t.off(e,n)}))},e.prototype.off=function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&(t?-1!==(t=this._hooks[e].indexOf(t))&&this._hooks[e].splice(t,1):this._hooks[e]=[])},e.prototype.emit=function(e,t){e&&this._hooks[e]&&this._hooks[e].length&&o(this._hooks[e]).forEach((function(e){try{e(t)}catch(e){}}))},e}(),R=function(){function e(e,t){this.storage=new v(!1,"session"),this.sessionKey=function(e){return"__tea_session_id_"+e}(e),this.expireTime=t.expireTime||18e5,this.disableSession=t.disable_session,this.disableSession||this._setSessionId()}return e.prototype._updateSessionId=function(){var e,t=this.storage.getItem(this.sessionKey);t&&t.sessionId&&(e=t.timestamp,Date.now()-e>this.expireTime?t={sessionId:O(),timestamp:Date.now()}:t.timestamp=Date.now(),this.storage.setItem(this.sessionKey,t),this._resetExpTime())},e.prototype._setSessionId=function(){var e=this,t=this.storage.getItem(this.sessionKey);t&&t.sessionId?t.timestamp=Date.now():t={sessionId:O(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,t),this.sessionExp=setInterval((function(){e._checkEXp()}),this.expireTime)},e.prototype._getSessionId=function(){var e=this.storage.getItem(this.sessionKey);return!this.disableSession&&e&&e.sessionId?e.sessionId:""},e.prototype._resetExpTime=function(){var e=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=setInterval((function(){e._checkEXp()}),this.expireTime))},e.prototype._resetSessionId=function(){var e={sessionId:O(),timestamp:Date.now()};this.storage.setItem(this.sessionKey,e)},e.prototype._checkEXp=function(){var e=this.storage.getItem(this.sessionKey);e&&e.sessionId&&Date.now()-e.timestamp+30>=this.expireTime&&(e={sessionId:O(),timestamp:Date.now()},this.storage.setItem(this.sessionKey,e))},e}(),A={pv:["predefine_pageview"],sdk:["_be_active","predefine_page_alive","predefine_page_close","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append"],autotrack:["bav2b_click","bav2b_page","bav2b_beat","bav2b_page_statistics","__bav_click","__bav_page","__bav_beat","__bav_page_statistics"]},D=function(){function e(e,t,n,i){this.count={pv:0,sdk:0,autotrack:0,log:0},this.limit={pv:1,sdk:10,autotrack:10,log:3},this.errorCode={f_net:0,f_data:0},this.errorInfo={pv:{f_net:0,f_data:0},sdk:{f_net:0,f_data:0},autotrack:{f_net:0,f_data:0},log:{f_net:0,f_data:0}},this.collect=e,this.disable_tracer=t.disable_tracer||t.channel_domain,this.ready=!(!t.app_id||this.disable_tracer||t.disable_track_event),this.appid=t.app_id,this.process=n,this.event=i,e=t.channel_domain||k(s[t.channel]),this.reportUrl=t.report_url||e+"/list",this.listener()}return e.prototype.addCount=function(e){try{if(!this.ready)return;if(this.count[e]++,this.count[e]>=this.limit[e]){var t,i=o(i=[],this.processTracer(this.count[e],e,"net"));for(t in this.errorInfo[e])this.errorInfo[t]&&(i=o(i,this.processTracer(this.errorInfo[e][t],e,t)));i.length&&this.sendTracer(i,!0,e,!1)}}catch(e){}},e.prototype.addErrorCount=function(e,t,i,n){var r,o=this;try{if(!this.ready)return;e&&e.length&&(r=e[0].events)&&r.length&&("f_data"===t?(n&&n.hasOwnProperty("sc")?this.errorInfo.log.f_data=r.length-n.sc:this.errorInfo.log.f_data=r.length,this.errorCode.f_data=i):r.forEach((function(e){var t,n="log";for(t in A)if(-1!==A[t].indexOf(e.event)){n=t;break}o.errorInfo[n].f_net++,o.errorCode.f_net=i})))}catch(e){}},e.prototype.clearCount=function(e){try{e?(this.count[e]=0,this.errorInfo[e]={f_net:0,f_data:0}):(this.count={pv:0,sdk:0,autotrack:0,log:0},this.errorInfo={pv:{f_net:0,f_data:0},sdk:{f_net:0,f_data:0},autotrack:{f_net:0,f_data:0},log:{f_net:0,f_data:0}})}catch(e){}},e.prototype.sendTracer=function(e,t,n,i){try{if(!this.ready)return;if(this.collect.staging)return;var r=this.event._mergeEvents(e);i&&window.navigator.sendBeacon?window.navigator.sendBeacon(this.reportUrl,JSON.stringify(r)):h(this.reportUrl,3e5,r,""),t?this.clearCount(n):this.clearCount()}catch(e){}},e.prototype.processTracer=function(e,t,n){try{var i={count:e,state:n,key:t,params_for_special:"applog_trace",aid:this.appid,platform:"web",_staging_flag:1,sdk_version:m},r=("f_net"!==n&&"f_data"!==n||(i.errorCode=this.errorCode[n]),[]);if(r.push(this.process("applog_trace",i,!0)),r&&r.length)return delete r[0].is_bav,r}catch(e){}},e.prototype.listener=function(){var e=this;this.ready&&(document.addEventListener("visibilitychange",(function(){e.leavePage()})),C((function(){e.leavePage()})))},e.prototype.leavePage=function(){if(this.ready)try{var e,t=[];for(e in this.count)if(this.count[e]){var i,n=this.errorInfo[e];for(i in t=o(t,this.processTracer(this.count[e],e,"net")),n)n[i]&&(t=o(t,this.processTracer(n[i],e,i)))}t&&t.length&&this.sendTracer(t,!1,"",!0)}catch(t){}},e}(),M=function(){function e(e){this.logger=e}var t=e.prototype;return t.bridgeInject=function(){try{return AppLogBridge?(this.logger.info("AppLogBridge is injected"),!0):(this.logger.info("AppLogBridge is not inject"),!1)}catch(e){return this.logger.info("AppLogBridge is not inject"),!1}},t.hasStarted=function(e){var t=this;try{this.bridgeInject()?AppLogBridge.hasStarted((function(n){t.logger.info("AppLogBridge is started? : "+n),e(n)})):e(0)}catch(t){this.logger.info("AppLogBridge, error:"+JSON.stringify(t.stack)),e(0)}},t.setUserUniqueId=function(e){try{AppLogBridge.setUserUniqueId(e)}catch(e){this.logger.error("setUserUniqueId error")}},t.addHeaderInfo=function(e,t){try{AppLogBridge.addHeaderInfo(e,t)}catch(e){this.logger.error("addHeaderInfo error")}},t.setHeaderInfo=function(e){try{AppLogBridge.setHeaderInfo(JSON.stringify(e))}catch(e){this.logger.error("setHeaderInfo error")}},t.removeHeaderInfo=function(e){try{AppLogBridge.removeHeaderInfo(e)}catch(e){this.logger.error("removeHeaderInfo error")}},t.onEventV3=function(e,t){try{AppLogBridge.onEventV3(e,t)}catch(e){this.logger.error("onEventV3 error")}},t.profileSet=function(e){try{AppLogBridge.profileSet(e)}catch(e){this.logger.error("profileSet error")}},t.profileSetOnce=function(e){try{AppLogBridge.profileSetOnce(e)}catch(e){this.logger.error("profileSetOnce error")}},t.profileIncrement=function(e){try{AppLogBridge.profileIncrement(e)}catch(e){this.logger.error("profileIncrement error")}},t.profileUnset=function(e){try{AppLogBridge.profileUnset(e)}catch(e){this.logger.error("profileUnset error")}},t.profileAppend=function(e){try{AppLogBridge.profileAppend(e)}catch(e){this.logger.error("profileAppend error")}},e}();function B(e,t,n){void 0===t&&(t=""),void 0===n&&(n={});var i=e;return 0<("/"===(i=i.split("#")[0].split("?")[0])[e.length-1]&&(i=i.substr(0,e.length-1)),i="/"===t[0]?i.replace(/(https?:\/\/[\w-]+(\.[\w-]+){1,}(:[0-9]{1,5})?)(\/[.\w-]+)*\/?$/,"$1"+t):i.replace(/(https?:\/\/[\w-]+(\.[\w-]+){1,}(:[0-9]{1,5})?(\/[.\w-]+)*?)(\/[.\w-]+)?\/?$/,"$1/"+t),e=Object.keys(n).map((function(e){return e+"="+n[e]})).join("&")).length?i+"?"+e:i}function N(e){for(var t=0,n=0,i=(e+="").length,r=0;r<i;r++)(0x7fffffffffff<(t=31*t+e.charCodeAt(n++))||t<-0x800000000000)&&(t&=0xffffffffffff);return t<0&&(t+=0x7ffffffffffff),t}var H,F=function(){function e(e){this.autotrack=!1,this.spa=!1,(e.spa||e.autotrack)&&(this.autotrack=!!e.autotrack,this.spa=e.spa,this.fncArray=new Map,this.setLocation(),this.hack(),this.storage=new v(!0),this.storage.setItem("__tea_cache_refer_key",location.href),this.listener())}return e.prototype.hack=function(){var e=this,a=window.history.pushState,s=(history.pushState=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];"function"==typeof history.onpushstate&&history.onpushstate({state:t}),t=a.call.apply(a,o([history,t],n));var r=e.getPopStateChangeEventData();return e.lastLocation=B(location.href,n[1]),e.storage.setItem("__tea_cache_refer_key",e.lastLocation),e.sendPv(r),t},history.replaceState);history.replaceState=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];"function"==typeof history.onreplacestate&&history.onreplacestate({state:t}),t=s.call.apply(s,o([history,t],n));var r=e.getPopStateChangeEventData();return e.lastLocation=B(location.href,n[1]),e.storage.setItem("__tea_cache_refer_key",e.lastLocation),e.sendPv(r),t}},e.prototype.setLocation=function(){"undefined"!=typeof window&&(this.lastLocation=window.location.href)},e.prototype.add=function(e,t){this.fncArray.get(e)||this.fncArray.set(e,t)},e.prototype.init=function(e,t){this.add(e,t),this.fncArray.get(e)(this.getPopStateChangeEventData())},e.prototype.listener=function(){var e=this,t=null;window.addEventListener("hashchange",(function(n){e.lastLocation!==window.location.href&&clearTimeout(t)})),window.addEventListener("popstate",(function(n){e.lastLocation!==window.location.href&&(t=setTimeout((function(){e.lastLocation=window.location.href;var t=e.getPopStateChangeEventData();e.sendPv(t)}),10))}))},e.prototype.getPopStateChangeEventData=function(){var e=this.pageConfig();return e.is_back=0,e},e.prototype.pageConfig=function(){var e="";try{e=document.referrer||this.storage.getItem("__tea_cache_refer_key")||""}catch(e){}return{is_html:1,url:location.href,referrer:e,page_key:location.href,refer_page_key:e,page_manual_key:"",refer_page_manual_key:""}},e.prototype.sendPv=function(e){this.fncArray.forEach((function(t){t(e)}))},e}(),U=o(["init","config","send","start","predefinePageView","beconEvent","on","clearEventCache","resetStayDuration","autoInitializationRangers","setWebIDviaUnionID","setWebIDviaOpenID","filterEvent"],["profileSet","profileSetOnce","profileIncrement","profileUnset","profileAppend","getVar","getAbSdkVersion","onAbSdkVersionChange","offAbSdkVersionChange","getABconfig","openOverlayer","closeOverlayer","getAllVars","setExternalAbVersion","getToken","destroy"]),$=(H=+Date.now()+Number((""+Math.random()).slice(2,8)),function(){function e(e){var i=this;this.is_first_time=!1,this.Native=!1,this.staging=!1,this.sdkload=!1,this.initPv=!0,this.predefinePageView=function(e,t){var n;void 0===e&&(e={}),i.sdkload?(n={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:Date.now(),referrer:window.document.referrer,$is_first_time:""+i.is_first_time},n=a({},n,e),t?i.beconEvent("predefine_pageview",n,"pv"):i.event("predefine_pageview",n,"pv")):i.logger.warn("sdk init error, api can not call")},this.getToken=function(e,t){},this.name=e,this._isSend=!1,this.hook=new j,this.storage=new v(!1)}return e.prototype.autoInitializationRangers=function(a){a&&a.app_id&&(this.autoBase=!0,function(){var e=a.app_id,t=a.channel,n=a.onTokenReady,i=(t=k(s[t])+y,new v(!1)),r=c(e,!0),o=i.getItem(r);o&&o.web_id?n(o.web_id):h(t,3e3,{app_key:"",app_id:e,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer},"",(function(e){e&&0===e.e?(n(e.web_id),e={web_id:e.web_id,ssid:e.ssid,user_unique_id:e.web_id,timestamp:Date.now()},i.setItem(r,e)):n("")}),(function(){n("")}),!0)}())},e.prototype.init=function(e){var t,n,i=this;this.autoBase||this._inited||(this._inited=!0,e&&"object"==typeof e?(this.logger=new L(this.name,e.log),t=e.app_id,(n=e.app_key)||t?t&&"number"!=typeof t?this.logger.warn("app_id param is error, must be number, please check !!!"):n&&"string"!=typeof n?this.logger.warn("app_key is empty, please check!"):(e.channel_domain||-1!==["cn","sg","va"].indexOf(e.channel)||(this.logger.warn("channel must be `cn`, `sg`,`va` !!!"),e.channel="cn"),this.Native=e.Native,this._initConfig=e,this.appBridge=new M(this.logger),this.storage.getItem("__tea_cache_first_"+t)?this.is_first_time=!1:(this.is_first_time=!0,this.storage.setItem("__tea_cache_first_"+t,"1")),this.sdkload=!0,e.Native&&this.appBridge.bridgeInject()?this.appBridge.hasStarted((function(t){t||i._init(e)})):this._init(e)):this.logger.warn("no app_key or app_id please check !!!")):console.warn("init params is error,please check"))},e.prototype._init=function(e){var t=this;this.autoPV=!0,this.sdkload=!0,this._initConfig=e,this._config=new I(e.app_id,e,e.configPersist||0),this.configPersist=e.configPersist||0,this._config.set("app_id",e.app_id),this.hook.on("token-ready",(function(){!t.callbackSend||t._isSend?t._event&&t._event.report():t.start()})),this._session=new R(e.app_key||e.app_id,e),this._token=new g(e,this._config,this.hook,this._session),this._event=new T(this,e,this._config,this._token,this.plugin,this._session,this.match),this.tracer=new D(this,e,this._processEvent.bind(this),this._event),this.spaView=new F(e),this._token._getToken()},e.prototype.config=function(e){var i=this;this.sdkload?this.Native&&this.appBridge.bridgeInject()?this.appBridge.hasStarted((function(t){if(t)for(var n in e)"user_unique_id"===n?i.appBridge.setUserUniqueId(e[n]):e[n]?i.appBridge.addHeaderInfo(n,e[n]):i.appBridge.removeHeaderInfo(n);else i._setConfig(e)})):this._setConfig(e):this.logger.warn("sdk init error, api can not call")},e.prototype._setConfig=function(e){if(!this.autoBase)if(this._inited)if(e&&"object"==typeof e){e.disable_auto_pv&&(this.autoPV=!1,delete e.disable_auto_pv),e._staging_flag&&1===e._staging_flag&&(this.staging=!0);var t,n,i=a({},e);for(n in this.configPersist&&((t=this._config.getStore())&&(i=Object.assign(t,e)),this._config.setStore(e)),i)"user_unique_id"!==n?"web_id"!==n?this._config.set(n,i[n]):this._token._setWebid(i[n]):this._token._setUuid(i[n])}else this.logger.warn("config params is error, please check");else this.logger.warn("config must be use after function init")},e.prototype.on=function(e,t){try{e&&"string"==typeof e&&"function"==typeof t&&this.hook.on(e,t)}catch(e){}},e.prototype.send=function(){this.start()},e.prototype.start=function(){var e=this;this.sdkload?this.Native&&this.appBridge.bridgeInject()?this.appBridge.hasStarted((function(t){t?(e.logger.info("jsbrige开启，事件将由原生 sdk进行上报"),e.predefinePageView()):e._start()})):this._start():this.logger.warn("sdk init error, api can not call")},e.prototype._start=function(){var e=this;if(!this.autoBase)if(this._token.isTokenReady())if(this._isSend)this.logger.warn("method start can not be use over one time , please check !!");else{this._isSend=!0,this.logger.info("userInfo:"+JSON.stringify(this._config.get("user"))),this.logger.info("sdk is ready,version is 4.2.9. you can report now !!!"),this._event.setReady(),this.autoPV&&(this.predefinePageView(),this.initPv=!1),this._initConfig.spa&&this.spaView.add("spa",this.predefinePageView),this.hook.on("token-change",(function(t){e.initPv||"webid"!==t||e._initConfig.enable_custom_webid||e.predefinePageView({},!0),e.logger.info("token change, new userinfo:"+JSON.stringify(e._config.get("user")))}));try{(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e){}}else this.callbackSend=!0},e.prototype.beconEvent=function(e,t,n){var i=this,r=(n=n||"log",[]);r.push([e,t=void 0===t?{}:t]),r=r.map((function(e){return i._processEvent(e[0],e[1])})),this._dealEvent(!0,r,n),this._addTracerCount(n)},e.prototype.event=function(){for(var e,t,n=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];this.sdkload?(e=i(r,1)[0],t=[],"Array"!==Object.prototype.toString.call(e).slice(8,-1)?t[0]=r:t=r,t=t.map((function(e){return n._processEvent(e[0],e[1])})),this._dealEvent(!1,t,"log"),this._addTracerCount("log")):this.logger.warn("sdk init error, api can not call")},e.prototype._dealEvent=function(e,t,n){var i=this;this.sdkload?this.Native&&this.appBridge.bridgeInject()?"autotrack"!==n&&"sdk"!==n&&this.appBridge.hasStarted((function(n){n?t&&t.length&&t.forEach((function(e){var t=e.event;e=e.params,i.appBridge.onEventV3(t,JSON.stringify(e))})):i._commonEvent(e,t)})):this._commonEvent(e,t):this.logger.warn("sdk init error, api can not call")},e.prototype._commonEvent=function(e,t){e?this._event.beconEvent(t):this._event.event(t),this._session._updateSessionId()},e.prototype._addTracerCount=function(e){this.sdkload?this.Native||this.staging||this.tracer.addCount(e):this.logger.warn("sdk init error, api can not call")},e.prototype._processEvent=function(e,t){try{var n=e;/^event\./.test(e)&&(n=e.slice(6));var i,r=t;return(r="object"!=typeof r?{}:r).profile?delete r.profile:r.event_index=H+=1,r.local_ms?(i=r.local_ms,delete r.local_ms):i=+new Date,{event:n,params:r,local_time_ms:i,is_bav:this._initConfig.autotrack?1:0}}catch(n){return{event:e,params:t}}},e.prototype.filterEvent=function(e){this.eventFilter=e},e.prototype.clearEventCache=function(){this._event.clearEventCache()},e.prototype.setWebIDviaUnionID=function(e){var t;e&&(t=N(e),this.config({web_id:""+t,wechat_unionid:e}),this.hook.emit("custom-webid"))},e.prototype.setWebIDviaOpenID=function(e){var t;e&&(t=N(e),this.config({web_id:""+t,wechat_openid:e}),this.hook.emit("custom-webid"))},e.prototype.resetStayDuration=function(e,t,n){},e.prototype.profileSet=function(e){},e.prototype.profileSetOnce=function(e){},e.prototype.profileIncrement=function(e){},e.prototype.profileUnset=function(e){},e.prototype.profileAppend=function(e){},e.prototype.setExternalAbVersion=function(e){},e.prototype.getVar=function(e,t,n){},e.prototype.getABconfig=function(e,t){},e.prototype.getAbSdkVersion=function(e){},e.prototype.onAbSdkVersionChange=function(e){},e.prototype.offAbSdkVersionChange=function(e){},e.prototype.openOverlayer=function(){},e.prototype.closeOverlayer=function(){},e.prototype.getAllVars=function(e){},e.prototype.destroy=function(){this.destroyInstance||(this.destroyInstance=!0,this.hook.off("token-ready"))},e}());t.default=function(e){var t=this;return r(this,"_exportCollect",(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t._isProcess?t._executeCmd.apply(t,n):(t.cmdQueue.push(n),t._processCmd())})),r(this,"_processCmd",(function(){var e,n;0===t.cmdQueue.length||-1!==(e=-1===(e=(n=function(e,t,i){var n=-1;return e.forEach((function(e,r){(void 0!==i?e[i]:e)===t&&(n=r)})),n})(t.cmdQueue,"autoInitializationRangers","0"))?n(t.cmdQueue,"init","0"):e)&&(t._isProcess=!0,t._executeCmd.apply(t,t.cmdQueue[e]),t.cmdQueue.forEach((function(n,r){r!==e&&t._executeCmd.apply(t,n)})),t.cmdQueue=[])})),r(this,"_executeCmd",(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i,o=n[0];-1<U.indexOf(o)?(i=t.colloctor)[o].apply(i,n.slice(1)):(o=t.colloctor).event.apply(o,n)})),this.cmdQueue=[],this.name=e,this.colloctor=new $(e),this._isProcess=!1,this._alias={},this._processCmd(),U.forEach((function(e){t._exportCollect[e]=t._exportCollect.bind(t,e)})),this._exportCollect}},function(i,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(0),s=t(5),a=l(t(6)),r=l(t(7)),o=l(t(8)),c=l(t(9));function l(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n,i=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)),i}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,n.log)("logger version is ".concat(c.default));var u=(0,n.isType)("Object"),m="videoplayer_oneplay",_="videoplayer_oneopera",p="videoplayer_oneerror",w={data:1e3,runtime:1002,parse:1004,network:1003,no_error_handler:9997,custom_error:9998,other:9999,notSupport:1005},k={1:-499991,2:-499992,3:-499993,4:-499994,5:-499995},C=1300,O="__tea_cache_tokens_".concat(C),x=432e5,S=["vtype","tag","subtag","codec_type","device_type"],T="",V=null;t=function(){function e(t,l){var f=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"initializeUrlLog",(function(e){e=e||"","String"!==(0,n.typeOf)(e)&&(e=""),f.urlLog={initial_url:e,initial_host:(0,n.getHostFromUrl)(e),initial_ip:""}})),y(this,"onMediaFormatError",(function(e){f.onOneEvent({end_type:(e.error_type||"")+"Error"})})),y(this,"onDrmTypeChange",(function(e){f.addIfExist("drm_type",{drm_type:e},f._options)})),y(this,"onReplayBtnClick",(function(){f.resetLoggerParams()})),y(this,"onBeforeDefinitionChange",(function(){f.resLogs.ldst=(0,n.nowTime)(),f._endType="switch"})),y(this,"onDefinitionChange",(function(e){var t=e.from;e=e.to,f.changeResolution(t,e,f.resLogs.ldst,"switch"),(0,n.log)("onDefinitionChange from:".concat(t,", to:").concat(e))})),y(this,"onDefiChangeSuccess",(function(){(0,n.log)("onDefinitionChangeSuccess"),f.updateVideoSize(),f.triggerTask("start")})),y(this,"onAbrChange",(function(e){var t,r=e.prev,i=e.cur;e=e.abrInfo,f.player.abrInstance&&(t=f.player.abrInstance.eventInfo,(0,n.log)("abrChange",t),t.last_definition=r,t.now_definition=i,f.abrInfo.abr_event_info.video_switch.push(t),f.changeResolution(r,i,(0,n.nowTime)(),"abr_switch",e))})),y(this,"onAbrPrestallEnd",(function(e){f.abrInfo.abr_user_info.cancel_abr=e?1:0})),y(this,"onTimeUpdate",(function(){var e=f.playlogs,t=f.resLogs,r=f.player,i=(f.errorLog.try_err_c=0,e.vt||1!==f.startStep||(e.vt=(0,n.curTimestamp)(),(0,n.log)("onTimeUpdate: first frame inited","currentTime11:".concat(r.currentTime," vt-pt:").concat(e.vt-e.pt," vt-nt:").concat(e.vt-e.nt," vt-rt:").concat(e.vt-e.rt)),f.startStep=2),t.initial_resolution||(t.initial_resolution=(r.currentDefitionFromPlayer&&r.currentDefitionFromPlayer.definition?r.currentDefitionFromPlayer.definition:r.config.defaultDefinition||r.video.videoHeight+"p"||"").replace("P","p")),t.final_resolution||(t.final_resolution=t.initial_resolution),e.played.length);i<1?e.played.push({begin:r.currentTime,end:-1}):e.played[i-1].end=r.currentTime,(e=t.played.length)<1?t.played.push({begin:r.currentTime,end:-1}):t.played[e-1].end=r.currentTime,f.lastVideoTime=r.currentTime||0,f.updateCurBuffer()})),y(this,"onCanplay",(function(){(0,n.log)("onCanplay","this.startStep:".concat(f.startStep," ").concat((0,n.curTimestamp)())),f.setVt()})),y(this,"onLoadeddata",(function(){(0,n.log)("onLoadeddata","this.startStep:".concat(f.startStep," ").concat((0,n.curTimestamp)())),f.setVt(),f.updateVideoSize()})),y(this,"onLoadStart",(function(){var e=(0,n.checkVideoSrcIsEmpty)(f.player.currentSrc)||(0,n.checkIsEmptySrc)(f.player,f.line_app_id);f.triggerTask("start"),(0,n.log)("onLoadStart","this.startStep:".concat(f.startStep," ").concat((0,n.curTimestamp)()," isSrcEmpty:").concat(e," player.src:").concat(f.player.src)),0!==f.startStep||e||"visible"!==document.visibilityState||f.setPt()})),y(this,"onDashStateChange",(function(e){(0,n.log)("onDashStateChange","this.startStep:".concat(f.startStep," ").concat((0,n.nowTime)()," state:").concat(e));var t=f.playlogs;if(f.startStep<2)switch(e){case"player_start":t.dash_pst=(0,n.nowTime)();break;case"wasm_start":t.dash_wst=(0,n.nowTime)();break;case"wasm_ready":t.dash_wrt=(0,n.nowTime)();break;case"init_finished":t.dash_ift=(0,n.nowTime)();break;case"core_start":t.dash_cst=(0,n.nowTime)();break;case"start_play":t.dash_spt=(0,n.nowTime)()}})),y(this,"onMp4StateChange",(function(e){var t=e.state;(10<f.exInfo.states.length||"player_start"===t)&&(f.exInfo.states=[]),f.exInfo.states.push(e)})),y(this,"onBufferedChange",(function(){var e,t=f.player.video&&f.player.video.buffered;!t||0<(e=t.length)&&t.end(e-1)+1>f.player.duration&&(f.bft=(0,n.curTimestamp)())})),y(this,"onPlayerInited",(function(){(0,n.log)("player init"),f._playerCreatedTime=(0,n.curTimestamp)(),f.playlogs.rt=(0,n.curTimestamp)()})),y(this,"onNotAutoPlay",(function(){(0,n.log)("onNotAutoPlay","autoplay:".concat(f.isAutoplay)),0===f.isAutoplay?f.isAutoplay=2:1===f.isAutoplay&&(f.isAutoplay=3)})),y(this,"onDashError",(function(e){var t=f.errorLog;t.last_errors.push((e=e||{}).errorCode),t.accu_errc++,f.onOneError({errorType:e.errorTypeCode,code:e.errorCode,url:e.url||"",headers:e.headers||{}},0)})),y(this,"onPlayerError",(function(e){e=e||{};var t=f.errorLog,o=f.player,i=f.line_app_id;if((0,n.log)("onPlayerError","this.player.type:".concat(f.player.type," this.player.replayRunning:").concat(f.player.replayRunning," isSupportMP4:").concat(r.default.isSupportMP4," isPC:").concat(r.default.isPC)),(0,n.log)("onPlayerError",e),f.load_state=3,f._endType="error",f.suspendWaitingStatus("onPlayerError"),"dash"!==o.type||!o.replayRunning){if(o=f.player.currentSrc,e.url||(e.url=o),(1768===i||9999===i)&&r.default.isPC&&!r.default.isSupportMP4||r.default.isSpider)return t.errc=k[5],t.errt=w.notSupport,f.onOneError({errorType:t.errt,code:t.errc,url:e.url,headers:e.headers||{}},0),void(f._isOnePlayReport=!0);t.errt=e.errorTypeCode||(e.errorType&&w[e.errorType]?w[e.errorType]:9999),e.errorCode?t.errc=0<e.errorCode?k[e.errorCode]:e.errorCode:e.code&&0<e.code?t.errc=k[e.code]||e.code:t.errc=e.code,t.last_errors.push(t.errc),0===t.fir_errc&&(t.fir_errc=t.errc),f.onOnePlay(1),f.onOneTemp(1),f.sendDegradeLog("playCatch_end",f.playlogs.degrade),f.onOneError({errorType:t.errt,code:t.errc,url:e.url||"",headers:e.headers||{}}),f.sendEventsQueue()}})),y(this,"onPlayInterfaceInfo",(function(e){(0,n.log)("onPlayInterfaceInfo",e);var t=f.errorLog,r=f.apiLog,i=f.playlogs;e&&Object.keys(e).map((function(t){"code"===t?r.vsc=e[t]:"message"===t?r.vsc_message=e.message||"success，视频可正常播放":r[t]=e[t]})),i.at=e.timestamep||(new Date).getTime(),e.error&&-9988===e.error.errc||(r.vsc=e.code||10,r.vsc_message=e.message||"success，视频可正常播放",e.error&&(i=e.error,t.errt=1e3,t.errc=i.errc||-9998,t.last_errors.push(i.errc||-9998),0===t.fir_errc&&(t.fir_errc=i.errc||-9998),t.accu_errc++,1===t.accu_errc&&(t.fir_errt=(0,n.nowTime)()),f.onOneError({errorType:1e3,code:i.errc||-9998,url:"",headers:{}})))})),y(this,"onProgressEvent",(function(){var e,t,r,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=f.netLog,c=(i.speed&&(c=1e6<i.speed?Math.floor(i.speed/1e3):i.speed,o.downloadSpeed=c,o.totalSpeed+=c,o.rqCount++),"oversize"!==i.type&&o.requestCount++,i.connectTime&&(o.connectCost=i.connectTime),o.rqCount<7?100:5e3<=i.costTime?20:10);"success"===i.type&&parseInt(100*Math.random(),10)<=c||(c=(0,s.findPerformanceInfo)(i.cdnUrl),r=i.xhr||{},e=i.type?"progress_".concat(i.type):"progress",t=(t=i.headers)||(0,n.getResponseHeaders)(r),c=d(d({},t=(0,n.transformHeader)(t)),{},{download_speed:o.downloadSpeed,connect_cost:o.connectCost,c_dur:c.connectDuration||0,d_dur:c.domainDuration||0,r_dur:c.duration||0,rqtt:(new Date).getTime(),x_cache:t.x_response_cache||"",server_ip:t.x_response_sinfo}),i.status?o.status=i.status:r&&r instanceof window.XMLHttpRequest&&(o.status=r.status||0),c.status=o.status,r=i.cdnUrl||i.url,"error"===i.type&&f.merror.cdn.push(d(d({costTime:i.costTime,cur_play_pos:i.pos,cdn_url:r,cdn_host:(0,n.getHostFromUrl)(r)},c),t)),f.onOneEvent({costTime:i.costTime,vid:i.vid,end_type:e,cur_play_pos:i.pos,cdn_url:r,cdn_host:(0,n.getHostFromUrl)(r)},c,"error"===i.type?0:2))})),y(this,"onNext",(function(e){if((0,n.log)("onNext:startStep:",f.startStep),0<f.startStep){if(f._reportInvalidVV(2))return;f.onOnePlay(2),f.onOneTemp(2),f.sendEventsQueue()}f.vtype=null,f.playlogs.lc=0,f.resetLoggerParams()})),y(this,"onNextEnded",(function(){var e=f.player,t=f.resLogs;e=(e=e.config.defaultDefinition||"").replace("P","p"),t.initial_resolution=e,t.final_resolution=e})),y(this,"onSeeking",(function(){var e,t,r,i;(0,n.checkVideoSrcIsEmpty)(f.player.src)||(0,n.checkIsEmptySrc)(f.player,f.line_app_id)||(e=f.resLogs,t=f.playlogs,r=f.player,i=f.seekLog,(0,n.log)("onSeeking","currentTime:".concat(r.currentTime)),0===f.startStep&&f.setPt(),f.suspendWaitingStatus("seek"),f.isSeeking&&f.suspendSeekStatus("seek",!1),f.isSeeking=!0,t.played.push({begin:f.player.currentTime,end:-1}),e.played.push({begin:f.player.currentTime,end:-1}),i.lastSeekStartTime=(0,n.nowTime)(),i.seekBefore=f.lastVideoTime.toString(),i.intervalId=setTimeout((function(){f.isSeeking&&f.suspendSeekStatus("seekTimeout",!0)}),6e4))})),y(this,"onSeeked",(function(){(0,n.checkVideoSrcIsEmpty)(f.player.src)||(0,n.checkIsEmptySrc)(f.player,f.line_app_id)||f.isSeeking&&f.suspendSeekStatus("seeked",!0)})),y(this,"onPlaying",(function(){f.suspendWaitingStatus("play"),f.load_state=1;var e=(0,n.nowTime)();f.pauseLog.isPausing&&(f.pauseLog.isPausing=!1,f.pauseLog.pause_acu_t+=e-f.pauseLog.pause_start)})),y(this,"onPlayCatch",(function(e){var t,r,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorTypeCode:0,errorCode:0,url:"",headers:{},status:0};(0,n.log)("onPlayCatch",e,i),e&&(t=f.errorLog,r=f.playlogs,f.merror.playCatch.push(d({errc:i.errorCode,errt:i.errorType},i.headers)),f.setBr("playcatch"),t.accu_errc++,t.try_err_c++,t.fir_errc=i.errorCode,i.errorCode&&t.last_errors.push(i.errorCode),f.suspendWaitingStatus("playcatch"),f.sendDegradeLog("playCatch",r.degrade,{cdn_url:i.url}),"mp42dash"===e?f.vtype="DASH_2":"dash2mp4"===e?f.vtype="MP4_2":"dash1mp4"===e&&(f.vtype="MP4_1"),r.degrade=e,f.onOneError({errorType:i.errorTypeCode,code:i.errorCode,url:i.url||"",status:i.httpCode||i.status,headers:i.headers||{},vid:i.vid||f.vid,preload_hit:i.preloadHit||0,preload_cached:i.preloadCached||0,endState:6,costTime:i.costTime,message:i.errorMessage},0))})),y(this,"onMediaExpied",(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{errorType:"",errorTypeCode:0,errorCode:0,url:"",headers:{},status:0},t=f.errorLog,r=f.playlogs;(0,n.log)("onMediaExpied",e),f.suspendWaitingStatus("expied"),f.setBr("expied"),t.accu_errc++,t.try_err_c++,t.last_errors.push(e.errorCode),r.at=(new Date).getTime(),f.merror.expied.push(d({errorType:e.errorTypeCode||e.errorType,code:e.errorCode,url:e.url||"",status:e.status},(0,n.transformHeader)(e.headers||{}))),f.onOneError({errorType:e.errorTypeCode||e.errorType,code:e.errorCode,url:e.url||"",status:e.status,headers:e.headers||{}},0)})),y(this,"onLog",(function(e){(0,n.log)("onLog",e);var t=e.type;if(delete e.type,t)switch(t){case"error_retry":break;case"onetemp":f._templog||(f._templog={}),f._templog=(0,n.parseTempData)(f._templog,e.data,e.action),f._templog.preload_hit&&(f._cacheFile=1);break;case"oneerror":var r=f.errorLog;r.accu_errc++,r.try_err_c++,f.setBr("mp4error"),r.last_errors.push(e.code),f.onOneError(e,0);break;case"oneevent":var i=(0,n.formatData)(e,{costTime:"costTime",vid:"vid",end_type:"end_type",pos:"cur_play_pos",cdnUrl:"cdn_url"});i.ext&&["start","end"].map((function(e){i.ext[e]&&(i.ext["ext_".concat(e)]=i.ext[e],delete i.ext[e])})),f.onOneEvent(i.data,i.ext,2)}})),y(this,"onPlay",(function(){(0,n.log)("onPlay","this.startStep :".concat(f.startStep," this.isEnded:").concat(f.isEnded)),f.isEnded&&(f.resetLoggerParams(),f.setPt())})),y(this,"onPause",(function(){(0,n.log)("onPause");var e=f.pauseLog;e.isPausing=!0,e.pause_start=(0,n.nowTime)()})),y(this,"onWaiting",(function(){var e=f.stall;(0,n.log)("onWaiting>","isSeeking:".concat(f.isSeeking," startStep:").concat(f.startStep," intervalId:").concat(e.intervalId)),f.isSeeking||0===f.playlogs.vt||0<f.inWaitingStart||(e.intervalId&&(window.clearTimeout(e.intervalId),e.intervalId=null),f.inWaitingStart=(0,n.nowTime)(),e.intervalId=window.setTimeout((function(){var e=f.stall;(0,n.log)("stall.intervalId>>".concat(e.intervalId," cost: ").concat((0,n.nowTime)()-f.inWaitingStart)),f._endType="wait",f.load_state=2,-1<f.vtype.indexOf("MP4")&&10<f.player.currentTime&&f.task&&(f.triggerTask("waiting",f.initial_url),f.requestCount++),e.stall_start=f.inWaitingStart,1===e.sc&&(e.first_buf_startt=f.inWaitingStart),window.clearTimeout(e.intervalId),e.intervalId=null,f.startWaitingStatus(f.inWaitingStart,(0,n.nowTime)()-f.inWaitingStart),e.intervalId=setTimeout((function(){0<f.inWaitingStart&&f.suspendWaitingStatus("waitTimeout")}),6e4)}),200))})),y(this,"onEnded",(function(){var e;f.initial_url&&(e=(0,n.computeWatchDur)(f.playlogs.played),(0,n.log)("onEnded","watchDur:".concat(e," vt:").concat(f.vt," pt:").concat(f.pt)),f.isEnded=!0,e=f.resLogs.df,f.changeResolution(e,e,(0,n.nowTime)(),"leave_switch"),f.onOnePlay(3),f.sendDegradeLog("playCatch_end",f.playlogs.degrade),f.onOneTemp(3),f.sendEventsQueue(),f.playlogs.lc++)})),y(this,"onUnload",(function(){0!==f.startStep&&f.initial_url&&(f.onOneTemp(4),f.sendDegradeLog("playCatch_end",f.playlogs.degrade),f._reportInvalidVV(4)||(f._options.disableLocalCache?f.onOnePlay(4,!1):f.onOnePlay(4,!0)))})),y(this,"onVisibilitychange",(function(){var e=f.playlogs.vt;"visible"===document.visibilityState&&(e||f.setPt())})),y(this,"onDestroy",(function(){(0,n.log)("onDestroy:this.startStep:".concat(f.startStep," initial_url:").concat(f.initial_url," ").concat(!!f.initial_url)),console.log(">>>onDestroy",0<f.startStep&&!!f.initial_url),f.onOnePlay(5),0<f.startStep&&f.initial_url&&(f.onOneTemp(5),f.sendDegradeLog("playCatch_end",f.playlogs.degrade));var e=f.resLogs.df;f.changeResolution(e,e,(0,n.nowTime)(),"leave_switch"),f.sendEventsQueue(),r.default.isPC?window.removeEventListener("beforeunload",f.onUnload):(r.default.isMobile||r.default.isPad)&&window.removeEventListener("pagehide",f.onUnload),document.removeEventListener("visibilitychange",f.onVisibilitychange),f.listeners.forEach((function(e){f.player.off(e.evt,e.handler)})),f.clearTimers(),f.player.off("destroy",f.onDestroy),f.task&&f.task.clear()})),y(this,"onOnePlay",(function(){var u=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if((0,n.log)("onOnePlay _isOnePlayReport:".concat(f._isOnePlayReport," isLeave: ").concat(e," endState:").concat(u)),!f._isOnePlayReport){var t=f.errorLog,r=f.playlogs,o=f.abrInfo,i=f.resLogs,c=f.player,l=f.apiLog,p=f.pauseLog,a=f.stall,s=f.netLog,h=(f._isOnePlayReport=!0,(0,n.computeWatchDur)(r.played)),v=(0,n.curTimestamp)(),y=0,_=0,g=c.video&&c.video.buffered;if(g){for(var w=g.length,k=0,C=0;C<w;C++)k+=g.end(C)-g.start(C);y=_=1e3*k}var b,O=d(d(d({local_time:(new Date).getTime(),log_type:"video_playq",plugin_exception:0,player_create_exception:"",v:f.vid,initial_url:f.initial_url,initial_host:f.initial_host,initial_ip:f.curHeaders.x_response_sinfo||0,initial_type:f.initial_type},f.curHeaders),{},{initial_resolution:i.initial_resolution,final_resolution:i.final_resolution,pt:f.pt,prepare_start_time:r.nt,prepare_end_time:r.rt||(0,n.curTimestamp)(),vt:f.vt,lt:f.lt,lpt:f.lpt,fvt:f.fvt,bft:f.bft,sc:f.seekLog.sc,sat:f.seekLog.sat,bc:f.bc,dbc:r.dbc||0,nbc:r.nbc||0,video_net_s:f.videoNetworkState,status:f.curStatus,first_buf_startt:a.first_buf_startt,first_buf_endt:a.first_buf_endt,lc:r.lc,bu_acu_t:f.bu_acu_t>x?0:f.bu_acu_t,de_bu_acu_t:r.de_bu_acu_t||0,n_bu_acu_t:r.n_bu_acu_t||0,pause_acu_t:p.pause_acu_t,cur_play_pos:f.cur_play_pos,load_state:f.load_state,playback_state:f.playback_state,end_state:u,watch_dur:x<h?0:h,switch_resolution_c:f.switchResolutionCount,is_start_play_automatically:f.isAutoplay,start_time:f.start_time,finish:f.finish,errt:t.errt,errc:t.errc,vsc:l.vsc,vsc_message:l.vsc_message,api_str:l.api_str,auth:l.auth||l.logid,width:f.videoWidth,height:f.videoHeight,vd:f.vd,video_length:parseInt(y,10),audio_length:parseInt(_,10),df:i.df,lf:i.lf,play_c:0,player_created_t:f.player_created_t,fir_errt:t.fir_errt,fir_errc:t.fir_errc,lv_method:0,ldst:i.ldst,ldet:i.ldet,is_disable_short_seek:0,mute:f.mute,volume:f.volume,download_speed:f.task&&f.task.speed?f.task.speed:s.downloadSpeed,avg_speed:0<s.rqCount?parseInt(s.totalSpeed/s.rqCount,10):0,mdl_req_num:s.requestCount,watingcost:f.watingCost,br:r.br,fbrt:r.fbrt,try_err_c:t.try_err_c,accu_errc:t.accu_errc,dash_pst:f.dash_pst,dash_wst:f.dash_wst,dash_wrt:f.dash_wrt,dash_ift:f.dash_ift,dash_cst:f.dash_cst,dash_spt:f.dash_spt,dash_break:2===c.dashBufferBreak?1:0,merror:JSON.stringify(f.merror),ex:JSON.stringify(f.exInfo),bufs:JSON.stringify(f.buffers.allBuffer),vs:i.vs,vds:i.vds,vps:i.vps},f.buffers.curBuffer),{},{degrade:r.degrade,cache_file:f._cacheFile});0!==f.vt&&(O.et=v),c&&c.dashState&&(O.dash_state=c.dashState),["drm_type","dynamic_type","enable_bash"].forEach((function(e){f.addIfExist(e,f._options,O)})),c.abrInstance&&(a=c.abrInstance,o.abr_general_info=a.generalInfo,o.abr_event_info.video_exit={local_time_ms:(new Date).getTime(),buffer_length:a.bufferLength,internet_speed:a.downloadSpeed,now_bitrate:a.nowBitrate,play_speed:f.player.playbackRate},a.getAbrPlayInfo&&(o.abr_play_info=a.getAbrPlayInfo()),a.getAbrVVStats&&(b=a.getAbrVVStats(),Object.keys(b).forEach((function(e){O[e]=b[e]})))),o.abr_init_opts=f.player.config.autoBitrateOpts||{},O.abr_info=JSON.stringify(f.abrInfo),e?f.reportLog(m,O,e):f.reportLog(m,O)}})),y(this,"onOneEvent",(function(e,t,r){var i=e.costTime,o=e.vid,c=e.end_type,a=e.cur_play_pos,s=e.cdn_url,l=(e=e.cdn_host,f.buffers.curBuffer),v=d({local_time:(new Date).getTime(),v:o||f.vid,cost_time:i,end_type:c||f.end_type,cdn_url:s||f.url,cdn_host:e||"",initial_type:f.initial_type,resolution:f.resolution,play_speed:f.playbackRate,first_frame_interval:(0,n.nowTime)()-f.pt,last_switch_interval:f.getLastInterval("lastSwitchStartTime",f.resLogs,!1),last_seek_interval:f.updateSeekPt(!1),last_event_interval:f.getLastInterval("lastEventTime"),video_pos:a||f.cur_play_pos,video_ready_s:f.videoReadyState,video_seeking:f.videoSeeking,video_paused:f.videoPaused,bufs:JSON.stringify(f.buffers.allBuffer),retry_count:f.retry_count,at:f.playlogs.at,stay_seconds:parseInt(((new Date).getTime()-f.playlogs.at)/1e3,10),preload_state:f.player&&f.player.preloadState||0},l);if("waitstart"===c&&"function"==typeof f._options.getPageFPS&&(o=f._options.getPageFPS(),v.cur_fps=o.curFPS||0,v.avg_fps=o.avgFPS||0),f.player&&f.player.dashState&&(v.dash_state=f.player.dashState),t&&"object"===h(t))for(var u in t)v[u]||(v[u]=t[u]);f.addIfExist("drm_type",f._options,v),f.reportLog("videoplayer_oneevent",v,r)})),y(this,"onOneTemp",(function(){var e,t,r,i,o,c,a;(0,n.log)("onOneTemp>>",!f._templog),f._templog&&(e=f.player,t=f.playlogs,r=f.pauseLog,i=f.errorLog,o=f.resLogs,c=(0,n.computeWatchDur)(t.played),a=d(d(d({local_time:(new Date).getTime()},f._templog),{},{v:f.vid,initial_type:f.initial_type,pt:f.pt,vt:f.vt,lt:f.lt,fvt:f.fvt,bc:f.bc,bu_acu_t:f.bu_acu_t>x?0:f.bu_acu_t,pause_acu_t:r.pause_acu_t,cur_play_pos:f.cur_play_pos,watch_dur:x<c?0:c,finish:f.finish,errt:i.errt,errc:i.errc,vd:f.vd,df:o.df,lf:o.lf,br:t.br,fbrt:t.fbrt,try_err_c:i.try_err_c,accu_errc:i.accu_errc,dash_break:2===e.dashBufferBreak?1:0,bufs:JSON.stringify(f.buffers.allBuffer),vs:o.vs,vds:o.vds,vps:o.vps},f.buffers.curBuffer),{},{degrade:t.degrade}),0!==f.vt&&(a.et=(0,n.curTimestamp)()),["drm_type","dynamic_type","enable_bash"].forEach((function(e){f.addIfExist(e,f._options,a)})),f.reportLog("videoplayer_onetemp",a,0),f._templog=null)})),this.player=t,void 0===this.player||null===this.player)throw new Error("player is ".concat(this.player));if(l&&l.line_app_id){!l.isTask&&void 0!==l.isTask||(this.task=new o.default),this.eventQueue=[],this._instanceCreateTime=(new Date).getTime(),l.codec_type=l.codec_type||"h264",this._options=l,this._options.maxQueueCount||(this._options.maxQueueCount=5),this.line_app_id=parseInt(l.line_app_id,10)||0,this.line_user_id=(l.line_user_id||"").toString(),this.version=c.default,this.sdk_version=c.default,this.playerCoreVersion=l.playerCoreVersion||"",this.playerVersion=l.playerVersion||l.sdk_version,this.closeSeekLog=l.closeSeekLog||!1,this.start_time=1e3*(l.start_time||0),this.isFullAB=l.isFullAB||!1,this._initial_resolution="",this.__vtype=null,this.__dt="",this.isLowMp4=!1,this.resetLoggerParams();try{this.initializeTracker(),this.sendLocalLog(),this.bindEvt(),(0,n.log)("logger constructor:"+this.player.video)}catch(t){console.log(t)}}else console.warn("player.config.vodLogOpts.line_app_id is necessary for plugin xgVodLogger")}return function(e,t,n){t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"resetLoggerParams",value:function(){(0,n.log)("resetLoggerParams");var e=this.playlogs?this.playlogs.lc:0;this.playlogs={nt:(0,n.curTimestamp)(),vt:0,rt:this.isEnded?(0,n.curTimestamp)():0,at:0,pt:0,bu_acu_t:0,bc:0,br:0,fbrt:"",dbc:0,de_bu_acu_t:0,nbc:0,n_bu_acu_t:0,played:[{begin:0,end:-1}],dash_pst:0,dash_wst:0,dash_wrt:0,dash_ift:0,dash_cst:0,dash_spt:0,interruptCount:0,degrade:"none",lc:e},this.degradeLog={bu_acu_t:0,bc:0,watch_dur:0,hasSendEnd:!1},this.buffers={allBuffer:[],curBuffer:{buf_diff:0,buf_s_pos:0,buf_e_pos:0,buf_include:0}},this.netLog={downloadSpeed:0,requestCount:0,connectCost:0,totalSpeed:0,rqCount:0,status:0},this.merror={cdn:[],player:[],playCatch:[],expied:[]},this.exInfo={buffer:{},stall:[],states:[]},this._templog=null,this._isOnePlayReport=!1,this.startStep=0,this.bft=0,this.initializeLogDatas(),this.initializeUrlLog()}},{key:"initializeLogDatas",value:function(){this.startStep=0,this.inWaitingStart=0,this.lastVideoTime=0,this._endType="",this._retryCount=0,this.lastOperaTime=-1,this.lastEventTime=-1,this.seekLog={intervalId:0,lastSeekStartTime:(0,n.nowTime)(),seekBefore:0,sat:0,sc:0},this.resLogs={lastSwitchStartTime:-1,switch_count:0,abr_switch_count:0,initial_resolution:"",final_resolution:"",ldst:0,ldet:0,df:"",lf:"",played:[],bc:0,bu_acu_t:0,sc:0,sat:0,buf:0,lbuf:0,lplayed:0,vs:0,vds:0,vps:0,vis:0,bitrate:0},this.apiLog={code:0,message:"",logid:"",api:"",auth:"",error:{}},this.errorLog={accu_errc:0,try_err_c:0,errt:0,errc:0,fir_errt:0,fir_errc:r.default.isSupportMP4?0:1005,last_errors:[]},this.pauseLog={pause_acu_t:0,isPausing:!1,pause_start:0},this.stall={intervalId:0,stall_count:0,first_buf_startt:0,first_buf_endt:0,stall_start:0,stall_end:0,stall_last_interval:0,stall_acc_time:0},this._playerCreatedTime=0,this.load_state=0,this.lv_method=6,this.isSeeking=!1,this.isEnded=!1,this.startStep=0,this.isAutoplay=this.player.config&&this.player.config.autoplay?1:0,this.abrInfo={abr_general_info:{},abr_event_info:{video_switch:[],video_stall:[],video_exit:{}},abr_play_info:{start_play_time_ms:0,is_hint:0,playback_info:{internet_speed_record:[],play_bitrate_record:[],buffer_length_record:[],play_speed_record:[]}},abr_user_info:{cancel_abr:0},abr_init_opts:this.player.config.autoBitrateOpts||{}},this._cacheFile=0}},{key:"initSessionId",value:function(){var e="0";try{e=window.localStorage.getItem(O).web_id||"0"}catch(t){e="0"}this._sessionId=(0,n.generateSessionId)(e),(0,n.log)("sessionId ".concat(this._sessionId))}},{key:"initializeTracker",value:function(){var t=this._options,o=(window.__xgplayer_vod_log__?this.tracker=window.__xgplayer_vod_log__:(this.tracker=window.__xgplayer_vod_log__=new V("tracker"),o={app_id:"cn"!==(o="va"===(o=t.channel||"cn")||"sg"===o?o:"cn")&&1300===C?323254:C,channel:o,log:!1,disable_sdk_monitor:!0},t.channelDomain&&(o.channel_domain=t.channelDomain),o.enable_ab_test=!!t.enableAbTest,this.tracker.init(o)),this.initSessionId(),"Array"===(0,n.typeOf)(t.absdkVersion)?t.absdkVersion.join(","):t.absdkVersion);this.commonParams={play_type:0,source_type:"vid",sdk_version:this.sdk_version,pc:this.playerCoreVersion,pv:this.playerVersion,line_app_id:this.line_app_id,line_user_id:this.line_user_id,absdkVersion:o||e.AB_SDK_VERSION,app_version:t.appVersion||"",platform:r.default.isPad?"pad":r.default.isMobile?"mobile":"pc"},(0,n.log)("commonParams ",this.commonParams),o={evtParams:this.commonParams,disable_auto_pv:!0},(0,n.log)("Browser.name ",r.default.name),!r.default.name||r.default.isChrome||r.default.isSafari||(o.browser=r.default.name,r.default.appVersion&&(o.browser_version=r.default.appVersion)),this.line_user_id&&(o.user_unique_id=this.line_user_id,o.web_id=this.line_user_id),t.referrer&&(o.referrer=t.referrer,o.referrer_host=(0,n.getHostFromUrl)(t.referrer)),this.tracker.config(o),this.tracker.start()}},{key:"resetDefiInfo",value:function(){var e=this.resLogs;e.played=[],e.bc=0,e.bu_acu_t=0,e.sc=0,e.sat=0}},{key:"sendLocalLog",value:function(){var i=this,e=a.default.get();a.default.remove(),e.map((function(e){Object.keys(e).map((function(t){var r;(0,n.log)("sendLocalLog",t,e[t]),i.player&&(i.player.emit("abLog",t,e[t]),(r=i._options.sendLocalCallback)&&"function"==typeof r&&r(t,e[t])),i.tracker(t,e[t])}))}))}},{key:"bindEvt",value:function(){var e=this,t=(this.listeners=[{evt:"play",handler:this.onPlay},{evt:"playing",handler:this.onPlaying},{evt:"pause",handler:this.onPause},{evt:"waiting",handler:this.onWaiting},{evt:"playInterfaceInfo",handler:this.onPlayInterfaceInfo},{evt:"DRM_ERROR",handler:this.onDashError},{evt:"ended",handler:this.onEnded},{evt:"loadeddata",handler:this.onLoadeddata},{evt:"loadstart",handler:this.onLoadStart},{evt:"canplay",handler:this.onCanplay},{evt:"dashStateChange",handler:this.onDashStateChange},{evt:"mp4StateChange",handler:this.onMp4StateChange},{evt:"autoplay was prevented",handler:this.onNotAutoPlay},{evt:"autoplay_was_prevented",handler:this.onNotAutoPlay},{evt:"seeking",handler:this.onSeeking},{evt:"seeked",handler:this.onSeeked},{evt:"complete",handler:this.onPlayerInited},{evt:"timeupdate",handler:this.onTimeUpdate},{evt:"bufferedChange",handler:this.onBufferedChange},{evt:"beforeDefinitionChange",handler:this.onBeforeDefinitionChange},{evt:"definitionChange",handler:this.onDefinitionChange},{evt:"definitionChangeSuccess",handler:this.onDefiChangeSuccess},{evt:"drmTypeChange",handler:this.onDrmTypeChange},{evt:"replayBtnClick",handler:this.onReplayBtnClick},{evt:"initialUrl",handler:this.initializeUrlLog},{evt:"ABR_CHANGE",handler:this.onAbrChange},{evt:"playCatch",handler:this.onPlayCatch},{evt:"MEDIA_EXPIRED",handler:this.onMediaExpied},{evt:"log",handler:this.onLog},{evt:"ABR_PRESTALL_END",handler:this.onAbrPrestallEnd},{evt:"progress_event",handler:this.onProgressEvent},{evt:"logger_next",handler:this.onNext},{evt:"nextEnded",handler:this.onNextEnded},{evt:"media_format_error",handler:this.onMediaFormatError}],this.player.config.errorKey),r=((0,n.log)(">>>errorKey",t),{evt:"error",handler:this.onPlayerError});t&&(r.evt=t),this.listeners.push(r),this.listeners.forEach((function(t){e.player.on(t.evt,t.handler)})),this.bindUnload()}},{key:"addIfExist",value:function(e,t,n){u(t)&&(null==(t=t[e])||(n[e]=t))}},{key:"changeResolution",value:function(e,t,r,i,o){var c=this.resLogs;e=e?e.replace("P","p"):"",t=t?t.replace("P","p"):"",c.ldet=(0,n.nowTime)(),c.df=t,c.lf=e,c.final_resolution=t,c.switch_count++,r=c.ldet-r,c={bc:c.bc,bu_acu_t:c.bu_acu_t,sc:c.sc,sat:c.sat,watch_dur:(0,n.computeWatchDur)(c.played)},o&&(c.abrInfo=o),this.updateVds(),this.resetDefiInfo(),this._options.closeResolutionLog||this.onOneOperator({costTime:r,operaType:i,stateBefore:e,stateAfter:t},c,0)}},{key:"getLastInterval",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=t[e],o=(0,n.nowTime)();return i=-1===i?-1:o-i,r&&(t[e]=o),i}},{key:"updateSeekPt",value:function(e){return this.getLastInterval("lastSeekStartTime",this.seekLog,e)}},{key:"_reportInvalidVV",value:function(e){return!!this._isInvaidVV()&&(this.onOneError({endState:e,errorType:9998,code:-1,url:this.url,headers:{}},0),this._isOnePlayReport=!0)}},{key:"_isInvaidVV",value:function(){return 0===this.vt&&-1===this.curStatus}},{key:"bindUnload",value:function(){r.default.isPC?window.addEventListener("beforeunload",this.onUnload):(r.default.isMobile||r.default.isPad)&&window.addEventListener("pagehide",this.onUnload),document.addEventListener("visibilitychange",this.onVisibilitychange),this.player.once("destroy",this.onDestroy)}},{key:"clearTimers",value:function(){var e=this.seekLog,t=this.stall;e.intervalId&&window.clearTimeout(e.intervalId),t.intervalId&&window.clearTimeout(t.intervalId)}},{key:"sendDegradeLog",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"playCatch",r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"none",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=((0,n.log)("sendDegradeLog",t,r,i),this.degradeLog),c=this.playlogs;o.hasSendEnd||"playCatch_end"===t&&"none"===r||("playCatch_end"===t&&(o.hasSendEnd=!0),e=this.bu_acu_t-o.bu_acu_t,c=(0,n.computeWatchDur)(c.played),this.onOneEvent({costTime:this.vd,vid:this.vid,end_type:t,cur_play_pos:this.player.currentTime,cdn_url:i.url},d({degrade:r,vt:this.vt,pt:this.pt,fvt:this.fvt,bc:this.bc-o.bc,bu_acu_t:x<e?0:e,watch_dur:c-o.watch_dur},i),0))}},{key:"onOneOperator",value:function(e){var t=e.costTime,n=e.operaType,i=e.stateBefore,r=e.stateAfter,o=(e=e.endType,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2,s=this.getLastInterval("lastOperaTime"),c={local_time:(new Date).getTime(),v:this.vid,opera_type:n,state_before:i,state_after:r,cost_time:t,end_type:e||this.end_type,cdn_url:this.url,resolution:this.resolution,last_interval:s,bufs:JSON.stringify(this.buffers.allBuffer),video_pos:this.cur_play_pos,retry_count:this.retry_count};this.player&&this.player.dashState&&(c.dash_state=this.player.dashState),Object.keys(o).map((function(e){c[e]=o[e]})),this.addIfExist("drm_type",this._options,c),this.reportLog(_,c,a)}},{key:"onOneError",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{errorType:0,code:0,url:"",headers:{},costTime:0,vid:"",message:"",preload_hit:0,preload_cached:0},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=((0,n.log)("onOneError",e),this.errorLog),i=this.apiLog,o=this.resLogs,c=this.player,a=this.playlogs,s=(0,n.transformHeader)(e.headers||{});o=d(d(d({v:e.vid||this.vid,video_pos:this.cur_play_pos,local_time:(new Date).getTime(),cost_time:e&&e.costTime?e.costTime:0,errt:e.errorType,errc:e.code,es:this.es,cdn_url:e.url||"",bufs:JSON.stringify(this.buffers.allBuffer),resolution:o.final_resolution,last_errors:r.last_errors.join(";"),vsc:i.vsc,vsc_message:e.message||i.vsc_message,server_ip:s.x_response_sinfo||0,initial_host:/^blob/.test(e.url)?"blob:":(0,n.getHostFromUrl)(e.url)},s),{},{cur_play_pos:this.cur_play_pos},this.buffers.curBuffer),{},{degrade:a.degrade,end_state:e.endState||1,preload_hit:e.preload_hit,preload_cached:e.preload_cached,ex:JSON.stringify(this.exInfo)}),c&&c.dashState&&(o.dash_state=c.dashState),this.addIfExist("drm_type",this._options,o),this.reportLog(p,o,t)}},{key:"reportLog",value:function(e,t,n){var i=this,r=this.player.ABTestTag,o=(t.player_sessionid||(t.player_sessionid=this.sessionId),t.web_url||(t.web_url=window.location.href),t.user_agent=navigator.userAgent,t.dynamic_type=this.dynamicType,null!=r&&(t.abtest_tag=r),this._options);if(u(o)&&(S.forEach((function(e){i.addIfExist(e,o,t)})),t.vtype=this.vtype),1===n)return(r={})[e]=t,void a.default.set(r);2!==n?(this.player&&this.player.emit("abLog",e,t),this.tracker(e,t)):this.addEventsQueue(e,t)}},{key:"addEventsQueue",value:function(e,t){this.eventQueue.push({event:e,params:t}),this.eventQueue.length>=this._options.maxQueueCount&&this.sendEventsQueue()}},{key:"sendEventsQueue",value:function(){for(;0<this.eventQueue.length;){var e=this.eventQueue.pop();this.tracker(e.event,e.params)}}},{key:"startWaitingStatus",value:function(e,t){this.onOneEvent({costTime:t,end_type:"waitstart"},{},2),this.appendStallInfo("start",e)}},{key:"triggerTask",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"start",t=1<arguments.length?arguments[1]:void 0;(0,n.log)("triggerTask>>",e),t=t||this.player.src,!(0,n.checkVideoSrcIsEmpty)(t)&&-1<this.vtype.indexOf("MP4")&&this.task&&this.task.trigger(t,e)}},{key:"appendStallInfo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"start",t=1<arguments.length?arguments[1]:void 0,r=2<arguments.length?arguments[2]:void 0,i=this.exInfo.stall;if("start"===e){6<i.length&&i.splice(0,i.length-6);var o=this.buffers.curBuffer;i.push({start:t,end:-1,endType:"waitstart",cost:0,cur:this.cur_play_pos,buf_s:o.buf_s_pos,buf_e:o.buf_e_pos,buf_i:o.buf_include})}else if("end"===e){if((o=i.length-1)<0)return;i[o].end<0&&(i[o].end=t,i[o].endType=r,i[o].cost=t-i[o].start)}(0,n.log)("appendStallInfo",i)}},{key:"suspendWaitingStatus",value:function(e){var t=(0,n.nowTime)(),r=this.playlogs,i=this.resLogs,o=this.stall,c=this.inWaitingStart;c<=0||this.isSeeking||r.vt<=0||((0,n.log)("suspendWaitingStatus>>".concat(e,"|costTime:").concat(t-c," isSeeking:").concat(this.isSeeking," vt:").concat(r.vt)),this.appendStallInfo("end",t,e),200<t-c&&(c=t-this.inWaitingStart,r.bc++,this.checkInBuffer(this.player.currentTime)?(r.de_bu_acu_t+=c,r.dbc++):(r.nbc++,r.n_bu_acu_t+=c),i.bc++,r.bu_acu_t+=c,i.bu_acu_t+=c,o.stall_end=t,o.stall_last_interval=o.stall_end-o.stall_start,o.stall_acc_time+=o.stall_last_interval,1===o.sc&&(o.first_buf_endt=t),this.player.abrInstance&&!this.isSeeking&&this.playlogs.vt&&(r=this.player.abrInstance,this.abrInfo.abr_event_info.video_stall.push({local_time_ms:(new Date).getTime(),stall_duration:parseFloat((c/1e3).toFixed(2)),buffer_length:r.bufferLength,internet_speed:r.downloadSpeed,now_bitrate:r.nowBitrate,play_speed:this.player.playbackRate,is_abr:r.isCurrentInAbr?1:0})),this.onOneEvent({costTime:c,end_type:e||"wait"},{},2)),this._endType="",this.load_state=1,this.inWaitingStart=0,window.clearTimeout(o.intervalId),o.intervalId=null)}},{key:"suspendSeekStatus",value:function(e){var t,r,i,o,c,a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.isSeeking&&(t=this.seekLog,r=this.resLogs,c=this.player,i=(0,n.nowTime)()-t.lastSeekStartTime,(0,n.log)("suspendSeekStatus>>","".concat(e," currentTime:").concat(c.currentTime," costTime:").concat(i," sat:").concat(t.sat," resLogs.sat:").concat(r.sat)),t.intervalId&&window.clearTimeout(t.intervalId),t.intervalId=null,this.isSeeking=!1,this._endType="seek",o=t.seekBefore,c=(c.currentTime||0).toString(),t.sc++,t.sat+=36e5<i?0:i,r.sc++,r.sat+=36e5<i?0:i,this.updateSeekPt(!0),!this.closeSeekLog&&a&&this.onOneOperator({costTime:i,operaType:"seek",stateBefore:o,stateAfter:c,endType:e}))}},{key:"setPt",value:function(){var e=this.playlogs;this.startStep=1,!e.pt&&this.player.currentTime&&(this.isSeeking=!0),e.pt||(e.pt=(0,n.curTimestamp)(),(0,n.log)("setPt","init pt :".concat(e.pt,", document.visibilityState:").concat(document.visibilityState)))}},{key:"setVt",value:function(){var e=this.playlogs;1===this.startStep&&(e.vt||(e.vt=(0,n.curTimestamp)(),(0,n.log)("setVt: first frame inited","vt-pt:".concat(e.vt-e.pt," vt-nt:").concat(e.vt-e.nt))),this.startStep=2)}},{key:"setBr",value:function(e){var t=this.playlogs;0<t.vt&&(0===t.br&&(t.fbrt=e||""),t.br++)}},{key:"url",get:function(){var e=this.player;return e&&e.config?e.config.url:""}},{key:"vid",get:function(){var e=this.player;return e&&e.config?e.config.vid:""}},{key:"bc",get:function(){return this.playlogs.bc}},{key:"bu_acu_t",get:function(){return this.playlogs.bu_acu_t}},{key:"pt",get:function(){return this.playlogs.pt||(0,n.curTimestamp)()}},{key:"vt",get:function(){var e=this.playlogs,t=e.vt;return 0<e.pt?t:0}},{key:"fvt",get:function(){var e=(t=this.playlogs).vt,t=t.pt;return 0<e&&0<t?parseInt(e-t,10):0}},{key:"dash_pst",get:function(){return this.playlogs.dash_pst}},{key:"dash_wst",get:function(){return this.playlogs.dash_wst}},{key:"dash_wrt",get:function(){return this.playlogs.dash_wrt}},{key:"dash_ift",get:function(){return this.playlogs.dash_ift}},{key:"dash_cst",get:function(){return this.playlogs.dash_cst}},{key:"dash_spt",get:function(){return this.playlogs.dash_spt}},{key:"vd",get:function(){var e=this.player;return e.duration&&"number"==typeof e.duration&&0<e.duration?parseInt(1e3*e.duration,10):e.config.duration&&"number"==typeof e.config.duration?parseInt(1e3*e.config.duration,10):0}},{key:"cur_play_pos",get:function(){return parseInt(1e3*this.player.currentTime,10)}},{key:"volume",get:function(){return this.player.volume}},{key:"buffer_time",get:function(){var e=0;try{var t=this.player.getBufferedRange();e=t[1]-t[0]}catch(t){e=0}return e}},{key:"player_created_t",get:function(){return this._playerCreatedTime}},{key:"playbackRate",get:function(){return this.player.playbackRate}},{key:"mute",get:function(){return this.player.muted?0:1}},{key:"videoWidth",get:function(){var e=this.player;return e&&e.video?e.video.videoWidth:0}},{key:"videoHeight",get:function(){var e=this.player;return e&&e.video?e.video.videoHeight:0}},{key:"preload",get:function(){var e=this.player;return!(!e||!e.video)&&e.video.preload}},{key:"initial_url",get:function(){var e=this.player.currentSrc;return-1<e.indexOf("blob:")&&this.urlLog.initial_url?this.urlLog.initial_url:(0,n.checkVideoSrcIsEmpty)(e)||(0,n.checkIsEmptySrc)(this.player,this.line_app_id)?"":e}},{key:"initial_host",get:function(){var e=this.player.currentSrc;return-1<e.indexOf("blob:")&&this.urlLog.initial_host?this.urlLog.initial_host:(0,n.getHostFromUrl)((0,n.checkVideoSrcIsEmpty)(e)||(0,n.checkIsEmptySrc)(this.player,this.line_app_id)?"":e)}},{key:"curHeaders",get:function(){var e=this.player,t=this.task;return e&&e.__dash__&&e.__dash__.curReqVideoSegInfo?(e=e.__dash__.curReqVideoSegInfo.headers||{},(0,n.transformHeader)(e)):t?t.headers:{}}},{key:"curStatus",get:function(){var e=this.task,t=this.vtype,n=this.netLog;return-1<t.indexOf("MP4")?e?e.status:0:n.status}},{key:"play_type",get:function(){return 0}},{key:"resolution",get:function(){return this.resLogs.df}},{key:"sessionId",get:function(){return this._sessionId}},{key:"finish",get:function(){return this.isEnded?1:0}},{key:"end_type",get:function(){return this._endType}},{key:"videoReadyState",get:function(){var e=this.player;return e&&e.video?e.video.readyState:-1}},{key:"videoSeeking",get:function(){var e=this.player;return e&&e.video&&e.video.seeking?1:0}},{key:"videoPaused",get:function(){var e=this.player;return e&&e.video&&e.video.paused?1:0}},{key:"retry_count",get:function(){return this._retryCount}},{key:"switchResolutionCount",get:function(){return this.resLogs.switch_count}},{key:"isError",get:function(){return(0,n.hasClass)(this.player.root,"xgpplayer-is-error")}},{key:"isPlaying",get:function(){return(0,n.hasClass)(this.player.root,"xgplayer-playing")}},{key:"isStop",get:function(){return(0,n.hasClass)(this.player.root,"xgplayer-ended")||(0,n.hasClass)(this.player.root,"xgplayer-nostart")}},{key:"isPause",get:function(){return(0,n.hasClass)(this.player.root,"xgplayer-pause")}},{key:"isLoading",get:function(){return(0,n.hasClass)(this.player.root,"xgplayer-isloading")}},{key:"es",get:function(){return this.isPlaying?"playing":"beforePlay"}},{key:"lt",get:function(){var e=0;return 0===this.vt&&((0,n.log)("lt init",this.playlogs.lt),e=(0,n.curTimestamp)()),e}},{key:"lpt",get:function(){return this.lt?this.lt-this.pt:0}},{key:"playback_state",get:function(){return this.isError?3:this.isStop?0:this.isPause?2:this.isLoading?4:1}},{key:"is_start_play_automatically",get:function(){return this.isAutoplay+""}},{key:"vtype",get:function(){return this.__vtype||(this.player.dash||this.player.config&&this.player.config.dashOpts&&this.player.config.dashOpts.dynamic_video?"DASH":"DASH"!==this._options.vtype&&this._options.vtype||"MP4")},set:function(e){this.__vtype=e}},{key:"watingCost",get:function(){var e;return!(0<this.inWaitingStart)||36e5<(e=(0,n.nowTime)()-this.inWaitingStart)?0:e}},{key:"videoNetworkState",get:function(){var e=this.player;return e&&e.video?e.video.networkState:-1}},{key:"eagleid",get:function(){var e=this.player;return e&&e.__dash__&&e.__dash__.curReqVideoSegInfo?(e.__dash__.curReqVideoSegInfo.headers||{}).eagleid:""}},{key:"initial_type",get:function(){var e=this.player.config||{};return e&&e.vodLogOpts&&void 0!==e.vodLogOpts.currentDashType?parseInt(e.vodLogOpts.currentDashType,10):-1}},{key:"dynamicType",get:function(){var e=this.player;return this.__dt||(e&&e.__dash__&&e.__dash__.dash&&e.__dash__.dash.mpd?(this.__dt=e.__dash__.dash.mpd.dashType,this.__dt):"")}},{key:"updateCurBuffer",value:function(){var e=this.player,t=e.buffered,n=e.currentTime,i={buf_s_pos:0,buf_e_pos:0,buf_include:0},r=[];if(!t||t.length<1)return i;for(var o=-1,a=-1,s=t.length-1;-1<s;s--){var c=parseInt(1e3*t.start(s),10),u=parseInt(1e3*t.end(s),10);r.push({start:c,end:u}),c<n&&n<u?(i.buf_include=1,i.buf_s_pos=c,i.buf_e_pos=u):n<c&&(o<0||c-n<o)?(o=c-n,a=s):u<n&&(o<0||n-u<o)&&(o=n-u,a=s)}1!==i.buf_include&&-1<a&&(i.buf_s_pos=parseInt(1e3*t.start(a),10),i.buf_e_pos=parseInt(1e3*t.end(a),10)),i.buf_diff=parseInt(1e3*t.end(t.length-1)-1e3*n),this.buffers.allBuffer=r,this.buffers.curBuffer=i}},{key:"checkInBuffer",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=this.player.buffered;if(!n)return!1;e=parseInt(1e3*e,10);for(var i=0;i<n.length;i++){var r=parseInt(1e3*n.start(i),10)+t,o=parseInt(1e3*n.end(i),10)+t;if(r<e&&e<o)return!0}return!1}},{key:"updateVideoSize",value:function(){var e,t=this._options,r=this.player,i=this.resLogs,o=0,c=0;r.__dash__&&r.__dash__.dash&&r.__dash__.dash.mpd.mediaList?(e=(e=r.__dash__.dash.mpd.mediaList.video)[e.selectedIdx],(0,n.log)("updateVideoSize》》videoItem",e),c=e?e.bitrate||e.bandwidth:0,o=e?e.size:0):(o=t.videoSize||r.config.videoSize||0,c=t.bitrate||r.config.bitrate||0),(0,n.log)("updateVideoSize","bitrate:".concat(c,", vs:").concat(o)),o&&(i.vs=o,i.vis=parseInt(o/r.duration,10),i.bitrate=c||i.vis)}},{key:"updateVds",value:function(){var e=this.resLogs,t=this.playlogs,r=this.player;if(0!==e.vis){t=parseInt((0,n.computeWatchDur)(t.played)/1e3,10);for(var i=r.buffered,o=0,c=0;c<i.length;c++)o+=parseInt(i.end(c)-i.start(c),10);(0,n.log)("updateVds","pdur:".concat(t," bdur:").concat(o," \n         lbuf:").concat(e.lbuf," lplayed:").concat(e.lplayed," bitrate: ").concat(e.bitrate," vis:").concat(e.vis," vs:").concat(e.vs)),e.vps+=parseInt((t-e.lplayed)*e.vis,10),e.vds+=parseInt((o-e.lbuf)*e.vis,10),e.lplayed=t,e.lbuf=o}else(0,n.log)("updateVds","vis:".concat(e.vis))}}],[{key:"TEA_ID",get:function(){return C},set:function(e){O="__tea_cache_tokens_".concat(C=e)}},{key:"AB_SDK_VERSION",get:function(){return T},set:function(e){T="Array"===(0,n.typeOf)(e)?e.join(","):e}},{key:"Collector",set:function(e){V=e}}]),e}(),e.default=t,i.exports=e.default},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.findPerformanceInfo=function(i){var e={};try{var t=function(){i=i.replace(/^http:|^https:/,"");for(var t=o||[],n=function(n){if(t[n].name.replace(/^http:|^https:/,"")===i)return["domainLookupEnd","domainLookupStart","startTime","requestStart","responseEnd","responseStart","connectStart","connectEnd","fetchStart"].map((function(r){e[r]=Math.round(t[n][r])})),e.url=t[n].name,e.duration=Math.round(t[n].duration),e.domainDuration=e.domainLookupEnd-e.domainLookupStart,e.connectDuration=e.connectEnd-e.connectStart,"break"},r=t.length-1;0<=r&&"break"!==n(r);r--);return{v:e}}();if("object"===r(t))return t.v}catch(t){return e}};var o=[];"undefined"!=typeof window&&function(){try{new window.PerformanceObserver((function(e,t){var n=e.getEntriesByType("resource");30<o.length&&o.splice(0,o.length-30);for(var i=0;i<n.length;i++)o.push(n[i])})).observe({entryTypes:["resource"]})}catch(e){console.warn("PerformanceObserver not support",e)}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){try{return"undefined"!=typeof localStorage&&"setItem"in window.localStorage&&!!window.localStorage.setItem}catch(e){return!1}}()&&!function(){var e="_localstorage_support_test";try{return window.localStorage.setItem(e,!0),window.localStorage.removeItem(e),!1}catch(e){return!0}}()?window.localStorage:{},r="__xgplayerlogkey";t.default={set:function(e){try{var t=this.get();t.push(e),i.setItem(r,JSON.stringify(t))}catch(e){}},get:function(){try{var e=i.getItem(r);return e?JSON.parse(e):[]}catch(e){return[]}},remove:function(){try{i.removeItem(r)}catch(e){}},clear:function(){try{i.clear()}catch(e){}}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=[{key:"QQBrowser",reg:/(qqbrowser)\/([\d.]+)/},{key:"QIHU360EE",reg:/qihu 360ee/},{key:"QIHU360SE",reg:/qihu 360se/},{key:"2345Explorer",reg:/(2345explorer)\/([\d.]+)/},{key:"Sogou",reg:/(metasr)/},{key:"Wexin",reg:/(micromessenger)\/([\d.]+)/},{key:"Openlanguage",reg:/(openlanguage)\/([\d.]+)/},{key:"NewsArticle",reg:/(newsarticle)\/([\d.]+)/},{key:"VideoArticle",reg:/(videoarticle)\/([\d.]+)/},{key:"Hotsoon",reg:/(live_stream)_([\d.]+)/},{key:"Aweme",reg:/(aweme)_([\d.]+)/},{key:"Lark",reg:/(lark)\/([\d.]+)/},{key:"PlayStation",reg:/(playstation)/},{key:"BingPreview",reg:/(bingpreview)\/([\d.]+)/},{key:"Baiduspider",reg:/(baiduspider-render)\/([\d.]+)/},{key:"YandexBot",reg:/(yandexbot)\/([\d.]+)/},{key:"Chrome",reg:/(chrome)\/([\d.]+)/},{key:"Safari",reg:/(version)\/([\d.]+)\s*(safari)/}],r=[{key:"Trident",reg:/(rv:)([\d.]+)/},{key:"Trident",reg:/(msie)\s*([\d.]+)/}],p=["Baiduspider","YandexBot"],i="undefined"!=typeof navigator&&function(e){var t,n=(n=0<arguments.length&&void 0!==e?e:"").toLocaleLowerCase(),i=(e=/(iphone)/.test(n)||/(ipad)/.test(n),/(android)/.test(n)),o=/(windows phone)/.test(n),c=(e={isIOS:e,isAndroid:i,isMobile:o=e||i||o,isPC:!o,isPad:/(ipad)/.test(n)},i=function(){var e=document.createElement("video"),t={isSupport:!1,mime:""};return"function"==typeof e.canPlayType?["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"].map((function(n){"probably"===e.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(t.isSupport=!0,t.mime+="||".concat(n))})):e=null,t}(),e.isSupportMP4=i.isSupport,e.mime=i.mime,""),a=0,s=u;/trident/.test(n)&&(s=r);for(var l=0;l<s.length;l++)if(t=s[l].reg.exec(n)){c=s[l].key,a=2<t.length?t[2]:"";break}return c?(e["is".concat(c)]=!0,e.name=c,e.appVersion=a):function(){var e=navigator.mimeTypes;if(e){for(var t=0;t<e.length;t++){if(e[t].type&&-1<e[t].type.indexOf("360"))return!0;if(e[t].type&&-1<e[t].type.indexOf("application/vnd.chromium.remoting-viewer"))return!0;if(e[t].description&&-1<e[t].description.indexOf("360"))return!0}return!1}}()&&(e.name="360EE"),e.name&&"Trident"!==e.name&&/(trident)/.exec(n)&&(e.name=e.name?"".concat(e.name,"_Trident"):"Trident"),e.isSpider=function(e,t){var n=!1;return p.map((function(t){t===e&&(n=!0)})),n=!!/(\+http|; http|\(http):\/\/([\w.]+\/?)\S*/.test(t)||n}(e.name),e}(navigator.userAgent);t.default=i,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(0);function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var i={range:"0-1048576",timer:6e4,timeout:15e3};t.default=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.keys(i).map((function(e){void 0!==t[e]&&null!==t[e]||(t[e]=i[e])})),this.options=t,this._headers={},this.intervalId=null,this.ishangUp=!1,this._data={contentLength:0,statusText:"",status:-1,speed:0,costTime:0,connectTime:0,contentType:""},this.url=[]}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"setData",value:function(e,t){var n,i=this;Object.keys(e).map((function(t){"headers"!==t&&(i._data[t]=e[t])})),e.headers&&0<Object.keys(e.headers).length&&(this._headers=(0,r.transformHeader)(e.headers),e.headers["content-type"]&&(this._data.contentType=e.headers["content-type"]),(n=(e.headers["content-range"]||"").split("/"))&&1<n.length&&(this._data.contentLength=parseInt(n[1])))}},{key:"contentLength",get:function(){return this._data.length||0}},{key:"trigger",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"start",i=this.options;this.url=e,!this.url||"start"!==n&&(this.ishangUp||this.intervalId)?(0,r.log)("task>>cant`t trigger url",this.ishangUp,this.intervalId):((0,r.log)("task>>trigger url ",e),this.ishangUp=!0,this.intervalId&&this.clear(),this.intervalId=setTimeout((function(){t.clear()}),"start"===n?500:i.timer),(0,r.getXhr)(this.url,{range:"start"===n?"0-1024":i.range,timeout:i.timeout}).then((function(e){(0,r.log)("getXhr>>check result ",e),t.setData(e||{}),t.ishangUp=!1})).catch((function(e){(0,r.log)("getXhr>>error ",e),t.ishangUp=!1,t._data.status=-1})))}},{key:"url",get:function(){return this.options.url},set:function(e){e&&(this.options.url=e)}},{key:"serverIp",get:function(){return this._headers.x_response_sinfo||""}},{key:"headers",get:function(){return this._headers||{}}},{key:"status",get:function(){return this._data.status||-1}},{key:"speed",get:function(){return this._data.speed}},{key:"clear",value:function(){clearTimeout(this.intervalId),this.intervalId=null}}]),e}(),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="0.10.14",e.exports=t.default}])},e.exports=r()},1941:function(e,t,n){},1942:function(e,t,n){},1943:function(e,t){e.exports='<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.25163 12.8332C8.75789 12.8332 9.16829 13.2436 9.16829 13.7499V19.7082C9.16829 19.9613 8.96309 20.1665 8.70996 20.1665H7.79329C7.54016 20.1665 7.33496 19.9613 7.33496 19.7082V14.6665H2.29329C2.04016 14.6665 1.83496 14.4613 1.83496 14.2082V13.2915C1.83496 13.0384 2.04016 12.8332 2.29329 12.8332H8.25163ZM14.21 1.83319C14.4631 1.83319 14.6683 2.03839 14.6683 2.29152V7.33319H19.71C19.9631 7.33319 20.1683 7.53839 20.1683 7.79152V8.70819C20.1683 8.96132 19.9631 9.16652 19.71 9.16652H13.7516C13.2454 9.16652 12.835 8.75612 12.835 8.24986V2.29152C12.835 2.03839 13.0402 1.83319 13.2933 1.83319H14.21Z" fill="white"/>\n</svg>\n'},1944:function(e,t){e.exports='<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M1.8333 3.83334C1.8333 2.72877 2.72873 1.83334 3.8333 1.83334H6.41663C6.9229 1.83334 7.3333 2.24375 7.3333 2.75001C7.3333 3.25627 6.9229 3.66668 6.41663 3.66668H3.66663V6.41668C3.66663 6.92294 3.25623 7.33334 2.74997 7.33334C2.24371 7.33334 1.8333 6.92294 1.8333 6.41668V3.83334ZM20.1667 18.1666C20.1667 19.2712 19.2713 20.1666 18.1667 20.1666H15.5834C15.0771 20.1666 14.6667 19.7562 14.6667 19.2499C14.6667 18.7437 15.0771 18.3333 15.5834 18.3333H18.3334V15.5833C18.3334 15.077 18.7438 14.6666 19.25 14.6666C19.7563 14.6666 20.1667 15.077 20.1667 15.5833V18.1666ZM3.83301 20.1666C2.72844 20.1666 1.83301 19.2712 1.83301 18.1666V15.5833C1.83301 15.077 2.24341 14.6666 2.74967 14.6666C3.25594 14.6666 3.66634 15.077 3.66634 15.5833V18.3333H6.41634C6.9226 18.3333 7.33301 18.7437 7.33301 19.2499C7.33301 19.7562 6.9226 20.1666 6.41634 20.1666H3.83301ZM18.1667 1.83325C19.2713 1.83325 20.1667 2.72868 20.1667 3.83325V6.41659C20.1667 6.92285 19.7563 7.33325 19.25 7.33325C18.7438 7.33325 18.3334 6.92285 18.3334 6.41659V3.66659H15.5834C15.0771 3.66659 14.6667 3.25618 14.6667 2.74992C14.6667 2.24366 15.0771 1.83325 15.5834 1.83325H18.1667Z" fill="white"/>\n</svg>\n'},1945:function(e,t){e.exports='<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8.2 2C8.64183 2 9 2.41041 9 2.91667V19.4167C9 19.9229 8.64183 20.3333 8.2 20.3333H5.8C5.35817 20.3333 5 19.9229 5 19.4167V2.91667C5 2.41041 5.35817 2 5.8 2H8.2Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M16.2 2C16.6418 2 17 2.41041 17 2.91667V19.4167C17 19.9229 16.6418 20.3333 16.2 20.3333H13.8C13.3582 20.3333 13 19.9229 13 19.4167V2.91667C13 2.41041 13.3582 2 13.8 2H16.2Z" fill="white"/>\n</svg>\n'},1946:function(e,t){e.exports='<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M5.07935 1.9805L17.9127 10.2291C18.474 10.5899 18.474 11.4103 17.9127 11.7711L5.07935 20.0197C4.4693 20.4118 3.66699 19.9739 3.66699 19.2488V2.75145C3.66699 2.02633 4.4693 1.58838 5.07935 1.9805Z" fill="white"/>\n</svg>\n'},1947:function(e,t){e.exports='<svg width="96" height="96" viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M48 31.9668C42.7607 31.9668 38.1082 34.4796 35.182 38.367L42.1667 38.3668C42.9767 38.3668 43.6333 39.0235 43.6333 39.8335V42.1668C43.6333 42.9768 42.9767 43.6335 42.1667 43.6335H29.3333V43.6337L29.3223 43.6333L29.1482 43.6269L29.1482 43.6271L29.1371 43.6263C27.7743 43.5257 26.7 42.3885 26.7 41.0002V28.1668C26.7 27.3568 27.3567 26.7002 28.1667 26.7002H30.5C31.31 26.7002 31.9667 27.3568 31.9667 28.1668V28.1669L31.9655 33.9789C35.8693 29.5181 41.6057 26.7002 48 26.7002C59.7637 26.7002 69.3 36.2365 69.3 48.0002C69.3 59.7638 59.7637 69.3002 48 69.3002C38.0401 69.3002 29.6775 62.4643 27.3466 53.2288C27.2348 52.7861 27.574 52.3676 28.0215 52.3676L32.045 52.3677C32.3562 52.3677 32.625 52.5725 32.7171 52.8623C34.7762 59.3406 40.8405 64.0335 48 64.0335C56.855 64.0335 64.0333 56.8551 64.0333 48.0002C64.0333 39.1452 56.855 31.9668 48 31.9668Z" fill="white" stroke="white" stroke-width="0.6"/>\n</svg>\n'},1948:function(e,t){e.exports='<svg width="96" height="96" viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M48 4C72.3005 4 92 23.6995 92 48C92 72.3005 72.3005 92 48 92C23.6995 92 4 72.3005 4 48C4 23.6995 23.6995 4 48 4Z" fill="black" fill-opacity="0.4"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M42 28C43.1046 28 44 28.8954 44 30V66C44 67.1046 43.1046 68 42 68H36C34.8954 68 34 67.1046 34 66V30C34 28.8954 34.8954 28 36 28H42Z" fill="white"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M60 28C61.1046 28 62 28.8954 62 30V66C62 67.1046 61.1046 68 60 68H54C52.8954 68 52 67.1046 52 66V30C52 28.8954 52.8954 28 54 28H60Z" fill="white"/>\n</svg>\n'},1949:function(e,t){e.exports='<svg width="96" height="96" viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M40.896 28.5117L66.496 45.1739C68.5013 46.4791 68.5013 49.5205 66.496 50.8257L40.896 67.488C38.7646 68.8752 36 67.2795 36 64.6621V31.3376C36 28.7202 38.7646 27.1245 40.896 28.5117Z" fill="white"/>\n</svg>\n'},1950:function(e,t){e.exports='<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M1.29617 1.02794C1.11742 1.20669 1.11742 1.49728 1.29617 1.67603L19.4453 19.8251C19.6245 20.0043 19.9146 20.0043 20.0938 19.8251L20.7419 19.177C20.9206 18.9978 20.9206 18.7077 20.7419 18.5289L18.6125 16.3995L17.3122 15.0988L16.0078 13.7948L14.6933 12.4799L12.375 10.1621L10.5417 8.32873L8.69596 6.48257L7.38834 5.1754L2.5928 0.379859C2.41359 0.200651 2.12346 0.200651 1.94471 0.379859L1.29617 1.02794ZM4.58369 7.78479C4.58369 7.54966 4.67398 7.32508 4.83257 7.15641L6.41702 8.74087V13.7637L10.542 16.9368V12.8659L12.3754 14.6992V18.3333C12.3754 18.8398 11.9651 19.25 11.4587 19.25H10.8537C10.6516 19.25 10.4549 19.1831 10.295 19.0598L4.94165 14.9417C4.71569 14.7684 4.58369 14.4998 4.58369 14.2152V7.78479ZM10.5417 6.38409V5.06318L9.79503 5.63747L8.4874 4.32984L10.2946 2.94018C10.4546 2.81689 10.6512 2.74997 10.8533 2.74997H11.4583C11.9648 2.74997 12.375 3.16018 12.375 3.66664V8.21743L10.5417 6.38409ZM16.6942 12.5367L15.1249 10.9674C15.1166 10.2918 14.8655 9.6749 14.4544 9.20053C14.2751 8.99336 14.2536 8.67528 14.447 8.48186L15.0827 7.84661C15.2528 7.67611 15.5282 7.66511 15.6941 7.83974C16.4774 8.66199 16.9582 9.77482 16.9582 10.9999C16.9582 11.5389 16.8652 12.0564 16.6942 12.5367ZM19.4321 15.2748L18.0856 13.9283C18.5366 13.0505 18.7914 12.055 18.7914 11C18.7914 9.28763 18.1208 7.73204 17.0277 6.58163C16.8476 6.39142 16.8389 6.09029 17.0241 5.90513L17.6694 5.25979C17.8436 5.08563 18.125 5.07921 18.2969 5.25613C19.7379 6.74158 20.6247 8.76696 20.6247 11C20.6247 12.5652 20.1888 14.0282 19.4321 15.2748ZM1.83333 7.33326C1.58033 7.33326 1.375 7.53859 1.375 7.79159V14.2083C1.375 14.4613 1.58033 14.6666 1.83333 14.6666H2.75C3.003 14.6666 3.20833 14.4613 3.20833 14.2083V7.79159C3.20833 7.53859 3.003 7.33326 2.75 7.33326H1.83333Z" fill="white"/>\n</svg>\n'},1951:function(e,t){e.exports='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.89549 4.29745L15.8541 11.3411C16.3334 11.6492 16.3334 12.3497 15.8541 12.6578L4.89549 19.7014C4.37456 20.0362 3.68945 19.6623 3.68945 19.0431V4.95578C3.68945 4.33659 4.37456 3.96262 4.89549 4.29745Z" fill="white"/>\n<rect x="17.9453" y="4.17578" width="2.36553" height="15.6551" rx="0.5" fill="white"/>\n</svg>\n'},1952:function(e,t){e.exports='<svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M10.8537 2.75H11.4587C11.9421 2.75 12.3379 3.12376 12.3728 3.59823L12.3754 3.66667V18.3333C12.3754 18.8168 12.0016 19.2125 11.5271 19.2475L11.4587 19.25H10.8537C10.6804 19.25 10.5112 19.2008 10.3657 19.1091L10.295 19.0598L4.94165 14.9417C4.73623 14.7842 4.60847 14.5479 4.58694 14.2924L4.58369 14.2152V7.78479C4.58369 7.52604 4.69278 7.28055 4.88238 7.10789L4.94165 7.05833L10.295 2.94021C10.4321 2.83453 10.5961 2.77027 10.7675 2.75407L10.8537 2.75H11.4587H10.8537ZM10.5413 5.0632L6.41631 8.23624V13.7637L10.5413 16.9368V5.0632ZM18.2975 5.25616C19.7385 6.74161 20.6253 8.76699 20.6253 11C20.6253 13.2394 19.733 15.2707 18.2842 16.7576C18.1128 16.9336 17.8313 16.9272 17.6576 16.753L17.0123 16.1081C16.8267 15.9225 16.8358 15.62 17.0169 15.4302C18.1169 14.2784 18.792 12.7183 18.792 11C18.792 9.28766 18.1215 7.73207 17.0283 6.58166C16.8482 6.39145 16.8395 6.09032 17.0247 5.90516L17.67 5.25982C17.8442 5.08566 18.1256 5.07924 18.2975 5.25616ZM2.75 7.33329C3.003 7.33329 3.20833 7.53862 3.20833 7.79162V14.2083C3.20833 14.4613 3.003 14.6666 2.75 14.6666H1.83333C1.58033 14.6666 1.375 14.4613 1.375 14.2083V7.79162C1.375 7.53862 1.58033 7.33329 1.83333 7.33329H2.75ZM15.6944 7.83977C16.4772 8.66202 16.958 9.77485 16.958 11C16.958 12.232 16.4717 13.3508 15.6806 14.1744C15.5143 14.3476 15.2402 14.3362 15.0701 14.1666L14.4354 13.5314C14.241 13.337 14.2635 13.0176 14.4445 12.8104C14.868 12.3269 15.1247 11.6934 15.1247 11C15.1247 10.312 14.8717 9.68273 14.4541 9.20056C14.2749 8.99339 14.2534 8.67531 14.4468 8.48189L15.0825 7.84664C15.253 7.67614 15.528 7.66514 15.6944 7.83977Z" fill="white"/>\n</svg>\n'},1953:function(e,t,n){"use strict";n(1724)},1954:function(e,t,n){},1955:function(e,t,n){},2108:function(e,t,n){"use strict";n(17),n(15),n(11),n(7),n(14);var r=n(0),o=(n(22),n(5)),c=n(6),l=(n(43),n(85),n(32)),h=(n(47),n(177),n(1286)),f=n.n(h),d=n(23),v=n(1),y=n(1938),m=n.n(y),_=d.c,w=_?"//vod.bytedanceapi.com":"//staging-openapi-boe.byted.org";function k(e){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"dash",e.prev=1,e.next=4,Object(v.e)({url:"/user_api/v1/video/play_token",query:{vid:t,format_type:n}});case 4:return r=e.sent,e.abrupt("return",r.data);case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function O(){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.e)({url:"/user_api/v1/video/key_token"});case 2:return t=e.sent,e.abrupt("return",t.data||"");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(regeneratorRuntime.mark((function e(t,n){var r,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t,n);case 2:if(r=e.sent,"hls"!==n){e.next=11;break}return e.next=6,O();case 6:return o=e.sent,c=_?"https://kds.bytedance.com":"https://b-kds.bytedance.com",e.abrupt("return",{EncryptHlsPlugin:{playDomain:w,keyDomain:c,playAuthToken:r,keyToken:o}});case 11:return e.next=13,m.a.url(r,w);case 13:if(!(l=e.sent).Error){e.next=16;break}throw new Error("视频地址获取失败");case 16:return e.abrupt("return",{dashOpts:l});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(1939);var V=n(1940),E=n.n(V),P=(n(1941),n(24),n(25),n(60),n(12)),I=n(13),L=n(31),j=n(33),R=n(20);n(1942);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(R.a)(e);if(t){var o=Object(R.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(j.a)(this,n)}}var D=h.Plugin.POSITIONS,M=function(e){Object(L.a)(n,e);var t=A(n);function n(e){var r;return Object(P.a)(this,n),(r=t.call(this,e)).handleRateChange=function(){r.playbackrateText?(r.playbackrateText.innerText="".concat(r.player.playbackRate,"倍"),r.root.classList.add("active"),r.timer&&clearTimeout(r.timer),r.timer=window.setTimeout((function(){r.timer=void 0,r.root.classList.remove("active")}),3e3)):console.warn("span element does not exist")},r}return Object(I.a)(n,[{key:"afterCreate",value:function(){this.playbackrateText=this.find("span.playbackrate-text"),this.on(h.Events.RATE_CHANGE,this.handleRateChange)}},{key:"render",value:function(){return'<div class="xgplayer-playbackrate-toast">正在用 <span class="playbackrate-text">1倍</span> 速率播放</div>'}},{key:"destroy",value:function(){this.off(h.Events.RATE_CHANGE,this.handleRateChange)}}],[{key:"pluginName",get:function(){return"DefinitionToast"}},{key:"defaultConfig",get:function(){return{position:D.ROOT}}}]),n}(h.Plugin),B=n(1943),N=n.n(B),H=n(1944),F=n.n(H),U=n(1945),$=n.n(U),W=n(1946),z=n.n(W),G=n(1947),K=n.n(G),Y=n(1948),Z=n.n(Y),X=n(1949),J=n.n(X),Q=n(1950),ee=n.n(Q),te=n(1951),ne=n.n(te),ie=n(1952),re=n.n(ie),oe=n(103),se=n(46),ae=[480,720,1080],ce={space:{code:32,action:"playPause",disable:!1},up:{code:38,action:"upVolume",disable:!1},down:{code:40,action:"downVolume",disable:!1},left:{code:37,action:"customSeekBack",disable:!1},right:{code:39,action:"customSeek",disable:!1},esc:{code:27,action:"exitFullscreen",disable:!1}},ue={autoplay:!1,cssFullscreen:!1,playbackRate:[.75,1,1.25,1.5,2],defaultDefinition:"720p",icons:{play:z.a,pause:$.a,fullscreen:F.a,exitFullscreen:N.a,startPlay:J.a,startPause:Z.a,replay:K.a,volumeSmall:re.a,volumeLarge:re.a,volumeMuted:ee.a,playNext:ne.a},definitionText:{"480p":"标清 480P","720p":"高清 720P","1080p":"超清 1080P"}};function le(e,t){return he.apply(this,arguments)}function he(){return(he=Object(o.a)(regeneratorRuntime.mark((function e(t,r){var o,c,l,h,d,v,y,m,_,w,k,C,O,x,T,V,P,I,L,j,R,A=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=A.length>2&&void 0!==A[2]&&A[2],c=A.length>3&&void 0!==A[3]?A[3]:"hls",_=[],w=void 0,k=[E.a,M],e.next=7,S(t,c);case 7:if(C=e.sent,_=(null===(h=null===(l=C.dashOpts)||void 0===l?void 0:l.Data)||void 0===h?void 0:h.PlayInfoList)||[],O=null===(d=_[_.length-1])||void 0===d?void 0:d.MainPlayUrl,x=(null===(y=null===(v=C.dashOpts)||void 0===v?void 0:v.Data)||void 0===y?void 0:y.CoverUrl)||"","hls"!==c){e.next=23;break}return e.next=14,n.e(326).then(n.t.bind(null,4507,7));case 14:if(T=e.sent,null==(V=T.default)?void 0:V.isSupported(window&&(null===(m=null===navigator||void 0===navigator?void 0:navigator.userAgent)||void 0===m?void 0:m.toLocaleLowerCase()))){e.next=21;break}throw P="不支持的浏览器 ".concat(window&&(null===navigator||void 0===navigator?void 0:navigator.userAgent)),(I=new Error(P)).code=-1,I;case 21:k.push(V),w=C.EncryptHlsPlugin;case 23:return L=Object.assign(ue,{url:O,volume:o?1:.5,poster:x,plugins:k,EncryptHlsPlugin:w,vodLogOpts:{line_app_id:se.c,line_user_id:Object(oe.getMainUUid)(),vtype:null==c?void 0:c.toLocaleUpperCase(),tag:"normal",codec_type:"h264"}},r),fe(j=new f.a(L)),"hls"===c&&(R=_.filter((function(e){return ae.includes(e.Height)})).map((function(e){return{name:e.Definition,url:e.MainPlayUrl}})),j.emit("resourceReady",R)),e.abrupt("return",j);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e){e.on("ABR_AUTO_DESC_CHANGE",(function(t,n,r){!function(e,t,n,r){if(!e)return;var o=e.root.querySelector(".xgplayer-definition [url='__auto__']");o&&(o.innerHTML=t+"".concat(n?"(".concat(n,")"):"")+"".concat(r||""))}(e,t,n,r)})),e.on(h.Events.DEFINITION_CHANGE,(function(t){var n=t.to.showText;!function(e,t){if("自动"===t)return;var n=e.root.querySelector(".xg-options-icon.xgplayer-definition.show .icon-text"),r=t.split(" "),text=Object(l.a)(r,2)[1];n&&text&&(n.innerHTML=text)}(e,void 0===n?"":n),pe(e.getPlugin("definition"))})),e.on(h.Events.RATE_CHANGE,(function(){de(e),pe(e.getPlugin("playbackrate"))})),e.on(h.Events.PLAYING,(function(){de(e)})),e.on(h.Events.SHORTCUT,(function(data){e.fullscreen&&("customSeek"===data.action?e.seek(e.currentTime+10):"customSeekBack"===data.action&&e.seek(e.currentTime-10))})),e.on("get_play_info",(function(t){var n;(null===(n=null==t?void 0:t.Data)||void 0===n?void 0:n.CoverUrl)&&e.plugins.poster.update(t.Data.CoverUrl)}))}function de(e){if(e){var t=e.playbackRate,n=e.controls.right.querySelector(".xg-options-icon.xgplayer-playbackrate.show .icon-text");1===t&&(n.innerHTML="倍速")}}function pe(e){var t,n=e.find(".xg-options-list");null===(t=null==n?void 0:n.classList)||void 0===t||t.replace("active","hide"),e.isActive=!1}function ve(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function ge(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ve(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):ve(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var ye=Object(c.b)({props:{vid:{type:String,default:""},videoType:{type:String,default:"hls"},videoConfig:{type:Object,default:function(){return{}}},videoLoading:{type:Boolean,default:!1}},emits:["handleEvent"],setup:function(e,t){var n=t.emit,r=function(){var e=Object(c.n)(!0),t=Object(c.n)("uninitialize"),n=Object(c.n)(),r=Object(c.c)(),l=null==r?void 0:r.proxy.$device.isMobile,h=Object(c.n)(),f=Object(c.a)((function(){var e;return"".concat((null===(e=h.value)||void 0===e?void 0:e.offsetWidth)/16*9)})),d=Object(c.n)("");return{initVideoPlay:function(){var c=Object(o.a)(regeneratorRuntime.mark((function o(c,h,v){var y;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if("initializing"!==t.value||c!==d.value){o.next=2;break}return o.abrupt("return");case 2:return d.value=c,t.value="initializing",o.prev=4,o.next=7,le(c,ge({id:"mse",width:"100%",height:"".concat(f.value,"px"),keyboard:l?void 0:{keyCodeMap:ce}},v),l,h);case 7:if(y=o.sent){o.next=13;break}return t.value="uninitialize",o.abrupt("return");case 13:t.value="initialized";case 14:n.value=y,o.next=22;break;case 17:o.prev=17,o.t0=o.catch(4),-1===(null===o.t0||void 0===o.t0?void 0:o.t0.code)&&(e.value=!1),console.warn("video player init err:",o.t0),null==r||r.proxy.$error("视频加载失败");case 22:case"end":return o.stop()}}),o,null,[[4,17]])})));return function(e,t,n){return c.apply(this,arguments)}}(),mseRef:h,isVideoSupported:e,playerInstance:n,playerState:t}}(),l=r.initVideoPlay,h=r.mseRef,f=r.isVideoSupported,d=r.playerInstance,v=r.playerState,y=function(){d.value&&(d.value.destroy(),d.value=null)};return Object(c.y)([function(){return e.vid},h,function(){return e.videoLoading}],Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.vid&&h.value&&!e.videoLoading){t.next=2;break}return t.abrupt("return");case 2:return y(),t.next=5,l(e.vid,e.videoType,e.videoConfig);case 5:n("handleEvent",d.value);case 6:case"end":return t.stop()}}),t)}))),{immediate:!0}),Object(c.k)((function(){y()})),{mseRef:h,isVideoSupported:f,playerState:v}}}),me=(n(1953),n(29)),component=Object(me.a)(ye,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video"},[n("div",{ref:"mseRef",attrs:{id:"mse"}},[e.isVideoSupported?e._e():n("div",{staticClass:"not-supported"},[n("span",[e._v("视频播放器暂不支持您的浏览器，")]),e._v(" "),n("span",[e._v("请在掘金 App 或者 PC 端观看视频")])]),e._v(" "),"initialized"===e.playerState?e._t("content"):e._e()],2)])}),[],!1,null,"67659797",null);t.a=component.exports},2197:function(e,t,n){"use strict";n(1936)},2198:function(e,t,n){"use strict";n(1937)},2206:function(e,t,n){"use strict";n(1954)},2207:function(e,t,n){"use strict";n(1955)},2210:function(e,t,n){"use strict";var r,o=n(12),c=n(13);n(11),n(7),n(54),n(279);function l(e){if(e<0||!e)return"0秒";if(0<=e&&e<60)return e+"秒";var t=Math.floor(e/60),s=Math.floor(e%60);return s>0?t+"分"+s+"秒":t+"分"}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=new Map,c=[];return e.forEach((function(e){var h,f,d,v="";e.sectionId===(null===(h=t.reading_progress)||void 0===h?void 0:h.last_section_id)&&(v="上次学到"),(null===(f=e.reading_progress)||void 0===f?void 0:f.reading_progress)>=100&&(v="已学完"),2===(null===(d=e.reading_progress)||void 0===d?void 0:d.has_update)&&(v="有更新");var y="";y=t.price>0?e.isFree?"试学章节":"付费章节":"免费章节",c.push(e.sectionId),o.set(e.sectionId,{sectionId:e.sectionId,title:e.title||"小册章节标题",readCount:e.readCount,commentCount:e.commentCount,readDurationStr:l(e.readDuration),status:v,isFinished:e.isFinished,freeStatus:y,canEdit:n===r.author,vid:e.vid,hasVideo:!!e.vid})})),{sectionMap:o,sectionOrder:c}}function f(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o&&o.id?(null===(e=o.roles)||void 0===e?void 0:e.isAdmin)?r.admin:o.id===(null===(t=n.user)||void 0===t?void 0:t.user_id)?r.author:n.is_buy?r.buyer:r.common:r.unlogin}!function(e){e.unlogin="unlogin",e.admin="admin",e.author="author",e.buyer="buyer",e.common="common"}(r||(r={}));var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.a)(this,e),this.bookId="",this.userRole=r.common,this.sectionMap=new Map,this.sectionOrder=[],this.bookId=n.booklet_id,this.userRole=f(n,c);var l=h(t,n,this.userRole);this.sectionMap=l.sectionMap,this.sectionOrder=l.sectionOrder}return Object(c.a)(e,[{key:"getSectionList",value:function(){var e=this,t=[];return this.sectionOrder.forEach((function(n){var r;t.push((r=e.sectionMap.get(n),JSON.parse(JSON.stringify(r))))})),t}},{key:"setSectionFree",value:function(){}}]),e}();t.a=d},2211:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,y=data.attrs,m=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"20",viewBox:"0 0 16 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m)},_),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.5822 5.29608C12.5184 2.81844 10.4914 0.833008 8.00036 0.833008C5.46911 0.833008 3.41703 2.88301 3.41703 5.41634V6.66634C1.80591 6.66761 0.500583 7.97418 0.500855 9.5853L0.501795 15.167C0.502167 17.3759 2.29292 19.1663 4.50179 19.1663H11.5004C13.7095 19.1663 15.5004 17.3755 15.5004 15.1663V9.58301C15.5004 7.97218 14.1945 6.66634 12.5837 6.66634V5.41634L12.5822 5.29608ZM8.00006 11.0002C9.10472 11.0002 10.0001 11.8968 10.0001 13.0002C10.0001 14.1035 9.10472 15.0002 8.00006 15.0002C6.89539 15.0002 6.00006 14.1035 6.00006 13.0002C6.00006 11.8968 6.89539 11.0002 8.00006 11.0002ZM5.08581 5.3163C5.13867 3.75039 6.42352 2.5 8.00079 2.5C9.61162 2.5 10.9175 3.80417 10.9175 5.41667V6.66667H5.08412V5.41667L5.08581 5.3163Z",fill:"#C2C8D1"}})]))}}},2416:function(e,t,n){"use strict";n(17),n(15),n(11),n(7),n(14);var r=n(0),o=n(3),c=n(86),l=(n(37),n(1209)),h=n(1712),f=n(1763),d={components:{VipBorrowButton:h.a,BookBuyButton:f.a,BookThumb:l.a},props:["bookInfo"],computed:{isWapSection:function(){return"bookWapSection"===this.$route.name}},methods:{buyBook:function(){this.$emit("buy")}}},v=(n(2197),n(29)),y=Object(v.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"buying-guide-wrap"},[n("div",{staticClass:"buying-guide",class:{"buying-guide--m":e.isWapSection}},[n("div",{staticClass:"buying-inner"},[n("div",{staticClass:"poster"},[n("BookThumb",{staticClass:"thumb",attrs:{book:e.bookInfo}})],1),e._v(" "),n("div",{staticClass:"title"},[e._v("此章节为付费章节")]),e._v(" "),n("div",{staticClass:"desc"},[e._v("现在购买立即解锁全部内容")]),e._v(" "),n("div",{staticClass:"button-container"},[n("BookBuyButton",{attrs:{book:e.bookInfo,"is-float-discount-label":!0},on:{buyBook:e.buyBook}}),e._v(" "),n("VipBorrowButton",{attrs:{"book-info":e.bookInfo,"event-page":"lock"}})],1)])])])}),[],!1,null,"7e23cee3",null).exports,m={components:{BookThumb:l.a},props:["bookInfo"],computed:{isWapSection:function(){return"bookWapSection"===this.$route.name}}},_=(n(2198),Object(v.a)(m,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"section-writing-wrap"},[t("div",{staticClass:"section-writing",class:{"section-writing--m":this.isWapSection}},[t("div",{staticClass:"writing-inner"},[t("div",{staticClass:"poster"},[t("BookThumb",{staticClass:"thumb",attrs:{book:this.bookInfo}})],1),this._v(" "),t("div",{staticClass:"title"},[this._v("此章节正在写作中")])])])])}),[],!1,null,"217a0058",null).exports),w=(n(47),n(124),n(22),n(5)),k=(n(85),n(988)),C=n(48),O=n(107),x=n(1087),content=n(884),S=n(6),T=n(1286),V=n(2108),E=n(1634);function P(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function I(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var L=Object(S.b)({components:{CommentListBox:k.a,MarkdownViewer:x.default,VipBorrowButton:h.a,BookBuyButton:f.a,Video:V.a},props:["bookInfo","sectionInfo","free"],setup:function(e,t){var n=t.root,r=Object(S.v)();return Object(E.d)(r.value.params.sectionId),I({},function(e,t){var n={miniscreen:Object(S.a)((function(){return t.$device.isMobile}))?null:{width:320,height:180,isShowIcon:!0,isScrollSwitch:!0}};return{isLegacyBookletVid:Object(S.a)((function(){var t;return"6844733803647205384"===(null===(t=e.bookInfo)||void 0===t?void 0:t.id)})),handleVideoEvent:function(e){console.log("%c 🌭 player","color:#f5ce50",e);var n=t.$getBean("eventBus");e.on(T.Events.FULLSCREEN_CHANGE,(function(e){n.emit(n.eventType.VIDEO_FULLSCREEN_CHANGE,e)}))},videoConfig:n}}(e,n))},data:function(){return{htmlContent:"",canFetch:!0,isVideoSupported:!0,commentList:[],query:{entryId:"",startTime:"",pageSize:20},readingPostion:0,videoWrapperHeight:0,mobilePlayerStyle:{}}},computed:I({subject:function(){return{item_id:this.section.section_id,item_type:13,user_id:this.section.user_id,comment_count:this.section.comment_count}},curSectionId:function(){return this.$route.params.sectionId},isLastSectionId:function(){var e,t,n=(null===(t=null===(e=this.bookInfo.base_info)||void 0===e?void 0:e.section_ids)||void 0===t?void 0:t.split("|"))||[];return(n.length>0?n[n.length-1]:0)===this.curSectionId},isMobileBrowser:function(){return this.$device.isMobile},section:function(){return Object.assign({},this.sectionInfo,{user:this.bookInfo.user})},showBuyButton:function(){return!this.free&&this.sectionInfo.isFree&&this.sectionInfo&&this.isMobileBrowser&&!this.bookInfo.isBorrowing}},Object(c.mapGetters)({user:o.USER,login:o.LOGIN})),watch:{$route:function(){this.fetch()},sectionInfo:{handler:function(e){var t=this;return Object(w.a)(regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null==e?void 0:e.id)){n.next=18;break}if(t.htmlContent=e.html,t.bookletId=e.bookId,t.sectionId=e.id,t.readingPostion=Number((null===(r=e.reading_progress)||void 0===r?void 0:r.reading_position)||"0"),t.initPosition(),!(null===(o=t.user)||void 0===o?void 0:o.id)){n.next=18;break}return n.prev=7,n.next=10,Object(content.a)({booklet_id:t.bookletId,section_id:t.sectionId,reading_position:t.readingPostion});case 10:if(0===(c=n.sent).err_no||"0"===c.err_no){n.next=13;break}throw c;case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(7),console.warn("阅读记录上报失败",n.t0);case 18:t.setupVideoPlayer();case 19:case"end":return n.stop()}}),n,null,[[7,15]])})))()},immediate:!0}},mounted:function(){var e=this;return Object(w.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.isMounted=!0,e.initRecordReadPos(),e._handleCurrentReadRecord=function(){var t=e.getCurrentReadPos();e.doRecord(t)},Object(C.o)(e._handleCurrentReadRecord),window.addEventListener("beforeunload",e._handleCurrentReadRecord),e.setupVideoPlayer();case 6:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){if(this.removeScrollListener){this.removeScrollListener();var e=this.getCurrentReadPos();this.doRecord(e)}Object(C.q)(this._handleCurrentReadRecord),window.removeEventListener("beforeunload",this._handleCurrentReadRecord)},methods:{setupVideoPlayer:function(){var e;(null===(e=this.sectionInfo)||void 0===e?void 0:e.vid)&&(this.removeVideoTag(),this.$refs.sectionPage&&this.calculateHeight())},calculateHeight:function(){var e=this.$refs.sectionPage,t=e.offsetLeft,n=e.offsetTop,r=e.offsetWidth;this.mobilePlayerStyle={left:"".concat(t,"px"),top:"".concat(n,"px"),width:"".concat(r,"px"),height:"".concat(r/16*9,"px")},this.videoWrapperHeight=r/16*9},initPosition:function(){this.$route.hash?this.initHashToElement(this.$route.hash):0<this.readingPostion&&this.readingPostion<=100&&this.scrollToContentPos(this.readingPostion)},removeVideoTag:function(){var content=this.sectionInfo.html||"";content=content.replace(/^<div\s+data-source="https:\/\/video-cdn\.juejin\.im.+?<\/div>/,""),this.htmlContent=content},buyBook:function(){this.$emit("buy")},syncCommentNum:function(e){var t=e.count,n=e.type;"add"===n?this.section.comment_count+=1:"sub"===n?this.section.comment_count-=t?t+1:1:this.section.comment_count=t,this.section.comment_count=this.section.comment_count>0?this.section.comment_count:0},initHashToElement:function(e){var t=this;this.$nextTick((function(){var n=e;if(n&&"#mark-star"!==n)if("#comment"===n)t.$refs.commentForm.focus(),Object(C.r)(t.$refs.commentForm);else{var r=n.substring(1),o=t.$refs.content.$el.querySelectorAll('[data-id="'.concat(r,'"]'))[0],c=t.isMobileBrowser?35:70,l=o.offsetTop;window.scrollTo(0,l-c)}}))},scrollToContentPos:function(e){var t=this;this.$nextTick((function(){var n,r;if(!(null===(r=null===(n=t.$refs)||void 0===n?void 0:n.content)||void 0===r?void 0:r.$el))return 0;var o=Object(C.h)().height,c=t.$refs.content.$el.getBoundingClientRect().height;window.scrollTo(0,c*e/100-o+122)}))},initRecordReadPos:function(){var e,t,n=this;(null===(e=this.user)||void 0===e?void 0:e.id)&&"0"!==(null===(t=this.user)||void 0===t?void 0:t.id)&&(this.removeScrollListener=Object(C.m)(window,Object(O.a)((function(){n.scrollRecord(n.getCurrentReadPos())}),500)))},getCurrentReadPos:function(){var e,t;if(!(null===(t=null===(e=this.$refs)||void 0===e?void 0:e.content)||void 0===t?void 0:t.$el))return 0;var n=Object(C.h)().height,r=this.$refs.content.$el.getBoundingClientRect(),o=r.y,c=r.height;if(0===c)return 0;var l=Math.round((n-o)/c*100);return l<0?0:l>100?100:l},scrollRecord:function(e){Math.abs(e-this.readingPostion)>5&&this.doRecord(e)},doRecord:function(e){var t=this;return Object(w.a)(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null===(r=t.user)||void 0===r?void 0:r.id){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,n.next=5,Object(content.a)({booklet_id:t.bookletId,section_id:t.sectionId,reading_position:e});case 5:if(0===(o=n.sent).err_no||"0"===o.err_no){n.next=8;break}throw o;case 8:t.readingPostion=e,n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),console.warn("阅读记录上报失败",n.t0);case 14:case"end":return n.stop()}}),n,null,[[2,11]])})))()}}});n(2206);function j(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function R(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var A={components:{SectionBuyingGuide:y,SectionWriting:_,SectionContent:Object(v.a)(L,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"section-content"},[n("div",{ref:"sectionPage",staticClass:"section-page book-section-view"},[n("div",{staticClass:"video-wrapper",style:e.isMobileBrowser?{height:e.videoWrapperHeight+"px"}:{}},[n("Video",{staticClass:"video",style:e.isMobileBrowser?e.mobilePlayerStyle:{},attrs:{"video-type":e.isLegacyBookletVid?"mp4":"hls",vid:e.sectionInfo.vid||"","video-config":e.videoConfig},on:{handleEvent:e.handleVideoEvent}})],1),e._v(" "),e.sectionInfo.markdown||e.htmlContent?n("markdown-viewer",{ref:"content",attrs:{markdown:e.sectionInfo.markdown,html:e.htmlContent}}):e._e(),e._v(" "),e.showBuyButton?n("div",{staticClass:"bottom-mobile-buy"},[n("BookBuyButton",{attrs:{book:e.bookInfo,"is-float-discount-label":!0},on:{buyBook:e.buyBook}}),e._v(" "),n("VipBorrowButton",{staticClass:"borrow",attrs:{"event-page":"free","book-info":e.bookInfo}})],1):e._e(),e._v(" "),e.sectionInfo.markdown||e.htmlContent?n("section",{ref:"commentBox",staticClass:"book-comments"},[n("div",{staticClass:"box-title"},[e._v("留言")]),e._v(" "),n("CommentListBox",{attrs:{subject:e.subject,"jj-helper-item-id":e.bookletId,"jj-helper-item-type":12,expanded:!0,sticky:!1},on:{syncCommentNum:e.syncCommentNum}})],1):e._e()],1)])}),[],!1,null,"ea27b86c",null).exports},props:["bookInfo","sectionInfo","free"],data:function(){return{}},computed:R(R({},Object(c.mapGetters)({logined:o.LOGINED,user:o.USER})),{},{isAuthor:function(){return!!this.user&&this.bookInfo.user.id===(null==this?void 0:this.user.id)},isAdmin:function(){var e,t;return!!this.user&&(null==this||null===(e=this.user)||void 0===e||null===(t=e.roles)||void 0===t?void 0:t.isAdmin)},sectionContentComponent:function(){var e,t,n,r,o=0===(null==this||null===(e=this.bookInfo)||void 0===e?void 0:e.price),c=1===(null==this||null===(t=this.sectionInfo)||void 0===t?void 0:t.is_free),l=(null==this||null===(n=this.bookInfo)||void 0===n?void 0:n.is_buy)||!1,h=0===(null==this||null===(r=this.sectionInfo)||void 0===r?void 0:r.status)||!1,f=(null==this?void 0:this.bookInfo.isBorrowing)||!1;return this.isAdmin||this.isAuthor?"section-content":c||o||l||f?h?"section-writing":"section-content":"section-buying-guide"}}),methods:{buyBook:function(){this.$coursePayment(this.user,this.bookInfo.id)}}},D=(n(2207),Object(v.a)(A,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"section-view"},[t(this.sectionContentComponent,{tag:"component",attrs:{"book-info":this.bookInfo,"section-info":this.sectionInfo,free:this.free},on:{buy:this.buyBook}})],1)}),[],!1,null,"3bdbd109",null));t.a=D.exports},2580:function(e,t,n){},2581:function(e,t,n){},2582:function(e,t,n){},2583:function(e,t,n){},3426:function(e,t,n){e.exports=n.p+"img/wx-qr.966373a.jpg"},3427:function(e,t,n){"use strict";n(2580)},3428:function(e,t,n){e.exports=n.p+"87ad47e35a060899d2234a8b5e7f378f.svg"},3429:function(e,t,n){e.exports=n.p+"54d8a353dfbeff543c8a513821df8caf.svg"},3430:function(e,t,n){"use strict";n(2581)},3431:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,y=data.attrs,m=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,d],style:[style,v],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m)},_),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.24984 3.33331H12.9165C13.3558 3.33331 13.7157 3.67326 13.7476 4.10445L13.7498 4.16665V15.8333C13.7498 16.2726 13.4099 16.6325 12.9787 16.6644L12.9165 16.6666H1.24984C0.81052 16.6666 0.450602 16.3267 0.41879 15.8955L0.416504 15.8333V4.16665C0.416504 3.72733 0.756453 3.36741 1.18764 3.3356L1.24984 3.33331H12.9165H1.24984ZM12.0831 4.99994H2.08309V14.9999H12.0831V4.99994ZM19.5831 6.47177V13.5281C19.5831 14.1758 18.8058 14.5759 18.1948 14.2427L14.9998 12.4999V7.49993L18.1948 5.75718C18.8058 5.42393 19.5831 5.82402 19.5831 6.47177ZM17.9164 7.94361L16.6664 8.44361V11.5563L17.9164 12.0563V7.94361ZM6.24976 6.66661V9.16661H3.74976V6.66661H6.24976Z",fill:"#8A919F"}})]))}}},3432:function(e,t,n){"use strict";n(2582)},3433:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,y=data.attrs,m=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,d],style:[style,v],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"},m)},_),h.concat([n("path",{attrs:{fill:"#BABABA","fill-rule":"evenodd",d:"M11 0h9v9h-9V0zM0 0h9v9H0V0zm0 11h9v9H0v-9zm14-5h3V3h-3v3zM3 6h3V3H3v3zm0 11v-3h3v3H3zm8-6h3v3h-3v-3zm3 3h3v3h-3v-3zm3-3h3v3h-3v-3zm-6 6h3v3h-3v-3zm6 0h3v3h-3v-3z"}})]))}}},3434:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,l=t._v,data=t.data,h=t.children,f=void 0===h?[]:h,d=data.class,v=data.staticClass,style=data.style,y=data.staticStyle,m=data.attrs,_=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[d,v],style:[style,y],attrs:Object.assign({width:"40px",height:"40px",viewBox:"0 0 40 40",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:sketch":"http://www.bohemiancoding.com/sketch/ns"},_)},w),f.concat([n("title",[l("juejin_logo copy")]),n("desc",[l("Created with Sketch.")]),n("defs"),n("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd","sketch:type":"MSPage"}},[n("g",{attrs:{id:"juejin_logo-copy","sketch:type":"MSArtboardGroup",fill:"#007FFF"}},[n("path",{attrs:{d:"M23.2819984,7.7030545 L19.8538714,5 L16.2721918,7.8241757 L16.0865388,7.97375707 L19.8538714,10.977629 L23.6327866,7.97375707 L23.2819984,7.7030545 Z M36.2727433,18.185664 L19.8439434,31.1400064 L3.42507143,18.1936064 L1,20.1414735 L19.8439434,35 L38.6981457,20.1335312 L36.2727433,18.185664 Z M19.8439434,19.2367048 L10.903809,12.1875172 L8.47840667,14.1353844 L19.8439434,23.0970293 L31.2190771,14.127442 L28.7936748,12.1795749 L19.8439434,19.2367048 Z",id:"Fill-1-Copy-2","sketch:type":"MSShapeGroup"}})])])]))}}},3435:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,l=t._v,data=t.data,h=t.children,f=void 0===h?[]:h,d=data.class,v=data.staticClass,style=data.style,y=data.staticStyle,m=data.attrs,_=void 0===m?{}:m,w=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[d,v],style:[style,y],attrs:Object.assign({width:"16px",height:"13px",viewBox:"0 0 16 13",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},_)},w),f.concat([n("title",[l("Group 4")]),n("desc",[l("Created with Sketch.")]),n("defs"),n("g",{attrs:{id:"全屏",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[n("g",{attrs:{id:"2_fullscreen_close-sidebar",transform:"translate(-19.000000, -25.000000)",fill:"#979797"}},[n("g",{attrs:{id:"Group-4",transform:"translate(19.000000, 25.000000)"}},[n("rect",{attrs:{id:"Rectangle-3",x:"0",y:"5.5",width:"16",height:"1.5"}}),n("rect",{attrs:{id:"Rectangle-3",x:"0",y:"0",width:"16",height:"1.5"}}),n("rect",{attrs:{id:"Rectangle-3-Copy",x:"0",y:"11",width:"16",height:"1.5"}})])])])]))}}},3436:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,y=data.attrs,m=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,d],style:[style,v],attrs:Object.assign({width:"137",height:"28",viewBox:"0 0 137 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m)},_),h.concat([n("path",{attrs:{d:"M17.5865 17.3955H17.5902L28.5163 8.77432L25.5528 6.39453L17.5902 12.6808H17.5865L17.5828 12.6845L9.62018 6.40201L6.6604 8.78181L17.5828 17.3992L17.5865 17.3955Z",fill:"#1E80FF"}}),n("path",{attrs:{d:"M17.5872 6.77268L21.823 3.40505L17.5872 0.00748237L17.5835 0L13.3552 3.39757L17.5835 6.76894L17.5872 6.77268Z",fill:"#1E80FF"}}),n("path",{attrs:{d:"M17.5865 23.2854L17.5828 23.2891L2.95977 11.7531L0 14.1291L0.284376 14.3574L17.5865 28L28.5238 19.3752L35.1768 14.1254L32.2133 11.7456L17.5865 23.2854Z",fill:"#1E80FF"}}),n("path",{attrs:{d:"M133.287 18.4172H131.162L129.923 23.0758H126.825V16.7559H135.364V14.7315H126.825V11.1469H133.074V9.12256H118.454V11.1469H124.703V14.7315H116.164V16.7559H124.703V23.0758H121.601L120.363 18.4172H118.237L119.487 23.0758H115.543V25.1001H135.985V23.0758H132.041L133.287 18.4172Z",fill:"#323232"}}),n("path",{attrs:{d:"M130.522 3.3151L130.2 2.94092H121.321L120.999 3.3151C119.298 5.2467 117.378 6.97337 115.278 8.46009V10.9522C116.206 10.3573 120.183 7.72295 122.327 4.98768H129.235C131.375 7.72295 135.356 10.3573 136.284 10.9522V8.46009C134.169 6.97586 132.235 5.2491 130.522 3.3151Z",fill:"#323232"}}),n("path",{attrs:{d:"M94.9037 8.53127H96.494V6.50323H94.9037V2.88867H92.9056V6.50323H91.3303V8.53127H92.9094V14.7914L91.3303 15.3377V17.5828L92.9094 17.0365V20.7371C92.8414 22.2391 92.5579 23.7236 92.0674 25.145H94.1629C94.6112 23.7165 94.863 22.2335 94.9112 20.7371V16.3442L96.5053 15.7904V13.5229L94.9112 14.0767L94.9037 8.53127Z",fill:"#323232"}}),n("path",{attrs:{d:"M99.1875 2.88867H97.6608V20.7446C97.6727 22.2359 97.4852 23.7221 97.1033 25.1637H99.1875C99.5206 23.7145 99.6851 22.2316 99.6776 20.7446V9.77357H112.321V2.88867H99.1875ZM110.308 7.75303H99.6851V4.91671H110.304L110.308 7.75303Z",fill:"#323232"}}),n("path",{attrs:{d:"M110.305 23.405H107.566V17.6838H110.021H110.702H111.91V11.8166H110.021V15.9363H107.566V11.1431H105.676V15.9363H103.27V11.8166H101.381V17.6838H102.298H103.27H105.676V23.405H102.967V19.173H101.074V25.1524H102.286H102.967H110.305H110.683H112.195V19.173H110.305V23.405Z",fill:"#323232"}}),n("path",{attrs:{d:"M53.0024 2.91846V4.83801L56.5908 6.11397L53.0024 7.38618V9.30573L59.2887 7.07187L65.5749 9.30573V7.38618L61.9865 6.11397L65.5749 4.83801V2.91846L59.2887 5.15232L53.0024 2.91846Z",fill:"#323232"}}),n("path",{attrs:{d:"M79.9508 11.697H88.5944V9.47813H79.9508V2.80273H77.5299V9.47813H68.8863V11.697H77.5299V22.9823H67.76V25.2012H89.7207V22.9823H79.9508V11.697Z",fill:"#323232"}}),n("path",{attrs:{d:"M48.9461 5.39227L52.2913 5.18272V3.24072L43.6813 3.78328V5.72529L47.0265 5.512V8.50545H43.5803V10.4213H47.0265V25.164H48.9461V10.4213H52.3923V8.50545H48.9461V5.39227Z",fill:"#323232"}}),n("path",{attrs:{d:"M57.6539 9.01025H55.6595L55.1768 10.3648H52.9991V12.2357H54.5145L52.55 17.7662H53.8821V24.1534H55.7007V16.8457H58.6642V25.1787H60.5837V16.8457H63.4612V21.059C63.4534 22.1374 63.181 23.1974 62.6679 24.146H64.7147C65.1423 23.173 65.3627 22.1217 65.362 21.059V15.6932V15.1282H60.5837V13.2572H58.6642V15.1282H55.4836L56.5313 12.2245H65.594V10.3536H57.1749L57.6539 9.01025Z",fill:"#323232"}}),n("path",{attrs:{d:"M43.562 24.6246H45.4591L46.2786 11.4272H44.3815L43.562 24.6246Z",fill:"#323232"}}),n("path",{attrs:{d:"M49.7849 11.4272L50.3499 23.2963H52.247L51.682 11.4272H49.7849Z",fill:"#323232"}})]))}}},3437:function(e,t,n){"use strict";n(2583)},4553:function(e,t,n){"use strict";n.r(t);var r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("span",[this._v("关注公众号")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"qr-img"},[t("img",{attrs:{src:n(3426)}})])}],o=(n(17),n(15),n(11),n(14),n(7),n(124),n(47),n(37),n(0)),c=n(48),l=n(3),h=n(86),f=n(2416),d={props:["curIndex","list"]},v=(n(3427),n(29)),y=Object(v.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"book-progress"},[n("ul",e._l(e.list,(function(t,r){return n("li",{class:{active:r<=e.curIndex}})})),0)])}),[],!1,null,"6fbc2a2e",null).exports,m=n(1712),_={components:{VipBorrowButton:m.a},props:["free","curIndex","list","isBorrowing","bookInfo","foldPc"],data:function(){return{}},computed:{notLastPage:function(){return this.curIndex<this.list.length-1},notFirstPage:function(){return this.curIndex>0},bookId:function(){return this.$route.params.id}},methods:{buyBook:function(){this.$emit("buy")},prevPage:function(){this.$emit("prev")},nextPage:function(){this.$emit("next")}}},w=(n(3430),Object(v.a)(_,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"handle"},[e.list.length>0?r("div",{staticClass:"book-handle",class:{"fold-pc":e.foldPc}},[e.notFirstPage?r("div",{staticClass:"step-btn step-btn--prev",on:{click:e.prevPage}},[r("img",{attrs:{src:n(3428)}})]):e._e(),e._v(" "),e.notLastPage?r("div",{staticClass:"step-btn step-btn--next",on:{click:e.nextPage}},[r("img",{attrs:{src:n(3429)}})]):e._e()]):e._e(),e._v(" "),e.notLastPage||e.free||e.bookInfo.isBorrowing?e._e():r("div",{staticClass:"buy-container"},[r("button",{staticClass:"buy",on:{click:e.buyBook}},[e._v("购买")]),e._v(" "),r("VipBorrowButton",{staticClass:"borrow",attrs:{"book-info":e.bookInfo,"event-page":"free"}})],1)])}),[],!1,null,"7f935304",null).exports),k=n(1710),C=n(2210),O=n(2211),x=n.n(O),S=n(3431),T=n.n(S),V=n(174);function E(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function P(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var I={components:{LockIcon:x.a,CameraIcon:T.a,BAlert:V.Alert},props:["free","admin","info","list","sectionId","isVideoCourse"],data:function(){return{sectionList:[],userRole:"",initShowDitoryVisible:!0}},computed:P(P({},Object(h.mapGetters)({user:l.USER})),{},{tryRead:function(){var e=this.info,t=e.price,n=e.isBuy;return!(0===t)&&this.admin||!n},bookId:function(){return this.$route.params.id}}),watch:{sectionId:{handler:function(){var e=this;this.$nextTick((function(){var t,n;(null===(t=e.$refs)||void 0===t?void 0:t.activeRef)&&Array.isArray(null===(n=e.$refs)||void 0===n?void 0:n.activeRef)&&e.bookDirectoryVisible(e.$refs.activeRef[0])}))},immediate:!0}},created:function(){this.initData()},methods:{initData:function(){var e=new C.a(this.list,this.info,this.user);this.userRole=e.userRole,this.sectionList=e.getSectionList()},setFreeSection:function(e,t){this.$emit("setFreeSection",e,t)},routeSectionId:function(e){var t=e.sectionId;t!==this.$route.params.sectionId&&this.$emit("linkSection",t)},bookDirectoryVisible:function(e){e&&!this.$device.isMobile&&this.sectionId&&(null==e||e.scrollIntoView({behavior:this.initShowDitoryVisible?"auto":"smooth",block:"nearest",inline:"center"}),this.initShowDitoryVisible=!1)}}},L=(n(3432),Object(v.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"book-directory-comp beautify-scrollbar-warp",class:{"is-admin":"admin"===e.userRole,"is-author":"author"===e.userRole,"is-buyer":"buyer"===e.userRole}},[n("div",{staticStyle:{padding:"0 15px"}},["admin"===e.userRole?n("b-alert",{attrs:{"show-icon":""}},[e._v("\n      当前是管理员状态,以下所有章节都可点击阅读\n    ")]):"author"===e.userRole?n("b-alert",{attrs:{"show-icon":""}},[e._v("\n      您是小册作者,以下所有章节都可点击阅读\n    ")]):e._e()],1),e._v(" "),n("div",{staticClass:"section-list"},e._l(e.sectionList,(function(t,r){return n("a",{key:t.sectionId,ref:e.sectionId===t.sectionId?"activeRef":"",refInFor:!0,staticClass:"section",class:{unfinished:!t.isFinished,"route-active":e.sectionId===t.sectionId},on:{click:function(n){return e.routeSectionId(t)}}},[n("div",{staticClass:"left"},[n("div",{staticClass:"index"},[e._v(e._s(r+1))])]),e._v(" "),n("div",{staticClass:"center"},[n("div",{staticClass:"main-line"},[n("div",{staticClass:"title"},[e.isVideoCourse||t.hasVideo?n("CameraIcon",{staticClass:"icon-camera"}):e._e(),e._v(" "),n("span",{staticClass:"title-text"},[e._v(e._s(t.title))])],1),e._v(" "),n("div",{staticClass:"right"},[t.isFinished?"buyer"===e.userRole||e.info.isBorrowing?e._e():["付费章节"===t.freeStatus?n("div",{staticClass:"lock"},[n("LockIcon")],1):e._e(),e._v(" "),"试学章节"===t.freeStatus?n("div",{staticClass:"label"},[e._v("\n                试学\n              ")]):e._e()]:n("div",{staticClass:"lock"},[n("LockIcon")],1)],2)]),e._v(" "),n("div",{staticClass:"sub-line"},[t.isFinished?["已学完"===t.status?n("div",{staticClass:"label",staticStyle:{color:"#8a919f",background:"#e4e6eb"}},[e._v("\n              已学完\n            ")]):"上次学到"===t.status?n("div",{staticClass:"label",staticStyle:{color:"#1e80ff",background:"#eaf2ff"}},[e._v("\n              上次学到\n            ")]):"有更新"===t.status?n("div",{staticClass:"label",staticStyle:{color:"#f53f3f",background:"#ffece8"}},[e._v("\n              有更新\n            ")]):e._e(),e._v(" "),n("span",[e._v("学习时长: "+e._s(t.readDurationStr))])]:n("div",[e._v("写作中...")])],2)])])})),0)])}),[],!1,null,"3cf5100c",null).exports),j=n(1893),R=n(1763),A=n(222),D=n(182),M=n(23),B=n(6),N=n(3433),H=n.n(N),F=n(3434),U=n.n(F),$=n(3435),W=n.n($),z=n(3436),G=n.n(z),K=n(8);function Y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function Z(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Y(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):Y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var X=Object(B.b)({components:{UserAuth:j.a,BookDirectory:L,BookDirection:w,BookProgress:y,WechatQuickLogin:k.a,SectionPrev:f.a,SectionNext:f.a,AppOpenDrawer:function(){return Promise.all([n.e(12),n.e(13)]).then(n.bind(null,4652))},QrIcon:H.a,JuejinIcon:U.a,MenuIcon:W.a,JuejinLogoIcon:G.a,VipBorrowButton:m.a,BookBuyButton:R.a},provide:function(){var e=this;return{refreshBook:function(){e.fetch()}}},data:function(){return{sectionError:!1,sectionList:[],bookInfo:null,sectionInfo:{},direction:"next",view:"prev",unfoldM:!1,foldPc:!1,isViewNavOnTop:!1,isHeaderVisible:!0,needHide:!1,qrHide:!1,isPlayingFullscreen:!1}},computed:Z(Z({},Object(h.mapGetters)({user:l.USER,logined:l.LOGINED})),{},{isVideoCourse:function(){var e,t;return(null===(t=null===(e=this.bookInfo)||void 0===e?void 0:e.base_info)||void 0===t?void 0:t.course_type)===K.BookletCourseType.Video},isAuthor:function(){var e,t;return(null===(e=this.author)||void 0===e?void 0:e.id)===(null===(t=this.user)||void 0===t?void 0:t.id)},isAdmin:function(){var e,t=this.user||{};return(null===(e=null==t?void 0:t.roles)||void 0===e?void 0:e.isAdmin)||this.isAuthor},canPayment:function(){var e=this.bookInfo,t=e.price,n=e.isBuy;return t>0&&!n&&!this.isAuthor},directionClass:function(){return"prev"===this.direction?"transition--prev":"transition--next"},bookId:function(){return this.$route.params.id},sectionId:function(){return this.$route.params.sectionId},filterList:function(){var e=this;return this.isAdmin?this.sectionList.map((function(e){return e.sectionId})).filter((function(e){return e})):this.sectionList.map((function(t){return!(!(e.free||t.isFree||e.bookInfo.isBorrowing)||!t.isFinished)&&t.sectionId})).filter((function(e){return e}))},sectionIdList:function(){return this.bookInfo&&this.bookInfo.section||[]},curDirectoryIndex:function(){return this.sectionIdList&&this.sectionIdList.indexOf(this.sectionId)},curFreeDirectoryIndex:function(){var e=this.$route.params.sectionId;return this.filterList.indexOf(e)},free:function(){var e=this.bookInfo,t=e.price,n=e.isBuy,r=0===t;return r||n},author:function(){var e=this.bookInfo;return e&&e.user||{}},isMobile:function(){return this.$device.isMobile},scheme:function(){var e=this.$route.params||{},t=e.id,n=e.sectionId;return Object(D.e)("https://".concat(M.b,"/book/").concat(t,"/section/").concat(n),D.a.bookSectionDetail.gd_label)}}),watch:{$route:function(){this.bookInfo||this.fetch(),this.getSection(),this.loopComponent()}},shareInfo:function(){var e=this.bookInfo||{};return{title:"".concat(e.title," - ").concat(this.author.username," - 掘金小册"),noTemplate:!0,description:e.desc,thumb:e.img,url:this.$route.fullPath}},head:function(){var title=this.bookInfo&&this.bookInfo.title||"",e=this.author.username||"";return e=e?e+" - ":"",{titleTemplate:null,title:"".concat(title=title?title+" - ":"").concat(e,"掘金小册")}},methods:Z(Z({},Object(h.mapActions)({toogle_suspension:l.CHANGE_SUSPENSION_PANEL})),{},{buyBook:function(){return this.$coursePayment(this.user,this.bookId)},getXiaoce:function(){var e=this;return this.getXiaoceById().then((function(){e.isVideoCourse&&"bookSection"===e.$route.name&&e.$router.replace({name:"videoCourseSection",params:e.$route.params})}))},getXiaoceById:function(){var e=this;return Object(A.b)(this.bookId).then((function(t){var n=t.bookInfo,r=t.sections;e.bookInfo=n;e.sectionList=r.length?r.map((function(e){return Object.assign(e,{read:!1})})):[],Number(e.sectionId)?e.getSection():e.redirectSection()}))},getSection:function(){var e=this,t=this.sectionId;this.setSectionListIsRead(t),Object(A.e)(t).then((function(t){if(t||e.redirectSection(),!t.id)return Promise.reject(new Error);e.sectionInfo=Object.assign({},t,{html:t.content,markdown:t.markdown_show}),e.enterSectionTEA()})).catch((function(t){console.error(t),e.sectionInfo=null}))},setFreeSection:function(e,t){var n=this;this.$getBean("xiaoceBusiness").setFreeSection(e,t).then((function(){n.getListSection()})).catch((function(e){n.$alertMsg(e)}))},redirectSection:function(){var e=this.filterList&&this.filterList[0];e?(this.setSectionListIsRead(e),this.$router.replace({params:{id:this.bookId,sectionId:e}})):this.$router.push({name:this.isVideoCourse?"videoCourseInfo":"bookInfo",params:{id:this.bookId}})},loopComponent:function(){var e=this.view;this.view="prev"===e?"next":"prev"},prevPage:function(e){(e=e||this.filterList[this.curFreeDirectoryIndex-1])&&(this.setSectionListIsRead(e),this.sectionInfo={},this.direction="prev",this.$router.push({params:{sectionId:e},query:this.$route.query}))},nextPage:function(e){(e=e||this.filterList[this.curFreeDirectoryIndex+1])&&(this.setSectionListIsRead(e),this.direction="next",this.sectionInfo={},this.$router.push({params:{sectionId:e},query:this.$route.query}))},setSectionIsRead:function(e,t){var n=Object.assign(this.sectionList[e],{read:t});this.$set(this.sectionList,e,n)},setSectionListIsRead:function(e){var t=this,n=this.sectionIdList.indexOf(e);n>-1&&this.sectionIdList.forEach((function(e,r){r<n?t.setSectionIsRead(r,!0):t.setSectionIsRead(r,!1)}))},linkSection:function(e){var t=this.sectionIdList.indexOf(e);this.curDirectoryIndex>t?(this.direction="prev",this.prevPage(e)):(this.direction="next",this.nextPage(e)),this.unfoldM=!1},toggleSummary:function(){var e=this.unfoldM,t=this.foldPc;this.unfoldM=!e,this.foldPc=!t},toggleQrPopup:function(){var e=this.qrHide;this.qrHide=!e},hideQrPopup:function(){var e=this;this.qrHide=!0,window.localStorage.setItem("bookQrHideSection",!0);var t=this.$getBean("eventBus");t.onVmLife(this,t.eventType.ROOT_CONTAINER_CLICK,(function(){e.qrHide=!0}))},initQrHide:function(){var e=window.localStorage.getItem("bookQrHideSection");this.qrHide=e},initScroll:function(){var e=this;this.removeScrollDirectionChangeEventListener=Object(c.n)(window,(function(t,n){var r="up"===t,o=n<=50;e.needHide=o&&!r,e.isHeaderVisible=o||r}),50),this.removeScrollEventListener=Object(c.m)(window,(function(){window.pageYOffset<=50&&!e.isHeaderVisible?e.isHeaderVisible=!0:e.needHide&&(e.needHide=!1,e.isHeaderVisible=!1)}),50)},initPlayDirection:function(){var e=this;this.removeDirectionListener=Object(c.k)(document,"keyup",(function(t){t.ctrlKey||e.isPlayingFullscreen||(37===t.keyCode?e.prevPage():39===t.keyCode&&e.nextPage())}))},fetch:function(){this.getXiaoce()},reset:function(){this.toogle_suspension(!0)},handleVisibilityChange:function(){"visible"===document.visibilityState&&this.enterSectionTEA()},enterSectionTEA:function(){var e=this.sectionInfo;this.$TEA("book_section_detail_visit",{book_id:e.booklet_id,section_id:e.section_id,is_trial_section:e.is_free,is_purchased:this.bookInfo.isBuy?1:0,platform:this.isMobile?"h5":"web",rent_status:this.bookInfo.isBorrowing?"underway":this.bookInfo.borrowTimes>0?"finish":"never"})}}),mounted:function(){var e,t,n=this;this.initQrHide(),this.initScroll(),this.toogle_suspension(!1),this.fetch(),this.initPlayDirection();var r=this.$getBean("eventBus");r.onVmLife(this,r.eventType.VIDEO_FULLSCREEN_CHANGE,(function(e){n.isPlayingFullscreen=e})),Object(c.o)(this.handleVisibilityChange),this.isMobile&&!(null===(t=null===(e=this.$store.state)||void 0===e?void 0:e.header)||void 0===t?void 0:t.isPopupZlink)&&(window.open("https://z.juejin.cn/SMF5","_blank"),this.$store.commit("header/POPUP_ZLINK"))},beforeDestroy:function(){this.reset(),this.removeDirectionListener(),this.removeScrollEventListener(),this.removeScrollDirectionChangeEventListener(),Object(c.q)(this.handleVisibilityChange)}}),J=(n(3437),Object(v.a)(X,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.bookInfo?n("div",{staticClass:"book-read-view"},[n("section",{staticClass:"book-section",class:{"fold-pc":e.foldPc}},[n("div",{staticClass:"book-summary",class:{"unfold-mobile":e.unfoldM}},[n("div",{staticClass:"book-summary-masker",on:{click:e.toggleSummary}}),e._v(" "),n("div",{staticClass:"book-summary-inner"},[n("div",{staticClass:"book-summary__header"},[n("app-link",{staticClass:"logo",attrs:{to:e.$courseIndex()}},[n("JuejinLogoIcon",{staticStyle:{height:"100%",width:"auto"}})],1),e._v(" "),n("div",{staticClass:"label"},[e._v("课程")]),e._v(" "),1==e.bookInfo.isPublish?n("div",{staticClass:"audit"},[e._v("审核中")]):e._e()],1),e._v(" "),e.free||e.bookInfo.isBorrowing?e._e():n("div",{staticClass:"buy-sticky"},[n("BookBuyButton",{staticClass:"section-buy",attrs:{book:e.bookInfo,"is-float-discount-label":!0},on:{buyBook:e.buyBook}}),e._v(" "),n("VipBorrowButton",{attrs:{"event-page":"free","book-info":e.bookInfo},on:{fetch:e.getXiaoceById}})],1),e._v(" "),n("book-directory",{staticClass:"book-directory",class:{bought:!e.canPayment||e.bookInfo.isBorrowing},attrs:{free:e.free,admin:e.isAdmin,info:e.bookInfo,list:e.sectionList,"cur-index":e.curDirectoryIndex,sectionId:e.sectionId,"is-video-course":e.isVideoCourse},on:{setFreeSection:e.setFreeSection,linkSection:e.linkSection}}),e._v(" "),n("div",{staticClass:"book-summary__footer",on:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"qr-icon",on:{click:function(t){return t.stopPropagation(),e.toggleQrPopup(t)}}},[n("QrIcon")],1),e._v(" "),n("div",{staticClass:"qr-tips",class:{show:!e.qrHide}},[n("span",{staticClass:"ion-close",on:{click:e.hideQrPopup}}),e._v(" "),e._m(0),e._v(" "),e._m(1)])])],1)]),e._v(" "),n("div",{staticClass:"book-content"},[n("div",{staticClass:"book-content-inner"},[n("div",{staticClass:"book-content__header",class:{visible:e.isHeaderVisible}},[n("div",{staticClass:"switch",on:{click:e.toggleSummary}},[n("JuejinIcon",{staticStyle:{width:"30px",height:"30px","vertical-align":"middle"}})],1),e._v(" "),n("div",{staticClass:"menu",on:{click:e.toggleSummary}},[n("MenuIcon")],1),e._v(" "),n("div",{staticClass:"title"},[n("app-link",{attrs:{to:e.$bookInfo(e.bookId,e.isVideoCourse?"video":"book")}},[e._v("\n              "+e._s(e.bookInfo.title)+"\n            ")])],1),e._v(" "),n("user-auth",{staticClass:"user-auth"}),e._v(" "),e.foldPc?n("book-progress",{staticClass:"book-progress",attrs:{"cur-index":e.curDirectoryIndex,list:e.sectionIdList}}):e._e()],1),e._v(" "),n("div",{ref:"bookBody",staticClass:"book-body",class:[e.directionClass,{mobile:e.isMobile}]},[n("section-"+e.view,{tag:"component",staticClass:"book-section-content",attrs:{free:e.free,user:e.user,"book-info":e.bookInfo,"section-info":e.sectionInfo},on:{buy:e.buyBook}})],1),e._v(" "),n("book-direction",{directives:[{name:"show",rawName:"v-show",value:e.sectionInfo&&e.curFreeDirectoryIndex>-1,expression:"sectionInfo && curFreeDirectoryIndex > -1"}],staticClass:"book-direction",attrs:{free:e.free,"cur-index":e.curFreeDirectoryIndex,list:e.filterList,"is-borrowing":e.bookInfo.isBorrowing,"book-info":e.bookInfo,"fold-pc":e.foldPc},on:{buy:e.buyBook,prev:e.prevPage,next:e.nextPage}})],1)])]),e._v(" "),n("wechat-quick-login"),e._v(" "),e.$device.isMobile?n("AppOpenDrawer",{attrs:{zlink:"https://z.juejin.cn/SMF5",scheme:e.scheme}}):e._e()],1):e._e()}),r,!1,null,"451a2155",null));t.default=J.exports},850:function(e,t,n){"use strict";n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return d})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return _})),n.d(t,"d",(function(){return k})),n.d(t,"c",(function(){return C}));n(17),n(15),n(11),n(7),n(14),n(22);var r=n(0),o=n(5),c=n(1);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function f(e){var t=e.item_id,n=e.item_type,r=e.comment_content,o=e.comment_pics;return Object(c.e)({url:"/interact_api/v1/comment/publish",method:"post",body:{item_id:t,item_type:n,comment_content:r,comment_pics:o,client_type:2608}})}function d(e){var t=e.reply_to_comment_id,n=e.reply_to_reply_id,r=e.reply_to_user_id,o=e.item_id,l=e.item_type,h=e.reply_content,f=e.reply_pics;return Object(c.e)({url:"/interact_api/v1/reply/publish",method:"post",body:{reply_to_comment_id:t,reply_to_reply_id:n,reply_to_user_id:r,item_id:o,item_type:l,reply_content:h,reply_pics:f,client_type:2608}})}function v(e){var t=e.comment_id;return Object(c.e)({url:"/interact_api/v1/comment/delete",method:"post",body:{comment_id:String(t)}}).then((function(e){return e.data}))}function y(e){var t=e.comment_id,n=e.reply_id;return Object(c.e)({url:"/interact_api/v1/reply/delete",method:"post",body:{comment_id:t,reply_id:n}}).then((function(e){return e.data}))}function m(e){var t=e.comment_id,n=e.item_id,r=e.item_type,cursor=e.cursor,o=e.limit;return Object(c.e)({url:"/interact_api/v1/reply/list",method:"post",body:{comment_id:t,item_id:n,item_type:r,cursor:cursor,limit:o,client_type:2608}})}function _(e){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.e)({url:"/interact_api/v1/comment/hots",method:"post",body:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return Object(c.e)({url:"/interact_api/v1/comment/list",method:"post",body:h(h({},e),{},{client_type:2608})})}function C(e){return Object(c.e)({url:"/interact_api/v1/comment/detail",method:"post",body:{comment_id:e,clent_type:2608},showError:!1})}},851:function(e,t,n){"use strict";n(124);var r=n(68),o=n(266),c=n(269),l=n(6),h=n(18),f=Object(l.b)({components:{Lazy:c.a},props:{url:{type:String,default:""},default:{type:String,default:void 0},quality:{type:Number,default:void 0},width:{type:Number,default:0},height:{type:Number,default:0},shrink:{type:Boolean,default:!1},format:{type:String,default:void 0},alt:{type:String,default:"image"},blank:{type:String,default:""},hasMark:{type:Boolean,default:!1},lazy:{type:Boolean,default:!0}},computed:{defaultThumbUrl:function(){return this.default||r.h},thumbUrl:function(){var e,t,n=this.url||(this.blank?"":this.defaultThumbUrl);return this.shrink?Object(o.e)(n,this.width*r.l,this.height*r.l,{format:this.format,quality:this.quality,supportWebP:Object(h.n)(null===(e=this.$nuxt)||void 0===e?void 0:e.context)},this.hasMark?"zoomCrop":"noMark"):Object(o.b)(n,this.width*r.l,this.height*r.l,{format:this.format,quality:this.quality},this.hasMark?"zoomCrop":"noMark",{supportWebP:Object(h.n)(null===(t=this.$nuxt)||void 0===t?void 0:t.context)})}}}),d=n(29),component=Object(d.a)(f,(function(){var e=this.$createElement;return(this._self._c||e)("lazy",{attrs:{url:this.thumbUrl,alt:this.alt,lazy:this.lazy,"loading-style":{aspectRatio:""+this.width/this.height}}})}),[],!1,null,null,null);t.a=component.exports},854:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));n(7);var r=n(12),o=n(13),c=function(){function e(){Object(r.a)(this,e),this.busy=!1}return Object(o.a)(e,[{key:"do",value:function(e){var t=this;return this.busy?Promise.resolve():(this.busy=!0,Promise.resolve("function"==typeof e?e():e).then((function(e){return t.busy=!1,e})).catch((function(e){return t.busy=!1,Promise.reject(e)})))}}]),e}();function l(){return new c}},869:function(e,t,n){"use strict";n.r(t);n(17),n(15),n(11),n(14),n(7);var r=n(0),o=n(9),c=n(3),l=n(854),h=n(175),f=n(28),d=n(86),v=n(983),y=Object(o.d)({components:{Triangle:v.a},props:{disalbe:{type:Boolean,default:!1},promise:Promise},setup:function(e,t){var data=Object(o.q)({visible:!1,top:0,left:0,isTop:!1}),n=Object(o.r)(null),r=Object(o.r)(null),c=Object(o.r)();return{data:data,popoverStyle:Object(o.a)((function(){return{top:"".concat(data.top,"px"),left:"".concat(data.left,"px")}})),contentElem:c,showPopover:function(o){e.disalbe||(clearTimeout(r.value),t.emit("show"),n.value=setTimeout((function(){Promise.resolve(e.promise).then((function(){n.value&&(data.visible=!0,t.root.$nextTick((function(){var e=o.target,t=null==e?void 0:e.getBoundingClientRect(),n=e.offsetWidth||33,r=e.offsetHeight||33,l=c.value,h=(null==l?void 0:l.offsetWidth)||260,f=(null==l?void 0:l.offsetHeight)||160,d=t.left-h/2+n/2,v=t.top-f-12;data.isTop=!1,v<60&&(data.isTop=!0,v=t.top+r+8),d=Math.max(0,d),data.left=d,data.top=v})))}))}),300))},hidePopover:function(){clearTimeout(n.value),n.value=null,t.emit("hide"),r.value=setTimeout((function(){r.value=null,data.visible=!1}),300)}}}}),m=(n(1214),n(29)),_=Object(m.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"popover-box",on:{mouseenter:function(t){return e.showPopover(t)},mouseleave:e.hidePopover}},[n("transition",{attrs:{name:"fade"}},[e.data.visible?n("div",{ref:"contentElem",staticClass:"popover-content",style:e.popoverStyle},[e._t("content"),e._v(" "),n("triangle",{staticClass:"triangle-bottom",class:{isTop:e.data.isTop}})],2):e._e()]),e._v(" "),e._t("default")],2)}),[],!1,null,"f1a2074a",null).exports,w=n(871),k=n(1189);function C(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var x=Object(o.d)({components:{Avatar:h.a,Popover:_,Button:w.a,ImButton:k.a},props:{userId:String,showJscoreLevel:{type:Boolean,default:!1},enablePopover:{type:Boolean,default:!0},enterMethod:{type:String,default:""}},data:function(){return{user:null,followLock:Object(l.a)(),fetchUserPromise:null,isFollowing:!1}},computed:O(O({},Object(d.mapGetters)({currentUser:c.USER})),{},{position:function(){return this.user&&(this.$userPosition(this.user)||this.user.description||"暂无简介")},self:function(){return this.currentUser&&this.currentUser.id===this.userId},followed:function(){return this.user&&this.user.followed}}),methods:{toFollowing:function(){window.open("/user/".concat(this.userId,"/following"),"_blank")},toFollower:function(){window.open("/user/".concat(this.userId,"/followers"),"_blank")},handleShow:function(){this.fetchUserPromise=this.fetch().then((function(e){if(e.is_logout)return Promise.reject()}))},fetch:function(){var e=this;return Object(f.i)(this.userId,{ignore404:!0}).then((function(t){return e.user=t,t}))},toggleFollow:function(){var e=this;this.isFollowing=!0,this.followLock.do((function(){return e.$ensureAuthorized().then((function(){return e.$store.dispatch(c.TOGGLE_FOLLOW_USER,{user:e.user,enterMethod:e.enterMethod}).catch((function(t){e.$error(t)}))})).catch((function(e){return console.warn("follow failed err:",e)})).finally((function(){return e.isFollowing=!1}))}))}}}),S=(n(1217),n(1218),Object(m.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Popover",{staticClass:"user-popover",attrs:{promise:e.fetchUserPromise},on:{show:e.handleShow},scopedSlots:e._u([{key:"content",fn:function(){return[n("div",{staticClass:"info-row",on:{click:function(e){e.stopPropagation()}}},[n("app-link",{attrs:{to:e.$userRoute(e.user),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:e.user,decorative:!0,alt:e.user.username+"的头像"}})],1),e._v(" "),n("div",{staticClass:"user-info"},[n("username",{attrs:{user:e.user,"show-jscore-level":e.showJscoreLevel}}),e._v(" "),n("div",{staticClass:"position"},[e._v(e._s(e.position))])],1)],1),e._v(" "),e.self?e._e():n("div",{staticClass:"operate-btn"},[n("Button",{staticClass:"follow-btn",attrs:{"st:name":"followBtn",attention:!0,"custom-attention-text":"关注","cancel-attention-text":"已关注",cancel:e.followed,loading:e.isFollowing,size:"large","show-icon":!1},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.toggleFollow(t)}}}),e._v(" "),n("ImButton",{staticClass:"im-btn",attrs:{"tea-type":"personal_information_card","user-id":e.userId}})],1),e._v(" "),n("div",{staticClass:"meta-row",on:{click:function(e){e.stopPropagation()}}},[n("ul",{staticClass:"meta-list"},[n("li",{staticClass:"item",on:{click:e.toFollowing}},[n("div",{staticClass:"count"},[e._v(e._s(e.user.followingCount||0))]),e._v(" "),n("div",{staticClass:"title"},[e._v("关注")])]),e._v(" "),n("li",{staticClass:"divider"}),e._v(" "),n("li",{staticClass:"item",on:{click:e.toFollower}},[n("div",{staticClass:"count"},[e._v(e._s(e.user.followerCount||0))]),e._v(" "),n("div",{staticClass:"title"},[e._v("粉丝")])])])])]},proxy:!0}])},[e._v(" "),e._t("default")],2)}),[],!1,null,"1120b3da",null));t.default=S.exports},871:function(e,t,n){"use strict";var r=n(9),o=n(913),c=n.n(o),l=n(914),h=n.n(l),f=n(915),d=n.n(f),v=n(916),y=n.n(v),m=n(917),_=n.n(m),w=Object(r.d)({props:{type:{type:String,default:"primary"},attention:Boolean,customAttentionText:String,cancelAttentionText:String,size:{type:String,default:"medium"},status:{type:String,default:"default"},disabled:Boolean,loading:Boolean,cancel:Boolean,text:String,icon:String,showIcon:{type:Boolean,default:!0}},setup:function(e,t){var n=Object(r.a)((function(){return e.attention}));return{handleClick:function(n){e.disabled||e.loading||t.emit("click",n)},isAttentionType:n,attentionText:Object(r.a)((function(){return"mini"===e.size&&e.loading?"":e.cancel?e.loading?"取消":e.cancelAttentionText||"已关注":e.customAttentionText||"关注"})),iconSrc:Object(r.a)((function(){return e.loading?e.cancel||n.value&&"primary"!==e.type?y.a:_.a:n.value&&e.showIcon?"mini"===e.size?"":e.icon||e.cancel?d.a:"primary"===e.type?c.a:h.a:""}))}}}),k=(n(918),n(29)),component=Object(k.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"ui-btn",class:[e.type,e.size,e.status,e.cancel?"cancel":"",e.attention?"attention":""],attrs:{disabled:e.disabled||e.loading},on:{click:e.handleClick}},[e.iconSrc?n("img",{staticClass:"img",class:e.loading?"loading":"",attrs:{src:e.iconSrc}}):e._e(),e._v(" "),e.isAttentionType?[e._v("\n    "+e._s(e.attentionText)+"\n  ")]:e._t("default",[e._v(e._s(e.text))])],2)}),[],!1,null,"05e27314",null);t.a=component.exports},874:function(e,t,n){},878:function(e,t,n){"use strict";n(17),n(15),n(11),n(14),n(47),n(7),n(85);var r,o=n(32),c=(n(22),n(5)),l=n(0),h=n(3),f=n(973),d=n(175),v=n(974),y=n(945),m=n(910),_=n(902),w=n(850),k=n(893),C=n(906),O=n(891),x=n(178),S=n(984),T=n.n(S),V=n(16);function E(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function P(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?E(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):E(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var I=(r={},Object(l.a)(r,V.e.ArticleIdType,"article"),Object(l.a)(r,V.e.PinType,"pin"),Object(l.a)(r,V.e.Book,"小册"),Object(l.a)(r,V.e.Realtime,"news"),r),L={components:{AuthCard:v.a,Avatar:d.a,Emoji:f.a,ImageIcon:T.a},props:["commentList","replyList","subject","comment","parent","autoFocus","placeholder","mode","small"],data:function(){return{active:!1,focused:!1,submitting:!1,content:"",imageFile:null,imagePreviewUrl:"",emoji:""}},computed:{me:function(){return this.$store.getters.USER},bindedPhone:function(){return this.me&&this.me.isBindedPhone},empty:function(){return!this.content.length},canSubmit:function(){return this.content.length&&!this.submitting},isActionBoxVisible:function(){return(this.focused||!this.empty||this.imageFile)&&this.me&&this.bindedPhone},submitButtonTitle:function(){return this.submitting?"提交中...":"发表评论"},sendTip:function(){return this.$device.isMacOS?"⌘ + Enter":"Ctrl + Enter"}},watch:{focused:function(e){e&&!this.me&&this.$requestLogin(),e||!this.empty||this.imageFile||(this.$emit("emptyBlur"),this.$store.dispatch(h.UPDATE_PIN_ON_FOCUS,!1))},imageFile:function(){Object(O.g)(this.$refs.richInput)}},methods:{onFocus:function(){this.focused=!0,this.$store.dispatch(h.UPDATE_PIN_ON_FOCUS,!0)},onOuterClick:function(){this.empty&&(this.focused=!1)},onFormBoxClick:function(e){var t=e.target;if(this.bindedPhone){var input=this.$refs.richInput;input.focus(),input.contains(t)||Object(O.g)(input)}},onInput:function(){this.focused=!0,Object(O.e)(this.$refs.richInput),this.content=this.emojiToText(this.$refs.richInput.innerHTML),this.content=Object(O.b)(this.content)},onPaste:function(e){e.preventDefault(),Object(O.f)(e,this.onFileSelected);var text=Object(O.a)(e),html=Object(x.d)(text);Object(O.c)(this.$refs.richInput,html),this.focused=!0,this.content=this.emojiToText(this.$refs.richInput.innerHTML),this.content=Object(O.b)(this.content)},onKeydown:function(e){var t=this;if(this.content.length&&!this.submitting)return Object(y.a)(e,(function(){return t.submit()}))},cleanContent:function(){this.$refs.richInput.innerHTML="",this.content=""},updateEmoji:function(e){this.emoji=e,Object(O.c)(this.$refs.richInput,Object(x.c)(this.emoji)),this.focused=!0,this.content=this.emojiToText(this.$refs.richInput.innerHTML),this.content=Object(O.b)(this.content)},showFileDialog:function(){this.$refs.input.click()},changeFile:function(e){this.imageFile=e,window.URL.revokeObjectURL(this.imagePreviewUrl),this.imagePreviewUrl=e?window.URL.createObjectURL(e):""},cleanFile:function(){this.changeFile(null)},onFileSelected:function(e){var t=this;this.$refs.input.value=null,e&&(this.isWithVaildSize(e)?Object(m.a)(e,_.a).then((function(n){n?t.changeFile(e):t.$error("不支持此格式的图片")})):this.$error("文件过大"))},isWithVaildSize:function(e){return e.size<=_.c},uploadFile:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var n,r,c,l,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.imageFile){t.next=11;break}return t.next=3,Object(k.a)(e.me.user_id,[e.imageFile]);case 3:return n=t.sent,r=Object(o.a)(n,1),c=r[0],l=e.imageFile.type.split("/")[1],h={gif:0,png:1,jpg:2,jpeg:2},t.abrupt("return",{pic_url:c.Url,width:c.ImageHeight,height:c.ImageWidth,pic_type:h[l]||1});case 11:return t.abrupt("return",Promise.resolve());case 12:case"end":return t.stop()}}),t)})))()},submit:function(){var e=this;return this.submitting=!0,this.uploadFile().then((function(image){return e.createSubmitTask(image)})).then((function(t){var n;if(0===t.err_no?(e.$emit("syncCommentNum",{type:"add"}),e.submitting=!1,e.$alertMsg("评论成功"),e.$emit("submitted"),e.reset()):e.$error(t.err_msg||"评论失败，请稍后重试"),Object(C.a)()){var r=Object(C.b)();e.$TEA("search_detail_action",P(P({},r),{},{action_type:V.a.Comment,action_value:(null===(n=e.commentList)||void 0===n?void 0:n.length)||0}))}})).catch((function(t){e.submitting=!1,e.$error(t)}))},createSubmitTask:function(image){var e=this,t=this.subject,n=t.item_id,r=t.item_type,o=t.user_id;return this.$TEA("comment_action",{comment_type:I[r],comment_parent_id:n,author_user_id:o,comment_url:location.href,mode:this.mode}),this.comment?this.comment.reply_info?Object(w.h)({reply_to_comment_id:this.comment.reply_info.reply_comment_id,reply_to_reply_id:this.comment.reply_info.reply_id,reply_to_user_id:this.comment.reply_info.user_id,item_id:n,item_type:r,reply_content:this.content,reply_pics:void 0===image?[]:[image]}).then((function(t){return 0===t.err_no&&(e.replyList||[]).push(t.data),t})):Object(w.h)({reply_to_comment_id:this.comment.comment_info.comment_id,reply_to_reply_id:null,reply_to_user_id:null,item_id:n,item_type:r,reply_content:this.content,reply_pics:void 0===image?[]:[image]}).then((function(t){return 0===t.err_no&&(e.replyList||[]).push(t.data),t})):Object(w.g)({item_id:n,item_type:r,comment_content:this.content,comment_pics:void 0===image?[]:[image]}).then((function(t){var n;return 0===t.err_no&&(null===(n=e.commentList)||void 0===n||n.unshift(t.data)),t}))},reset:function(){this.cleanFile(),this.cleanContent()},emojiToText:function(html){return html.replace(/<img.*?alt=".*?/g,"").replace(/".?src=.*?>/g,"")}},mounted:function(){var e=this;this.autoFocus&&this.$nextTick((function(){e.$refs.richInput.focus()}))}},j=(n(985),n(29)),component=Object(j.a)(L,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"outer-click",rawName:"v-outer-click",value:function(){return e.onOuterClick()},expression:"() => onOuterClick()"}],staticClass:"comment-form",class:{focused:e.focused,reply:!!e.comment,"sub-reply":!!e.parent,small:e.small}},[n("div",{staticClass:"avatar-box"},[n("avatar",{staticClass:"avatar",attrs:{user:e.me}})],1),n("div",{staticClass:"form-box",class:{disabled:e.submitting}},[n("auth-card",{attrs:{user:e.me},on:{click:e.onFormBoxClick}},[n("div",{staticClass:"input-box"},[n("div",{ref:"richInput",staticClass:"rich-input",class:{empty:e.empty},attrs:{contenteditable:"true",spellcheck:"false",placeholder:e.placeholder||"输入评论（Enter换行，"+e.sendTip+"发送）",disabled:!0},on:{focus:e.onFocus,input:e.onInput,paste:e.onPaste,keydown:e.onKeydown,keyup:function(e){e.stopPropagation()}}}),e.imagePreviewUrl?n("div",{staticClass:"image-preview-box"},[n("div",{staticClass:"image-preview",style:{backgroundImage:"url("+e.imagePreviewUrl+")"}}),n("div",{staticClass:"clean-btn",on:{click:e.cleanFile}},[n("svg",{attrs:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[n("rect",{attrs:{width:"12",height:"12",rx:"2",fill:"#86909C"}}),e._v(" "),n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.98095 5.49307L8.22012 3.25389C8.28521 3.18881 8.39074 3.18881 8.45582 3.25389L8.69153 3.4896C8.75661 3.55468 8.75661 3.66021 8.69153 3.7253L6.45235 5.96447L8.69153 8.20364C8.75661 8.26873 8.75661 8.37426 8.69153 8.43934L8.45582 8.67505C8.39074 8.74013 8.28521 8.74013 8.22012 8.67505L5.98095 6.43587L3.74178 8.67505C3.67669 8.74013 3.57116 8.74013 3.50608 8.67505L3.27037 8.43934C3.20529 8.37426 3.20529 8.26873 3.27037 8.20364L5.50954 5.96447L3.27037 3.7253C3.20529 3.66021 3.20529 3.55468 3.27037 3.4896L3.50608 3.25389C3.57116 3.18881 3.67669 3.18881 3.74178 3.25389L5.98095 5.49307Z",fill:"white"}})])])]):e._e()])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isActionBoxVisible||!e.small,expression:"isActionBoxVisible || !small"}],staticClass:"action-box"},[n("emoji",{directives:[{name:"show",rawName:"v-show",value:e.isActionBoxVisible,expression:"isActionBoxVisible"}],staticClass:"emoji-btn",on:{selectEmoji:e.updateEmoji}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isActionBoxVisible,expression:"isActionBoxVisible"}],staticClass:"image-btn",on:{click:e.showFileDialog}},[n("ImageIcon",{staticClass:"icon"}),n("span",[e._v("图片")])],1),n("div",{staticClass:"submit"},[n("span",{directives:[{name:"show",rawName:"v-show",value:e.isActionBoxVisible,expression:"isActionBoxVisible"}]},[e._v(e._s(e.sendTip))]),n("button",{staticClass:"submit-btn",attrs:{disabled:!e.canSubmit},on:{click:e.submit}},[e._v(e._s(e.submitButtonTitle))])])],1)],1),n("input",{ref:"input",staticClass:"hidden",attrs:{type:"file"},on:{change:function(t){return e.onFileSelected(t.target.files[0])}}})])}),[],!1,null,"733426cc",null);t.a=component.exports},880:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));n(85),n(47),n(27),n(18);var r=function(text){try{var textarea=document.createElement("textarea");document.body.appendChild(textarea),textarea.value=text,textarea.select(),document.execCommand("copy"),document.body.removeChild(textarea)}catch(e){throw"copy link error"}};function o(content){if(!(content=(null==content?void 0:content.trim())||""))return"";var e=((null==content?void 0:content.trim())||"").split("\n")[0];return e.length<=30?e:e.substring(0,30)}},884:function(e,t,n){"use strict";n.d(t,"C",(function(){return o})),n.d(t,"w",(function(){return c})),n.d(t,"B",(function(){return l})),n.d(t,"v",(function(){return h})),n.d(t,"u",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return v})),n.d(t,"h",(function(){return y})),n.d(t,"b",(function(){return m})),n.d(t,"x",(function(){return _})),n.d(t,"y",(function(){return w})),n.d(t,"r",(function(){return k})),n.d(t,"s",(function(){return C})),n.d(t,"A",(function(){return O})),n.d(t,"t",(function(){return x})),n.d(t,"E",(function(){return S})),n.d(t,"k",(function(){return T})),n.d(t,"i",(function(){return V})),n.d(t,"l",(function(){return E})),n.d(t,"j",(function(){return P})),n.d(t,"D",(function(){return I})),n.d(t,"g",(function(){return L})),n.d(t,"q",(function(){return j})),n.d(t,"c",(function(){return R})),n.d(t,"a",(function(){return A})),n.d(t,"z",(function(){return D})),n.d(t,"p",(function(){return M})),n.d(t,"o",(function(){return B})),n.d(t,"F",(function(){return N})),n.d(t,"m",(function(){return H})),n.d(t,"f",(function(){return F})),n.d(t,"n",(function(){return U}));var r=n(1);function o(e,t,n){return Object(r.c)({url:"/tag_api/v1/query_category_list",method:"POST",showError:e,headers:t,jsonBody:n})}function c(e,t,n){return Object(r.c)({url:"/study_api/v1/translate/query_claim",method:"POST",showError:e,headers:t,jsonBody:n})}function l(e,t,n){return Object(r.c)({url:"/study_api/v1/translate/query_user",method:"POST",showError:e,headers:t,jsonBody:n})}function h(e,t,n){return Object(r.c)({url:"/study_api/v1/translate/query_auto_claim",method:"POST",showError:e,headers:t,jsonBody:n})}function f(e,t,n){return Object(r.c)({url:"/study_api/v1/translate/query_all_recommend",method:"POST",showError:e,headers:t,jsonBody:n})}function d(data,e,t,n){return Object(r.c)({url:"/interact_api/v1/digg/cancel",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function v(data,e,t,n){return Object(r.c)({url:"/interact_api/v1/digg/save",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function y(data,e,t,n){return Object(r.c)({url:"/interact_api/v1/follow/undo",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function m(data,e,t,n){return Object(r.c)({url:"/content_api/v1/column/articles_cursor",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function _(data,e,t,n){return Object(r.c)({url:"/study_api/v1/translate/query_recommend",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function w(data,e,t,n){return Object(r.c)({url:"/study_api/v1/translate/query_recommend_list",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function k(data,e,t,n){return Object(r.c)({url:"/study_api/v1/translate/publish_claim",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function C(data,e,t,n){return Object(r.c)({url:"/study_api/v1/translate/publish_recommend",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function O(data,e,t,n){return Object(r.c)({url:"/study_api/v1/translate/query_translate",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function x(data,e,t,n){return Object(r.c)({url:"/study_api/v1/translate/publish_translate",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function S(data,e,t,n){return Object(r.c)({url:"/tag_api/v1/theme/list_by_hot",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function T(data,e,t,n){return Object(r.c)({url:"/recommend_api/v1/short_msg/detail_rec",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function V(data,e,t,n){return Object(r.c)({url:"/interact_api/v1/message/set_all_read",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function E(data,e,t,n){return Object(r.c)({url:"/recommend_api/v1/short_msg/topic",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function P(data,e,t,n){return Object(r.c)({url:"/list_api/v1/annual/user_annual",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function I(data,e,t,n){return Object(r.c)({url:"/tag_api/v1/query_topic_detail",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function L(data,e,t,n){return Object(r.c)({url:"/interact_api/v1/follow/do",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function j(data,e,t,n){return Object(r.c)({url:"/study_api/v1/translate/pre_query_status",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function R(data,e,t,n){return Object(r.c)({url:"/content_api/v1/short_msg/list_by_theme",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function A(data,e,t,n){return Object(r.c)({url:"/booklet_api/v1/reading/submit_progress",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function D(data,e,t,n){return Object(r.c)({url:"/study_api/v1/translate/query_recommend_status",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function M(data,e,t,n){return Object(r.c)({url:"/study_api/v1/translate/pre_lock_translate",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function B(data,e,t,n){return Object(r.c)({url:"/study_api/v1/translate/pre_count",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function N(data,e,t,n){return Object(r.c)({url:"/tag_api/v1/topic/list_by_search_cursor",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function H(data,e,t,n){return Object(r.c)({url:"/study_api/v1/translate/abstain_claim",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function F(data,e,t,n){return Object(r.c)({url:"/interact_api/v1/digg/user_list",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}function U(data,e,t,n){return Object(r.c)({url:"/study_api/v1/translate/pre_audit_translate",body:data,method:"POST",showError:e,headers:t,jsonBody:n})}},885:function(e,t,n){"use strict";n(125);var r=n(48);n(7);function o(e){return new Promise((function(t,n){var img=new window.Image;img.onload=function(){return t({width:img.naturalWidth,height:img.naturalHeight,url:e})},img.onerror=function(){return n()},img.src=e}))}var c=function(){return{loading:!1,loaded:!1,error:!1,src:null,imageStyle:{top:"",left:"",width:"",height:"",transform:""},token:Date.now()}},l={props:["backgroundColor","margin","full"],data:c,methods:{show:function(e){var t=e.thumbUrl,n=e.originalUrl,rect=e.rect;this.loadImage({originalUrl:n,rect:rect}),this.loadTumb({thumbUrl:t,rect:rect})},close:function(){Object.assign(this,c()),this.unlockScroll()},loadTumb:function(e){var t=this,n=e.thumbUrl,rect=e.rect,r=this.token;o(n).then((function(e){if(t.isInSameView(r)&&!t.loaded&&!t.error){var o=t.computeRenderedRect(e.width,e.height);t.applyRect(o),t.src=n,t.applyTransform(t.computeTransform(o,rect))}})).catch((function(e){t.isInSameView(r)&&console.error(e)}))},loadImage:function(e){var t=this,n=e.originalUrl,rect=e.rect,r=this.token;this.loading=!0,o(n).then((function(image){if(t.isInSameView(r)){var e=!!t.src,o=!t.full&&t.isLargeLongImage(image),c=t.computeRenderedRect(image.width,image.height,o);t.applyRect(c),t.src=n,t.loading=!1,t.loaded=!0,o&&t.lockScroll(),e||t.applyTransform(t.computeTransform(c,rect))}})).catch((function(e){t.isInSameView(r)&&(console.error(e),t.loading=!1,t.error=!0)}))},applyRect:function(rect){Object.assign(this.imageStyle,{top:rect.top+"px",left:rect.left+"px",width:rect.width+"px",height:rect.height+"px"})},applyTransform:function(e){var t=this;this.imageStyle.transform=e,this.$nextTick((function(){t.forceReflow(),t.imageStyle.transform=""}))},initScrollEventListener:function(){var e=this,t=this.$getBean("eventBus"),n=t.eventType.ROOT_CONTAINER_SCROLL;t.onVmLife(this,n,(function(){e.src&&e.close()}))},computeRenderedRect:function(e,t,n){var o=Object(r.h)(),c=this.getSafeAreaSize();if(n){var l=Math.min(o.width,e,960),h=l*t/e;return{top:0,left:(o.width-l)/2,width:l,height:h}}var f=e/c.width,d=t/c.height,v=Math.max(f,d,1),y=e/v,m=t/v;return{top:(o.height-m)/2,left:(o.width-y)/2,width:y,height:m}},computeTransform:function(e,rect){var t=rect.width/e.width,n=rect.height/e.height,r=rect.width-e.width,o=rect.height-e.height,c=rect.top-e.top+o/2,l=rect.left-e.left+r/2,h="translate3d(".concat(l,"px, ").concat(c,"px, 0)"),f="scale3d(".concat(t,", ").concat(n,", 1)");return"".concat(h," ").concat(f)},forceReflow:function(){document.body.clientWidth},isInSameView:function(e){return e===this.token},isLargeLongImage:function(image){var e=this.getSafeAreaSize(),t=e.width,n=e.height,r=n/t,o=image.height/image.width,c=o>1&&o>r;return(image.width>t||image.height>n)&&c},getSafeAreaSize:function(){var e=Object(r.h)(),t=e.width,n=e.height;return{width:Math.max(0,t-2*(+this.margin||0)),height:Math.max(0,n-2*(+this.margin||0))}},lockScroll:function(){var e=this.$getBean("eventBus");e.emit(e.eventType.LOCK_ROOT_CONTAINER_SCROLL)},unlockScroll:function(){var e=this.$getBean("eventBus");e.emit(e.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)}},mounted:function(){this.initScrollEventListener()}},h=(n(969),n(29)),f=Object(h.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade"}},[e.src?r("div",{staticClass:"image-viewer",class:{loading:e.loading},on:{click:e.close}},[r("div",{staticClass:"image-box",style:{backgroundColor:e.backgroundColor}},[e.error?r("img",{staticClass:"image error",attrs:{src:n(886)}}):r("img",{staticClass:"image",style:e.imageStyle,attrs:{src:e.src}})])]):e._e()])}),[],!1,null,"10b7b0e6",null).exports,d=n(994),v=n.n(d),y=function(){return{isLargeLongMode:!1,isZoomMode:!1,loading:!1,loaded:!1,error:!1,src:null,offsetX:0,offsetY:0,canZoom:!1,token:Date.now()}},m={props:["backgroundColor","margin","full"],data:y,methods:{show:function(e){var t=e.thumbUrl,n=e.originalUrl,rect=e.rect;this.loadImage({originalUrl:n,rect:rect}),this.loadTumb({thumbUrl:t,rect:rect})},close:function(){this.destroyGesture(),Object.assign(this,y()),this.unlockScroll()},loadTumb:function(e){var t=this,n=e.thumbUrl,r=(e.rect,this.token);o(n).then((function(e){!t.isInSameView(r)||t.loaded||t.error||(t.src=n)})).catch((function(e){t.isInSameView(r)&&console.error(e)}))},loadImage:function(e){var t=this,n=e.originalUrl,r=(e.rect,this.token);this.loading=!0,o(n).then((function(image){if(t.isInSameView(r)){var e=!t.full&&t.isLargeLongImage(image);t.src=n,t.loading=!1,t.loaded=!0,t.isLargeLongMode=e,t.canZoom=t.isLargeImage(image),t.initGesture(),t.isLargeLongMode&&t.lockScroll()}})).catch((function(e){t.isInSameView(r)&&(console.error(e),t.loading=!1,t.error=!0)}))},isInSameView:function(e){return e===this.token},isLargeLongImage:function(image){var e=Object(r.h)(),t=e.width,n=e.height,o=n/t,c=image.height/image.width,l=c>1&&c>o;return(image.width>t||image.height>n)&&l},isLargeImage:function(image){var e=Object(r.h)(),t=e.width;return e.height<image.height||t<image.width},lockScroll:function(){var e=this.$getBean("eventBus");e.emit(e.eventType.LOCK_ROOT_CONTAINER_SCROLL)},unlockScroll:function(){var e=this.$getBean("eventBus");e.emit(e.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)},initScrollEventListener:function(){var e=this,t=this.$getBean("eventBus"),n=t.eventType.ROOT_CONTAINER_SCROLL;t.onVmLife(this,n,(function(){e.src&&!e.isZoomMode&&e.close()}))},adjustOffset:function(){var e=Object(r.h)(),t=e.width,n=e.height,rect=this.$refs.image.getBoundingClientRect();rect.width<t?this.offsetX=0:rect.left>0?this.offsetX-=rect.left:rect.left+rect.width<t&&(this.offsetX+=t-rect.left-rect.width),rect.height<n?this.offsetY=0:rect.top>0?this.offsetY-=rect.top:rect.top+rect.height<n&&(this.offsetY+=n-rect.top-rect.height)},initGesture:function(){var e=this;this.$nextTick((function(){e.finger=new v.a(e.$refs.imageBox,{singleTap:function(t){e.isZoomMode?(e.isZoomMode=!1,e.offsetX=0,e.offsetY=0):e.close()},doubleTap:function(t){e.canZoom&&(e.isZoomMode=!e.isZoomMode,e.isZoomMode?e.lockScroll():(e.unlockScroll(),e.offsetX=0,e.offsetY=0))},pressMove:function(t){var n=t.deltaX,r=t.deltaY;e.isZoomMode&&(e.offsetX+=n,e.offsetY+=r)},touchEnd:function(){e.isZoomMode&&window.setTimeout((function(){e.adjustOffset()}),100)}})}))},destroyGesture:function(){this.finger&&this.finger.destroy()}},mounted:function(){this.initScrollEventListener()}},_=(n(970),Object(h.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade"}},[e.src?r("div",{staticClass:"image-viewer mobile",class:{loading:e.loading}},[r("div",{ref:"imageBox",staticClass:"image-box",class:{"large-long":e.isLargeLongMode},style:{backgroundColor:e.backgroundColor}},[e.error?r("img",{staticClass:"image error",attrs:{src:n(886)}}):r("img",{ref:"image",staticClass:"image",class:{zoom:e.isZoomMode},style:{transform:"translate3d("+e.offsetX+"px, "+e.offsetY+"px, 0)"},attrs:{src:e.src}})])]):e._e()])}),[],!1,null,"93a27598",null).exports),w=n(266);var k={components:{Desktop:f,Mobile:_},props:["selector","backgroundColor","margin","full"],data:function(){return{component:null}},methods:{attachContainer:function(e){this.container!==e&&(this.removeEventListener(),this.addEventListener(e),this.container=e)},onClick:function(e){var t,n=e.target;if(this.isMatched(n)){var r=(t=n).getAttribute("data-src")||t.getAttribute("src")||function(e){var t=(e.style.backgroundImage||"").match(/url\("?'?(.+?)"?'?\)/i);return t&&t[1]}(t);if(r){var o=Object(w.d)(r),rect=n.getBoundingClientRect();this.$refs.viewer.show({thumbUrl:r,originalUrl:o,rect:rect})}}},addEventListener:function(e){var t=this;e.__removeIamgeViewListener=Object(r.k)(e,"click",(function(e){t.onClick(e)}),!0)},removeEventListener:function(){this.container&&this.container.__removeIamgeViewListener()},isMatched:function(e){return!e.classList.contains("equation")&&!this.$el.contains(e)&&Object(r.j)(e,this.selector||"img")}},mounted:function(){this.component=this.$device.isMobile?"Mobile":"Desktop"},beforeDestroy:function(){this.removeEventListener()}},C=(n(971),Object(h.a)(k,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image-viewer-box"},[t(this.component,{ref:"viewer",tag:"component",attrs:{selector:this.selector,"background-color":this.backgroundColor,margin:this.margin,full:this.full}})],1)}),[],!1,null,"5ca9a68f",null));t.a=C.exports},886:function(e,t,n){e.exports=n.p+"img/image-error.3338abe.png"},887:function(e,t,n){},888:function(e,t,n){},889:function(e,t,n){},891:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"g",(function(){return c})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return d})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"e",(function(){return m}));n(47);var r=n(178);function o(e){e.preventDefault(),window.getSelection().deleteFromDocument&&window.getSelection().deleteFromDocument();try{var text=window.clipboardData.getData("Text");try{window.getSelection().createRange().pasteHTML(text)}catch(e){var t=document.createTextNode(text);window.getSelection().getRangeAt(0).insertNode(t)}}catch(t){var n=(e.originalEvent||e).clipboardData.getData("text/plain");document.execCommand("insertText",!1,n)}}function c(e){if(document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if(document.selection){var r=document.body.createTextRange();r.moveToElementText(e),r.collapse(!1),r.select()}}function l(){return"function"==typeof document.createRange||"function"==typeof window.getSelection}function h(){var e=null,t=null;return l?(t=document.getSelection()).getRangeAt&&t.rangeCount&&(e=document.getSelection().getRangeAt(0)):e=document.selection.createRange(),e}function f(html){var text=html;return text=text.replace(/<\s*script[^>]*>[\s\S]*?<\/script>/gim,"").replace(/<\s*style[^>]*>[\s\S]*?<\/style>/gim,"").replace(/<!--.*?-->/gim,"").replace(/<!DOCTYPE.*?>/gi,"").replace(/<\/div>/gi,"").replace(/(<br><div>|<div>|<br>)/gi,"\n").replace(/&nbsp;/gi,"").replace(/<.*?>/gi,"").replace(/&lt;/gi,"<").replace(/&amp;/gi,"&").replace(/&gt;/gi,">").replace(/&#39;/gi,"'").replace(/&quot;/g,'"')}function d(e,t){var n="",r=e.clipboardData.items;if(r){for(var i=0;i<r.length;i++)-1!=r[i].type.indexOf("image")&&(n=r[i].getAsFile());"function"==typeof t&&n&&t(n)}}function v(e){window.getSelection().deleteFromDocument&&window.getSelection().deleteFromDocument();try{return window.clipboardData.getData("Text")}catch(t){return(e.originalEvent||e).clipboardData.getData("text/plain")}}function y(e,html){var t,n,r=h();if(r&&function e(t,n){return!(!n||!t)&&(t===n||e(t,n.parentElement))}(e,r.startContainer)||c(e),e.focus(),window.getSelection){if((t=window.getSelection()).getRangeAt&&t.rangeCount){(n=t.getRangeAt(0)).deleteContents(),(e=document.createElement("div")).innerHTML=html;for(var o,l,f=document.createDocumentFragment();o=e.firstChild;)l=f.appendChild(o);n.insertNode(f),l&&((n=n.cloneRange()).setStartAfter(l),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(html)}function m(e){var t=h(),n=t.startContainer;if(3===n.nodeType){for(var text=n.nodeValue,o=t.startOffset-1,c=t.endOffset-1,f=[];o>=0;){if("["===text[o]){f[0]=o;break}o--}for(;c<=text.length-1;){if("]"===text[c]){f[1]=c;break}c++}if(void 0!==f[0]&&void 0!==f[1]){var d=text.slice(f[0],f[1]+1),v=Object(r.c)(d);if(v){var m=document.createRange();m.setStart(n,f[0]),m.setEnd(n,f[1]+1),function(e){if(e){var t=null,n=null;l?((n=document.getSelection()).removeAllRanges(),n.addRange(e)):((t=document.selection.createRange()).setEndPoint("EndToEnd",e),0===e.text.length?t.collapse(!1):t.setEndPoint("StartToStart",e),t.select())}}(m),y(e,v)}}}}},893:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(11),n(54),n(7),n(22);var r=n(5),o=n(1);function c(e,t){return l.apply(this,arguments)}function l(){return(l=Object(r.a)(regeneratorRuntime.mark((function e(t,o){var c,l,d,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.e(15).then(n.t.bind(null,1082,7));case 3:return c=e.sent,l=c.default,e.next=7,h();case 7:return d=e.sent,v=function(e){return new Promise((function(n,r){var o=new l({userId:t,appId:2608,imageConfig:{serviceId:"k3u1fbpfcp"}}),c=o.addFile({file:e,stsToken:d,type:"image"});o.start(c),o.on("complete",(function(e){n(e.uploadResult)})),o.on("error",(function(e){console.log(e.extra,"bytedUploader Error"),r(e.extra)}))}))},e.next=11,Promise.all(o.map(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t){var n,r,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:return n=e.sent,r=n.ImageHeight,o=n.ImageWidth,c=n.Uri,e.next=8,f(c);case 8:return l=e.sent,e.abrupt("return",{ImageHeight:r,ImageWidth:o,Uri:c,Url:l.data.main_url});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(0),new Error("上传图片失败");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function h(){return Object(o.e)({url:"/imagex/gen_token",query:{client:"web"}}).then((function(e){return e.data.token}))}function f(e){return Object(o.e)({url:"/imagex/get_img_url",query:{uri:e}})}},902:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return h}));var r=["jpg","jpeg","png","gif","webp"],o=5242880,c=9,l=1e3,h=["jpg","png","gif"]},903:function(e,t,n){"use strict";var r,o;n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return f})),n.d(t,"f",(function(){return d})),function(e){e.UNPLAY="unplay",e.PLAYING="playing",e.PAUSED="paused",e.PLAYED="played"}(r||(r={})),function(e){e.detailRoute="bytetechVideoDetail",e.singleDetailRoute="bytetechVideoSingleDetail"}(o||(o={}));var c,l={routeName:"courseIndex",videoCategory:"bytetech",vipBookType:"vip"},h={title:"掘金小册是什么？",desc:"一个小篇幅、高浓度、成体系、有收益的技术学习平台",spreadQrcode:"https://z.juejin.cn/L54A"};!function(e){e.PutOnTimeSort="1",e.SaleCountDesc="7",e.PriceAsc="8",e.PriceDesc="9",e.DefaultSort="10"}(c||(c={}));var f={10:"recommend",7:"hot",1:"new",9:"price_h2l",8:"price_l2h"},d={discussTitle:"加入掘金会员，查看并参与课程讨论，字节内部课免费学",resouceTitle:"加入掘金会员，即可查看学习资料，字节内部课免费学"}},906:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));n(43),n(51);var r=n(16),o={left:[{id:0,title:"综合"},{id:2,title:"文章"},{id:12,title:"课程"},{id:9,title:"标签"},{id:1,title:"用户"}],right:[{id:0,title:"时间不限"},{id:1,title:"最近一天"},{id:2,title:"最近一周"},{id:3,title:"最近三月"}]},c=function(){return document.referrer.includes("/search")},l=function(){if(!c())return{};try{var e=sessionStorage.getItem("SEARCH_PARAMS"),t=JSON.parse(e),n=t.query,o=t.search_attached_info,l=void 0===o?"":o,h=t.rank,f=t.display_search_type;return{query:n,detail_from:r.f.Search,search_attached_info:l,rank:h,display_search_type:f}}catch(e){return{}}}},908:function(e,t,n){},910:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(37),n(24),n(25),n(430),n(7);var r=[{name:"jpg",regx:/^ffd8ff/},{name:"gif",regx:/^474946/},{name:"png",regx:/89504e47/},{name:"webp",regx:/57454250/},{name:"bmp",regx:/^424d/},{name:"any",regx:/./}];function o(e,t){return function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){return t(e.target.result)},r.onerror=function(e){return n(e)},r.readAsArrayBuffer(e.slice(0,64))}))}(e).then(c).then(l.bind(null,t))}function c(e){return Array.prototype.slice.call(new Uint8Array(e)).reduce((function(e,data){return e+data.toString(16)}),"")}function l(e,header){for(var i=0;i<r.length;i++)if(r[i].regx.test(header))return-1!==e.indexOf(r[i].name);return!1}},911:function(e,t,n){},912:function(e,t,n){},913:function(e,t,n){e.exports=n.p+"c5c64e06a56896da43c1d084d2482cf3.svg"},914:function(e,t,n){e.exports=n.p+"bd960fe696b2c2b82cea3c0e2e2f2aae.svg"},915:function(e,t,n){e.exports=n.p+"062856d97fc330530a3a64c01d915edc.svg"},916:function(e,t,n){e.exports=n.p+"img/loading.b144729.png"},917:function(e,t,n){e.exports=n.p+"img/loading-light.e96acb8.png"},918:function(e,t,n){"use strict";n(874)},919:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,y=data.attrs,m=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m)},_),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.56162 2.16903C8.66569 2.09612 8.78195 2.06075 8.88247 2.09071C8.97653 2.11874 9.23851 2.25868 9.50988 2.9675C9.64419 3.31832 9.9356 4.24191 9.42155 6.05383C9.29751 6.49103 9.61394 6.95254 10.0926 6.95922L13.492 7.00667L13.492 7.00672H13.4991C13.6049 7.00672 13.7228 7.01937 13.8134 7.05849C13.8544 7.07622 13.8815 7.0959 13.8999 7.11552C13.9166 7.13326 13.9368 7.16198 13.9515 7.21587C13.9848 7.33735 14.0228 7.74663 13.9473 8.42213C13.874 9.07808 13.698 9.9443 13.341 10.9593C13.0424 11.8083 12.6601 12.5287 12.0684 13.4874C12.0558 13.5047 12.0462 13.5192 12.0418 13.526L12.0404 13.528C12.0292 13.5449 12.0242 13.5526 12.018 13.5613C12.0076 13.5759 12.0018 13.5815 11.9983 13.5845C11.996 13.5865 11.9908 13.5907 11.9777 13.5954C11.9638 13.6004 11.9311 13.6095 11.8706 13.6095H5.56278L5.56373 6.58441C5.87126 6.41852 6.19881 6.20079 6.54112 5.8401C6.93883 5.42103 7.33789 4.82891 7.76254 3.94134C7.84974 3.75908 7.91745 3.55913 7.97574 3.37714C7.99264 3.32437 8.0087 3.2733 8.02438 3.22344L8.02439 3.2234C8.066 3.09109 8.10495 2.96727 8.14985 2.84264C8.2758 2.49303 8.40247 2.28052 8.56162 2.16903ZM10.452 2.6068C10.1323 1.7716 9.70208 1.28228 9.17063 1.12389C8.64564 0.967414 8.20308 1.18842 7.98278 1.34276C7.55169 1.64476 7.33837 2.11859 7.20071 2.50071C7.14817 2.64656 7.10002 2.79968 7.05661 2.93775C7.0422 2.98357 7.02832 3.02773 7.01496 3.06941C6.95791 3.24755 6.90763 3.39066 6.85248 3.50594C6.45683 4.33291 6.1121 4.82661 5.80935 5.14563C5.51322 5.45766 5.23983 5.62142 4.9473 5.76772C4.71095 5.88592 4.55494 6.12857 4.55491 6.40111L4.55388 13.912C4.55383 14.3021 4.87002 14.6183 5.26008 14.6183H11.8706C12.2097 14.6183 12.4663 14.5109 12.6519 14.3531C12.7387 14.2792 12.7988 14.2038 12.8387 14.1479C12.8556 14.1243 12.8704 14.102 12.8786 14.0895L12.8813 14.0854L12.8826 14.0835L12.8955 14.068L12.9142 14.0377C13.5304 13.0409 13.9578 12.2465 14.2927 11.294C14.6745 10.2085 14.8679 9.26762 14.9499 8.53421C15.0297 7.82035 15.009 7.25796 14.9246 6.94965C14.805 6.51236 14.5104 6.26063 14.2134 6.13235C13.9385 6.01358 13.661 5.9981 13.5028 5.99787L10.4907 5.95583C10.9296 4.15742 10.648 3.11853 10.452 2.6068ZM1.0008 6.46734C0.981809 6.06471 1.30313 5.72787 1.70621 5.72787H2.75264C3.14266 5.72787 3.45883 6.04405 3.45883 6.43407V13.9437C3.45883 14.3337 3.14266 14.6499 2.75264 14.6499H2.06044C1.68335 14.6499 1.37279 14.3536 1.35502 13.977L1.0008 6.46734Z",fill:"#8A919F"}})]))}}},920:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,y=data.attrs,m=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m)},_),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.452 2.6068C10.1323 1.7716 9.70208 1.28228 9.17063 1.12389C8.64564 0.967414 8.20308 1.18842 7.98278 1.34276C7.55169 1.64476 7.33837 2.11859 7.20071 2.50071C7.14817 2.64655 7.10003 2.79966 7.05661 2.93773L7.05661 2.93775C7.0422 2.98357 7.02832 3.02773 7.01496 3.06941C6.95791 3.24755 6.90763 3.39066 6.85248 3.50594C6.45683 4.33291 6.1121 4.82661 5.80935 5.14563C5.51322 5.45766 5.23983 5.62142 4.9473 5.76772C4.71095 5.88592 4.55494 6.12857 4.55491 6.40111L4.55388 13.912C4.55383 14.3021 4.87002 14.6183 5.26008 14.6183H11.8706C12.2097 14.6183 12.4663 14.5109 12.6519 14.3531C12.7388 14.2792 12.7988 14.2038 12.8387 14.1479C12.8556 14.1243 12.8704 14.102 12.8786 14.0895L12.8813 14.0854L12.8826 14.0835L12.8955 14.068L12.9142 14.0377C13.5304 13.0409 13.9578 12.2465 14.2927 11.294C14.6745 10.2085 14.8679 9.26762 14.9499 8.53421C15.0297 7.82035 15.009 7.25796 14.9246 6.94965C14.805 6.51236 14.5104 6.26063 14.2134 6.13235C13.9385 6.01358 13.661 5.9981 13.5028 5.99787L10.4907 5.95583C10.9296 4.15742 10.648 3.11853 10.452 2.6068ZM1.0008 6.46734C0.981809 6.06471 1.30313 5.72787 1.70621 5.72787H2.75264C3.14266 5.72787 3.45883 6.04405 3.45883 6.43407V13.9437C3.45883 14.3337 3.14266 14.6499 2.75264 14.6499H2.06044C1.68335 14.6499 1.37279 14.3536 1.35502 13.977L1.0008 6.46734Z",fill:"#1E80FF"}})]))}}},921:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,y=data.attrs,m=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"#86909c",xmlns:"http://www.w3.org/2000/svg"},m)},_),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 1C14.3682 1 14.6667 1.29848 14.6667 1.66667V12.3333C14.6667 12.7015 14.3682 13 14 13H10.5924L8.44602 14.932C8.19248 15.1601 7.8076 15.1601 7.55406 14.932L5.40737 13H2.00004C1.63185 13 1.33337 12.7015 1.33337 12.3333V1.66667C1.33337 1.29848 1.63185 1 2.00004 1H14ZM13.3334 2.33333H2.6667V11.6667H5.919L8 13.5395L10.0807 11.6667H13.3334V2.33333ZM11.3334 6.66667C11.3334 6.48257 11.1841 6.33333 11 6.33333H5.00003C4.81594 6.33333 4.6667 6.48257 4.6667 6.66667V7.33333C4.6667 7.51743 4.81594 7.66667 5.00003 7.66667H11C11.1841 7.66667 11.3334 7.51743 11.3334 7.33333V6.66667Z"}})]))}}},922:function(e,t,n){},923:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,y=data.attrs,m=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m)},_),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 10.5759L13.4212 5.15476C13.5513 5.02459 13.7624 5.02459 13.8926 5.15476L14.364 5.62616C14.4941 5.75634 14.4941 5.96739 14.364 6.09757L8.4714 11.9901C8.21106 12.2505 7.78894 12.2505 7.5286 11.9901L1.63604 6.09757C1.50586 5.96739 1.50586 5.75634 1.63604 5.62616L2.10744 5.15476C2.23762 5.02459 2.44867 5.02459 2.57885 5.15476L8 10.5759Z",fill:"#4E5969"}})]))}}},924:function(e,t,n){},925:function(e,t,n){},926:function(e,t,n){},927:function(e,t,n){},928:function(e,t,n){},944:function(e,t,n){"use strict";var r,o;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),function(e){e.header="1",e.footer="2",e.feed="3",e.collect="4",e.comment="5",e.code="6"}(r||(r={})),function(e){e.auto="1",e.hover="2"}(o||(o={}))},945:function(e,t,n){"use strict";function r(e,t){if((10==e.keyCode||13==e.keyCode)&&(e.ctrlKey||e.metaKey))return t()}n.d(t,"a",(function(){return r}))},946:function(e,t,n){},969:function(e,t,n){"use strict";n(887)},970:function(e,t,n){"use strict";n(888)},971:function(e,t,n){"use strict";n(889)},973:function(e,t,n){"use strict";var r=n(9),o=n(995),c=n.n(o),l=Object(r.d)({components:{EmotionIcon:c.a,Picker:function(){return n.e(48).then(n.bind(null,4598))}},emits:["selectEmoji"],setup:function(e,t){var n=t.root,o=t.emit,c=Object(r.r)(!1);var l=Object(r.r)(!1),h=Object(r.x)(c,(function(){l.value=!0,h()}));return{once:l,visible:c,toggleShow:function(){var e=n.$store.getters.USER;return e?e.isBindedPhone?void(c.value=!c.value):n.$requestBindPhoneNumber():n.$requestLogin()},hide:function(){c.value=!1},handleChange:function(e){o("selectEmoji",e.source)}}}}),h=(n(996),n(29)),component=Object(h.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"outer-click",rawName:"v-outer-click",value:e.hide,expression:"hide"}],staticClass:"emoji-container"},[n("div",{staticClass:"emoji-box",class:e.visible&&"active",on:{click:e.toggleShow}},[n("EmotionIcon",{staticClass:"icon"}),e._v(" "),n("span",[e._v("表情")])],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.once?n("Picker",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],on:{change:e.handleChange}}):e._e()],1)],1)}),[],!1,null,"9fe533ba",null);t.a=component.exports},974:function(e,t,n){"use strict";var r={props:["user"],computed:{isVisible:function(){if(this.user){var e=this.user.isBindedPhone;return this.user&&!e}return!1}},methods:{bindPhone:function(){this.$requestBindPhoneNumber()}}},o=(n(997),n(29)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"auth-card"},[n("transition",{attrs:{name:"fade"}},[e.isVisible?n("div",{staticClass:"auth-cover"},[n("span",{staticClass:"hint"}),e._v("\n      您需要\n      "),n("a",{on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.bindPhone(t)}}},[e._v("绑定手机号")]),e._v("\n      后才可在社区内发布内容。\n    ")]):e._e()]),e._v(" "),e._t("default")],2)}),[],!1,null,"7c7c7498",null);t.a=component.exports},978:function(e,t,n){},983:function(e,t,n){"use strict";n(1085);var r=n(29),component=Object(r.a)({},(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"container"},[t("em",{staticClass:"triangle"})])}],!1,null,"68da8972",null);t.a=component.exports},984:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,y=data.attrs,m=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m)},_),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 1.3335C14.3514 1.3335 14.6394 1.60546 14.6648 1.95041L14.6666 2.00016V14.0002C14.6666 14.3516 14.3947 14.6396 14.0497 14.665L14 14.6668H1.99998C1.64853 14.6668 1.36059 14.3949 1.33514 14.0499L1.33331 14.0002V2.00016C1.33331 1.64871 1.60527 1.36077 1.95023 1.33532L1.99998 1.3335H14ZM13.3333 2.66618H2.66664V13.3328H13.3333V2.66618ZM11.9219 6.7879C11.9719 6.83791 12 6.90574 12 6.97647V11.7993C12 11.9098 11.9104 11.9993 11.8 11.9993H6.81615C6.7975 11.9993 6.77945 11.9968 6.76232 11.992L3.91042 11.9847C3.79996 11.9844 3.71063 11.8947 3.7109 11.7842C3.71102 11.7313 3.73209 11.6807 3.76948 11.6433L6.52468 8.88807C6.62882 8.78393 6.79766 8.78393 6.9018 8.88807L8.17297 10.1593L11.5447 6.7879C11.6489 6.68376 11.8177 6.68376 11.9219 6.7879ZM5.99997 3.99951V5.99951H3.99997V3.99951H5.99997Z"}})]))}}},985:function(e,t,n){"use strict";n(908)},986:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,y=data.attrs,m=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,d],style:[style,v],attrs:Object.assign({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m)},_),h.concat([n("path",{attrs:{d:"M8 6L4 9L4 3L8 6Z",fill:"#8A919F"}})]))}}},988:function(e,t,n){"use strict";n(22);var r=n(5),o=n(58),c=n(48),l=n(885),h=n(854),f=n(175),d=n(851),v=n(878),y=n(180),m=n(869),_=n(850),w=n(59),k=n(270),C=n(178),O=n(919),x=n.n(O),S=n(920),T=n.n(S),V=n(921),E=n.n(V),P=n(176),I={components:{CommentForm:v.a,UserPopover:m.default,Avatar:f.a,Thumb:d.a,LikeIcon:x.a,LikeActiveIcon:T.a,CommentIcon:E.a},props:["replyList","subject","parent","reply","removable","user","mode","isHiddenReply","jjHelperItemId","jjHelperItemType"],data:function(){return{likeLock:Object(h.a)(),isReplyFormVisible:!1,isShowAll:!1,isLikeLoading:!1,replyCount:this.reply.reply_info.reply_count,extend:!1}},computed:{isMobile:function(){return this.$device.isMobile},parentReply:function(){var e,content=null===(e=this.reply.parent_reply)||void 0===e?void 0:e.reply_content;return this.hasParentRemove&&content?"该评论已被删除":content?Object(k.b)(content):""},hasParentRemove:function(){var e;return 0===(null===(e=this.reply.parent_reply)||void 0===e?void 0:e.reply_status)},currentUser:function(){var e=this.$store.getters;return"USER"in e?e.USER:null},removableReply:function(){return this.removable||this.isCurrentUsersReply()},hasAuthorBadge:function(){return this.subject.user_id===this.reply.user_info.user_id},imageUrl:function(){return this.reply.reply_info.reply_pics[0]&&this.reply.reply_info.reply_pics[0].pic_url},limitedContent:function(){return Object(y.d)(this.reply.reply_info.reply_content,{maxLineCount:this.maxLineCount,perLineLength:this.perLineLength,escapeReg:C.a})},collapsed:function(){return this.limitedContent.length<this.reply.reply_info.reply_content.length&&!this.isShowAll&&this.reply.reply_info.reply_content.length-this.limitedContent.length>this.perLineLength},replyPlaceholder:function(){return"回复".concat(this.reply.user_info.user_name,"...")},perLineLength:function(){return this.$device.isMobile?30:40},maxLineCount:function(){return this.$device.isMobile?4:6},isAutoFocus:function(){return!this.user||this.user.isBindedPhone}},methods:{parseUrlEmoji:k.b,onSyncCommentNum:function(e){"add"===e.type&&(this.replyCount=this.replyCount+(e.count||1)),"sub"===e.type&&(this.replyCount=this.replyCount-(e.count||1)),this.$emit("syncCommentNum",e)},isCurrentUsersReply:function(){return this.currentUser&&this.currentUser.user_id===this.reply.user_info.user_id},toggleLike:function(){var e=this;return this.currentUser?this.currentUser.isBindedPhone?void(this.isLikeLoading||this.$ensureAuthorized().then((function(){e.isLikeLoading=!0,e.reply.user_interact.is_digg?Object(w.c)({itemId:e.reply.reply_info.reply_id,type:6}).then((function(t){e.isLikeLoading=!1,0!==t.err_no?e.$error(t.err_msg):(e.reply.reply_info.digg_count--,e.reply.user_interact.is_digg=!e.reply.user_interact.is_digg)})):(Object(w.b)({itemId:e.reply.reply_info.reply_id,type:6}).then((function(t){e.isLikeLoading=!1,0!==t.err_no?e.$error(t.err_msg):(e.reply.reply_info.digg_count++,e.reply.user_interact.is_digg=!e.reply.user_interact.is_digg)})),e.$TEA("like_action",{like_comment_mode:e.mode}))}))):this.$requestBindPhoneNumber(P.b.interact):this.$requestLogin()},onReplyFormEmptyBlur:function(){var e=this;window.setTimeout((function(){e.isReplyFormVisible=!1}))},onSubmitted:function(){this.isReplyFormVisible=!1,this.$emit("submitted")},deleteComment:function(e){var t=this;this.$ensureAuthorized("login").then((function(){window.confirm("确定删除这条评论吗？")&&Object(_.b)({comment_id:e.reply_info.reply_comment_id,reply_id:e.reply_info.reply_id}).then((function(){t.replyList.some((function(n,r){n.reply_info.reply_id===e.reply_info.reply_id&&t.replyList.splice(r,1)})),t.$alertMsg("删除成功"),t.$emit("syncCommentNum",{type:"sub"})})).catch((function(){t.$alertMsg("删除失败，刷新后重试")}))}))}},mounted:function(){var e=this.$refs.content;if(e){var t=e.clientHeight;e.scrollHeight>t&&(this.extend=!0)}}},L=(n(998),n(29)),j=Object(L.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"subcomment"},[n("UserPopover",{attrs:{"user-id":e.reply.user_info.user_id,"show-jscore-level":!0}},[n("app-link",{staticClass:"user-link",attrs:{to:e.$userRoute(e.reply.user_info.user_id),blank:!0}},[n("Avatar",{staticClass:"avatar",attrs:{user:e.reply.user_info,size:48}})],1)],1),e._v(" "),n("div",{staticClass:"content-box"},[n("div",{staticClass:"content-wrapper"},[n("span",{staticClass:"delete",class:{removable:e.removableReply},on:{click:function(t){return e.deleteComment(e.reply)}}},[e._v("\n        删除\n      ")]),e._v(" "),n("div",{staticClass:"user-box"},[n("UserPopover",{attrs:{"user-id":e.reply.user_info.user_id,"show-jscore-level":!0}},[n("username",{staticClass:"username",attrs:{user:e.reply.user_info,universal:!0,"show-jpower-level":!1}})],1),e._v(" "),e.hasAuthorBadge&&!e.isMobile?n("span",{staticClass:"author-badge-text"},[e._v("\n          （作者）\n        ")]):e._e(),e._v(" "),e.reply.reply_user&&e.reply.reply_user.user_name&&!e.isMobile?n("div",{staticClass:"rely-box"},[n("span",[e._v("回复")]),e._v(" "),n("UserPopover",{attrs:{"user-id":e.reply.reply_user.user_id,"show-jscore-level":!0}},[n("app-link",{staticClass:"repliedname",attrs:{to:e.$userRoute(e.reply.reply_user)}},[e._v("\n              "+e._s(e.reply.reply_user.user_name)+"\n            ")])],1)],1):e._e(),e._v(" "),n("span",{staticClass:"divide"}),e._v(" "),n("time",{staticClass:"time",attrs:{datetime:e._f("iso")(1e3*e.reply.reply_info.ctime),title:new Date(1e3*e.reply.reply_info.ctime)}},[e._v("\n          "+e._s(e._f("relative")(1e3*e.reply.reply_info.ctime))+"\n        ")])],1),e._v(" "),n("div",{ref:"content",staticClass:"content",class:{extend:e.isShowAll,hasimage:!!e.imageUrl},domProps:{innerHTML:e._s(e.parseUrlEmoji(e.reply.reply_info.reply_content))}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.extend&&!e.isShowAll,expression:"extend && !isShowAll"}],staticClass:"limit-btn",on:{click:function(t){e.isShowAll=!0}}},[e._v("\n        展开\n      ")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.extend&&e.isShowAll,expression:"extend && isShowAll"}],staticClass:"limit-btn",on:{click:function(t){e.isShowAll=!1}}},[e._v("\n        收起\n      ")]),e._v(" "),e.imageUrl?n("Thumb",{staticClass:"viewable",attrs:{"data-src":e.imageUrl,url:e.imageUrl,width:160,height:160,format:"jpg"}}):e._e(),e._v(" "),e.parentReply?n("div",{staticClass:"parent-wrapper"},[e.hasParentRemove?e._e():n("div",[e._v("“")]),e._v(" "),n("div",{staticClass:"parent-content",domProps:{innerHTML:e._s(e.parentReply)}}),e._v(" "),e.hasParentRemove?e._e():n("div",[e._v("”")])]):e._e(),e._v(" "),n("div",{staticClass:"action-box"},[n("div",{staticClass:"item dig-item",class:e.reply.user_interact.is_digg&&"active",on:{click:e.toggleLike}},[e.reply.user_interact.is_digg?n("LikeActiveIcon"):n("LikeIcon"),e._v("\n          "+e._s(e.reply.reply_info.digg_count||"点赞")+"\n        ")],1),e._v(" "),e.isHiddenReply?e._e():n("div",{staticClass:"item",class:e.isReplyFormVisible&&"active",on:{click:function(t){e.isReplyFormVisible=!e.isReplyFormVisible}}},[n("CommentIcon"),e._v("\n          "+e._s(e.isReplyFormVisible?"取消回复":e.replyCount||"回复")+"\n        ")],1)])],1),e._v(" "),e.isReplyFormVisible?n("CommentForm",{staticClass:"replyform",attrs:{subject:e.subject,"jj-helper-item-id":e.jjHelperItemId,"jj-helper-item-type":e.jjHelperItemType,parent:e.parent,comment:e.reply,replyList:e.replyList,autoFocus:e.isAutoFocus,placeholder:e.replyPlaceholder,mode:e.mode},on:{emptyBlur:e.onReplyFormEmptyBlur,submitted:e.onSubmitted,syncCommentNum:e.onSyncCommentNum}}):e._e()],1)],1)}),[],!1,null,"74f0bca7",null).exports,R=n(923),A=n.n(R),D={components:{SubComment:j,MoreIcon:A.a},props:["subject","parent","expanded","removable","user","mode","isHiddenReply","hiddenSubComment","jjHelperItemId","jjHelperItemType"],data:function(){return{list:[],cursor:"0",limit:20,count:0,has_more:!0,loading:!1,showAll:!1}},computed:{canFetchMore:function(){var e=this.parent.comment_info.reply_count;return!!this.list.length&&(e>2&&e<=10&&(this.showAll=!0),this.expanded?"0"===this.cursor?this.parent.comment_info.reply_count>this.list.length:this.has_more:this.list.length&&this.parent.comment_info.reply_count>this.list.length)}},watch:{parent:function(e){this.list=e.reply_infos}},methods:{getRouterParams:function(){return{name:{2:"column",4:"pin",12:"book"}[this.subject.item_type],params:{id:this.subject.item_id}}},refetch:function(){this.$emit("refetch")},fetchMore:function(){var e=this;!this.loading&&this.has_more&&(this.loading=!0,Object(_.f)({comment_id:this.parent.comment_info.comment_id,item_id:this.subject.item_id,item_type:this.subject.item_type,cursor:this.cursor,limit:this.limit}).then((function(t){var data=t.data,n=t.count,r=t.has_more,cursor=t.cursor;e.loading=!1,e.mergeList(data),e.count=n,e.has_more=r,e.cursor=cursor})).catch((function(t){e.loading=!1,console.error(t)})))},mergeList:function(e){var t,n=this.list.reduce((function(e,t){return e[t.reply_info.reply_id]=!0,e}),{}),r=e.filter((function(e){return!n[e.reply_info.reply_id]}));(t=this.list).push.apply(t,Object(o.a)(r))},onSyncCommentNum:function(e){this.$emit("syncCommentNum",e)}},created:function(){this.list=this.hiddenSubComment?[]:this.parent.reply_infos}},M=(n(999),Object(L.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.list.length?n("div",{staticClass:"sub-comment-list"},[n("div",e._l(e.list,(function(t){return n("sub-comment",{key:t.reply_info.reply_id,staticClass:"sub-comment",attrs:{"data-jj-helper-comment-id":t.reply_info&&t.reply_info.reply_id,"data-jj-helper-item-id":e.jjHelperItemId,"data-jj-helper-item-type":e.jjHelperItemType,subject:e.subject,"jj-helper-item-id":e.jjHelperItemId,"jj-helper-item-type":e.jjHelperItemType,parent:e.parent,reply:t,replyList:e.list,removable:e.removable,user:e.user,mode:e.mode,isHiddenReply:e.isHiddenReply},on:{refetch:e.refetch,syncCommentNum:e.onSyncCommentNum}})})),1),e._v(" "),e.canFetchMore&&e.has_more?n("div",{staticClass:"fetch-more"},[e.expanded||e.showAll?e.loading?n("span",{staticClass:"fetch-more-comment"},[e._v("加载中...")]):n("span",{staticClass:"fetch-more-comment",on:{click:e.fetchMore}},[e._v("\n      查看更多回复\n      "),n("MoreIcon")],1):n("app-link",{staticClass:"fetch-more-comment",attrs:{to:e.getRouterParams(),blank:!0}},[e._v("\n      查看更多回复\n    ")])],1):e._e()]):e._e()}),[],!1,null,"681890ca",null).exports),B=n(6),N=n(986),H=n.n(N),F=n(903),U=Object(B.b)({components:{VideoSingleIcon:H.a},props:{comment:{type:Object,default:function(){return{}}}},setup:function(e,t){var n=t.root,r=Object(B.a)((function(){return n.$userPosition(e.comment.user_info)}));return{isMobile:n.$device.isMobile,position:r,getVideoDetailRoute:function(e){return{name:F.e.singleDetailRoute,params:{id:e.parent_id,sectionId:e.item_id}}}}}}),$=(n(1e3),Object(L.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-more-info"},[!e.isMobile&&e.position?n("span",{staticClass:"divide"}):e._e(),e._v(" "),e.position?n("span",{staticClass:"position"},[e._v("\n    "+e._s(e.position)+"\n  ")]):e._e(),e._v(" "),!e.isMobile||e.isMobile&&e.position?n("span",{class:{divide:!e.isMobile,dot:e.isMobile}}):e._e(),e._v(" "),n("time",{staticClass:"time",attrs:{datetime:e._f("iso")(1e3*e.comment.comment_info.ctime),title:new Date(1e3*e.comment.comment_info.ctime)}},[e._v("\n    "+e._s(e._f("relative")(1e3*e.comment.comment_info.ctime))+"\n  ")]),e._v(" "),e.comment.root_item&&e.comment.root_item.item_id?n("span",{staticClass:"dot"}):e._e(),e._v(" "),e.comment.root_item&&e.comment.root_item.item_id?n("router-link",{staticClass:"extra-info",attrs:{to:e.getVideoDetailRoute(e.comment.root_item)}},[n("div",{staticClass:"video-title"},[e._v("来自分辑-"+e._s(e.comment.root_item.title))]),e._v(" "),n("VideoSingleIcon",{staticClass:"single-video-icon"})],1):e._e()],1)}),[],!1,null,"29d7f98b",null).exports),W={components:{Avatar:f.a,Thumb:d.a,CommentForm:v.a,SubCommentList:M,UserPopover:m.default,LikeIcon:x.a,CommentIcon:E.a,LikeActiveIcon:T.a,CommentExtraInfo:$},props:["list","subject","comment","expanded","mode","isHiddenReply","hiddenSubComment","jjHelperItemId","jjHelperItemType","enterMethod"],data:function(){return{likeLock:Object(h.a)(),isReplyFormVisible:!1,isShowAll:!1,isLikeLoading:!1,parseUrlEmoji:k.b,extend:!1,replyCount:this.comment.comment_info.reply_count}},computed:{isMobile:function(){return this.$device.isMobile},isDelete:function(){var e;return null===(e=this.comment.user_info)||void 0===e?void 0:e.is_logout},currentUser:function(){var e=this.$store.getters;return"USER"in e?e.USER:null},isCurrentUsersSubject:function(){return this.currentUser&&this.currentUser.user_id===this.subject.user_id},isCurrentUsersComment:function(){return this.currentUser&&this.currentUser.user_id===this.comment.user_info.user_id},isAdmin:function(){return this.currentUser&&"admin"===this.currentUser.role},hasAuthorBadge:function(){return this.subject.user_id===this.comment.user_info.user_id},removable:function(){return this.isAdmin||this.isCurrentUsersSubject||this.isCurrentUsersComment},mobile:function(){return this.$device.isMobile},imageUrl:function(){return this.comment.comment_info.comment_pics[0]&&this.comment.comment_info.comment_pics[0].pic_url},replyPlaceholder:function(){return"回复".concat(this.comment.user_info.user_name,"...")},isAutoFocus:function(){return!this.currentUser||this.currentUser.isBindedPhone}},methods:{toggleLike:function(){var e=this;return this.currentUser?this.currentUser.isBindedPhone?void(this.isLikeLoading||this.$ensureAuthorized().then((function(){e.isLikeLoading=!0,e.comment.user_interact.is_digg?Object(w.c)({itemId:e.comment.comment_info.comment_id,type:5}).then((function(t){e.isLikeLoading=!1,0!==t.err_no?e.$error(t.err_msg):(e.comment.comment_info.digg_count--,e.comment.user_interact.is_digg=!e.comment.user_interact.is_digg)})):(Object(w.b)({itemId:e.comment.comment_info.comment_id,type:5}).then((function(t){e.isLikeLoading=!1,0!==t.err_no?e.$error(t.err_msg):(e.comment.comment_info.digg_count++,e.comment.user_interact.is_digg=!e.comment.user_interact.is_digg)})),e.$TEA("like_action",{like_comment_mode:e.mode}))}))):this.$requestBindPhoneNumber(P.b.interact):this.$requestLogin()},onReplyFormEmptyBlur:function(){var e=this;window.setTimeout((function(){e.isReplyFormVisible=!1}))},onSubmitted:function(){this.isReplyFormVisible=!1,this.$refs.subCommentList.onSubmitted()},refetch:function(){this.$emit("refetch")},deleteComment:function(e){var t=this;this.$ensureAuthorized("login").then((function(){window.confirm("确定删除这条评论吗？")&&Object(_.a)({comment_id:e.comment_info.comment_id}).then((function(){t.list.some((function(n,r){n.comment_info.comment_id===e.comment_info.comment_id&&t.list.splice(r,1)})),t.$alertMsg("删除成功"),t.$emit("syncCommentNum",{type:"sub",count:e.reply_infos.length})})).catch((function(){t.$alertMsg("删除失败，刷新后重试")}))}))},onSyncCommentNum:function(e){"add"===e.type&&(this.replyCount=this.replyCount+(e.count||1)),"sub"===e.type&&(this.replyCount=this.replyCount-(e.count||1)),this.$emit("syncCommentNum",e)}},mounted:function(){var e=this.$refs.content;if(e){var t=e.clientHeight;e.scrollHeight>t&&(this.extend=!0)}}},z=(n(1001),Object(L.a)(W,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment"},[n("UserPopover",{staticClass:"popover",attrs:{"enter-method":e.enterMethod,"user-id":e.comment.user_info.user_id,"enable-popover":Boolean(!e.isDelete),"show-jscore-level":!0}},[n("app-link",{staticClass:"user-link",attrs:{to:e.$userRoute(e.comment.user_info.user_id),blank:!0}},[n("Avatar",{staticClass:"avatar",attrs:{user:e.comment.user_info,alt:e.comment.user_info.user_name+"的头像"}})],1)],1),e._v(" "),n("div",{staticClass:"content-box"},[n("div",{staticClass:"comment-main"},[n("span",{staticClass:"delete",class:{removable:e.removable},on:{click:function(t){return e.deleteComment(e.comment)}}},[e._v("\n        删除\n      ")]),e._v(" "),n("div",{staticClass:"user-box"},[n("UserPopover",{attrs:{"enter-method":e.enterMethod,"user-id":e.comment.user_info.user_id,"enable-popover":Boolean(!e.isDelete),"show-jscore-level":!0}},[n("username",{staticClass:"username",attrs:{user:e.comment.user_info,universal:!0,"show-jscore-level":!0}})],1),e._v(" "),e.hasAuthorBadge&&!e.isMobile?n("span",{staticClass:"author-badge-text"},[e._v("\n          （作者）\n        ")]):e._e(),e._v(" "),e.isMobile?e._e():n("CommentExtraInfo",{attrs:{comment:e.comment}})],1),e._v(" "),e.isMobile?n("CommentExtraInfo",{attrs:{comment:e.comment}}):e._e(),e._v(" "),n("div",{ref:"content",staticClass:"content",class:{extend:e.extend&&e.isShowAll,hasimage:!!e.imageUrl},domProps:{innerHTML:e._s(e.parseUrlEmoji(e.comment.comment_info.comment_content))}}),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.extend&&!e.isShowAll,expression:"extend && !isShowAll"}],staticClass:"limit-btn",on:{click:function(t){e.isShowAll=!0}}},[e._v("\n        展开\n      ")]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.extend&&e.isShowAll,expression:"extend && isShowAll"}],staticClass:"limit-btn",on:{click:function(t){e.isShowAll=!1}}},[e._v("\n        收起\n      ")]),e._v(" "),e.imageUrl?n("Thumb",{staticClass:"viewable",attrs:{"data-src":e.imageUrl,url:e.imageUrl,width:160,height:160,format:"jpg"}}):e._e(),e._v(" "),n("div",{staticClass:"action-box"},[n("div",{staticClass:"action-left"},[n("div",{staticClass:"item dig-item",class:e.comment.user_interact.is_digg&&"active",on:{click:e.toggleLike}},[e.comment.user_interact.is_digg?n("LikeActiveIcon"):n("LikeIcon"),e._v("\n            "+e._s(e.comment.comment_info.digg_count||"点赞")+"\n          ")],1),e._v(" "),e.isHiddenReply?e._e():n("div",{staticClass:"item",class:e.isReplyFormVisible&&"active",on:{click:function(t){e.isReplyFormVisible=!e.isReplyFormVisible}}},[n("CommentIcon"),e._v("\n            "+e._s(e.isReplyFormVisible?"取消回复":e.replyCount||"回复")+"\n          ")],1)])])],1),e._v(" "),n("div",{staticClass:"subcomment-wrapper"},[e.isReplyFormVisible?n("CommentForm",{staticClass:"comment-form",attrs:{subject:e.subject,"jj-helper-item-id":e.jjHelperItemId,"jj-helper-item-type":e.jjHelperItemType,comment:e.comment,"reply-list":e.comment.reply_infos,"auto-focus":e.isAutoFocus,placeholder:e.replyPlaceholder,mode:e.mode},on:{emptyBlur:e.onReplyFormEmptyBlur,submitted:e.onSubmitted,syncCommentNum:e.onSyncCommentNum}}):e._e(),e._v(" "),n("SubCommentList",{ref:"subCommentList",attrs:{"hidden-sub-comment":e.hiddenSubComment,subject:e.subject,"jj-helper-item-id":e.jjHelperItemId,"jj-helper-item-type":e.jjHelperItemType,parent:e.comment,expanded:e.expanded,removable:e.isAdmin||e.isCurrentUsersSubject,user:e.currentUser,mode:e.mode,"is-hidden-reply":e.isHiddenReply},on:{refetch:e.refetch,syncCommentNum:e.onSyncCommentNum}})],1)])],1)}),[],!1,null,"1894fb95",null).exports),G={components:{ImageViewer:l.a,Comment:z},props:["subject","list","expanded","mode","isHiddenReply","hiddenSubComment","jjHelperItemId","jjHelperItemType","enterMethod"],methods:{initImageViewer:function(){this.$refs.imageViewer.attachContainer(this.$el)},refetch:function(){this.$emit("refetch")},onSyncCommentNum:function(e){this.$emit("syncCommentNum",e)}},mounted:function(){this.initImageViewer()}},K=Object(L.a)(G,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-list"},[n("ImageViewer",{ref:"imageViewer",attrs:{selector:".viewable"}}),e._v(" "),e._l(e.list,(function(t){return n("comment",{key:t.comment_id,staticClass:"comment",attrs:{"data-jj-helper-comment-id":t.comment_id,"data-jj-helper-item-id":e.jjHelperItemId,"data-jj-helper-item-type":e.jjHelperItemType,"data-jj-helper-comment-status":t.comment_info.comment_status,list:e.list,comment:t,subject:e.subject,"jj-helper-item-id":e.jjHelperItemId,"jj-helper-item-type":e.jjHelperItemType,expanded:e.expanded,"hidden-sub-comment":e.hiddenSubComment,isHiddenReply:e.isHiddenReply,mode:e.mode,"enter-method":e.enterMethod},on:{refetch:e.refetch,syncCommentNum:e.onSyncCommentNum}})}))],2)}),[],!1,null,null,null).exports,Y=n(9),Z=n(1002),X=n.n(Z),J=Object(Y.d)({props:{subject:{type:Object,required:!0},jjHelperItemId:{type:String,default:""},jjHelperItemType:{type:String,default:""}},components:{HotIcon:X.a,CommentComp:z,ImageViewer:l.a},setup:function(e){var t=Object(Y.r)([]);Object(Y.y)((function(){var n=e.subject,r=n.item_id,o=n.item_type;r&&o&&Object(_.e)({item_id:r,item_type:o}).then((function(e){return t.value=e}))}));var n=Object(Y.a)((function(){return t.value.slice(0,5)})),r=Object(Y.r)(),o=Object(Y.r)();return Object(Y.x)([r,o],(function(){r.value&&o.value&&r.value.attachContainer(o.value)})),{list:n,imageViewer:r,commentContainer:o}}}),Q=(n(1003),Object(L.a)(J,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.list.length>0?n("div",{staticClass:"container"},[n("ImageViewer",{ref:"imageViewer",attrs:{selector:".viewable"}}),e._v(" "),n("div",{staticClass:"title"},[e._v("\n    热门评论\n    "),n("HotIcon")],1),e._v(" "),n("div",{ref:"commentContainer",staticClass:"list"},e._l(e.list,(function(t){return n("CommentComp",{key:t.comment_id,attrs:{"data-jj-helper-comment-id":t.comment_id,"data-jj-helper-item-id":e.jjHelperItemId,"data-jj-helper-item-type":e.jjHelperItemType,list:e.list,comment:t,subject:e.subject,"jj-helper-item-id":e.jjHelperItemId,"jj-helper-item-type":e.jjHelperItemType,expanded:!0,mode:"top"}})})),1)],1):e._e()}),[],!1,null,"00f8bb4c",null).exports),ee={components:{CommentForm:v.a,CommentList:K,HotCommentList:Q,MoreIcon:A.a},props:["subject","expanded","sticky","forbidInput","small","hasSort","hasHot","threeSiftComment","isHiddenReply","isBestComment","hiddenSubComment","jjHelperItemId","jjHelperItemType","enterMethod"],data:function(){return{list:[],cursor:"0",limit:20,count:0,has_more:!0,loading:!1,listSize:0,sort:"new",hasLoadMore:!1}},watch:{"subject.item_id":{handler:function(e){e&&!this.$isServer&&this.fetchData()}},sortData:{handler:function(){this.$isServer||this.fetchData()}}},computed:{sortData:function(){return{new:0,hot:1}[this.sort]||0}},methods:{setSort:function(e){this.$TEA("comment_switch",{switch:e}),this.sort=e},getMore:function(){var e=this;if(!this.expanded){var t=this.$router.resolve({name:{2:"column",4:"pin",12:"book"}[this.subject.item_type],params:{id:this.subject.item_id},hash:"#comment"}).href;window.open(t,"_blank")}if(this.expanded&&!this.hasLoadMore){this.hasLoadMore=!0,this.fetchMoreIfConditionIsSatisfied();var n=this.$getBean("eventBus");n.onVmLife(this,n.eventType.ROOT_CONTAINER_SCROLL,(function(){e.fetchMoreIfConditionIsSatisfied()})),Object(c.l)(this.$el,(function(){e.fetchMoreIfConditionIsSatisfied()}))}},fetchMore:function(){var e=this;if(!this.loading&&this.has_more){this.loading=!0;var t=this.subject,n=t.item_id,r=t.item_type;Object(_.d)({item_id:n,item_type:r,cursor:this.cursor,limit:this.limit,sort:this.sortData}).then((function(t){var data=t.data,cursor=t.cursor,n=t.count,r=t.has_more;e.listSize=data.length,e.loading=!1,e.mergeList(data),e.count=n,e.cursor=cursor,e.has_more=r})).catch((function(t){e.loading=!1,console.error(t)}))}},mergeList:function(e){var t,n=this.list.reduce((function(e,t){return e[t.comment_id]=!0,e}),{}),r=e.filter((function(e){return!n[e.comment_id]}));(t=this.list).push.apply(t,Object(o.a)(r))},fetchMoreIfConditionIsSatisfied:function(){Object(c.b)(this.$el)>-200&&this.fetchMore()},onRefetch:function(){this.fetchData()},onSyncCommentNum:function(e){this.$emit("syncCommentNum",e)},handleBookCommentScroll:function(){var e=this,t=document.documentElement.clientHeight,n=document.body.scrollHeight;if(document.documentElement.scrollTop+t>=n&&this.has_more&&!this.threeSiftComment){var r=this.subject,c=r.item_id,l=r.item_type;this.limit=this.expanded?20:5,Object(_.d)({item_id:c,item_type:l,cursor:this.cursor,limit:this.limit,sort:this.sortData}).then((function(t){var data=t.data,cursor=t.cursor,n=t.count,r=t.has_more,c=data.filter((function(e){return 5===e.comment_info.comment_status}));e.list=[].concat(Object(o.a)(e.list),Object(o.a)(c)),e.cursor=cursor,e.count=n,e.has_more=r}))}},fetchData:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,data,cursor,l,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.subject,r=n.item_id,o=n.item_type,!e.loading&&r){t.next=3;break}return t.abrupt("return");case 3:return e.loading=!0,e.limit=e.expanded?20:5,e.cursor="0",e.count=0,e.has_more=!0,t.prev=8,t.next=11,Object(_.d)({item_id:r,item_type:o,cursor:e.cursor,limit:e.limit,sort:e.sortData});case 11:c=t.sent,data=c.data,cursor=c.cursor,l=c.count,h=c.has_more,e.listSize=data.length,e.loading=!1,e.list=data,e.threeSiftComment&&data.length>3&&(e.list=e.list.filter((function(e){return 5===e.comment_info.comment_status})),e.list.length>3&&e.$emit("isListLenMore3"),e.list&&0!==e.list.length&&e.$emit("isShowCommentMode"),e.list=e.list.slice(0,3)),e.count=l,e.cursor=cursor,e.has_more=h,e.isBestComment&&(e.list=e.list.filter((function(e){return 5===e.comment_info.comment_status})),addEventListener("scroll",e.handleBookCommentScroll)),t.next=30;break;case 26:t.prev=26,t.t0=t.catch(8),e.loading=!1,console.error(t.t0);case 30:case"end":return t.stop()}}),t,null,[[8,26]])})))()}},mounted:function(){this.fetchData()},beforeDestroy:function(){removeEventListener("scroll",this.handleBookCommentScroll)}},te=(n(1004),Object(L.a)(ee,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",class:e.small&&"small",attrs:{"data-jj-helper":"comment-container"}},[e.forbidInput?e._e():n("CommentForm",{staticClass:"comment-form",class:{hasborder:e.list&&e.list.length},attrs:{commentList:e.list,subject:e.subject,"jj-helper-item-id":e.jjHelperItemId,"jj-helper-item-type":e.jjHelperItemType,small:e.small},on:{syncCommentNum:e.onSyncCommentNum}}),e._v(" "),e.hasHot?n("HotCommentList",{staticClass:"hot-list hasborder",attrs:{subject:e.subject,"jj-helper-item-id":e.jjHelperItemId,"jj-helper-item-type":e.jjHelperItemType}}):e._e(),e._v(" "),e.list.length?n("div",{staticClass:"comment-list-wrapper"},[n("div",{staticClass:"title"},[e._v("\n      全部评论（"+e._s(e.subject.comment_count)+"）\n      "),e.hasSort?n("div",{staticClass:"sort"},[n("div",{staticClass:"item",class:"new"===e.sort&&"active",on:{click:function(t){return e.setSort("new")}}},[e._v("\n          最新\n        ")]),e._v(" "),n("div",{staticClass:"divide"}),e._v(" "),n("div",{staticClass:"item",class:"hot"===e.sort&&"active",on:{click:function(t){return e.setSort("hot")}}},[e._v("\n          最热\n        ")])]):e._e()]),e._v(" "),n("comment-list",{staticClass:"comment-list",attrs:{list:e.list,"enter-method":e.enterMethod,subject:e.subject,"jj-helper-item-id":e.jjHelperItemId,"jj-helper-item-type":e.jjHelperItemType,expanded:e.expanded,isHiddenReply:e.isHiddenReply,"hidden-sub-comment":e.hiddenSubComment,mode:e.sort},on:{refetch:e.onRefetch,syncCommentNum:e.onSyncCommentNum}}),e._v(" "),e.list.length<e.subject.comment_count&&e.has_more?n("p",{staticClass:"fetch-more-comment",on:{click:e.getMore}},[e._v("\n      "+e._s(e.hasLoadMore?"加载中...":"查看全部 "+e.subject.comment_count+" 条回复")+"\n      "),e.expanded&&!e.hasLoadMore?n("MoreIcon"):e._e()],1):e._e()],1):e._e()],1)}),[],!1,null,"4e43e7ba",null));t.a=te.exports},994:function(e,t,n){!function(){function t(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function n(e,n){var r=function(e,n){var r=t(e)*t(n);if(0===r)return 0;var o=function(e,t){return e.x*t.x+e.y*t.y}(e,n)/r;return o>1&&(o=1),Math.acos(o)}(e,n);return function(e,t){return e.x*t.y-t.x*e.y}(e,n)>0&&(r*=-1),180*r/Math.PI}var r=function(e){this.handlers=[],this.el=e};function o(e,t){var n=new r(e);return n.add(t),n}r.prototype.add=function(e){this.handlers.push(e)},r.prototype.del=function(e){e||(this.handlers=[]);for(var i=this.handlers.length;i>=0;i--)this.handlers[i]===e&&this.handlers.splice(i,1)},r.prototype.dispatch=function(){for(var i=0,e=this.handlers.length;i<e;i++){var t=this.handlers[i];"function"==typeof t&&t.apply(this.el,arguments)}};var c=function(e,option){this.element="string"==typeof e?document.querySelector(e):e,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var t=function(){};this.rotate=o(this.element,option.rotate||t),this.touchStart=o(this.element,option.touchStart||t),this.multipointStart=o(this.element,option.multipointStart||t),this.multipointEnd=o(this.element,option.multipointEnd||t),this.pinch=o(this.element,option.pinch||t),this.swipe=o(this.element,option.swipe||t),this.tap=o(this.element,option.tap||t),this.doubleTap=o(this.element,option.doubleTap||t),this.longTap=o(this.element,option.longTap||t),this.singleTap=o(this.element,option.singleTap||t),this.pressMove=o(this.element,option.pressMove||t),this.twoFingerPressMove=o(this.element,option.twoFingerPressMove||t),this.touchMove=o(this.element,option.touchMove||t),this.touchEnd=o(this.element,option.touchEnd||t),this.touchCancel=o(this.element,option.touchCancel||t),this._cancelAllHandler=this.cancelAll.bind(this),window.removeEventListener("scroll",this._cancelAllHandler),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}};c.prototype={start:function(e){if(e.touches){this.now=Date.now(),this.x1=e.touches[0].pageX,this.y1=e.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(e,this.element),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var n=this.preV;if(e.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var r={x:e.touches[1].pageX-this.x1,y:e.touches[1].pageY-this.y1};n.x=r.x,n.y=r.y,this.pinchStartLen=t(n),this.multipointStart.dispatch(e,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout(function(){this.longTap.dispatch(e,this.element),this._preventTap=!0}.bind(this),750)}},move:function(e){if(e.touches){var r=this.preV,o=e.touches.length,c=e.touches[0].pageX,l=e.touches[0].pageY;if(this.isDoubleTap=!1,o>1){var h=e.touches[1].pageX,f=e.touches[1].pageY,d={x:e.touches[1].pageX-c,y:e.touches[1].pageY-l};null!==r.x&&(this.pinchStartLen>0&&(e.zoom=t(d)/this.pinchStartLen,this.pinch.dispatch(e,this.element)),e.angle=n(d,r),this.rotate.dispatch(e,this.element)),r.x=d.x,r.y=d.y,null!==this.x2&&null!==this.sx2?(e.deltaX=(c-this.x2+h-this.sx2)/2,e.deltaY=(l-this.y2+f-this.sy2)/2):(e.deltaX=0,e.deltaY=0),this.twoFingerPressMove.dispatch(e,this.element),this.sx2=h,this.sy2=f}else null!==this.x2?(e.deltaX=c-this.x2,e.deltaY=l-this.y2):(e.deltaX=0,e.deltaY=0),this.pressMove.dispatch(e,this.element);this.touchMove.dispatch(e,this.element),this._cancelLongTap(),this.x2=c,this.y2=l,o>1&&e.preventDefault()}},end:function(e){if(e.changedTouches){this._cancelLongTap();var t=this;e.touches.length<2&&(this.multipointEnd.dispatch(e,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(e.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout((function(){t.swipe.dispatch(e,t.element)}),0)):(this.tapTimeout=setTimeout((function(){t._preventTap||t.tap.dispatch(e,t.element),t.isDoubleTap&&(t.doubleTap.dispatch(e,t.element),clearTimeout(t.singleTapTimeout),t.isDoubleTap=!1)}),0),t.isDoubleTap||(t.singleTapTimeout=setTimeout((function(){t.singleTap.dispatch(e,t.element)}),250))),this.touchEnd.dispatch(e,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}},cancelAll:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)},cancel:function(e){this.cancelAll(),this.touchCancel.dispatch(e,this.element)},_cancelLongTap:function(){clearTimeout(this.longTapTimeout)},_cancelSingleTap:function(){clearTimeout(this.singleTapTimeout)},_swipeDirection:function(e,t,n,r){return Math.abs(e-t)>=Math.abs(n-r)?e-t>0?"Left":"Right":n-r>0?"Up":"Down"},on:function(e,t){this[e]&&this[e].add(t)},off:function(e,t){this[e]&&this[e].del(t)},destroy:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,null}},e.exports=c}()},995:function(e,t,n){n(17),n(15),n(11),n(7),n(14);var r=n(42),o=n(44);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}e.exports={functional:!0,render:function(e,t){var n=t._c,data=(t._v,t.data),l=t.children,h=void 0===l?[]:l,f=data.class,d=data.staticClass,style=data.style,v=data.staticStyle,y=data.attrs,m=void 0===y?{}:y,_=o(data,["class","staticClass","style","staticStyle","attrs"]);return n("svg",function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){r(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({class:[f,d],style:[style,v],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},m)},_),h.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.00002 0.666504C12.0501 0.666504 15.3334 3.94975 15.3334 7.99984C15.3334 12.0499 12.0501 15.3332 8.00002 15.3332C3.94993 15.3332 0.666687 12.0499 0.666687 7.99984C0.666687 3.94975 3.94993 0.666504 8.00002 0.666504ZM8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM10.6667 5.66667V7.66667H9.33333V5.66667H10.6667ZM6.66667 5.66667V7.66667H5.33333V5.66667H6.66667ZM10.0767 9.33333H11.0495C11.1804 9.33333 11.2866 9.43951 11.2866 9.57048C11.2866 9.60754 11.2779 9.64409 11.2612 9.67718L11.244 9.71053C10.6294 10.8739 9.40726 11.6667 7.99998 11.6667C6.61523 11.6667 5.40977 10.8991 4.7859 9.76612L4.73786 9.67593C4.67845 9.56052 4.72385 9.4188 4.83926 9.35939C4.87253 9.34226 4.90941 9.33333 4.94683 9.33333H5.92347C6.02396 9.33332 6.11908 9.37865 6.18238 9.4567C6.26207 9.55496 6.32833 9.62955 6.38117 9.68046C6.80074 10.0847 7.37133 10.3333 7.99998 10.3333C8.63289 10.3333 9.20694 10.0814 9.62728 9.67224C9.67791 9.62296 9.74135 9.55121 9.8176 9.45698C9.88089 9.37877 9.97611 9.33333 10.0767 9.33333Z"}})]))}}},996:function(e,t,n){"use strict";n(911)},997:function(e,t,n){"use strict";n(912)},998:function(e,t,n){"use strict";n(922)},999:function(e,t,n){"use strict";n(924)}}]);