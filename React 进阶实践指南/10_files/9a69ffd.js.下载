(window.webpackJsonp=window.webpackJsonp||[]).push([[63,13],{1007:function(t,e,o){},1045:function(t,e,o){"use strict";o(1091);var n=o(30),component=Object(n.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"video-label"},[this._v("视频")])}),[],!1,null,"5e209804",null);e.a=component.exports},1077:function(t,e,o){},1091:function(t,e,o){"use strict";o(1007)},1167:function(t,e,o){t.exports=o.p+"5e2cfe768dbb98a0bf497ff46eec11fe.svg"},1168:function(t,e,o){t.exports=o.p+"37ca4f63b2d6ce3142b550147fe4476c.svg"},1169:function(t,e,o){"use strict";o(1077)},1193:function(t,e,o){"use strict";var n=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"title"},[this._v("未登录")]),this._v(" "),e("div",{staticClass:"desc"},[this._v("注册或登录后即可继续操作")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("img",{attrs:{src:o(1167)}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("img",{attrs:{src:o(1168)}})])}],r=o(19),c={data:function(){return{show:!1}},computed:{isWechat:function(){return Object(r.f)()}},filters:{},methods:{loginWithWechat:function(){return this.$getBean("oauthBusiness").loginWithWechat()},close:function(){this.show=!1},authoLogin:function(){this.show=!1,this.$requestLogin()}},mounted:function(){var t=this,e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.AUTH_WECHAT_QUICK_LOGIN,(function(){t.$requestLogin()}))}},l=(o(1169),o(30)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.show?o("div",{staticClass:"wechat-quick-login"},[o("div",{staticClass:"quick-box"},[t._m(0),t._v(" "),o("div",{staticClass:"auth-box"},[o("div",{staticClass:"auth-btn wx",on:{click:t.loginWithWechat}},[t._m(1),t._v(" "),o("span",[t._v("微信快捷登录")])]),t._v(" "),o("div",{staticClass:"auth-btn jj",on:{click:t.authoLogin}},[t._m(2),t._v(" "),o("span",[t._v("稀土掘金账号登录")])])]),t._v(" "),o("div",{staticClass:"agreement-box"},[t._v("\n      注册登录即表示同意\n      "),o("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/terms",expression:"'/terms'",modifiers:{blank:!0}}]},[t._v("用户协议")]),t._v("\n      、\n      "),o("a",{directives:[{name:"link",rawName:"v-link.blank",value:"/privacy",expression:"'/privacy'",modifiers:{blank:!0}}]},[t._v("隐私政策")])]),t._v(" "),o("div",{staticClass:"footer"},[o("div",{staticClass:"box",on:{click:t.close}},[t._v("取消")])])])]):t._e()}),n,!1,null,"3a1cf91f",null);e.a=component.exports},1194:function(t,e,o){"use strict";o(44),o(55);var n=o(7),r=o(177),c=o(24),l=o(179),d=o(104),f=Object(n.b)({components:{BTooltip:r.Tooltip},props:{bookInfo:{type:Object,default:function(){return{}}},eventPage:{type:String,default:""}},emits:["read","fetch"],setup:function(t,e){var o=Object(n.a)((function(){var t,o;return(null===(o=null===(t=e.root.$store.state)||void 0===t?void 0:t.auth)||void 0===o?void 0:o.user)||null})),r=e.root.$getBean("eventBus"),f=Object(n.u)(),m=Object(n.a)((function(){var e,n,r;if(t.bookInfo.isBorrowing){var c=null===(n=null===(e=t.bookInfo)||void 0===e?void 0:e.reading_progress)||void 0===n?void 0:n.last_section_id;return"0"!==c&&c?"继续学习":"立即学习"}return(null===(r=t.bookInfo)||void 0===r?void 0:r.borrowTimes)>0&&o.value.is_vip?"再次借阅":"VIP借阅"})),h=Object(n.a)((function(){return t.bookInfo.isBorrowing?"有效期至 ".concat(Object(c.a)(1e3*t.bookInfo.validEndTime,"YYYY-MM-DD")):"借过".concat(t.bookInfo.borrowTimes,"次")})),v=Object(n.f)("refreshBook",(function(){return null})),_=Object(d.b)((function(){e.emit("fetch"),v()}),500);Object(n.j)((function(){r.on(r.eventType.SHOW_VIP_FETCH,(function(){_()}))})),Object(n.k)((function(){r.off(r.eventType.SHOW_VIP_FETCH)}));return{buttonVipTitle:m,buttonVipDescript:h,handleClick:function(){var n={event_page:t.eventPage,book_id:t.bookInfo.id,author_id:t.bookInfo.user_info.user_id,platform:e.root.$device.isMobile?"h5":"web"};return e.root.$TEA("member_rent_click",n),o.value?o.value.isBindedPhone?void(t.bookInfo.isBorrowing?e.emit("read"):o.value.is_vip?r.emit(r.eventType.SHOW_VIP_BORROW_MODAL,t.bookInfo,n):f.push({name:"vipIndex",query:{utm_source:window.location.pathname.includes("section")?"course_section":"course_detail",utm_medium:"rent"}})):e.root.$requestBindPhoneNumber(l.b,{toUrl:location.href}):e.root.$requestLogin()},currentUser:o}}}),m=(o(1333),o(30)),component=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vip-borrow-button"},[n("BTooltip",{staticClass:"tooltip",attrs:{content:"如果您下单购买了借阅中或曾经借阅过的课程，我们将把消耗的借阅卡退还给您，每门课程最多退还1张",theme:"light",placement:"bottom",disabled:!t.bookInfo.isBorrowing||t.$device.isMobile,"max-width":"244px"}},[t.bookInfo.canVipBorrow?n("div",{staticClass:"vip-borrow",on:{click:t.handleClick}},[t.bookInfo.isBorrowing?n("img",{staticClass:"mark",attrs:{src:o(1332),alt:"借阅中"}}):t._e(),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(t.buttonVipTitle))]),t._v(" "),t.bookInfo.borrowTimes>0&&t.currentUser.is_vip?n("div",{staticClass:"descript"},[t._v("\n        "+t._s(t.buttonVipDescript)+"\n      ")]):t._e()]):t._e()])],1)}),[],!1,null,"150d6eee",null);e.a=component.exports},1203:function(t,e,o){},1204:function(t,e,o){},1205:function(t,e,o){},1247:function(t,e,o){"use strict";o(16),o(15),o(11),o(6),o(14),o(39);var n=o(0),r=o(4),c=o(84),l=o(68),d=o(858),f=o(178),m=o(1313),h=o(943),v=o(1045),_=o(219);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function C(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var k={props:["info","newuser","inSearchFeed","searchWord","inCourseSearch"],data:function(){return{observer:null,isMobile:!1,defaultBookThumbUrl:l.c,actionItem:{more:{active:!1}}}},components:{VideoLabel:v.a,SaleTooltip:m.a,Avatar:f.a,Thumb:d.a},computed:C(C({isVideoCourse:function(){var t,e;return(null===(e=null===(t=this.info)||void 0===t?void 0:t.base_info)||void 0===e?void 0:e.course_type)===_.a.video},selfDescription:function(){return this.$userPosition(this.author)},showSearchMore:function(){return"/search"===this.$route.path&&"12"!==this.$route.query.type},userWroteBookView:function(){return"user"===this.$route.name&&"wrote"===this.$route.query.type},hidePrice:function(){return"bookWapBought"===this.$route.name},hasDiscount:function(){return Object(h.c)(this.info.discount)},isMobileBrowser:function(){return this.$device.isMobile}},Object(c.mapGetters)({user:r.USER})),{},{isAdmin:function(){var t,e=this.user||{};return null===(t=null==e?void 0:e.roles)||void 0===t?void 0:t.isAdmin},isEditor:function(){var t=this.user||{};return this.author.id===t.id},routeCoursePage:function(){var t=this.info,e=t.id,o={name:"",params:{}},n=t.readLog||{},r=n.sectionId,c=n.sign;if(r){var l=this.isMobileBrowser;o={name:this.isVideoCourse?l?"videoCourseWapSection":"videoCourseSection":l?"bookWapSection":"bookSection",params:{id:e,sectionId:r},hash:c}}else o={name:this.isVideoCourse?"videoCourseInfo":"bookInfo",params:{id:e}};return o},author:function(){var t={},e=this.info.user;return e&&(t=Object.assign(e,{id:e.user_id})),t},visibleReview:function(){return 1===this.info.verifyStatus&&"user"===this.$route.name},visibleOrderEntry:function(){var t;return"user"===this.$route.name&&this.info.user.id===(null===(t=this.user)||void 0===t?void 0:t.id)},isFree:function(){return this.info&&0===this.info.price}}),filters:{f_bookInfo:function(t){return{name:"bookInfo",params:{id:t.id}}},f_duration:function(t){if(t<0||!t)return"0秒";if(0<=t&&t<60)return t+"秒";var e=Math.floor(t/60),s=Math.floor(t%60);return s>0?e+"分"+s+"秒":e+"分"}},methods:{computeSalePrice:h.a,clickBook:function(){var t,e=this.info;this.$TEA("book_card_click",{is_purchased:(null==e?void 0:e.isBuy)?1:0,book_id:e.booklet_id,book_price:e.base_info.price,book_category:null===(t=e.base_info)||void 0===t?void 0:t.category_id,author_id:this.author.id,is_presale:e.isFinished?0:1,book_discount:this.hasDiscount?this.info.discount.rate:10,page:"courseIndex"===this.$route.name?"homepage_books":"homepage_user"})},gotoEditView:function(){var t=this.info.id;window.open("/editor/".concat(this.isVideoCourse?"video":"book","/").concat(t,"/section"),"_self")},buyBook:function(){this.isAdmin||this.isEditor||this.$emit("buyBook",this.info)},toggleActivateActionItem:function(t){var e=this;Object.keys(this.actionItem).forEach((function(o){e.actionItem[o].active=t===o&&!e.actionItem[o].active}))},gotoOrderView:function(t){window.open("/book/order/".concat(t),"_blank")},goToList:function(t){t.preventDefault(),this.$router.push({query:C(C({},this.$route.query),{},{type:12})})},handleBookVisible:function(t){if(t){var e=this.info;this.$TEA("book_card_display",{book_id:e.booklet_id,is_purchased:(null==e?void 0:e.isBuy)?1:0,book_price:e.base_info.price,book_category:e.base_info.category_id,author_id:this.author.id,is_presale:e.isFinished?0:1,book_discount:this.hasDiscount?this.info.discount.rate:10,page:"courseIndex"===this.$route.name?"homepage_books":"homepage_user"})}}},mounted:function(){var t=this,e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.ROOT_CONTAINER_CLICK,(function(){Object.keys(t.actionItem).forEach((function(e){t.actionItem[e].active=!1}))})),this.isMobile=document.body.clientWidth<960||this.isMobileBrowser}},w=(o(1331),o(30)),component=Object(w.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"visible-change",rawName:"v-visible-change.once",value:t.handleBookVisible,expression:"handleBookVisible",modifiers:{once:!0}}],on:{click:t.clickBook}},[n("app-link",{staticClass:"item",class:{search:t.inSearchFeed&&!t.inCourseSearch},attrs:{tag:"div",to:t.routeCoursePage,blank:!0,"data-book-id":t.info.id}},[n("div",{staticClass:"poster"},[n("thumb",{staticClass:"poster-img",attrs:{alt:"「"+t.info.title+"」封面",url:t.info.cover,default:t.defaultBookThumbUrl,quality:95,width:100,height:140}}),t._v(" "),t.isVideoCourse?n("VideoLabel"):t._e()],1),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"title"},[t.info.is_new?n("span",{staticClass:"presale"},[t._v("新品")]):t._e(),t._v(" "),t.info.canVipBorrow?n("div",{staticClass:"vip-icon"},[t._v("VIP")]):t._e(),t._v(" "),n("TextHighlight",{attrs:{text:t.info.title,enableHighlight:!!t.inSearchFeed,keyword:t.searchWord,"highlight-class":"keyword"}})],1),t._v(" "),n("TextHighlight",{staticClass:"desc",attrs:{text:t.info.abstract,enableHighlight:!!t.inSearchFeed,keyword:t.searchWord,"highlight-class":"keyword"}}),t._v(" "),n("div",{staticClass:"author"},[n("div",{staticClass:"author-info",on:{click:function(t){t.stopPropagation()}}},[n("object",[n("app-link",{staticClass:"xiaoce-user",attrs:{to:t.$userRoute(t.author),blank:!0,"st:name":"author","st:state":t.author.id}},[n("avatar",{staticClass:"hero",attrs:{user:t.author,alt:t.author.username+"的头像"}}),t._v(" "),n("username",{staticClass:"author-name",attrs:{user:t.author}})],1)],1)]),t._v(" "),n("div",{staticClass:"author-desc"},[n("span",{staticClass:"self-description"},[t._v("\n            "+t._s(t.selfDescription)+"\n          ")])])]),t._v(" "),n("div",{staticClass:"other"},[n("object",[n("app-link",{staticClass:"full-link",attrs:{tag:"div",to:t.routeCoursePage,blank:!0}})],1),t._v(" "),!t.info.isBuy&&t.info.price>0?n("div",{staticClass:"price",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.buyBook(e)}}},[t.newuser&&!t.hasDiscount?n("div",{staticClass:"price-newuser"},[n("span",[t._v("￥"+t._s(t.computeSalePrice(t.info.price,5)))]),t._v(" "),n("span",{staticClass:"yuanjia"},[t._v("￥"+t._s(t.info.price)+" ")])]):n("div",{staticClass:"price-text"},[t._v("￥"+t._s(t.info.price))]),t._v(" "),t.hasDiscount?n("sale-tooltip",{style:{bottom:0},attrs:{"is-break":!0,info:t.info}}):t._e()],1):t._e(),t._v(" "),t.info.isBuy||0!==t.info.price?t._e():n("div",{staticClass:"price"},[t._v("免费")]),t._v(" "),t.info.isBuy&&!t.userWroteBookView?n("div",{staticClass:"price bought"},[t._v("\n          已购买\n        ")]):t._e(),t._v(" "),t.info.isBuy&&t.userWroteBookView?n("div",{staticClass:"price bought"},[0===t.info.price?n("span",[t._v("免费")]):n("span",[t._v("￥"+t._s(t.info.price)+" ")]),t._v(" "),t.hasDiscount?n("sale-tooltip",{style:{bottom:0},attrs:{"is-break":!0,info:t.info}}):t._e()],1):t._e(),t._v(" "),n("div",{staticClass:"messages"},[n("span",{class:{message:t.info.isFinished}},[t._v("\n            "+t._s(t.info.isFinished?"已完结":"")+"\n          ")]),t._v(" "),n("span",{staticClass:"message"},[n("span",[t._v("\n              "+t._s(t.info.isFinished?"":"已更新")+t._s(t.info.sectionCount||0)+"小节\n            ")])]),t._v(" "),t.isFree?t._e():n("span",{staticClass:"message"},[n("span",[t._v(t._s(t.info.buyerCount))]),t._v(" "),n("span",[t._v("人已购买")])])]),t._v(" "),t.showSearchMore&&!t.isMobile?n("div",{staticClass:"go-to-list",attrs:{"data-tea":"book"},on:{click:t.goToList}},[t._v("\n          更多课程>\n        ")]):t._e()]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.visibleReview,expression:"visibleReview"}],staticClass:"review"},[t._v("审核中")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.hasDiscount,expression:"hasDiscount"}],staticClass:"footer-bar"})],1),t._v(" "),t.isEditor?n("div",{staticClass:"more",class:{open:t.actionItem.more.active},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleActivateActionItem("more")}}},[n("img",{staticClass:"more-icon",attrs:{src:o(1328)}}),t._v(" "),n("ul",{staticClass:"more-list"},[n("li",{staticClass:"item",on:{click:t.gotoEditView}},[t._v("编辑")]),t._v(" "),t.visibleOrderEntry?n("li",{staticClass:"item",on:{click:function(e){return t.gotoOrderView(t.info.id)}}},[t._v("\n          查看订单数据\n        ")]):t._e()])]):t._e(),t._v(" "),t.hidePrice?t._e():n("div",{staticClass:"m-aside"},[!t.info.isBuy&&t.info.price>0?n("div",{staticClass:"price",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.buyBook(e)}}},[t._v("\n        ￥"+t._s(t.info.price)+"\n        "),t.hasDiscount?n("sale-tooltip",{staticClass:"tooltip",attrs:{"is-break":!0,info:t.info,direction:"right"}}):t._e()],1):t._e(),t._v(" "),!t.info.isBuy&&t.isFree?n("div",{staticClass:"price"},[t._v("免费")]):t._e(),t._v(" "),t.info.isBuy?n("div",{staticClass:"price bought"},[t._v("已购")]):t._e()])])],1)}),[],!1,null,"51afd9f7",null);e.a=component.exports},1294:function(t,e,o){"use strict";o(16),o(15),o(11),o(6),o(14);var n=o(0),r=o(48),c=o(886);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var d={data:function(){return{enterTime:0}},mounted:function(){this.handleVisibilityChange(),Object(r.o)(this.handleVisibilityChange)},methods:{recordPageStayTime:function(){if(this.enterTime){var t;t=(new Date-this.enterTime)/1e3;var e=Object(c.b)();this.$TEA("article_detail_leave",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({article_id:this.$route.params.id,read_time:t},e)),this.enterTime=0}},handleVisibilityChange:function(){var t=Object(r.d)();document[t]?this.recordPageStayTime():this.enterTime=new Date}},beforeDestroy:function(){Object(r.q)(this.handleVisibilityChange)}},f=o(30),component=Object(f.a)(d,void 0,void 0,!1,null,null,null);e.a=component.exports},1313:function(t,e,o){"use strict";var n=o(943);function r(t){return t<10?"0".concat(t):t}var c={props:["info","direction","isBreak"],data:function(){return{date:{days:0,hours:0,minutes:0,seconds:0},timerDate:null,timerMS:null,MS:99,salePrice:0}},computed:{discountInfo:function(){return this.info.discount},toolClass:function(){return[this.direction?this.direction:"left",this.isBreak?"break-text":""]},showText:function(){return"限时优惠价 ".concat(this.salePrice," 元")},countDownText:function(){var t=this.date,e=t.days,o=t.hours,n=t.minutes,r=t.seconds;return"倒计时 ".concat(e," 天 ").concat(o,":").concat(n,":").concat(r)},showMSText:function(){var t=this.MS;return".".concat(r(t))}},methods:{computedTime:function(){var t=+new Date,e=this.discountInfo.endTime-t;if(e>0){var o=Math.floor(e/1e3/60/60/24),n=Math.floor(e/1e3/60/60%24),c=Math.floor(e/1e3/60%60),l=Math.floor(e/1e3%60);n=r(n),c=r(c),l=r(l),this.date={days:o,hours:n,minutes:c,seconds:l}}else clearInterval(this.timerMS),this.MS=0,window.location.reload();this.timerMS||this.runMSCountDown()},runDateCountDown:function(){var t=this;this.timerDate=setInterval((function(){t.computedTime()}),1e3)},runMSCountDown:function(){var t=this;this.timerMS=setInterval((function(){var e=t.MS;e>0?e-=1:e=99,t.MS=e}),10)}},mounted:function(){var t=this.discountInfo.rate;t&&(this.computedTime(),this.runDateCountDown(),this.salePrice=Object(n.a)(this.info.price,t))},beforeDestroy:function(){clearInterval(this.timerDate),clearInterval(this.timerMS)}},l=(o(1330),o(30)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tooltip",class:t.toolClass},[n("span",{staticClass:"pre-text is-count-down"},[n("img",{staticClass:"gift",attrs:{src:o(1329)}}),t._v(" "),n("span",[t._v(t._s(t.showText))])]),t._v(" "),n("span",{staticClass:"count-down"},[n("span",[t._v(t._s(t.countDownText))]),t._v(" "),n("div",{staticClass:"ms"},[t._v(t._s(t.showMSText))])])])}),[],!1,null,"4a6ac94a",null);e.a=component.exports},1328:function(t,e,o){t.exports=o.p+"3f349bb73a7294ed233c7cce27d1596d.svg"},1329:function(t,e,o){t.exports=o.p+"img/gift.9a8f3aa.png"},1330:function(t,e,o){"use strict";o(1203)},1331:function(t,e,o){"use strict";o(1204)},1332:function(t,e,o){t.exports=o.p+"d9fd35ba8ea6d69f1746f621a0dd8433.svg"},1333:function(t,e,o){"use strict";o(1205)},1364:function(t,e,o){o(16),o(15),o(11),o(6),o(14);var n=o(40),r=o(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,m=data.staticClass,style=data.style,h=data.staticStyle,v=data.attrs,_=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,m],style:[style,h],attrs:Object.assign({width:"41",height:"40",viewBox:"0 0 41 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{d:"M3.5683 16.6721C4.83689 15.0647 4.67148 12.732 4.93583 11.0928C14.9591 22.2167 22.2842 29.5021 24.7168 31.6872L22.5492 35.7053C19.4193 34.0134 15.6759 30.5945 14.1955 29.0966C10.8122 25.0256 5.64796 18.9631 3.5683 16.6721Z",fill:"url(#paint0_linear_12722_147437)"}}),o("path",{attrs:{d:"M36.7731 27.0578C37.2688 25.1263 37.3392 24.0411 37.459 23.4082C33.2726 28.2101 26.244 30.2321 23.3198 30.6597L22.5447 35.7006C29.3924 33.8083 34.4646 30.1351 36.6706 28.7842C36.6706 28.0724 36.6706 27.7928 36.7731 27.0578Z",fill:"url(#paint1_linear_12722_147437)"}}),o("path",{attrs:{d:"M37.5098 23.3065L35.8166 22.0752H13.3974C16.8039 27.1232 21.3836 30.3351 23.2476 31.31C31.6202 29.5863 36.2443 25.2561 37.5098 23.3065Z",fill:"url(#paint2_linear_12722_147437)"}}),o("mask",{staticStyle:{"mask-type":"alpha"},attrs:{id:"mask0_12722_147437",maskUnits:"userSpaceOnUse",x:"13",y:"22",width:"25",height:"10"}},[o("path",{attrs:{d:"M37.5098 23.3055L35.8166 22.0742H13.3974C16.8039 27.1222 21.3836 30.3341 23.2476 31.3091C31.6202 29.5853 36.2443 25.2551 37.5098 23.3055Z",fill:"url(#paint3_linear_12722_147437)"}})]),o("g",{attrs:{mask:"url(#mask0_12722_147437)"}},[o("g",{attrs:{filter:"url(#filter0_f_12722_147437)"}},[o("circle",{attrs:{cx:"26.2133",cy:"28.5737",r:"5.71429",fill:"#FF8A20"}})]),o("g",{attrs:{filter:"url(#filter1_f_12722_147437)"}},[o("ellipse",{attrs:{cx:"19.6493",cy:"27.6663",rx:"6.64769",ry:"1.56414",transform:"rotate(36.9547 19.6493 27.6663)",fill:"#CB6100"}})])]),o("path",{attrs:{d:"M4.93372 11.0962C8.09408 9.16724 15.5873 6.29083 18.9389 5.09375C31.8163 18.8943 34.8602 20.4676 36.8955 21.3055C35.9926 26.3538 27.3188 29.1207 23.0949 29.8731C19.8525 29.1344 15.6559 24.8454 13.9629 22.7933C10.3922 19.0174 6.45567 13.422 4.93372 11.0962Z",fill:"#FFE7D0"}}),o("path",{attrs:{d:"M4.93372 11.0962C8.09408 9.16724 15.5873 6.29083 18.9389 5.09375C31.8163 18.8943 34.8602 20.4676 36.8955 21.3055C35.9926 26.3538 27.3188 29.1207 23.0949 29.8731C19.8525 29.1344 15.6559 24.8454 13.9629 22.7933C10.3922 19.0174 6.45567 13.422 4.93372 11.0962Z",fill:"url(#paint4_linear_12722_147437)"}}),o("mask",{staticStyle:{"mask-type":"alpha"},attrs:{id:"mask1_12722_147437",maskUnits:"userSpaceOnUse",x:"3",y:"11",width:"35",height:"25"}},[o("path",{attrs:{d:"M4.79177 12.4227C4.66691 13.846 4.52534 15.4598 3.56934 16.6711C5.649 18.9622 10.8132 25.0247 14.1965 29.0956C15.677 30.5936 19.4204 34.0125 22.5502 35.7043L22.5528 35.6995C28.4327 34.0734 33.0028 31.1347 35.5722 29.4826C35.9936 29.2116 36.3611 28.9753 36.6718 28.785C36.6718 28.0732 36.6718 27.7936 36.7744 27.0586C37.1362 25.6489 37.2714 24.69 37.3646 24.0288C37.3991 23.784 37.4279 23.58 37.4602 23.409C33.3887 28.0792 27.5682 30.6782 23.2919 31.2286C16.6699 27.9153 11.4209 19.7455 4.93677 11.1084C4.87163 11.5123 4.83259 11.9573 4.79177 12.4227Z",fill:"url(#paint5_linear_12722_147437)"}})]),o("g",{attrs:{mask:"url(#mask1_12722_147437)"}},[o("g",{attrs:{filter:"url(#filter2_f_12722_147437)"}},[o("ellipse",{attrs:{cx:"27.4586",cy:"29.6756",rx:"5.25605",ry:"3.91825",transform:"rotate(-20.7799 27.4586 29.6756)",fill:"#FFE4CC","fill-opacity":"0.6"}})]),o("path",{attrs:{d:"M22.7825 34.1141C22.5766 33.898 22.4075 33.7651 22.3486 33.7256C22.4859 33.831 22.6691 34.1691 22.7435 34.3249L23.501 33.9824C23.2323 33.9877 22.91 34.0724 22.7825 34.1141Z",fill:"#ED691E"}}),o("path",{attrs:{d:"M22.1881 32.1936C21.9851 32.1501 21.7659 32.1755 21.6816 32.1936C22.1901 32.5253 22.6952 33.1919 22.8842 33.4837C23.441 33.1409 28.0267 31.3018 29.0867 30.8096C28.2486 30.9468 23.8984 32.528 22.9913 32.917C22.8081 32.694 22.391 32.2371 22.1881 32.1936Z",fill:"url(#paint6_linear_12722_147437)"}}),o("path",{attrs:{d:"M34.9834 27.5412C35.9486 26.8062 36.8597 25.837 37.1946 25.4443L37.0507 26.1626C36.4463 26.7666 35.3662 27.3879 34.9834 27.5412Z",fill:"#EF6A1E"}}),o("path",{attrs:{d:"M35.127 28.4985C35.9214 28.0726 36.7005 27.4249 36.9908 27.1543L37.1363 27.4933C36.5745 28.0454 35.5627 28.3934 35.127 28.4985Z",fill:"#EF6A1E"}}),o("path",{attrs:{d:"M6.98601 16.3756L4.55716 13.2373L4.35449 13.9461C4.67841 14.1081 6.24381 15.6332 6.98601 16.3756Z",fill:"#EF6A1D"}}),o("path",{attrs:{d:"M6.55532 18.3444C6.14718 17.7905 4.5077 15.5376 4.13368 14.9941L3.78809 15.3895C4.09126 15.574 6.02236 17.7788 6.55532 18.3444Z",fill:"#EF6A1D"}})]),o("mask",{staticStyle:{"mask-type":"alpha"},attrs:{id:"mask2_12722_147437",maskUnits:"userSpaceOnUse",x:"4",y:"5",width:"33",height:"25"}},[o("path",{attrs:{d:"M4.93567 11.0953C8.09604 9.16626 15.5893 6.28985 18.9408 5.09277C31.8182 18.8933 34.8621 20.4666 36.8975 21.3046C35.9945 26.3528 27.3208 29.1197 23.0968 29.8722C19.8545 29.1334 15.6579 24.8445 13.9649 22.7924C10.3942 19.0165 6.45762 13.421 4.93567 11.0953Z",fill:"#FFE7D0"}}),o("path",{attrs:{d:"M4.93567 11.0953C8.09604 9.16626 15.5893 6.28985 18.9408 5.09277C31.8182 18.8933 34.8621 20.4666 36.8975 21.3046C35.9945 26.3528 27.3208 29.1197 23.0968 29.8722C19.8545 29.1334 15.6579 24.8445 13.9649 22.7924C10.3942 19.0165 6.45762 13.421 4.93567 11.0953Z",fill:"url(#paint7_linear_12722_147437)"}})]),o("g",{attrs:{mask:"url(#mask2_12722_147437)"}},[o("g",{attrs:{filter:"url(#filter3_f_12722_147437)"}},[o("ellipse",{attrs:{cx:"22.4904",cy:"27.1661",rx:"8.00363",ry:"4.35881",transform:"rotate(40.888 22.4904 27.1661)",fill:"#FFE6CF"}})]),o("g",{attrs:{filter:"url(#filter4_f_12722_147437)"}},[o("ellipse",{attrs:{cx:"21.4372",cy:"19.1227",rx:"6.55531",ry:"3.57005",transform:"rotate(40.888 21.4372 19.1227)",fill:"#FFE6CF"}})])]),o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.6595 14.8538C14.7962 14.292 15.383 13.9523 15.9701 14.0952L18.9149 14.8115L19.0598 12.1778C19.0901 11.6277 19.5826 11.2074 20.16 11.2392C20.7373 11.2709 21.1808 11.7427 21.1505 12.2928L21.0168 14.725L22.1883 13.9534C22.6712 13.6354 23.3205 13.769 23.6385 14.2519C23.9566 14.7348 23.8229 15.3841 23.34 15.7021L21.7437 16.7534L22.6897 17.7504L24.3595 16.5854C24.8337 16.2546 25.4863 16.3708 25.8172 16.845C26.148 17.3192 26.0318 17.9718 25.5576 18.3027L24.1473 19.2866L25.6191 20.8379C26.0171 21.2574 25.9997 21.9201 25.5803 22.318C25.1608 22.716 24.4982 22.6986 24.1002 22.2792L22.4105 20.4983L20.5581 21.7907C20.0839 22.1216 19.4313 22.0054 19.1004 21.5312C18.7696 21.057 18.8858 20.4043 19.36 20.0735L20.9529 18.9621L19.9673 17.9233L18.2489 19.055C17.766 19.373 17.1167 19.2394 16.7987 18.7565C16.4807 18.2736 16.6143 17.6243 17.0972 17.3063L17.9643 16.7352L15.4752 16.1297C14.888 15.9869 14.5229 15.4156 14.6595 14.8538Z",fill:"url(#paint8_linear_12722_147437)"}}),o("defs",[o("filter",{attrs:{id:"filter0_f_12722_147437",x:"16.499",y:"18.8594",width:"19.4287",height:"19.4287",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"}},[o("feFlood",{attrs:{"flood-opacity":"0",result:"BackgroundImageFix"}}),o("feBlend",{attrs:{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}}),o("feGaussianBlur",{attrs:{stdDeviation:"2",result:"effect1_foregroundBlur_12722_147437"}})]),o("filter",{attrs:{id:"filter1_f_12722_147437",x:"10.2539",y:"19.4775",width:"18.791",height:"16.377",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"}},[o("feFlood",{attrs:{"flood-opacity":"0",result:"BackgroundImageFix"}}),o("feBlend",{attrs:{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}}),o("feGaussianBlur",{attrs:{stdDeviation:"2",result:"effect1_foregroundBlur_12722_147437"}})]),o("filter",{attrs:{id:"filter2_f_12722_147437",x:"18.3506",y:"21.5645",width:"18.2158",height:"16.2227",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"}},[o("feFlood",{attrs:{"flood-opacity":"0",result:"BackgroundImageFix"}}),o("feBlend",{attrs:{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}}),o("feGaussianBlur",{attrs:{stdDeviation:"2",result:"effect1_foregroundBlur_12722_147437"}})]),o("filter",{attrs:{id:"filter3_f_12722_147437",x:"9.79883",y:"14.9766",width:"25.3828",height:"24.3799",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"}},[o("feFlood",{attrs:{"flood-opacity":"0",result:"BackgroundImageFix"}}),o("feBlend",{attrs:{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}}),o("feGaussianBlur",{attrs:{stdDeviation:"3",result:"effect1_foregroundBlur_12722_147437"}})]),o("filter",{attrs:{id:"filter4_f_12722_147437",x:"9.95703",y:"8.05273",width:"22.9609",height:"22.1396",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB"}},[o("feFlood",{attrs:{"flood-opacity":"0",result:"BackgroundImageFix"}}),o("feBlend",{attrs:{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}}),o("feGaussianBlur",{attrs:{stdDeviation:"3",result:"effect1_foregroundBlur_12722_147437"}})]),o("linearGradient",{attrs:{id:"paint0_linear_12722_147437",x1:"5.38898",y1:"12.9974",x2:"23.3446",y2:"33.5569",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#E47109"}}),o("stop",{attrs:{offset:"0.199644","stop-color":"#F2821C"}}),o("stop",{attrs:{offset:"0.489148","stop-color":"#FFBE83"}}),o("stop",{attrs:{offset:"0.692037","stop-color":"#FF9A3F"}}),o("stop",{attrs:{offset:"1","stop-color":"#FF7900"}})]),o("linearGradient",{attrs:{id:"paint1_linear_12722_147437",x1:"37.459",y1:"29.5543",x2:"23.4415",y2:"35.7003",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#F78621"}}),o("stop",{attrs:{offset:"0.177947","stop-color":"#FF9C42"}}),o("stop",{attrs:{offset:"0.42989","stop-color":"#FFB776"}}),o("stop",{attrs:{offset:"0.670445","stop-color":"#FFB069"}}),o("stop",{attrs:{offset:"1","stop-color":"#FF8E27"}})]),o("linearGradient",{attrs:{id:"paint2_linear_12722_147437",x1:"26.928",y1:"25.7178",x2:"28.3566",y2:"33.5749",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#EB7102"}}),o("stop",{attrs:{offset:"0.958333","stop-color":"#ED780E"}})]),o("linearGradient",{attrs:{id:"paint3_linear_12722_147437",x1:"26.3206",y1:"28.253",x2:"28.2678",y2:"32.1474",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#EB7102"}}),o("stop",{attrs:{offset:"0.958333","stop-color":"#ED780E"}})]),o("linearGradient",{attrs:{id:"paint4_linear_12722_147437",x1:"15.6793",y1:"7.41443",x2:"28.1344",y2:"27.4748",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#FFD1A5"}}),o("stop",{attrs:{offset:"0.141096","stop-color":"#FFD5AD","stop-opacity":"0.571368"}}),o("stop",{attrs:{offset:"0.329179","stop-color":"#FFDBB8","stop-opacity":"0"}}),o("stop",{attrs:{offset:"0.671875","stop-color":"#FFC893","stop-opacity":"0.760021"}}),o("stop",{attrs:{offset:"1","stop-color":"#FFC792"}})]),o("linearGradient",{attrs:{id:"paint5_linear_12722_147437",x1:"37.4602",y1:"29.5911",x2:"18.3264",y2:"32.6037",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#FF9230"}}),o("stop",{attrs:{offset:"0.077495","stop-color":"#FFA14C"}}),o("stop",{attrs:{offset:"0.391424","stop-color":"#FFB776"}}),o("stop",{attrs:{offset:"0.552085","stop-color":"#FFB069"}}),o("stop",{attrs:{offset:"1","stop-color":"#FFAB5F"}})]),o("linearGradient",{attrs:{id:"paint6_linear_12722_147437",x1:"22.08",y1:"32.5308",x2:"29.4928",y2:"30.8096",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#EB671C"}}),o("stop",{attrs:{offset:"1","stop-color":"#FF672D","stop-opacity":"0"}})]),o("linearGradient",{attrs:{id:"paint7_linear_12722_147437",x1:"15.6813",y1:"7.41346",x2:"28.1363",y2:"27.4739",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#FFD1A5"}}),o("stop",{attrs:{offset:"0.141096","stop-color":"#FFD5AD","stop-opacity":"0.571368"}}),o("stop",{attrs:{offset:"0.329179","stop-color":"#FFDBB8","stop-opacity":"0"}}),o("stop",{attrs:{offset:"0.671875","stop-color":"#FFC893","stop-opacity":"0.760021"}}),o("stop",{attrs:{offset:"1","stop-color":"#FFC792"}})]),o("linearGradient",{attrs:{id:"paint8_linear_12722_147437",x1:"17.3954",y1:"12.5316",x2:"24.9921",y2:"22.7643",gradientUnits:"userSpaceOnUse"}},[o("stop",{attrs:{"stop-color":"#FFB169"}}),o("stop",{attrs:{offset:"1","stop-color":"#FF6229"}})])])]))}}},1365:function(t,e,o){},1366:function(t,e,o){"use strict";o.d(e,"a",(function(){return d})),o.d(e,"b",(function(){return f}));o(39);var n=o(859),r=o(24),c=o(432),l=o.n(c),d=function(details){var t=details.id,title=details.title,e=details.description,image=details.image,o=details.username,n=details.createdAt,c=details.updatedAt;return{"@context":"https://schema.org","@type":"BlogPosting",mainEntityOfPage:{"@type":"WebPage","@id":t},headline:title,description:e,image:image,author:{"@type":"Organization",name:o},publisher:{"@type":"Organization",name:"掘金",logo:{"@type":"ImageObject",url:l.a}},datePublished:Object(r.b)(n,"YYYY年MM月DD日"),dateModified:Object(r.b)(c,"YYYY年MM月DD日")}},f=function(t){var e=t.name,o=void 0===e?"分类":e,r=t.alias,c=void 0===r?"":r;return{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",name:"稀土掘金",position:1,item:n.f},{"@type":"ListItem",name:o,position:2,item:"https://juejin.cn/".concat(c)},{"@type":"ListItem",name:"文章",position:3}]}}},1575:function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var n={BUY_SUCCESS:"boughtBooklet",EXCHANGE_SUCCESS:"exchangeBooklet"}},1640:function(t,e,o){"use strict";o(1365)},1641:function(t,e,o){"use strict";var n,r=o(12),c=o(13);o(11),o(6),o(52),o(292);function l(t){if(t<0||!t)return"0秒";if(0<=t&&t<60)return t+"秒";var e=Math.floor(t/60),s=Math.floor(t%60);return s>0?e+"分"+s+"秒":e+"分"}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,r=new Map,c=[];return t.forEach((function(t){var d,f,m,h="";t.sectionId===(null===(d=e.reading_progress)||void 0===d?void 0:d.last_section_id)&&(h="上次学到"),(null===(f=t.reading_progress)||void 0===f?void 0:f.reading_progress)>=100&&(h="已学完"),2===(null===(m=t.reading_progress)||void 0===m?void 0:m.has_update)&&(h="有更新");var v="";v=e.price>0?t.isFree?"试学章节":"付费章节":"免费章节",c.push(t.sectionId),r.set(t.sectionId,{sectionId:t.sectionId,title:t.title||"小册章节标题",readCount:t.readCount,commentCount:t.commentCount,readDurationStr:l(t.readDuration),status:h,isFinished:t.isFinished,freeStatus:v,canEdit:o===n.author,vid:t.vid,hasVideo:!!t.vid})})),{sectionMap:r,sectionOrder:c}}function f(){var t,e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r&&r.id?(null===(t=r.roles)||void 0===t?void 0:t.isAdmin)?n.admin:r.id===(null===(e=o.user)||void 0===e?void 0:e.user_id)?n.author:o.is_buy?n.buyer:n.common:n.unlogin}!function(t){t.unlogin="unlogin",t.admin="admin",t.author="author",t.buyer="buyer",t.common="common"}(n||(n={}));var m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(r.a)(this,t),this.bookId="",this.userRole=n.common,this.sectionMap=new Map,this.sectionOrder=[],this.bookId=o.booklet_id,this.userRole=f(o,c);var l=d(e,o,this.userRole);this.sectionMap=l.sectionMap,this.sectionOrder=l.sectionOrder}return Object(c.a)(t,[{key:"getSectionList",value:function(){var t=this,e=[];return this.sectionOrder.forEach((function(o){var n;e.push((n=t.sectionMap.get(o),JSON.parse(JSON.stringify(n))))})),e}},{key:"setSectionFree",value:function(){}}]),t}();e.a=m},1642:function(t,e,o){o(16),o(15),o(11),o(6),o(14);var n=o(40),r=o(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,m=data.staticClass,style=data.style,h=data.staticStyle,v=data.attrs,_=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,m],style:[style,h],attrs:Object.assign({width:"16",height:"20",viewBox:"0 0 16 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M12.5822 5.29608C12.5184 2.81844 10.4914 0.833008 8.00036 0.833008C5.46911 0.833008 3.41703 2.88301 3.41703 5.41634V6.66634C1.80591 6.66761 0.500583 7.97418 0.500855 9.5853L0.501795 15.167C0.502167 17.3759 2.29292 19.1663 4.50179 19.1663H11.5004C13.7095 19.1663 15.5004 17.3755 15.5004 15.1663V9.58301C15.5004 7.97218 14.1945 6.66634 12.5837 6.66634V5.41634L12.5822 5.29608ZM8.00006 11.0002C9.10472 11.0002 10.0001 11.8968 10.0001 13.0002C10.0001 14.1035 9.10472 15.0002 8.00006 15.0002C6.89539 15.0002 6.00006 14.1035 6.00006 13.0002C6.00006 11.8968 6.89539 11.0002 8.00006 11.0002ZM5.08581 5.3163C5.13867 3.75039 6.42352 2.5 8.00079 2.5C9.61162 2.5 10.9175 3.80417 10.9175 5.41667V6.66667H5.08412V5.41667L5.08581 5.3163Z",fill:"#C2C8D1"}})]))}}},1643:function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));var n="https://lf26-cdn-tos.draftstatic.com/obj/ies-hotsoon-draft/juejin/dd3cffc9-7abf-408d-9f79-95571b022def.html"},1823:function(t,e,o){"use strict";var n={},r=(o(1640),o(30)),component=Object(r.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"copy-right"},[e("a",{directives:[{name:"link",rawName:"v-link.blank",value:"https://beian.miit.gov.cn",expression:"'https://beian.miit.gov.cn'",modifiers:{blank:!0}}]},[this._v("京ICP备18012699号-3")]),this._v(" "),e("span",[this._v("©版权所有 北京北比信息技术有限公司")]),this._v(" "),this._m(0)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticStyle:{"margin-top":"0"}},[e("span",[this._v("公司地址：北京市海淀区信息路甲28号13层B座13B-5")]),this._v(" "),e("span",[this._v("|")]),this._v(" "),e("span",[this._v("公司座机：010-83434395")])])}],!1,null,"3750bdcb",null);e.a=component.exports},1863:function(t,e,o){"use strict";o.d(e,"a",(function(){return m}));o(23);var n=o(5),r=o(27),c=r.c?{belong:"juejin",persist:1}:{belong:"DEFAULT",persist:0};function l(t){return d.apply(this,arguments)}function d(){return(d=Object(n.a)(regeneratorRuntime.mark((function t(e){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=new FormData).append("targets",e.targets||""),o.append("belong",e.belong||c.belong),o.append("persist","".concat(c.persist)),t.abrupt("return",fetch("https://".concat(r.h,"/shorten"),{method:"post",body:o}).then(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){var o,n,data,code;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.json();case 2:return o=t.sent,n=o.message,data=o.data,code=o.code,t.abrupt("return",{err_no:code,data:data,err_msg:n});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var f=o(8);function m(t,e){var o=Object(f.q)(""),r=Object(f.q)(!1),c=Object(f.a)((function(){return o.value||t.value})),d=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.value=!1,e.next=4,l({targets:t.value});case 4:(n=e.sent)&&0===n.err_no&&n.data[0]&&(o.value=n.data[0].short_url),r.value=!0,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),r.value=!0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(f.w)(e,(function(t){t&&!o.value&&d()})),[c,r]}},2050:function(t,e,o){},2051:function(t,e,o){},2052:function(t,e,o){},2053:function(t,e,o){},2054:function(t,e,o){},2055:function(t,e,o){},2056:function(t,e,o){},2057:function(t,e,o){},2058:function(t,e,o){},3179:function(t,e,o){t.exports=o.p+"img/default-poster.99c2a9e.png"},3180:function(t,e,o){t.exports=o.p+"70f921e402915edaf87269d40c52cb9a.svg"},3181:function(t,e,o){t.exports=o.p+"img/add-group.b4df655.png"},3182:function(t,e,o){t.exports=o.p+"6eed03c6054cf7cfcdfa04e02d042990.svg"},3183:function(t,e,o){t.exports=o.p+"img/free-read-mobile.cbca16d.png"},3184:function(t,e,o){t.exports=o.p+"fee0ba0ebc2dffb4792458908d3c3122.svg"},3185:function(t,e,o){t.exports=o.p+"img/defaultImgUrl.c0fd17b.png"},3186:function(t,e,o){"use strict";o(2050)},3187:function(t,e,o){"use strict";o(2051)},3188:function(t,e,o){"use strict";o(2052)},3189:function(t,e,o){"use strict";o(2053)},3190:function(t,e,o){"use strict";o(2054)},3191:function(t,e,o){o(16),o(15),o(11),o(6),o(14);var n=o(40),r=o(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,m=data.staticClass,style=data.style,h=data.staticStyle,v=data.attrs,_=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,m],style:[style,h],attrs:Object.assign({width:"7",height:"6",viewBox:"0 0 7 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{d:"M0.722168 1.03902C0.91743 0.843763 1.23401 0.843763 1.42927 1.03902L3.60934 3.21909L5.72693 1.10151C5.92219 0.906247 6.23877 0.906246 6.43404 1.10151L6.78759 1.45506C6.98285 1.65032 6.98285 1.96691 6.78759 2.16217L3.95916 4.9906C3.7639 5.18586 3.44732 5.18586 3.25206 4.9906L2.8985 4.63704C2.88098 4.61952 2.86503 4.60103 2.85066 4.58173L0.368615 2.09968C0.173352 1.90442 0.173352 1.58784 0.368614 1.39258L0.722168 1.03902Z",fill:"#4E5969"}})]))}}},3192:function(t,e,o){t.exports=o.p+"img/course_exchange_role.8a81c71.png"},3193:function(t,e,o){"use strict";o(2055)},3194:function(t,e,o){o(16),o(15),o(11),o(6),o(14);var n=o(40),r=o(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,m=data.staticClass,style=data.style,h=data.staticStyle,v=data.attrs,_=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,m],style:[style,h],attrs:Object.assign({width:"23",height:"22",viewBox:"0 0 23 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{d:"M18.25 11C18.25 14.7279 15.2279 17.75 11.5 17.75C7.77209 17.75 4.75 14.7279 4.75 11C4.75 7.27209 7.77209 4.25 11.5 4.25C15.2279 4.25 18.25 7.27209 18.25 11Z",stroke:"#C2C8D1","stroke-width":"1.5"}}),o("path",{attrs:{d:"M11.5022 12.875L11.4998 12.5C11.4998 11.375 12.6248 11 13.292 10.0991C13.9593 9.19828 13.1081 7.625 11.4953 7.625C9.99008 7.625 9.47697 8.58054 9.47461 9.31764V9.49197",stroke:"#C2C8D1","stroke-width":"1.5"}}),o("path",{attrs:{d:"M11.502 13.625V15.1279",stroke:"#C2C8D1","stroke-width":"1.5"}})]))}}},3195:function(t,e,o){"use strict";o(2056)},3196:function(t,e,o){o(16),o(15),o(11),o(6),o(14);var n=o(40),r=o(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,m=data.staticClass,style=data.style,h=data.staticStyle,v=data.attrs,_=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,m],style:[style,h],attrs:Object.assign({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.7143 3.47656C20.4264 3.47656 21 4.05618 21 4.76675V16.9395C21 17.4978 20.6419 17.9942 20.0972 18.1711L12.3776 20.5429C12.1315 20.6185 11.8685 20.6185 11.6224 20.5429L3.88956 18.167C3.3581 17.9942 3 17.4978 3 16.9395V4.76675C3 4.05618 3.57363 3.47656 4.28571 3.47656C4.42025 3.47656 4.55392 3.49775 4.66822 3.53502L12 5.78316L19.3181 3.53933C19.4461 3.49775 19.5798 3.47656 19.7143 3.47656ZM4.7141 5.34079V16.6258L11.1427 18.6008V7.31226L4.7141 5.34079ZM12.859 7.31183L19.2875 5.34079V16.6259L12.859 18.6008V7.31183Z",fill:"#1E80FF"}})]))}}},3197:function(t,e,o){"use strict";o(2057)},3198:function(t,e,o){"use strict";o(2058)},4277:function(t,e,o){"use strict";o.r(e);o(16),o(15);var n=o(67),r=(o(135),o(39),o(45),o(11),o(6),o(14),o(0)),c=(o(23),o(5)),l=o(4),d=o(84),f=o(48),m=o(943),object=o(336),h=o(178),v=o(1247),_=o(873),y=o(1313),C=o(1193),k=o(3185),w=o.n(k),O={props:["info"],data:function(){return{defaultImgUrl:w.a}},methods:{read:function(){this.$emit("read")},close:function(){this.$emit("close")},downloadImage:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var image,o,n,link;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return image=e.sent,e.next=5,image.blob();case 5:o=e.sent,n=URL.createObjectURL(o),(link=document.createElement("a")).href=n,link.download="/juejin/booklet/wechatGroupQrcodeImage",document.body.appendChild(link),link.click(),document.body.removeChild(link);case 13:case"end":return e.stop()}}),e)})))()}},computed:{isMobile:function(){return this.$device.isMobile}},mounted:function(){console.log(this.info)}},j=(o(3186),o(30)),I=Object(j.a)(O,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"masker"},[o("div",{staticClass:"box",class:{"not-bought":!t.info.isBuy}},[o("div",{staticClass:"close-btn",on:{click:t.close}}),t._v(" "),o("div",{staticClass:"title"},[t._v("加入作者互动群")]),t._v(" "),t.info.isBuy?o("div",{staticClass:"desc"},[t._v("\n      扫描二维码回复\n      "),o("span",{staticClass:"code"},[t._v(t._s(t.info.wechatGroupSignal))]),t._v("\n      入群\n    ")]):t._e(),t._v(" "),t.info.isBuy?t._e():o("div",{staticClass:"desc"},[t._v("\n      结识更多同行小伙伴 · 作者在线解答\n    ")]),t._v(" "),o("div",{staticClass:"qr-box",class:{"qr-box-mobile":t.isMobile}},[t.info.isBuy?o("img",{attrs:{src:t.info.wechatGroupQrcodeImage}}):o("img",{staticClass:"not-bought",attrs:{src:t.defaultImgUrl}})]),t._v(" "),t.info.isBuy?t._e():o("div",{staticClass:"desc"},[t._v("购买小册后可扫码加入作者互动群")]),t._v(" "),t.isMobile&&t.info.isBuy?o("a",{staticClass:"btn-read",on:{click:function(e){return t.downloadImage(t.info.wechatGroupQrcodeImage)}}},[t._v("\n      保存二维码到本地\n    ")]):t._e()])])}),[],!1,null,"7a6a9dcb",null).exports,S=o(7),x=Object(S.b)({emits:["close"],setup:function(t,e){return{close:function(){e.emit("close")}}}}),B=(o(3187),Object(j.a)(x,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"masker"},[e("div",{staticClass:"box"},[e("div",{staticClass:"close-btn",on:{click:this.close}}),this._v(" "),e("div",{staticClass:"title"},[this._v("加入作者互动群")]),this._v(" "),e("div",{staticClass:"desc"},[this._v("购买课程后可扫码加入作者互动群")]),this._v(" "),this._m(0)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"return-box"},[e("div",{staticClass:"top"},[this._v("购买曾借阅过的课程，")]),this._v(" "),e("div",{staticClass:"bottom"},[this._v("将退还 1 张课程借阅卡给您哦~")])])}],!1,null,"3be79644",null).exports),L=Object(S.b)({emits:["close"],setup:function(t,e){return{close:function(){e.emit("close")}}}}),M=(o(3188),Object(j.a)(L,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"masker"},[o("div",{staticClass:"box"},[o("div",{staticClass:"close-btn",on:{click:t.close}}),t._v(" "),o("div",{staticClass:"title"},[t._v("会员福利通告")]),t._v(" "),o("div",{staticClass:"desc"},[t._v("\n      感谢您在借阅后购买该课程， 我们已将1张借阅卡退还给您，祝您学习愉快！\n    ")]),t._v(" "),t._m(0),t._v(" "),o("div",{staticClass:"enter-button",on:{click:t.close}},[t._v("我知道了")])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"return-box"},[e("div",{staticClass:"top"},[this._v("借阅")]),this._v(" "),e("div",{staticClass:"line"}),this._v(" "),e("div",{staticClass:"bottom"},[this._v("免费学习1门课程21天")])])}],!1,null,"cc9e39d6",null).exports),P=o(177),D=o(1641),$=o(219),E=o(1642),T=o.n(E);function R(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function V(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?R(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):R(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var F={name:"BookDirectoryInfo",components:{BAlert:P.Alert,LockIcon:T.a},props:["info","free","list"],data:function(){return{userRole:"",sectionList:[]}},computed:V(V({},Object(d.mapGetters)({user:l.USER})),{},{bookId:function(){return this.$route.params.id},isVideoCourse:function(){var t,e;return(null===(e=null===(t=this.info)||void 0===t?void 0:t.base_info)||void 0===e?void 0:e.course_type)===$.a.video}}),watch:{list:function(){this.initData()},user:function(){this.initData()}},created:function(){this.initData()},methods:{initData:function(){var t=new D.a(this.list,this.info,this.user);this.userRole=t.userRole,this.sectionList=t.getSectionList()},routeSectionId:function(t){var e,o=t.sectionId;if(!t.isFinished&&"admin"!==this.userRole&&"author"!==this.userRole)return{};var n=this.$device.isMobile?"m/":"",r=(null===(e=this.$route.query)||void 0===e?void 0:e.suid)||"";return{path:"/".concat(this.isVideoCourse?"video":"book","/").concat(n).concat(this.bookId,"/section/").concat(o).concat(r?"?suid=".concat(r):"")}}}},A=(o(3189),Object(j.a)(F,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"book-directory",class:{"is-admin":"admin"===t.userRole,"is-author":"author"===t.userRole,"is-buyer":"buyer"===t.userRole}},["admin"===t.userRole?o("b-alert",{attrs:{"show-icon":""}},[t._v("\n    当前是管理员状态,以下所有章节都可点击阅读\n  ")]):"author"===t.userRole?o("b-alert",{attrs:{"show-icon":""}},[t._v("\n    您是小册作者,以下所有章节都可点击阅读\n  ")]):t._e(),t._v(" "),o("div",{staticClass:"section-list"},t._l(t.sectionList,(function(e,n){return o("router-link",{key:e.sectionId,staticClass:"section",class:{unfinished:!e.isFinished},attrs:{to:t.routeSectionId(e)}},[o("div",{staticClass:"left"},[o("div",{staticClass:"index"},[t._v(t._s(n+1))])]),t._v(" "),o("div",{staticClass:"center"},[o("div",{staticClass:"title"},[t.isVideoCourse||e.hasVideo?o("span",{staticClass:"icon-camera"}):t._e(),t._v(" "),o("span",{staticClass:"title-text"},[t._v(t._s(e.title))])]),t._v(" "),o("div",{staticClass:"sub-line"},[e.isFinished?["已学完"===e.status?o("div",{staticClass:"label",staticStyle:{color:"#8a919f",background:"#f2f3f5"}},[t._v("\n              已学完\n            ")]):"上次学到"===e.status?o("div",{staticClass:"label",staticStyle:{color:"#1e80ff",background:"#eaf2ff"}},[t._v("\n              上次学到\n            ")]):"有更新"===e.status?o("div",{staticClass:"label",staticStyle:{color:"#f53f3f",background:"#ffece8"}},[t._v("\n              有更新\n            ")]):t._e(),t._v(" "),o("span",[t._v("学习时长: "+t._s(e.readDurationStr))])]:o("div",[t._v("写作中...")])],2)]),t._v(" "),o("div",{staticClass:"right"},[e.isFinished?"buyer"===t.userRole||t.info.isBorrowing?t._e():["付费章节"===e.freeStatus?o("div",{staticClass:"lock"},[o("LockIcon")],1):t._e(),t._v(" "),"试学章节"===e.freeStatus?o("div",{staticClass:"label"},[t._v("试学")]):t._e()]:o("div",{staticClass:"lock"},[o("LockIcon")],1)],2)])})),1)],1)}),[],!1,null,"42256ac2",null).exports),U=o(8),N=o(68),H=Object(U.d)({props:{bookInfo:null},setup:function(t){var e=Object(U.q)(N.c),o=Object(U.a)((function(){return t.bookInfo.base_info.course_type===$.a.video}));return{isVideoCourse:o,defaultBookImgUrl:e,getBookTypeRoute:function(){return o.value?"/video/".concat(t.bookInfo.booklet_id):"/book/".concat(t.bookInfo.booklet_id)}}}}),G=(o(3190),Object(j.a)(H,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("router-link",{staticClass:"book-recommend",attrs:{to:t.getBookTypeRoute(),target:"_blank"}},[o("img",{staticClass:"book-img",attrs:{src:t.bookInfo.base_info.cover_img||t.defaultBookImgUrl}}),t._v(" "),o("div",{staticClass:"book-desc"},[o("div",{staticClass:"book-title"},[t.bookInfo.is_new?o("span",{staticClass:"presale"},[t._v("新品")]):t._e(),t._v(" "),t.bookInfo.canVipBorrow?o("span",{staticClass:"vip-icon"},[t._v("VIP")]):t._e(),t._v("\n      "+t._s(t.bookInfo.base_info.title)+"\n    ")]),t._v(" "),o("div",{staticClass:"book-summary"},[t._v(t._s(t.bookInfo.base_info.summary))])])])}),[],!1,null,"3277d775",null).exports),W=o(1162),Z=o(3191),Y=o.n(Z),z=o(936),X=o(853),J=o(1045),K=o(181),Q=Object(U.d)({props:{visible:{type:Boolean,default:function(){return!1}}},emits:["close"],setup:function(t,e){var o=e.emit,n=e.root,r=Object(U.q)(),c=Object(U.q)(3),l=Object(U.a)((function(){var t;return!!(null===(t=null==n?void 0:n.$device)||void 0===t?void 0:t.isMobile)}));return Object(U.m)((function(){l.value||setTimeout((function(){r.value=setInterval((function(){c.value=--c.value,c.value<=0&&(clearInterval(r.value),o("close"))}),1e3)}),1e3)})),Object(K.d)(Object(U.a)((function(){return t.visible}))),{isH5:l,count:c,handleConfirm:function(){clearInterval(r.value),o("close")}}}}),tt=(o(3193),Object(j.a)(Q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visible?n("div",{staticClass:"exchange-success-popup"},[n("div",{staticClass:"dialog"},[n("img",{staticClass:"img-role",attrs:{src:o(3192),alt:""}}),t._v(" "),n("div",{staticClass:"title"},[t._v("兑换成功")]),t._v(" "),n("div",{staticClass:"confirm-button",on:{click:function(e){return e.stopPropagation(),t.handleConfirm(e)}}},[t._v("确定")]),t._v(" "),t.isH5?t._e():n("div",{staticClass:"msg"},[t._v(t._s(t.count)+"s后自动关闭")])])]):t._e()}),[],!1,null,"5269610c",null).exports),et=o(1823),it=o(1366),meta=o(859),ot=o(886),nt=o(1294),st=o(17),at=o(185),ct=o(184),lt=o(27),ut=o(851),ft=o(32),mt=o(284),ht=o(294),pt=o.n(ht),vt=o(3194),bt=o.n(vt),_t=o(1364),gt=o.n(_t),yt=o(883),Ct=o(878),kt=o(1863),wt=o(275),Ot=o(1643),jt=Object(U.d)({components:{BModal:P.Modal,AppLink:mt.a,CloseIcon:pt.a,BenefitIcon:gt.a,HelpIcon:bt.a},props:{bookId:{type:String,default:function(){return""}},commission:{type:Number,default:function(){return 0}},enableDs:{type:Boolean,default:function(){return!1}}},setup:function(t,e){var o=e.root,n=Object(U.q)(!1),r=Object(U.a)((function(){var t,e;return(null===(e=null===(t=o.$store.state.auth)||void 0===t?void 0:t.user)||void 0===e?void 0:e.user_id)||""})),c=Object(U.a)((function(){return"https://".concat(lt.a,"/book/").concat(t.bookId,"?suid=").concat(r.value,"&source=pc")})),l=Object(kt.a)(c,n),d=Object(ft.a)(l,2),f=d[0],m=d[1],h=Object(U.a)((function(){return"https://".concat(lt.a,"/book/distribute/").concat(t.bookId,"?suid=").concat(r.value)})),v=Object(kt.a)(h,n),_=Object(ft.a)(v,1)[0],y=Object(U.a)((function(){return Object(yt.a)(_.value)})),C=function(){n.value=!n.value};return{ruleUrl:Ot.a,showUrl:f,qrCodeDataUrl:y,visible:n,apiLoad:m,toggleModal:C,openModal:function(){Object(wt.i)(o.$TEA,{page:"detail_course",book_id:t.bookId}),o.$ensureAuthorized("login").then((function(){C()})).catch((function(t){console.error(t)}))},copyLink:function(){Object(wt.j)(o.$TEA,{book_id:t.bookId});try{Object(Ct.a)(f.value),P.Message.success("链接复制成功")}catch(t){P.Message.error("链接复制失败")}},enterHelpVisitPage:function(){Object(wt.k)(o.$TEA)}}}}),It=(o(3195),Object(j.a)(jt,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"benefit-guide-widget"},[t.enableDs?o("div",{staticClass:"guide-nav-box",on:{click:function(e){return e.stopPropagation(),t.openModal(e)}}},[t._v("\n    "+t._s(t.commission)+"\n  ")]):t._e(),t._v(" "),o("b-modal",{staticClass:"benefit-guide-widget-modal",attrs:{width:"520px",value:t.visible,"mask-closable":!1,"footer-hide":!0,closable:!1},on:{close:t.toggleModal}},[o("CloseIcon",{staticClass:"closeIcon",on:{click:function(e){return e.stopPropagation(),t.toggleModal(e)}}}),t._v(" "),o("div",{staticClass:"title-box"},[o("BenefitIcon",{staticClass:"benefitIcon"}),t._v(" "),o("span",{staticClass:"txt title"},[t._v("推广赚")]),t._v(" "),o("span",{staticClass:"txt money-unit"},[t._v("¥")]),t._v(" "),o("span",{staticClass:"txt"},[t._v(t._s(t.commission))]),t._v(" "),o("AppLink",{staticClass:"help-link",attrs:{href:t.ruleUrl,blank:!0},nativeOn:{click:function(e){return t.enterHelpVisitPage(e)}}},[o("HelpIcon",{staticClass:"helpIcon"})],1)],1),t._v(" "),o("div",{staticClass:"sub-title-box"},[o("span",{staticClass:"txt"},[t._v("邀请好友成功购买本课程，每单最高得")]),t._v(" "),o("span",{staticClass:"txt money-unit"},[t._v("¥")]),t._v(" "),o("span",{staticClass:"txt benefit"},[t._v(t._s(t.commission))]),t._v(" "),o("span",[t._v("现金奖励")])]),t._v(" "),o("div",{staticClass:"desc-box"},[t._v("\n      推广收益及提现请到「\n      "),o("AppLink",{staticClass:"app-link",attrs:{href:"/app?source=course",blank:!0}},[t._v("\n        稀土掘金APP\n      ")]),t._v("\n      -我的-推广中心」操作\n    ")],1),t._v(" "),o("div",{staticClass:"qrcode-box"},[o("img",{staticClass:"qrcode-img",attrs:{src:t.qrCodeDataUrl,alt:"推广二维码"}}),t._v(" "),o("div",{staticClass:"desc"},[t._v("扫码获取推广海报")])]),t._v(" "),o("div",{staticClass:"short-box"},[o("div",{staticClass:"short-url-box"},[t.apiLoad?o("span",{staticClass:"short-url"},[t._v(t._s(t.showUrl))]):t._e()]),t._v(" "),o("div",{staticClass:"short-btn",on:{click:t.copyLink}},[t._v("复制推广链接")])])],1)],1)}),[],!1,null,"57945820",null).exports),St=o(3196),xt=o.n(St),Bt=o(1194),Lt=o(25),Mt=o(1575);function Pt(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function Dt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Pt(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Pt(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var $t=Object(S.b)({components:{CommentListBox:z.a,Arrows:Y.a,BookStickyHeader:W.a,BookRecommend:G,BAffix:P.Affix,BDivider:P.Divider,Avatar:h.a,Book:v.a,SaleTooltip:y.a,BookGuidanceJoinWechat:I,WechatQuickLogin:C.a,BookDirectory:A,ImageViewer:_.a,MarkdownViewer:function(){return Promise.all([o.e(1),o.e(3),o.e(5),o.e(152)]).then(o.bind(null,1005))},CopyRight:et.a,VideoLabel:J.a,XituSkeleton:ut.a,BenefitGuideWidget:It,ApplyIcon:xt.a,VipJoinWechat:B,VipBorrowButton:Bt.a,VipReturnCard:M,ExchangeSuccessModal:tt},asyncData:function(t){return Object(c.a)(regeneratorRuntime.mark((function e(){var o,n,r,c,l,d,f,h,v,_,y,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.route,n=t.store,r=t.error,e.prev=1,e.abrupt("return");case 4:if(!n.state.auth.user){e.next=6;break}return e.abrupt("return");case 6:return c=o.params.id,e.next=9,Object($.b)(c);case 9:return l=e.sent,d=l.bookInfo,f=l.sections,h=l.summaryHtml,v=l.summaryMarkdown,e.next=16,Object($.c)({categoryId:"0",limit:6});case 16:if(_=e.sent,y=_.list,C={loading:!1,bookInfo:Object.assign({},d,{summaryHtml:h,summaryMarkdown:v}),sectionList:f,totalTime:Object(m.b)(f.filter((function(t){return t.isFinished})).map((function(t){return t.read_time})).reduce((function(pre,t){return pre+t}),0))},!("array"===Object(object.b)(y)&&(null==y?void 0:y.length)>0)){e.next=23;break}return e.abrupt("return",Dt(Dt({},C),{},{bookList:y.filter((function(t){return t.id!==c})).slice(0,6)}));case 23:return e.abrupt("return",C);case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(1),404===e.t0.statusCode&&(n.dispatch("SHOW_NOT_FOUND_VIEW"),r(e.t0));case 29:case"end":return e.stop()}}),e,null,[[1,26]])})))()},data:function(){return{bookRecommendScrollLoading:!1,isShowCommentMode:!1,isListLenMore3:!1,isHasFreeSection:!1,isShowBookletCommentTab:!0,cursor:"0",hasMore:!0,bookRecommendList:[],bookRecommendListMobile:[],isShowAllContent:!1,isOverThousandPx:!1,totalTime:"",bookInfo:null,bookList:[],sectionList:[],isViewMenuOnTop:!1,isViewMenuOnTopMobile:!1,scrollMenuIndex:0,fixedBuyShow:!1,queryBuyList:{pageNum:1,pageSize:20},isBookBoughtGuideVisible:!1,bookCommentsTotal:0,isBookEvaluateVisible:!1,bookBoughtId:null,actionItem:{more:{active:!1}},sourceDiscount:10,loading:!0,isShowBorrow:!1,isVipWechatVisible:!1,showVipReturnCard:!1,isVipShow:!0,exchangeModalVisible:!1}},mixins:[nt.a],computed:Dt(Dt({},Object(d.mapGetters)({logined:l.LOGINED,user:l.USER})),{},{isVideoCourse:function(){var t,e;return(null===(e=null===(t=this.bookInfo)||void 0===t?void 0:t.base_info)||void 0===e?void 0:e.course_type)===$.a.video},isMobileBrowser:function(){return this.$device.isMobile},hasHeader:function(){return!this.isMobileBrowser},hasSourceDiscount:function(){return this.sourceDiscount<10},isDiscountValid:function(){return!!this.bookInfo&&Object(m.c)(this.bookInfo.discount)},hasTimelimtDiscountAndNotOther:function(){return!this.hasSourceDiscount&&this.isDiscountValid},hasTimelimtDiscount:function(){return this.isDiscountValid},bookId:function(){return this.$route.params.id},isAdmin:function(){var t,e=this.user||{},o=null===(t=e.roles)||void 0===t?void 0:t.isAdmin,n=this.author.id===e.id;return o||n},freeSectionList:function(){var t,e=this;if(null===(t=this.sectionList)||void 0===t?void 0:t.length){return this.isAdmin?this.sectionList.map((function(t){return t.sectionId})).filter((function(t){return t})):this.sectionList.map((function(t){return!(!(e.free||t.isFree||e.bookInfo.isBorrowing)||!t.isFinished)&&t.sectionId})).filter((function(t){return t}))}return[]},lastReadSection:function(){var t,e;return(null===(e=null===(t=this.bookInfo)||void 0===t?void 0:t.reading_progress)||void 0===e?void 0:e.last_section_id)||""},hasFreeSection:function(){var t,e=!this.free&&(null===(t=this.freeSectionList)||void 0===t?void 0:t.length)>0;return e&&1!==this.scrollMenuIndex&&(this.isHasFreeSection=!0),e},free:function(){var t,e,o;if(!this.bookInfo)return!1;var n=this.bookInfo,r=n.price,c=n.isBuy,l=n.verifyStatus,d=0===r&&2===l,f=(null===(t=this.user)||void 0===t?void 0:t.id)===(null===(o=null===(e=this.bookInfo)||void 0===e?void 0:e.user)||void 0===o?void 0:o.id);return d||c||f||this.isAdmin},hasGroupAuth:function(){var t,e,o;if(!this.bookInfo)return!1;var n=this.bookInfo.isBuy,r=(null===(t=this.user)||void 0===t?void 0:t.id)===(null===(o=null===(e=this.bookInfo)||void 0===e?void 0:e.user)||void 0===o?void 0:o.id);return(n||r||this.isAdmin)&&this.bookInfo.wechatGroupSignal&&this.bookInfo.wechatGroupQrcodeImage},author:function(){var t;return(null===(t=this.bookInfo)||void 0===t?void 0:t.user)||{}},scheme:function(){return Object(ct.e)("https://".concat(lt.b,"/book/").concat(this.bookId),ct.a.bookDetail.gd_label)},subject:function(){var t,e;return{item_id:this.bookId,item_type:12,user_id:null===(e=null===(t=this.bookInfo)||void 0===t?void 0:t.user_info)||void 0===e?void 0:e.user_id}},handleBgcShow:function(){return this.isMobileBrowser?this.bookInfo.base_info.background_img?{background:"url("+this.bookInfo.base_info.background_img+") no-repeat center center",backgroundSize:"cover"}:{backgroundColor:"#3d5d8b"}:{}},isDistribute:function(){var t,e;return!!(null===(e=null===(t=this.bookInfo)||void 0===t?void 0:t.base_info)||void 0===e?void 0:e.is_distribution)},commission:function(){var t;return(null===(t=this.bookInfo)||void 0===t?void 0:t.commission)||0},distributeURL:function(){var t;return"/book/distribute/".concat(this.bookId,"?suid=").concat((null===(t=this.user)||void 0===t?void 0:t.user_id)||"")||!1}}),watch:{$route:function(){this.fetch()}},shareInfo:function(){var t=this.bookInfo||{},e=t.img;return{title:"".concat(t.title," - ").concat(this.author.username," - 掘金小册"),noTemplate:!0,description:t.desc,thumb:e,url:this.$route.fullPath}},head:function(){var t,e,o,n,r,c,l,d,f,m,h,v,_,y;if(this.bookInfo&&Object.keys(this.bookInfo).length&&this.author&&Object.keys(this.author).length){var title=this.bookInfo&&this.bookInfo.title||"",C=null===(t=this.author)||void 0===t?void 0:t.username;title=title?title+" - ":"",C=C?C+" - ":"";var image=[];(null===(e=this.bookInfo)||void 0===e?void 0:e.img)&&image.push(null===(o=this.bookInfo)||void 0===o?void 0:o.img);var k=Object(it.a)({id:"".concat(meta.f,"/book/").concat(this.bookId),title:null===(n=this.bookInfo)||void 0===n?void 0:n.title,description:null===(r=this.bookInfo)||void 0===r?void 0:r.abstract,username:null===(c=this.author)||void 0===c?void 0:c.username,createdAt:null===(d=null===(l=this.bookInfo)||void 0===l?void 0:l.base_info)||void 0===d?void 0:d.ctime,updatedAt:null===(m=null===(f=this.bookInfo)||void 0===f?void 0:f.base_info)||void 0===m?void 0:m.mtime,image:image}),w="".concat(null===(h=this.bookInfo)||void 0===h?void 0:h.abstract,"。「").concat(null===(v=this.bookInfo)||void 0===v?void 0:v.title,"」由").concat(null===(_=this.author)||void 0===_?void 0:_.username,"撰写，").concat(null===(y=this.bookInfo)||void 0===y?void 0:y.buyerCount,"人购买");return{titleTemplate:null,title:"".concat(title).concat(C,"掘金小册"),meta:[{vmid:"description",name:"description",content:w}],script:[{type:"application/ld+json",json:k}]}}},methods:{clickVip:function(){this.$TEA("member_paid_window_click",{platform:this.isMobileBrowser?"H5":"web"})},shopVipEntry:function(){this.$TEA("member_paid_window_display",{platform:this.isMobileBrowser?"H5":"web"})},computeSalePrice:m.a,openDsDetailPage:function(){var t=this;Object(wt.i)(this.$root.$TEA,{page:"detail_course",book_id:this.bookId||""}),this.$root.$ensureAuthorized("login").then((function(){t.$router.push(t.distributeURL)})).catch((function(t){console.error(t)}))},selectMenu:function(t){var e,o=(null===(e=this.$route.query)||void 0===e?void 0:e.suid)||"";this.$router.push("/".concat(this.isVideoCourse?"video":"book","/").concat(this.bookId,"?").concat(o.length?"suid=".concat(o,"&"):"","scrollMenuIndex=").concat(t)),this.scrollMenuIndex=t,0===t&&(this.$refs.showAllContentWrap&&(this.$refs.showAllContentWrap.style="display: block"),this.$refs.summaryBody&&(this.$refs.summaryBody.className="book-section-view over-thousand")),this.isViewMenuOnTop&&!this.isMobileBrowser&&Object(f.s)(this.$refs.bookInfoDetailPos,88),this.isViewMenuOnTopMobile&&this.isMobileBrowser&&Object(f.s)(this.$refs.bookInfoDetailPos,-30)},updateCommentsTotal:function(t){this.bookCommentsTotal=t},buyBookForTimeline:function(t){this.$router.push({name:"coursePayment",params:{id:t.booklet_id}})},closeVipWechat:function(){this.isVipWechatVisible=!1},closeJoinWechat:function(){this.isBookBoughtGuideVisible=!1,this.$router.replace(this.$bookInfo(this.bookId,this.isVideoCourse?"video":"book"))},getCourseSectionRouteName:function(){var t=this.isMobileBrowser;return this.isVideoCourse?t?"videoCourseWapSection":"videoCourseSection":t?"bookWapSection":"bookSection"},routeReadHistorySection:function(){var t=this.getCourseSectionRouteName(),e=this.bookInfo.readLog,o=e.sectionId,n=e.sign;this.$router.push({name:t,params:{id:this.bookId,sectionId:o},hash:n})},routeBookSection:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0,o=this.getCourseSectionRouteName();"0"===e&&(e=0);var n=e||this.freeSectionList[0]||"",r={name:o,params:{id:this.bookId,sectionId:n},query:this.$route.query};if(t)return r;this.$router.push(r)},getXiaoce:function(){var t=this;return this.getXiaoceById().then((function(){t.isVideoCourse&&"bookInfo"===t.$route.name&&t.$router.replace({name:"videoCourseInfo",params:t.$route.params,query:t.$route.query}),t.$nextTick((function(){t.initImageViewer()}))}))},boughtShowModal:function(t){this.scrollMenuIndex=1;var e=window.localStorage.getItem(Lt.a.isShowVipReturnCard)||"true",o=window.localStorage.getItem(Mt.a.BUY_SUCCESS)||"true";JSON.parse(e)&&t.borrowTimes>0?(this.showVipReturnCard=!0,window.localStorage.setItem(Lt.a.isShowVipReturnCard,"false")):JSON.parse(o)&&t.wechatGroupQrcodeImage&&t.wechatGroupSignal&&(this.handleAddGroup(),window.localStorage.setItem(Mt.a.BUY_SUCCESS,"false"))},getXiaoceById:function(){var t=this;return this.loading=!0,Object($.b)(this.bookId).then((function(e){var o;t.loading=!1;var n=e.bookInfo,r=e.sections,c=e.summaryHtml,l=e.summaryMarkdown;if(n||t.$router.push("/404"),n){t.bookInfo=Object.assign({},n,{summaryHtml:c,summaryMarkdown:l}),t.bookInfo.isBuy&&t.boughtShowModal(n);var d=null===(o=t.$route.query)||void 0===o?void 0:o.scrollMenuIndex;if(void 0!==d){switch(t.scrollMenuIndex=Number(d),t.scrollMenuIndex){case 0:t.$TEA("book_detail_tab_visit",{book_detail_tab_type:"book_introduction"});break;case 1:t.$TEA("book_detail_tab_visit",{book_detail_tab_type:"book_contents"});break;case 2:t.$TEA("book_detail_tab_visit",{book_detail_tab_type:"book_comments"});break;case 3:t.$TEA("book_detail_tab_visit",{book_detail_tab_type:"book_recommends"})}t.isMobileBrowser&&3===t.scrollMenuIndex&&t.hasMore?addEventListener("scroll",t.handleBookRecommendScroll):removeEventListener("scroll",t.handleBookRecommendScroll)}else t.$TEA("book_detail_tab_visit",{book_detail_tab_type:"book_introduction"});t.sectionList=r,t.totalTime=Object(m.b)(r.filter((function(t){return t.isFinished})).map((function(t){return t.read_time})).reduce((function(pre,t){return pre+t}),0)),t.$nextTick((function(){t.initImageViewer()})),t.getBookList()}})).catch((function(){t.$router.push("/404"),t.loading=!1}))},initImageViewer:function(){var t;null===(t=this.$refs.posterImageViewer)||void 0===t||t.attachContainer(this.$refs.poster)},buyBook:function(){var t=Object(ot.b)();return this.$TEA("search_detail_action",Dt(Dt({},t),{},{action_type:st.a.Buy,action_value:this.bookInfo.buyerCount})),this.$coursePayment(this.user,this.bookId)},fetch:function(){return this.getXiaoce()},getBookList:function(){var t=this;Object($.c)({categoryId:"0",limit:6}).then((function(e){var o=e.list;"array"===Object(object.b)(o)&&(null==o?void 0:o.length)>0&&(t.bookList=o.filter((function(e){return e.id!==t.bookId})).slice(0,6))}))},getBookletCommentList:function(){var t=this,e={cursor:"0",item_id:this.bookId,item_type:12,limit:20};Object(X.d)(e).then((function(e){var o=e.data.filter((function(t){return 5===t.comment_info.comment_status}));e.data&&0!==o.length||(t.isShowBookletCommentTab=!1)}))},handleBookRecommendScroll:function(){var t=this,e=document.documentElement.clientHeight,o=document.body.scrollHeight;if(document.documentElement.scrollTop+e>=o-50&&!this.bookRecommendScrollLoading&&this.hasMore){this.bookRecommendScrollLoading=!0;var r={bookletId:this.bookId,cursor:this.cursor,limit:20};Object($.d)(r).then((function(e){var o=e.list;if(t.cursor=e.cursor,t.hasMore=e.hasMore,"array"===Object(object.b)(o)&&(null==o?void 0:o.length)>0){var r=o.filter((function(e){return e.id!==t.bookId}));t.bookRecommendListMobile=[].concat(Object(n.a)(t.bookRecommendListMobile),Object(n.a)(r))}})).finally((function(){t.bookRecommendScrollLoading=!1}))}},getRecommendList:function(){var t=this,e={bookletId:this.bookId,cursor:"0",limit:20};Object($.d)(e).then((function(e){var o=e.list;t.cursor=e.cursor,t.hasMore=e.hasMore,"array"===Object(object.b)(o)&&(null==o?void 0:o.length)>0&&(t.bookRecommendList=o.filter((function(e){return e.id!==t.bookId})).slice(0,3),t.bookRecommendListMobile=o.filter((function(e){return e.id!==t.bookId})))}))},initFixedBuyShow:function(){var t=this;this.removeScrollListener=Object(f.m)(window,(function(){var e=window.pageYOffset<400;t.fixedBuyShow=!e}),50)},initSectionMenu:function(){var t=this;this.removeHeaderListener=Object(f.m)(window,(function(){var e,o;window.pageYOffset<390?t.isViewMenuOnTop=!1:t.isViewMenuOnTop=!0;var n=(null===(e=t.$refs.bookInfo)||void 0===e?void 0:e.clientHeight)||0,r=0===(null===(o=t.bookInfo)||void 0===o?void 0:o.price)?n-16:n+76;window.pageYOffset<r?t.isViewMenuOnTopMobile=!1:t.isMobileBrowser&&(t.isViewMenuOnTopMobile=!0)}),50)},initContainerClickEvent:function(){var t=this,e=this.$getBean("eventBus");e.onVmLife(this,e.eventType.ROOT_CONTAINER_CLICK,(function(){Object.keys(t.actionItem).forEach((function(e){t.actionItem[e].active=!1}))}))},initSaleWay:function(){this.$route.query.source&&this.initstorageSource()},enterBookTEA:function(){var t=this.bookInfo||{},e=this.$route.query;this.$TEA("book_detail_visit",{book_id:t.id,ds_uid:(null==e?void 0:e.suid)||"",is_purchased:(null==t?void 0:t.isBuy)?1:0,book_price:t.base_info.price,book_category:t.base_info.category_id,author_id:t.user.id,is_presale:t.isFinished?0:1,book_discount:this.isDiscountValid?t.discount.rate:10,platform:this.isMobileBrowser?"h5":"web",rent_status:t.isBorrowing?"underway":t.borrowTimes>0?"finish":"never",enter_from:e.enter_from}),this.$options.enterTime=new Date},leaveBookTEA:function(){var t,e=this.$route.query;this.$TEA("book_detail_leave",{stay_time:new Date-this.$options.enterTime,is_purchased:(null===(t=this.bookInfo)||void 0===t?void 0:t.isBuy)?1:0,ds_uid:(null==e?void 0:e.suid)||""})},handleVisibilityChange2:function(){"visible"===document.visibilityState?this.enterBookTEA():this.leaveBookTEA()},handleShowAllContent:function(){this.$refs.showAllContentWrap.style="display: none",this.$refs.summaryBody.style="height: 100%",this.$TEA("book_detail_more_introduction_click")},syncCommentNum:function(t){var e=t.count,o=t.type;"add"===o?this.section.comment_count+=1:"sub"===o?this.section.comment_count-=e?e+1:1:this.section.comment_count=e,this.section.comment_count=this.section.comment_count>0?this.section.comment_count:0},handleAddGroup:function(){var t,e,o;if(!(null===(t=this.bookInfo)||void 0===t?void 0:t.isBuy)&&(null!==(o=null===(e=this.bookInfo)||void 0===e?void 0:e.borrowTimes)&&void 0!==o?o:0)>0)this.isVipWechatVisible=!0;else{this.isBookBoughtGuideVisible=!0;var n;n=this.bookInfo.isBuy?1:0,this.$TEA("learning_group_click",{is_purchased:n})}},handleBookDetailMoreCommentClick:function(){this.isVideoCourse?this.$router.push("/video/".concat(this.bookId,"?scrollMenuIndex=2")):this.$router.push("/book/".concat(this.bookId,"?scrollMenuIndex=2")),this.$TEA("book_detail_more_comment_click")},handleIsListLenMore3:function(){this.isListLenMore3=!0},handleIsShowCommentMode:function(){this.isShowCommentMode=!0},handleExchangeModalClose:function(){this.exchangeModalVisible=!1},validCourseExchangeResult:function(){var t;(null===(t=this.bookInfo)||void 0===t?void 0:t.isBuy)&&(window.localStorage.getItem(Mt.a.EXCHANGE_SUCCESS)===this.bookId&&(this.exchangeModalVisible=!0,window.localStorage.setItem(Mt.a.EXCHANGE_SUCCESS,"")))}},enterTime:0,mounted:function(){var t=this;this.fetch().then((function(){t.$Slardar(at.b),t.enterBookTEA(),t.validCourseExchangeResult(),Object(f.o)(t.handleVisibilityChange2)})),this.initFixedBuyShow(),this.initSectionMenu(),this.initContainerClickEvent(),this.getRecommendList(),this.getBookletCommentList()},updated:function(){var t;(null===(t=this.$refs.summaryBody)||void 0===t?void 0:t.offsetHeight)>1e3&&0===this.scrollMenuIndex&&(this.isOverThousandPx=!0,this.isShowAllContent=!0)},beforeDestroy:function(){this.removeScrollListener(),Object(f.q)(this.handleVisibilityChange2),this.leaveBookTEA(),removeEventListener("scroll",this.handleBookRecommendScroll),this.removeHeaderListener()}}),Et=(o(3197),o(3198),Object(j.a)($t,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book-info-view-wrapper"},[n("BookStickyHeader"),t._v(" "),n("view-container",{staticClass:"view-container--bookinfo",attrs:{header:t.hasHeader,scheme:t.scheme}},[n("div",{staticClass:"book-info-view",class:{mobile:t.isMobileBrowser}},[t.bookInfo?n("div",{staticClass:"book-card book-card-header"},[n("div",{ref:"bookInfo",staticClass:"book-info",style:t.handleBgcShow,attrs:{"data-book-id":t.bookId}},[t.isMobileBrowser?t._e():n("div",{ref:"poster",staticClass:"poster"},[t.bookInfo.img?n("img",{attrs:{src:t.bookInfo.img}}):n("img",{attrs:{src:o(3179)}}),t._v(" "),t.isVideoCourse?n("VideoLabel"):t._e()],1),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"title-line text-line-2"},[n("router-link",{staticClass:"title",attrs:{to:t.isVideoCourse?t.$videoCourseSection(t.bookId):t.$bookSection(t.bookId)}},[t.bookInfo.is_new?n("div",{staticClass:"presale"},[t._v("新品")]):t._e(),t._v(" "),t.bookInfo.canVipBorrow?n("div",{staticClass:"vip-icon"},[t._v("VIP")]):t._e(),t._v(" "),n("span",{attrs:{title:t.bookInfo.title}},[t._v(t._s(t.bookInfo.title))])]),t._v(" "),t.isDistribute&&!t.isMobileBrowser?n("BenefitGuideWidget",{attrs:{enableDs:t.isDistribute,bookId:t.bookId,commission:t.commission}}):t._e()],1),t._v(" "),n("div",{staticClass:"media"},[n("div",{staticClass:"desc text-line-2",attrs:{title:t.bookInfo.abstract}},[t._v("\n                "+t._s(t.bookInfo.abstract)+"\n              ")]),t._v(" "),n("div",{staticClass:"author",class:{"author-mobile":t.isMobileBrowser}},[n("div",{staticClass:"author-info"},[n("app-link",{staticClass:"user",attrs:{to:t.$userRoute(t.author),blank:!0}},[n("avatar",{staticClass:"hero",attrs:{user:t.author,decorative:!0}}),t._v(" "),n("username",{staticClass:"username",attrs:{user:t.author}})],1)],1),t._v(" "),n("div",{staticClass:"author-desc"},[n("span",{staticClass:"desc"},[t._v("\n                    "+t._s(t.$userPosition(t.author))+"\n                  ")])]),t._v(" "),0!==t.bookInfo.price&&t.bookInfo.wechatGroupQrcodeImage?n("div",{staticClass:"add-group",class:{"add-group-mobile":t.isMobileBrowser},attrs:{title:"加入作者互动群"},on:{click:t.handleAddGroup}},[t.isMobileBrowser?t._e():n("img",{attrs:{src:o(3180)}}),t._v(" "),t.isMobileBrowser?n("img",{attrs:{src:o(3181),alt:""}}):n("span",[t._v("学习群")])]):t._e()])]),t._v(" "),n("div",{staticClass:"other"},[t.free?n("div",{staticClass:"is-buy",attrs:{"data-book-id":t.bookId}},[n("router-link",{staticClass:"button--buy line-height",attrs:{to:t.routeBookSection(!0,t.lastReadSection)}},[t._v("\n                  "+t._s(t.lastReadSection?"继续学习":"立即学习")+"\n                ")])],1):n("div",{staticClass:"not-buy",style:{paddingBottom:!t.free&&t.hasTimelimtDiscountAndNotOther?"30px":""}},[t.hasSourceDiscount?n("div",{staticClass:"buy-box"},[n("button",{staticClass:"button--buy",on:{click:t.buyBook}},[t._v("\n                    购买 ￥"+t._s(t.computeSalePrice(t.bookInfo.price,t.sourceDiscount))+"\n                    "),n("span",{staticClass:"delete-text"},[t._v("￥"+t._s(t.bookInfo.price))])])]):n("div",{staticClass:"buy-box"},[t.bookInfo.discount.rate?n("button",{staticClass:"button--buy",style:"fontSize: 12px",on:{click:t.buyBook}},[n("div",{staticClass:"discount-price",style:{textAlign:"start"}},[t._v("\n                      限时折扣价: ￥"+t._s(t.computeSalePrice(t.bookInfo.price,t.bookInfo.discount.rate))+"\n                    ")]),t._v(" "),n("div",{staticClass:"normal-price",style:{textAlign:"start"}},[t._v("\n                      原价: ￥"+t._s(t.bookInfo.price)+"\n                    ")])]):t.bookInfo.borrowTimes>0?n("button",{staticClass:"button--buy",on:{click:t.buyBook}},[n("div",{staticClass:"title"},[t._v("购买: ￥"+t._s(t.bookInfo.price))]),t._v(" "),n("div",{staticClass:"return-num"},[t._v("\n                      "+t._s("退还 "+t.bookInfo.borrowTimes+" 张借阅卡")+"\n                    ")])]):n("button",{staticClass:"button--buy",on:{click:t.buyBook}},[t._v("\n                    购买: ￥"+t._s(t.bookInfo.price)+"\n                  ")])]),t._v(" "),n("VipBorrowButton",{attrs:{"book-info":t.bookInfo,"event-page":"detail"},on:{fetch:t.fetch,read:function(e){return t.routeBookSection(!1,t.lastReadSection)}}}),t._v(" "),t.hasFreeSection&&!t.bookInfo.isBorrowing?n("router-link",{staticClass:"button--write",attrs:{to:t.routeBookSection(!0,t.lastReadSection)}},[n("ApplyIcon",{staticClass:"apply-icon"}),t._v(" "),n("div",{staticClass:"title"},[t._v("\n                    "+t._s(t.lastReadSection?"继续试学":"免费试学")+"\n                  ")])],1):t._e(),t._v(" "),t.hasTimelimtDiscountAndNotOther?n("div",{staticClass:"tooltip"},[n("sale-tooltip",{style:{bottom:0,left:0},attrs:{info:t.bookInfo},nativeOn:{click:function(e){return t.buyBook(e)}}})],1):t._e()],1),t._v(" "),t.isMobileBrowser?t._e():n("div",{staticClass:"right-side",staticStyle:{color:"#515767"}},[n("div",{staticClass:"learn-people"},[t._v("\n                  "+t._s(t.bookInfo.buyerCount)+" 人加入学习\n                ")]),t._v(" "),n("BDivider",{staticStyle:{background:"#515767"},attrs:{type:"vertical"}}),t._v(" "),n("div",{staticClass:"learn-duration"},[t._v("\n                  "+t._s(t.sectionList.length||0)+" 小节\n                ")]),t._v(" "),n("div",{staticStyle:{margin:"0 8px"}},[t._v("·")]),t._v(" "),n("div",{staticClass:"total-time"},[t._v("约 "+t._s(t.totalTime))])],1)])])]),t._v(" "),t.isMobileBrowser&&t.bookInfo.price>0?n("div",{staticClass:"book-bought"},[n("div",{staticClass:"learn-duration",on:{click:function(e){return t.selectMenu(1,"sectionDirectory")}}},[n("div",{staticClass:"total-section"},[t._v("\n              "+t._s(t.sectionList.length||0)+" 小节\n            ")]),t._v(" "),n("div",{staticClass:"total-time"},[t._v("约 "+t._s(t.totalTime))])]),t._v(" "),n("BDivider",{style:"height: 80%; marginTop: 10px",attrs:{type:"vertical"}}),t._v(" "),n("div",{staticClass:"learn-people"},[n("div",{staticClass:"total-people"},[t._v(t._s(t.bookInfo.buyerCount)+" 人")]),t._v(" "),n("div",{style:"textAlign: center; opacity: 0.6; lineHeight: 20px;"},[t._v("\n              已加入学习\n            ")])])],1):t._e(),t._v(" "),t.isDistribute&&t.isMobileBrowser?n("div",{staticClass:"book-mobile-distribute",on:{click:function(e){return e.stopPropagation(),t.openDsDetailPage(e)}}},[n("div",{staticClass:"value"},[t._v(t._s(t.commission))])]):t._e(),t._v(" "),t.free?n("div",{staticClass:"book-mobile-other"},[n("router-link",{staticClass:"button--buy line-height",attrs:{to:t.routeBookSection(!0,t.lastReadSection)}},[t._v("\n            "+t._s(t.lastReadSection?"继续学习":"立即学习")+"\n          ")])],1):n("div",{staticClass:"book-mobile-other"},[t.hasFreeSection&&!t.bookInfo.isBorrowing?n("router-link",{staticClass:"button--write",attrs:{to:t.routeBookSection(!0,t.lastReadSection)}},[n("ApplyIcon",{staticClass:"apply-icon"}),t._v(" "),n("div",{staticClass:"title"},[t._v("\n              "+t._s(t.lastReadSection?"继续试学":"免费试学")+"\n            ")])],1):t._e(),t._v(" "),t.hasSourceDiscount?n("div",{staticClass:"buy-box"},[n("button",{staticClass:"button--buy",on:{click:t.buyBook}},[t._v("\n              购买 ￥"+t._s(t.computeSalePrice(t.bookInfo.price,t.sourceDiscount))+"\n            ")])]):n("div",{staticClass:"buy-box"},[t.bookInfo.discount.rate?n("button",{staticClass:"button--buy",on:{click:t.buyBook}},[n("div",{staticClass:"discount-price"},[t._v("\n                限时折扣价: ￥"+t._s(t.computeSalePrice(t.bookInfo.price,t.bookInfo.discount.rate))+"\n              ")]),t._v(" "),n("div",{staticClass:"normal-price"},[t._v("原价: ￥"+t._s(t.bookInfo.price))])]):t.bookInfo.borrowTimes>0?n("button",{staticClass:"button--buy",on:{click:t.buyBook}},[n("div",{staticClass:"title"},[t._v("购买: ￥"+t._s(t.bookInfo.price))]),t._v(" "),n("div",{staticClass:"return-num"},[t._v("\n                "+t._s("退还 "+t.bookInfo.borrowTimes+" 张借阅卡")+"\n              ")])]):n("button",{staticClass:"button--buy",on:{click:t.buyBook}},[t._v("\n              购买: ￥"+t._s(t.bookInfo.price)+"\n            ")])]),t._v(" "),n("VipBorrowButton",{attrs:{"book-info":t.bookInfo,"event-page":"detail"},on:{fetch:t.fetch,read:function(e){return t.routeBookSection(!1,t.lastReadSection)}}})],1)]):t._e(),t._v(" "),n("div",{ref:"bookInfoDetailPos",staticClass:"book-info-detail"},[n("div",{staticClass:"books-tabs"},[t.bookInfo?t._e():n("div",[t.loading?n("XituSkeleton",{staticClass:"book-card"}):n("div",{staticClass:"view authority-view"},[n("img",{attrs:{src:o(3182)}}),t._v(" "),n("p",{staticClass:"hint"},[t._v("暂无权限")])])],1),t._v(" "),t.bookInfo?n("div",{staticClass:"book-card",class:{"book-card-mobile":t.isMobileBrowser}},[n("div",{staticClass:"book-menu-wrap",class:{top:t.isViewMenuOnTop&&!t.isMobileBrowser,"top-mobile":t.isViewMenuOnTopMobile&&t.isMobileBrowser}},[n("div",{staticClass:"book-menu"},[n("div",{staticClass:"item",class:{active:0===t.scrollMenuIndex},on:{click:function(e){return t.selectMenu(0,"summaryBody")}}},[n("span",{staticClass:"text"},[t._v("介绍")])]),t._v(" "),n("div",{staticClass:"item",class:{active:1===t.scrollMenuIndex},on:{click:function(e){return t.selectMenu(1,"sectionDirectory")}}},[n("span",{staticClass:"text",staticStyle:{display:"inline-block",position:"relative"}},[t._v("\n                    目录\n                    "),t.isHasFreeSection&&t.hasFreeSection?n("div",{staticClass:"free-read",class:{"free-read-pc":!t.isMobileBrowser}},[t.isMobileBrowser?n("img",{attrs:{src:o(3183),alt:""}}):t._e(),t._v(" "),t.isMobileBrowser?t._e():n("img",{staticStyle:{width:"28px",height:"16px"},attrs:{src:o(3184),alt:""}})]):t._e()])]),t._v(" "),t.isShowBookletCommentTab?n("div",{staticClass:"item",class:{active:2===t.scrollMenuIndex},on:{click:function(e){return t.selectMenu(2,"commentBooklet")}}},[n("span",{staticClass:"text"},[t._v("评论")])]):t._e(),t._v(" "),t.isMobileBrowser?n("div",{staticClass:"item",class:{active:3===t.scrollMenuIndex},on:{click:function(e){return t.selectMenu(3,"recommendBooklet")}}},[n("span",{staticClass:"text"},[t._v("推荐小册")])]):t._e(),t._v(" "),t.isViewMenuOnTop&&!t.isMobileBrowser?n("div",{staticClass:"buy-btn-top"},[t.free?n("div",{staticClass:"is-buy",attrs:{"data-book-id":t.bookId}},[n("router-link",{staticClass:"button--buy line-height",attrs:{to:t.routeBookSection(!0,t.lastReadSection)}},[t._v("\n                      "+t._s(t.lastReadSection?"继续学习":"立即学习")+"\n                    ")])],1):n("div",{staticClass:"not-buy",style:{paddingBottom:!t.free&&t.hasTimelimtDiscountAndNotOther?"30px":""}},[t.hasSourceDiscount?n("div",{staticClass:"buy-box"},[n("button",{staticClass:"button--buy",on:{click:t.buyBook}},[t._v("\n                        购买 ￥"+t._s(t.computeSalePrice(t.bookInfo.price,t.sourceDiscount))+"\n                        "),n("span",{staticClass:"delete-text"},[t._v("\n                          ￥"+t._s(t.bookInfo.price)+"\n                        ")])])]):n("div",{staticClass:"buy-box"},[t.bookInfo.discount.rate?n("button",{staticClass:"button--buy",style:"fontSize: 12px",on:{click:t.buyBook}},[n("div",{staticClass:"discount-price",style:"textAlign: start"},[t._v("\n                          限时折扣价: ￥"+t._s(t.computeSalePrice(t.bookInfo.price,t.bookInfo.discount.rate))+"\n                        ")]),t._v(" "),n("div",{staticClass:"normal-price",style:"textAlign: start"},[t._v("\n                          原价: ￥"+t._s(t.bookInfo.price)+"\n                        ")])]):t.bookInfo.borrowTimes>0?n("button",{staticClass:"button--buy",on:{click:t.buyBook}},[n("div",{staticClass:"title"},[t._v("购买: ￥"+t._s(t.bookInfo.price))]),t._v(" "),n("div",{staticClass:"return-num"},[t._v("\n                          "+t._s("退还 "+t.bookInfo.borrowTimes+" 张借阅卡")+"\n                        ")])]):n("button",{staticClass:"button--buy",on:{click:t.buyBook}},[t._v("\n                        购买: ￥"+t._s(t.bookInfo.price)+"\n                      ")])]),t._v(" "),n("VipBorrowButton",{attrs:{"book-info":t.bookInfo,"event-page":"detail"},on:{fetch:t.fetch,read:function(e){return t.routeBookSection(!1,t.lastReadSection)}}}),t._v(" "),t.hasFreeSection&&!t.bookInfo.isBorrowing?n("router-link",{staticClass:"button--write",attrs:{to:t.routeBookSection(!0,t.lastReadSection)}},[n("ApplyIcon",{staticClass:"apply-icon"}),t._v(" "),n("div",{staticClass:"title"},[t._v("\n                        "+t._s(t.lastReadSection?"继续试学":"免费试学")+"\n                      ")])],1):t._e()],1)]):t._e()])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isViewMenuOnTop||t.isViewMenuOnTopMobile,expression:"isViewMenuOnTop || isViewMenuOnTopMobile"}],staticClass:"transparent-menu",staticStyle:{height:"50px"}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.sectionList.length&&1===t.scrollMenuIndex,expression:"sectionList.length && scrollMenuIndex === 1"}],ref:"sectionDirectory",staticClass:"book-content"},[n("div",{staticClass:"book-content-head"},[t._v("\n                课程内容\n                "),n("span",{staticClass:"message"},[t._v("\n                  "+t._s(t.bookInfo.isFinished?"已完结":"已更新"+(t.bookInfo.sectionCount||0)+"小节")+"\n                ")])]),t._v(" "),n("book-directory",{attrs:{free:t.free,info:t.bookInfo,list:t.sectionList}})],1),t._v(" "),t.bookInfo&&0===t.scrollMenuIndex?n("div",{ref:"summaryBody",staticClass:"book-section-view",class:{"over-thousand":t.isOverThousandPx&&t.isMobileBrowser}},[n("markdown-viewer",{staticClass:"markdown-viewer",attrs:{markdown:t.bookInfo.summaryMarkdown,html:t.bookInfo.summaryHtml}}),t._v(" "),t.isOverThousandPx&&t.isMobileBrowser&&t.isShowAllContent?n("div",{ref:"showAllContentWrap",staticClass:"show-all-content-wrap"},[n("span",{staticClass:"show-all-content",on:{click:t.handleShowAllContent}},[t._v("\n                  点击查看全部\n                  "),n("Arrows")],1)]):t._e()],1):t._e(),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowCommentMode&&t.isMobileBrowser,expression:"isShowCommentMode && isMobileBrowser"}],staticClass:"sift-comment",class:{mobile:t.isMobileBrowser}},[t.bookInfo&&0===t.scrollMenuIndex?n("div",{staticClass:"title"},[t._v("\n                评论\n              ")]):t._e(),t._v(" "),t.bookInfo&&0===t.scrollMenuIndex?n("div",{staticClass:"comment-list"},[n("CommentListBox",{staticClass:"booklet-comment-list-box",attrs:{subject:t.subject,expanded:!0,sticky:!1,threeSiftComment:!0,isBestComment:!0,isHiddenReply:!0,forbidInput:"forbidInput"},on:{isListLenMore3:t.handleIsListLenMore3,isShowCommentMode:t.handleIsShowCommentMode,syncCommentNum:t.syncCommentNum}})],1):t._e(),t._v(" "),t.isListLenMore3&&0===t.scrollMenuIndex&&t.isMobileBrowser?n("div",{staticClass:"more-comment",on:{click:t.handleBookDetailMoreCommentClick}},[t._v("\n                更多评论 >\n              ")]):t._e()]),t._v(" "),2===t.scrollMenuIndex?n("div",{staticClass:"bookComment",staticStyle:{padding:"0 2rem"}},[n("CommentListBox",{staticClass:"booklet-comment-list-box",attrs:{subject:t.subject,expanded:!0,sticky:!1,isHiddenReply:!0,isBestComment:!0,forbidInput:"forbidInput"},on:{syncCommentNum:t.syncCommentNum}})],1):t._e(),t._v(" "),t.bookRecommendListMobile&&t.isMobileBrowser&&3===t.scrollMenuIndex&&t.bookRecommendListMobile.length?n("div",{ref:"recommendBooklet",staticClass:"book-card",staticStyle:{width:"100vw",margin:"10px"}},t._l(t.bookRecommendListMobile,(function(e){return n("book",{key:e.booklet_id,attrs:{info:e},on:{buyBook:t.buyBookForTimeline}})})),1):t._e()]):t._e()]),t._v(" "),t.isMobileBrowser?t._e():n("BAffix",{attrs:{"offset-top":74}},[n("div",{staticClass:"books-recommend"},[n("div",{staticClass:"books-recommend-title"},[t._v("推荐小册")]),t._v(" "),n("div",{staticClass:"books-recommend-list"},t._l(t.bookRecommendList,(function(t){return n("div",{key:t.booklet_id,staticClass:"books-recommend-item"},[n("BookRecommend",{attrs:{bookInfo:t}})],1)})),0)])])],1)]),t._v(" "),t.bookInfo?n("copy-right"):t._e(),t._v(" "),n("image-viewer",{ref:"posterImageViewer",attrs:{"background-color":"rgba(0,0,0,.65)",margin:50,full:!0}}),t._v(" "),n("wechat-quick-login"),t._v(" "),t.isVipWechatVisible?n("VipJoinWechat",{on:{close:t.closeVipWechat}}):t._e(),t._v(" "),t.isBookBoughtGuideVisible?n("BookGuidanceJoinWechat",{attrs:{info:t.bookInfo},on:{read:function(e){return t.routeBookSection(!1)},close:t.closeJoinWechat}}):t._e(),t._v(" "),t.showVipReturnCard?n("VipReturnCard",{on:{close:function(e){t.showVipReturnCard=!1}}}):t._e(),t._v(" "),n("ExchangeSuccessModal",{attrs:{visible:t.exchangeModalVisible},on:{close:t.handleExchangeModalClose}})],1)],1)}),[],!1,null,"59460696",null));e.default=Et.exports},851:function(t,e,o){"use strict";o(44),o(55),o(135);var n=o(8),r=Object(n.d)({name:"xitu-skeleton",props:{tagName:{type:String,default:"div"},value:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},num:{type:Number,default:1,validator:function(t){return t>0&&!isNaN(t)&&isFinite(t)}},rows:{type:Number,default:4,validator:function(t){return t>=0&&!isNaN(t)&&isFinite(t)}},avatarShape:{type:String,validator:function(t){return["circle","square"].includes(t)||""===t},default:""},avatarWidth:{type:Number,default:45}},data:function(){return{visible:this.value}},computed:{mainClass:function(){return{"xitu-skeleton":!0,"xitu-skeleton-animated":this.animated}},avatarCls:function(){return["xitu-skeleton-avatar","xitu-skeleton-avatar-".concat(this.avatarShape)]},avatarStyle:function(){return{width:"".concat(this.avatarWidth,"px"),height:"".concat(this.avatarWidth,"px")}}},methods:{},watch:{value:function(t){this.visible=t}}}),c=(o(857),o(30)),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(t.tagName,t._b({tag:"component"},"component",t.$attrs,!1),[t.visible?o("div",{class:t.mainClass},t._l(t.num,(function(e){return o("div",{key:e,staticClass:"xitu-skeleton-item"},[t.avatarShape?o("span",{class:t.avatarCls,style:t.avatarStyle}):t._e(),t._v(" "),t.rows?o("div",{staticClass:"xitu-skeleton-content"},t._l(t.rows,(function(i){return o("div",{key:i,staticClass:"xitu-skeleton-line"})})),0):t._e()])})),0):t._t("default")],2)}),[],!1,null,"3ff8f708",null);e.a=component.exports},852:function(t,e,o){},853:function(t,e,o){"use strict";o.d(e,"g",(function(){return f})),o.d(e,"h",(function(){return m})),o.d(e,"a",(function(){return h})),o.d(e,"b",(function(){return v})),o.d(e,"f",(function(){return _})),o.d(e,"e",(function(){return y})),o.d(e,"d",(function(){return k})),o.d(e,"c",(function(){return w}));o(16),o(15),o(11),o(6),o(14),o(23);var n=o(0),r=o(5),c=o(1);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function f(t){var e=t.item_id,o=t.item_type,n=t.comment_content,r=t.comment_pics;return Object(c.e)({url:"/interact_api/v1/comment/publish",method:"post",body:{item_id:e,item_type:o,comment_content:n,comment_pics:r,client_type:2608}})}function m(t){var e=t.reply_to_comment_id,o=t.reply_to_reply_id,n=t.reply_to_user_id,r=t.item_id,l=t.item_type,d=t.reply_content,f=t.reply_pics;return Object(c.e)({url:"/interact_api/v1/reply/publish",method:"post",body:{reply_to_comment_id:e,reply_to_reply_id:o,reply_to_user_id:n,item_id:r,item_type:l,reply_content:d,reply_pics:f,client_type:2608}})}function h(t){var e=t.comment_id;return Object(c.e)({url:"/interact_api/v1/comment/delete",method:"post",body:{comment_id:String(e)}}).then((function(t){return t.data}))}function v(t){var e=t.comment_id,o=t.reply_id;return Object(c.e)({url:"/interact_api/v1/reply/delete",method:"post",body:{comment_id:e,reply_id:o}}).then((function(t){return t.data}))}function _(t){var e=t.comment_id,o=t.item_id,n=t.item_type,cursor=t.cursor,r=t.limit;return Object(c.e)({url:"/interact_api/v1/reply/list",method:"post",body:{comment_id:e,item_id:o,item_type:n,cursor:cursor,limit:r,client_type:2608}})}function y(t){return C.apply(this,arguments)}function C(){return(C=Object(r.a)(regeneratorRuntime.mark((function t(e){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.e)({url:"/interact_api/v1/comment/hots",method:"post",body:e});case 2:return o=t.sent,t.abrupt("return",o.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(t){return Object(c.e)({url:"/interact_api/v1/comment/list",method:"post",body:d(d({},t),{},{client_type:2608})})}function w(t){return Object(c.e)({url:"/interact_api/v1/comment/detail",method:"post",body:{comment_id:t,clent_type:2608},showError:!1})}},857:function(t,e,o){"use strict";o(852)},859:function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"a",(function(){return r})),o.d(e,"f",(function(){return c})),o.d(e,"e",(function(){return l})),o.d(e,"g",(function(){return d})),o.d(e,"d",(function(){return f})),o.d(e,"c",(function(){return m}));var n="掘金,稀土,Vue.js,前端面试题,Kotlin,ReactNative,Python",r="掘金是面向全球中文开发者的技术内容分享与交流平台。我们通过技术文章、沸点、课程、直播等产品和服务，打造一个激发开发者创作灵感，激励开发者沉淀分享，陪伴开发者成长的综合类技术社区。",c="https://juejin.cn",l="juejin.cn",d=function(t){return"".concat(t,"技术、学习、经验文章掘金开发者社区搜索结果。掘金是一个帮助开发者成长的社区，").concat(t,"技术文章由稀土上聚集的技术大牛和极客共同编辑为你筛选出最优质的干货，用户每天都可以在这里找到技术世界的头条内容，我们相信你也可以在这里有所收获。")},f="掘金,科技资讯,开源新闻,开源软件,Vue.js,go mod,netty,后端,谷歌,亚马逊,GitHub",m="掘金是目前领先的中文开发者社区，致力帮助开发者成长，为开发者提供新鲜的科技行业动态、开源项目和编程语言动态。掘金是给开发者用的 Hacker News，给设计师用的 Designer News，和给产品经理用的 Medium。"},870:function(t,e,o){"use strict";o(16),o(15),o(11),o(14),o(45),o(6),o(83);var n,r=o(32),c=(o(23),o(5)),l=o(0),d=o(4),f=o(929),m=o(178),h=o(930),v=o(921),_=o(894),y=o(885),C=o(853),k=o(882),w=o(886),O=o(879),j=o(180),I=o(933),S=o.n(I),x=o(17);function B(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function L(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?B(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):B(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var M=(n={},Object(l.a)(n,x.f.ArticleIdType,"article"),Object(l.a)(n,x.f.PinType,"pin"),Object(l.a)(n,x.f.Book,"小册"),Object(l.a)(n,x.f.Realtime,"news"),n),P={components:{AuthCard:h.a,Avatar:m.a,Emoji:f.a,ImageIcon:S.a},props:["commentList","replyList","subject","comment","parent","autoFocus","placeholder","mode","small"],data:function(){return{active:!1,focused:!1,submitting:!1,content:"",imageFile:null,imagePreviewUrl:"",emoji:""}},computed:{me:function(){return this.$store.getters.USER},bindedPhone:function(){return this.me&&this.me.isBindedPhone},empty:function(){return!this.content.length},canSubmit:function(){return this.content.length&&!this.submitting},isActionBoxVisible:function(){return(this.focused||!this.empty||this.imageFile)&&this.me&&this.bindedPhone},submitButtonTitle:function(){return this.submitting?"提交中...":"发表评论"},sendTip:function(){return this.$device.isMacOS?"⌘ + Enter":"Ctrl + Enter"}},watch:{focused:function(t){t&&!this.me&&this.$requestLogin(),t||!this.empty||this.imageFile||(this.$emit("emptyBlur"),this.$store.dispatch(d.UPDATE_PIN_ON_FOCUS,!1))},imageFile:function(){Object(O.g)(this.$refs.richInput)}},methods:{onFocus:function(){this.focused=!0,this.$store.dispatch(d.UPDATE_PIN_ON_FOCUS,!0)},onOuterClick:function(){this.empty&&(this.focused=!1)},onFormBoxClick:function(t){var e=t.target;if(this.bindedPhone){var input=this.$refs.richInput;input.focus(),input.contains(e)||Object(O.g)(input)}},onInput:function(){this.focused=!0,Object(O.e)(this.$refs.richInput),this.content=this.emojiToText(this.$refs.richInput.innerHTML),this.content=Object(O.b)(this.content)},onPaste:function(t){t.preventDefault(),Object(O.f)(t,this.onFileSelected);var text=Object(O.a)(t),html=Object(j.d)(text);Object(O.c)(this.$refs.richInput,html),this.focused=!0,this.content=this.emojiToText(this.$refs.richInput.innerHTML),this.content=Object(O.b)(this.content)},onKeydown:function(t){var e=this;if(this.content.length&&!this.submitting)return Object(v.a)(t,(function(){return e.submit()}))},cleanContent:function(){this.$refs.richInput.innerHTML="",this.content=""},updateEmoji:function(t){this.emoji=t,Object(O.c)(this.$refs.richInput,Object(j.c)(this.emoji)),this.focused=!0,this.content=this.emojiToText(this.$refs.richInput.innerHTML),this.content=Object(O.b)(this.content)},showFileDialog:function(){this.$refs.input.click()},changeFile:function(t){this.imageFile=t,window.URL.revokeObjectURL(this.imagePreviewUrl),this.imagePreviewUrl=t?window.URL.createObjectURL(t):""},cleanFile:function(){this.changeFile(null)},onFileSelected:function(t){var e=this;this.$refs.input.value=null,t&&(this.isWithVaildSize(t)?Object(_.a)(t,y.a).then((function(o){o?e.changeFile(t):e.$error("不支持此格式的图片")})):this.$error("文件过大"))},isWithVaildSize:function(t){return t.size<=y.c},uploadFile:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var o,n,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.imageFile){e.next=11;break}return e.next=3,Object(k.a)(t.me.user_id,[t.imageFile]);case 3:return o=e.sent,n=Object(r.a)(o,1),c=n[0],l=t.imageFile.type.split("/")[1],d={gif:0,png:1,jpg:2,jpeg:2},e.abrupt("return",{pic_url:c.Url,width:c.ImageHeight,height:c.ImageWidth,pic_type:d[l]||1});case 11:return e.abrupt("return",Promise.resolve());case 12:case"end":return e.stop()}}),e)})))()},submit:function(){var t=this;return this.submitting=!0,this.uploadFile().then((function(image){return t.createSubmitTask(image)})).then((function(e){if(0===e.err_no?(t.$emit("syncCommentNum",{type:"add"}),t.submitting=!1,t.$alertMsg("评论成功"),t.$emit("submitted"),t.reset()):t.$error(e.err_msg||"评论失败，请稍后重试"),Object(w.a)()){var o=Object(w.b)();t.$TEA("search_detail_action",L(L({},o),{},{action_type:x.a.Comment,action_value:t.commentList.length}))}})).catch((function(e){t.submitting=!1,t.$error(e)}))},createSubmitTask:function(image){var t=this,e=this.subject,o=e.item_id,n=e.item_type,r=e.user_id;e.cate_id;return this.$TEA("comment_action",{comment_type:M[n],comment_parent_id:o,author_user_id:r,comment_url:location.href,mode:this.mode}),this.comment?this.comment.reply_info?Object(C.h)({reply_to_comment_id:this.comment.reply_info.reply_comment_id,reply_to_reply_id:this.comment.reply_info.reply_id,reply_to_user_id:this.comment.reply_info.user_id,item_id:o,item_type:n,reply_content:this.content,reply_pics:void 0===image?[]:[image]}).then((function(e){return 0===e.err_no&&(t.replyList||[]).push(e.data),e})):Object(C.h)({reply_to_comment_id:this.comment.comment_info.comment_id,reply_to_reply_id:null,reply_to_user_id:null,item_id:o,item_type:n,reply_content:this.content,reply_pics:void 0===image?[]:[image]}).then((function(e){return 0===e.err_no&&(t.replyList||[]).push(e.data),e})):Object(C.g)({item_id:o,item_type:n,comment_content:this.content,comment_pics:void 0===image?[]:[image]}).then((function(e){return 0===e.err_no&&t.commentList.unshift(e.data),e}))},reset:function(){this.cleanFile(),this.cleanContent()},emojiToText:function(html){return html.replace(/<img.*?alt=".*?/g,"").replace(/".?src=.*?>/g,"")}},mounted:function(){var t=this;this.autoFocus&&this.$nextTick((function(){t.$refs.richInput.focus()}))}},D=(o(934),o(30)),component=Object(D.a)(P,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"outer-click",rawName:"v-outer-click",value:function(){return t.onOuterClick()},expression:"() => onOuterClick()"}],staticClass:"comment-form",class:{focused:t.focused,reply:!!t.comment,"sub-reply":!!t.parent,small:t.small}},[o("div",{staticClass:"avatar-box"},[o("avatar",{staticClass:"avatar",attrs:{user:t.me}})],1),o("div",{staticClass:"form-box",class:{disabled:t.submitting}},[o("auth-card",{attrs:{user:t.me},on:{click:t.onFormBoxClick}},[o("div",{staticClass:"input-box"},[o("div",{ref:"richInput",staticClass:"rich-input",class:{empty:t.empty},attrs:{contenteditable:"true",spellcheck:"false",placeholder:t.placeholder||"输入评论（Enter换行，"+t.sendTip+"发送）",disabled:!0},on:{focus:t.onFocus,input:t.onInput,paste:t.onPaste,keydown:t.onKeydown,keyup:function(t){t.stopPropagation()}}}),t.imagePreviewUrl?o("div",{staticClass:"image-preview-box"},[o("div",{staticClass:"image-preview",style:{backgroundImage:"url("+t.imagePreviewUrl+")"}}),o("div",{staticClass:"clean-btn",on:{click:t.cleanFile}},[o("svg",{attrs:{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[o("rect",{attrs:{width:"12",height:"12",rx:"2",fill:"#86909C"}}),t._v(" "),o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.98095 5.49307L8.22012 3.25389C8.28521 3.18881 8.39074 3.18881 8.45582 3.25389L8.69153 3.4896C8.75661 3.55468 8.75661 3.66021 8.69153 3.7253L6.45235 5.96447L8.69153 8.20364C8.75661 8.26873 8.75661 8.37426 8.69153 8.43934L8.45582 8.67505C8.39074 8.74013 8.28521 8.74013 8.22012 8.67505L5.98095 6.43587L3.74178 8.67505C3.67669 8.74013 3.57116 8.74013 3.50608 8.67505L3.27037 8.43934C3.20529 8.37426 3.20529 8.26873 3.27037 8.20364L5.50954 5.96447L3.27037 3.7253C3.20529 3.66021 3.20529 3.55468 3.27037 3.4896L3.50608 3.25389C3.57116 3.18881 3.67669 3.18881 3.74178 3.25389L5.98095 5.49307Z",fill:"white"}})])])]):t._e()])]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible||!t.small,expression:"isActionBoxVisible || !small"}],staticClass:"action-box"},[o("emoji",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible,expression:"isActionBoxVisible"}],staticClass:"emoji-btn",on:{selectEmoji:t.updateEmoji}}),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible,expression:"isActionBoxVisible"}],staticClass:"image-btn",on:{click:t.showFileDialog}},[o("ImageIcon",{staticClass:"icon"}),o("span",[t._v("图片")])],1),o("div",{staticClass:"submit"},[o("span",{directives:[{name:"show",rawName:"v-show",value:t.isActionBoxVisible,expression:"isActionBoxVisible"}]},[t._v(t._s(t.sendTip))]),o("button",{staticClass:"submit-btn",attrs:{disabled:!t.canSubmit},on:{click:t.submit}},[t._v(t._s(t.submitButtonTitle))])])],1)],1),o("input",{ref:"input",staticClass:"hidden",attrs:{type:"file"},on:{change:function(e){return t.onFileSelected(e.target.files[0])}}})])}),[],!1,null,"372c6532",null);e.a=component.exports},873:function(t,e,o){"use strict";o(137);var n=o(48);o(6);function r(t){return new Promise((function(e,o){var img=new window.Image;img.onload=function(){return e({width:img.naturalWidth,height:img.naturalHeight,url:t})},img.onerror=function(){return o()},img.src=t}))}var c=function(){return{loading:!1,loaded:!1,error:!1,src:null,imageStyle:{top:"",left:"",width:"",height:"",transform:""},token:Date.now()}},l={props:["backgroundColor","margin","full"],data:c,methods:{show:function(t){var e=t.thumbUrl,o=t.originalUrl,rect=t.rect;this.loadImage({originalUrl:o,rect:rect}),this.loadTumb({thumbUrl:e,rect:rect})},close:function(){Object.assign(this,c()),this.unlockScroll()},loadTumb:function(t){var e=this,o=t.thumbUrl,rect=t.rect,n=this.token;r(o).then((function(t){if(e.isInSameView(n)&&!e.loaded&&!e.error){var r=e.computeRenderedRect(t.width,t.height);e.applyRect(r),e.src=o,e.applyTransform(e.computeTransform(r,rect))}})).catch((function(t){e.isInSameView(n)&&console.error(t)}))},loadImage:function(t){var e=this,o=t.originalUrl,rect=t.rect,n=this.token;this.loading=!0,r(o).then((function(image){if(e.isInSameView(n)){var t=!!e.src,r=!e.full&&e.isLargeLongImage(image),c=e.computeRenderedRect(image.width,image.height,r);e.applyRect(c),e.src=o,e.loading=!1,e.loaded=!0,r&&e.lockScroll(),t||e.applyTransform(e.computeTransform(c,rect))}})).catch((function(t){e.isInSameView(n)&&(console.error(t),e.loading=!1,e.error=!0)}))},applyRect:function(rect){Object.assign(this.imageStyle,{top:rect.top+"px",left:rect.left+"px",width:rect.width+"px",height:rect.height+"px"})},applyTransform:function(t){var e=this;this.imageStyle.transform=t,this.$nextTick((function(){e.forceReflow(),e.imageStyle.transform=""}))},initScrollEventListener:function(){var t=this,e=this.$getBean("eventBus"),o=e.eventType.ROOT_CONTAINER_SCROLL;e.onVmLife(this,o,(function(){t.src&&t.close()}))},computeRenderedRect:function(t,e,o){var r=Object(n.h)(),c=this.getSafeAreaSize();if(o){var l=Math.min(r.width,t,960),d=l*e/t;return{top:0,left:(r.width-l)/2,width:l,height:d}}var f=t/c.width,m=e/c.height,h=Math.max(f,m,1),v=t/h,_=e/h;return{top:(r.height-_)/2,left:(r.width-v)/2,width:v,height:_}},computeTransform:function(t,rect){var e=rect.width/t.width,o=rect.height/t.height,n=rect.width-t.width,r=rect.height-t.height,c=rect.top-t.top+r/2,l=rect.left-t.left+n/2,d="translate3d(".concat(l,"px, ").concat(c,"px, 0)"),f="scale3d(".concat(e,", ").concat(o,", 1)");return"".concat(d," ").concat(f)},forceReflow:function(){document.body.clientWidth},isInSameView:function(t){return t===this.token},isLargeLongImage:function(image){var t=this.getSafeAreaSize(),e=t.width,o=t.height,n=o/e,r=image.height/image.width,c=r>1&&r>n;return(image.width>e||image.height>o)&&c},getSafeAreaSize:function(){var t=Object(n.h)(),e=t.width,o=t.height;return{width:Math.max(0,e-2*(+this.margin||0)),height:Math.max(0,o-2*(+this.margin||0))}},lockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.LOCK_ROOT_CONTAINER_SCROLL)},unlockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)}},mounted:function(){this.initScrollEventListener()}},d=(o(918),o(30)),f=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[t.src?n("div",{staticClass:"image-viewer",class:{loading:t.loading},on:{click:t.close}},[n("div",{staticClass:"image-box",style:{backgroundColor:t.backgroundColor}},[t.error?n("img",{staticClass:"image error",attrs:{src:o(874)}}):n("img",{staticClass:"image",style:t.imageStyle,attrs:{src:t.src}})])]):t._e()])}),[],!1,null,"10b7b0e6",null).exports,m=o(965),h=o.n(m),v=function(){return{isLargeLongMode:!1,isZoomMode:!1,loading:!1,loaded:!1,error:!1,src:null,offsetX:0,offsetY:0,canZoom:!1,token:Date.now()}},_={props:["backgroundColor","margin","full"],data:v,methods:{show:function(t){var e=t.thumbUrl,o=t.originalUrl,rect=t.rect;this.loadImage({originalUrl:o,rect:rect}),this.loadTumb({thumbUrl:e,rect:rect})},close:function(){this.destroyGesture(),Object.assign(this,v()),this.unlockScroll()},loadTumb:function(t){var e=this,o=t.thumbUrl,n=(t.rect,this.token);r(o).then((function(t){!e.isInSameView(n)||e.loaded||e.error||(e.src=o)})).catch((function(t){e.isInSameView(n)&&console.error(t)}))},loadImage:function(t){var e=this,o=t.originalUrl,n=(t.rect,this.token);this.loading=!0,r(o).then((function(image){if(e.isInSameView(n)){var t=!e.full&&e.isLargeLongImage(image);e.src=o,e.loading=!1,e.loaded=!0,e.isLargeLongMode=t,e.canZoom=e.isLargeImage(image),e.initGesture(),e.isLargeLongMode&&e.lockScroll()}})).catch((function(t){e.isInSameView(n)&&(console.error(t),e.loading=!1,e.error=!0)}))},isInSameView:function(t){return t===this.token},isLargeLongImage:function(image){var t=Object(n.h)(),e=t.width,o=t.height,r=o/e,c=image.height/image.width,l=c>1&&c>r;return(image.width>e||image.height>o)&&l},isLargeImage:function(image){var t=Object(n.h)(),e=t.width;return t.height<image.height||e<image.width},lockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.LOCK_ROOT_CONTAINER_SCROLL)},unlockScroll:function(){var t=this.$getBean("eventBus");t.emit(t.eventType.UNLOCK_ROOT_CONTAINER_SCROLL)},initScrollEventListener:function(){var t=this,e=this.$getBean("eventBus"),o=e.eventType.ROOT_CONTAINER_SCROLL;e.onVmLife(this,o,(function(){t.src&&!t.isZoomMode&&t.close()}))},adjustOffset:function(){var t=Object(n.h)(),e=t.width,o=t.height,rect=this.$refs.image.getBoundingClientRect();rect.width<e?this.offsetX=0:rect.left>0?this.offsetX-=rect.left:rect.left+rect.width<e&&(this.offsetX+=e-rect.left-rect.width),rect.height<o?this.offsetY=0:rect.top>0?this.offsetY-=rect.top:rect.top+rect.height<o&&(this.offsetY+=o-rect.top-rect.height)},initGesture:function(){var t=this;this.$nextTick((function(){t.finger=new h.a(t.$refs.imageBox,{singleTap:function(e){t.isZoomMode?(t.isZoomMode=!1,t.offsetX=0,t.offsetY=0):t.close()},doubleTap:function(e){t.canZoom&&(t.isZoomMode=!t.isZoomMode,t.isZoomMode?t.lockScroll():(t.unlockScroll(),t.offsetX=0,t.offsetY=0))},pressMove:function(e){var o=e.deltaX,n=e.deltaY;t.isZoomMode&&(t.offsetX+=o,t.offsetY+=n)},touchEnd:function(){t.isZoomMode&&window.setTimeout((function(){t.adjustOffset()}),100)}})}))},destroyGesture:function(){this.finger&&this.finger.destroy()}},mounted:function(){this.initScrollEventListener()}},y=(o(919),Object(d.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[t.src?n("div",{staticClass:"image-viewer mobile",class:{loading:t.loading}},[n("div",{ref:"imageBox",staticClass:"image-box",class:{"large-long":t.isLargeLongMode},style:{backgroundColor:t.backgroundColor}},[t.error?n("img",{staticClass:"image error",attrs:{src:o(874)}}):n("img",{ref:"image",staticClass:"image",class:{zoom:t.isZoomMode},style:{transform:"translate3d("+t.offsetX+"px, "+t.offsetY+"px, 0)"},attrs:{src:t.src}})])]):t._e()])}),[],!1,null,"93a27598",null).exports),C=o(271);var k={components:{Desktop:f,Mobile:y},props:["selector","backgroundColor","margin","full"],data:function(){return{component:null}},methods:{attachContainer:function(t){this.container!==t&&(this.removeEventListener(),this.addEventListener(t),this.container=t)},onClick:function(t){var e,o=t.target;if(this.isMatched(o)){var n=(e=o).getAttribute("data-src")||e.getAttribute("src")||function(t){var e=(t.style.backgroundImage||"").match(/url\("?'?(.+?)"?'?\)/i);return e&&e[1]}(e);if(n){var r=Object(C.c)(n),rect=o.getBoundingClientRect();this.$refs.viewer.show({thumbUrl:n,originalUrl:r,rect:rect})}}},addEventListener:function(t){var e=this;t.__removeIamgeViewListener=Object(n.k)(t,"click",(function(t){e.onClick(t)}),!0)},removeEventListener:function(){this.container&&this.container.__removeIamgeViewListener()},isMatched:function(t){return!t.classList.contains("equation")&&!this.$el.contains(t)&&Object(n.j)(t,this.selector||"img")}},mounted:function(){this.component=this.$device.isMobile?"Mobile":"Desktop"},beforeDestroy:function(){this.removeEventListener()}},w=(o(920),Object(d.a)(k,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"image-viewer-box"},[e(this.component,{ref:"viewer",tag:"component",attrs:{selector:this.selector,"background-color":this.backgroundColor,margin:this.margin,full:this.full}})],1)}),[],!1,null,"5ca9a68f",null));e.a=w.exports},874:function(t,e,o){t.exports=o.p+"img/image-error.3338abe.png"},875:function(t,e,o){},876:function(t,e,o){},877:function(t,e,o){},878:function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"b",(function(){return r}));o(83),o(45),o(26),o(19);var n=function(text){try{var textarea=document.createElement("textarea");document.body.appendChild(textarea),textarea.value=text,textarea.select(),document.execCommand("copy"),document.body.removeChild(textarea)}catch(t){throw"copy link error"}};function r(content){if(!(content=(null==content?void 0:content.trim())||""))return"";var t=((null==content?void 0:content.trim())||"").split("\n")[0];return t.length<=30?t:t.substring(0,30)}},880:function(t,e,o){"use strict";var n,r;o.d(e,"d",(function(){return n})),o.d(e,"e",(function(){return r})),o.d(e,"c",(function(){return l})),o.d(e,"b",(function(){return d})),o.d(e,"a",(function(){return f})),o.d(e,"f",(function(){return m})),function(t){t.UNPLAY="unplay",t.PLAYING="playing",t.PAUSED="paused",t.PLAYED="played"}(n||(n={})),function(t){t.detailRoute="bytetechVideoDetail",t.singleDetailRoute="bytetechVideoSingleDetail"}(r||(r={}));var c,l={routeName:"courseIndex",videoCategory:"bytetech",vipBookType:"vip"},d={title:"掘金课程是什么？",desc:"一个小篇幅、高浓度、成体系、有收益的技术学习平台",spreadQrcode:"https://z.juejin.cn/L54A"};!function(t){t.PutOnTimeSort="1",t.SaleCountDesc="7",t.PriceAsc="8",t.PriceDesc="9",t.DefaultSort="10"}(c||(c={}));var f={10:"recommend",7:"hot",1:"new",9:"price_h2l",8:"price_l2h"},m={discussTitle:"加入掘金会员，查看并参与课程讨论，字节内部课免费学",resouceTitle:"加入掘金会员，即可查看学习资料，字节内部课免费学"}},883:function(t,e,o){"use strict";o.d(e,"a",(function(){return c}));var n=o(907),r=o.n(n);function c(content){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#000000",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:410,svg=new r.a({content:content,color:t,padding:0,width:e,height:e,background:"#ffffff",ecl:"L"}).svg();return"data:image/svg+xml;utf8,".concat(encodeURIComponent(svg))}},886:function(t,e,o){"use strict";o.d(e,"c",(function(){return r})),o.d(e,"a",(function(){return c})),o.d(e,"b",(function(){return l}));o(44),o(55);var n=o(17),r={left:[{id:0,title:"综合"},{id:2,title:"文章"},{id:12,title:"课程"},{id:9,title:"标签"},{id:1,title:"用户"}],right:[{id:0,title:"时间不限"},{id:1,title:"最近一天"},{id:2,title:"最近一周"},{id:3,title:"最近三月"}]},c=function(){return document.referrer.includes("/search")},l=function(){if(!c())return{};try{var t=sessionStorage.getItem("SEARCH_PARAMS"),e=JSON.parse(t),o=e.query,r=e.search_attached_info,l=void 0===r?"":r,d=e.rank,f=e.display_search_type;return{query:o,detail_from:n.g.Search,search_attached_info:l,rank:d,display_search_type:f}}catch(t){return{}}}},887:function(t,e,o){},895:function(t,e,o){o(16),o(15),o(11),o(6),o(14);var n=o(40),r=o(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,m=data.staticClass,style=data.style,h=data.staticStyle,v=data.attrs,_=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,m],style:[style,h],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.56162 2.16903C8.66569 2.09612 8.78195 2.06075 8.88247 2.09071C8.97653 2.11874 9.23851 2.25868 9.50988 2.9675C9.64419 3.31832 9.9356 4.24191 9.42155 6.05383C9.29751 6.49103 9.61394 6.95254 10.0926 6.95922L13.492 7.00667L13.492 7.00672H13.4991C13.6049 7.00672 13.7228 7.01937 13.8134 7.05849C13.8544 7.07622 13.8815 7.0959 13.8999 7.11552C13.9166 7.13326 13.9368 7.16198 13.9515 7.21587C13.9848 7.33735 14.0228 7.74663 13.9473 8.42213C13.874 9.07808 13.698 9.9443 13.341 10.9593C13.0424 11.8083 12.6601 12.5287 12.0684 13.4874C12.0558 13.5047 12.0462 13.5192 12.0418 13.526L12.0404 13.528C12.0292 13.5449 12.0242 13.5526 12.018 13.5613C12.0076 13.5759 12.0018 13.5815 11.9983 13.5845C11.996 13.5865 11.9908 13.5907 11.9777 13.5954C11.9638 13.6004 11.9311 13.6095 11.8706 13.6095H5.56278L5.56373 6.58441C5.87126 6.41852 6.19881 6.20079 6.54112 5.8401C6.93883 5.42103 7.33789 4.82891 7.76254 3.94134C7.84974 3.75908 7.91745 3.55913 7.97574 3.37714C7.99264 3.32437 8.0087 3.2733 8.02438 3.22344L8.02439 3.2234C8.066 3.09109 8.10495 2.96727 8.14985 2.84264C8.2758 2.49303 8.40247 2.28052 8.56162 2.16903ZM10.452 2.6068C10.1323 1.7716 9.70208 1.28228 9.17063 1.12389C8.64564 0.967414 8.20308 1.18842 7.98278 1.34276C7.55169 1.64476 7.33837 2.11859 7.20071 2.50071C7.14817 2.64656 7.10002 2.79968 7.05661 2.93775C7.0422 2.98357 7.02832 3.02773 7.01496 3.06941C6.95791 3.24755 6.90763 3.39066 6.85248 3.50594C6.45683 4.33291 6.1121 4.82661 5.80935 5.14563C5.51322 5.45766 5.23983 5.62142 4.9473 5.76772C4.71095 5.88592 4.55494 6.12857 4.55491 6.40111L4.55388 13.912C4.55383 14.3021 4.87002 14.6183 5.26008 14.6183H11.8706C12.2097 14.6183 12.4663 14.5109 12.6519 14.3531C12.7387 14.2792 12.7988 14.2038 12.8387 14.1479C12.8556 14.1243 12.8704 14.102 12.8786 14.0895L12.8813 14.0854L12.8826 14.0835L12.8955 14.068L12.9142 14.0377C13.5304 13.0409 13.9578 12.2465 14.2927 11.294C14.6745 10.2085 14.8679 9.26762 14.9499 8.53421C15.0297 7.82035 15.009 7.25796 14.9246 6.94965C14.805 6.51236 14.5104 6.26063 14.2134 6.13235C13.9385 6.01358 13.661 5.9981 13.5028 5.99787L10.4907 5.95583C10.9296 4.15742 10.648 3.11853 10.452 2.6068ZM1.0008 6.46734C0.981809 6.06471 1.30313 5.72787 1.70621 5.72787H2.75264C3.14266 5.72787 3.45883 6.04405 3.45883 6.43407V13.9437C3.45883 14.3337 3.14266 14.6499 2.75264 14.6499H2.06044C1.68335 14.6499 1.37279 14.3536 1.35502 13.977L1.0008 6.46734Z",fill:"#8A919F"}})]))}}},896:function(t,e,o){o(16),o(15),o(11),o(6),o(14);var n=o(40),r=o(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,m=data.staticClass,style=data.style,h=data.staticStyle,v=data.attrs,_=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,m],style:[style,h],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10.452 2.6068C10.1323 1.7716 9.70208 1.28228 9.17063 1.12389C8.64564 0.967414 8.20308 1.18842 7.98278 1.34276C7.55169 1.64476 7.33837 2.11859 7.20071 2.50071C7.14817 2.64655 7.10003 2.79966 7.05661 2.93773L7.05661 2.93775C7.0422 2.98357 7.02832 3.02773 7.01496 3.06941C6.95791 3.24755 6.90763 3.39066 6.85248 3.50594C6.45683 4.33291 6.1121 4.82661 5.80935 5.14563C5.51322 5.45766 5.23983 5.62142 4.9473 5.76772C4.71095 5.88592 4.55494 6.12857 4.55491 6.40111L4.55388 13.912C4.55383 14.3021 4.87002 14.6183 5.26008 14.6183H11.8706C12.2097 14.6183 12.4663 14.5109 12.6519 14.3531C12.7388 14.2792 12.7988 14.2038 12.8387 14.1479C12.8556 14.1243 12.8704 14.102 12.8786 14.0895L12.8813 14.0854L12.8826 14.0835L12.8955 14.068L12.9142 14.0377C13.5304 13.0409 13.9578 12.2465 14.2927 11.294C14.6745 10.2085 14.8679 9.26762 14.9499 8.53421C15.0297 7.82035 15.009 7.25796 14.9246 6.94965C14.805 6.51236 14.5104 6.26063 14.2134 6.13235C13.9385 6.01358 13.661 5.9981 13.5028 5.99787L10.4907 5.95583C10.9296 4.15742 10.648 3.11853 10.452 2.6068ZM1.0008 6.46734C0.981809 6.06471 1.30313 5.72787 1.70621 5.72787H2.75264C3.14266 5.72787 3.45883 6.04405 3.45883 6.43407V13.9437C3.45883 14.3337 3.14266 14.6499 2.75264 14.6499H2.06044C1.68335 14.6499 1.37279 14.3536 1.35502 13.977L1.0008 6.46734Z",fill:"#1E80FF"}})]))}}},897:function(t,e,o){o(16),o(15),o(11),o(6),o(14);var n=o(40),r=o(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,m=data.staticClass,style=data.style,h=data.staticStyle,v=data.attrs,_=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,m],style:[style,h],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"#86909c",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 1C14.3682 1 14.6667 1.29848 14.6667 1.66667V12.3333C14.6667 12.7015 14.3682 13 14 13H10.5924L8.44602 14.932C8.19248 15.1601 7.8076 15.1601 7.55406 14.932L5.40737 13H2.00004C1.63185 13 1.33337 12.7015 1.33337 12.3333V1.66667C1.33337 1.29848 1.63185 1 2.00004 1H14ZM13.3334 2.33333H2.6667V11.6667H5.919L8 13.5395L10.0807 11.6667H13.3334V2.33333ZM11.3334 6.66667C11.3334 6.48257 11.1841 6.33333 11 6.33333H5.00003C4.81594 6.33333 4.6667 6.48257 4.6667 6.66667V7.33333C4.6667 7.51743 4.81594 7.66667 5.00003 7.66667H11C11.1841 7.66667 11.3334 7.51743 11.3334 7.33333V6.66667Z"}})]))}}},898:function(t,e,o){},899:function(t,e,o){o(16),o(15),o(11),o(6),o(14);var n=o(40),r=o(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,m=data.staticClass,style=data.style,h=data.staticStyle,v=data.attrs,_=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,m],style:[style,h],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8 10.5759L13.4212 5.15476C13.5513 5.02459 13.7624 5.02459 13.8926 5.15476L14.364 5.62616C14.4941 5.75634 14.4941 5.96739 14.364 6.09757L8.4714 11.9901C8.21106 12.2505 7.78894 12.2505 7.5286 11.9901L1.63604 6.09757C1.50586 5.96739 1.50586 5.75634 1.63604 5.62616L2.10744 5.15476C2.23762 5.02459 2.44867 5.02459 2.57885 5.15476L8 10.5759Z",fill:"#4E5969"}})]))}}},900:function(t,e,o){},901:function(t,e,o){},902:function(t,e,o){},903:function(t,e,o){},904:function(t,e,o){},918:function(t,e,o){"use strict";o(875)},919:function(t,e,o){"use strict";o(876)},920:function(t,e,o){"use strict";o(877)},933:function(t,e,o){o(16),o(15),o(11),o(6),o(14);var n=o(40),r=o(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,m=data.staticClass,style=data.style,h=data.staticStyle,v=data.attrs,_=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,m],style:[style,h],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 1.3335C14.3514 1.3335 14.6394 1.60546 14.6648 1.95041L14.6666 2.00016V14.0002C14.6666 14.3516 14.3947 14.6396 14.0497 14.665L14 14.6668H1.99998C1.64853 14.6668 1.36059 14.3949 1.33514 14.0499L1.33331 14.0002V2.00016C1.33331 1.64871 1.60527 1.36077 1.95023 1.33532L1.99998 1.3335H14ZM13.3333 2.66618H2.66664V13.3328H13.3333V2.66618ZM11.9219 6.7879C11.9719 6.83791 12 6.90574 12 6.97647V11.7993C12 11.9098 11.9104 11.9993 11.8 11.9993H6.81615C6.7975 11.9993 6.77945 11.9968 6.76232 11.992L3.91042 11.9847C3.79996 11.9844 3.71063 11.8947 3.7109 11.7842C3.71102 11.7313 3.73209 11.6807 3.76948 11.6433L6.52468 8.88807C6.62882 8.78393 6.79766 8.78393 6.9018 8.88807L8.17297 10.1593L11.5447 6.7879C11.6489 6.68376 11.8177 6.68376 11.9219 6.7879ZM5.99997 3.99951V5.99951H3.99997V3.99951H5.99997Z"}})]))}}},934:function(t,e,o){"use strict";o(887)},936:function(t,e,o){"use strict";o(23);var n=o(5),r=o(67),c=o(48),l=o(873),d=o(856),f=o(178),m=o(858),h=o(870),v=o(182),_=o(867),y=o(853),C=o(59),k=o(272),w=o(180),O=o(895),j=o.n(O),I=o(896),S=o.n(I),x=o(897),B=o.n(x),L=o(179),M={components:{CommentForm:h.a,UserPopover:_.default,Avatar:f.a,Thumb:m.a,LikeIcon:j.a,LikeActiveIcon:S.a,CommentIcon:B.a},props:["replyList","subject","parent","reply","removable","user","mode","isHiddenReply"],data:function(){return{likeLock:Object(d.a)(),isReplyFormVisible:!1,isShowAll:!1,isLikeLoading:!1,replyCount:this.reply.reply_info.reply_count,extend:!1}},computed:{isMobile:function(){return this.$device.isMobile},parentReply:function(){var t,content=null===(t=this.reply.parent_reply)||void 0===t?void 0:t.reply_content;return this.hasParentRemove&&content?"该评论已被删除":content?Object(k.b)(content):""},hasParentRemove:function(){var t;return 0===(null===(t=this.reply.parent_reply)||void 0===t?void 0:t.reply_status)},currentUser:function(){var t=this.$store.getters;return"USER"in t?t.USER:null},removableReply:function(){return this.removable||this.isCurrentUsersReply()},hasAuthorBadge:function(){return this.subject.user_id===this.reply.user_info.user_id},imageUrl:function(){return this.reply.reply_info.reply_pics[0]&&this.reply.reply_info.reply_pics[0].pic_url},limitedContent:function(){return Object(v.d)(this.reply.reply_info.reply_content,{maxLineCount:this.maxLineCount,perLineLength:this.perLineLength,escapeReg:w.a})},collapsed:function(){return this.limitedContent.length<this.reply.reply_info.reply_content.length&&!this.isShowAll&&this.reply.reply_info.reply_content.length-this.limitedContent.length>this.perLineLength},replyPlaceholder:function(){return"回复".concat(this.reply.user_info.user_name,"...")},perLineLength:function(){return this.$device.isMobile?30:40},maxLineCount:function(){return this.$device.isMobile?4:6},isAutoFocus:function(){return!this.user||this.user.isBindedPhone}},methods:{parseUrlEmoji:k.b,onSyncCommentNum:function(t){"add"===t.type&&(this.replyCount=this.replyCount+(t.count||1)),"sub"===t.type&&(this.replyCount=this.replyCount-(t.count||1)),this.$emit("syncCommentNum",t)},isCurrentUsersReply:function(){return this.currentUser&&this.currentUser.user_id===this.reply.user_info.user_id},toggleLike:function(){var t=this;return this.currentUser?this.currentUser.isBindedPhone?void(this.isLikeLoading||this.$ensureAuthorized().then((function(){t.isLikeLoading=!0,t.reply.user_interact.is_digg?Object(C.c)({itemId:t.reply.reply_info.reply_id,type:6}).then((function(e){t.isLikeLoading=!1,0!==e.err_no?t.$error(e.err_msg):(t.reply.reply_info.digg_count--,t.reply.user_interact.is_digg=!t.reply.user_interact.is_digg)})):(Object(C.b)({itemId:t.reply.reply_info.reply_id,type:6}).then((function(e){t.isLikeLoading=!1,0!==e.err_no?t.$error(e.err_msg):(t.reply.reply_info.digg_count++,t.reply.user_interact.is_digg=!t.reply.user_interact.is_digg)})),t.$TEA("like_action",{like_comment_mode:t.mode}))}))):this.$requestBindPhoneNumber(L.a.interact):this.$requestLogin()},onReplyFormEmptyBlur:function(){var t=this;window.setTimeout((function(){t.isReplyFormVisible=!1}))},onSubmitted:function(){this.isReplyFormVisible=!1,this.$emit("submitted")},deleteComment:function(t){var e=this;this.$ensureAuthorized("login").then((function(){window.confirm("确定删除这条评论吗？")&&Object(y.b)({comment_id:t.reply_info.reply_comment_id,reply_id:t.reply_info.reply_id}).then((function(){e.replyList.some((function(o,n){o.reply_info.reply_id===t.reply_info.reply_id&&e.replyList.splice(n,1)})),e.$alertMsg("删除成功"),e.$emit("syncCommentNum",{type:"sub"})})).catch((function(){e.$alertMsg("删除失败，刷新后重试")}))}))}},mounted:function(){var t=this.$refs.content;if(t){var e=t.clientHeight;t.scrollHeight>e&&(this.extend=!0)}}},P=(o(944),o(30)),D=Object(P.a)(M,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"subcomment"},[o("UserPopover",{attrs:{"user-id":t.reply.user_info.user_id,"show-jscore-level":!0}},[o("app-link",{staticClass:"user-link",attrs:{to:t.$userRoute(t.reply.user_info.user_id),blank:!0}},[o("Avatar",{staticClass:"avatar",attrs:{user:t.reply.user_info,size:48}})],1)],1),t._v(" "),o("div",{staticClass:"content-box"},[o("div",{staticClass:"content-wrapper"},[o("span",{staticClass:"delete",class:{removable:t.removableReply},on:{click:function(e){return t.deleteComment(t.reply)}}},[t._v("\n        删除\n      ")]),t._v(" "),o("div",{staticClass:"user-box"},[o("UserPopover",{attrs:{"user-id":t.reply.user_info.user_id,"show-jscore-level":!0}},[o("username",{staticClass:"username",attrs:{user:t.reply.user_info,universal:!0,"show-jpower-level":!1}})],1),t._v(" "),t.hasAuthorBadge&&!t.isMobile?o("span",{staticClass:"author-badge-text"},[t._v("\n          （作者）\n        ")]):t._e(),t._v(" "),t.reply.reply_user&&t.reply.reply_user.user_name&&!t.isMobile?o("div",{staticClass:"rely-box"},[o("span",[t._v("回复")]),t._v(" "),o("UserPopover",{attrs:{"user-id":t.reply.reply_user.user_id,"show-jscore-level":!0}},[o("app-link",{staticClass:"repliedname",attrs:{to:t.$userRoute(t.reply.reply_user)}},[t._v("\n              "+t._s(t.reply.reply_user.user_name)+"\n            ")])],1)],1):t._e(),t._v(" "),o("span",{staticClass:"divide"}),t._v(" "),o("time",{staticClass:"time",attrs:{datetime:t._f("iso")(1e3*t.reply.reply_info.ctime),title:new Date(1e3*t.reply.reply_info.ctime)}},[t._v("\n          "+t._s(t._f("relative")(1e3*t.reply.reply_info.ctime))+"\n        ")])],1),t._v(" "),o("div",{ref:"content",staticClass:"content",class:{extend:t.isShowAll,hasimage:!!t.imageUrl},domProps:{innerHTML:t._s(t.parseUrlEmoji(t.reply.reply_info.reply_content))}}),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.extend&&!t.isShowAll,expression:"extend && !isShowAll"}],staticClass:"limit-btn",on:{click:function(e){t.isShowAll=!0}}},[t._v("\n        展开\n      ")]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.extend&&t.isShowAll,expression:"extend && isShowAll"}],staticClass:"limit-btn",on:{click:function(e){t.isShowAll=!1}}},[t._v("\n        收起\n      ")]),t._v(" "),t.imageUrl?o("Thumb",{staticClass:"viewable",attrs:{"data-src":t.imageUrl,url:t.imageUrl,width:160,height:160,format:"jpg"}}):t._e(),t._v(" "),t.parentReply?o("div",{staticClass:"parent-wrapper"},[t.hasParentRemove?t._e():o("div",[t._v("“")]),t._v(" "),o("div",{staticClass:"parent-content",domProps:{innerHTML:t._s(t.parentReply)}}),t._v(" "),t.hasParentRemove?t._e():o("div",[t._v("”")])]):t._e(),t._v(" "),o("div",{staticClass:"action-box"},[o("div",{staticClass:"item dig-item",class:t.reply.user_interact.is_digg&&"active",on:{click:t.toggleLike}},[t.reply.user_interact.is_digg?o("LikeActiveIcon"):o("LikeIcon"),t._v("\n          "+t._s(t.reply.reply_info.digg_count||"点赞")+"\n        ")],1),t._v(" "),t.isHiddenReply?t._e():o("div",{staticClass:"item",class:t.isReplyFormVisible&&"active",on:{click:function(e){t.isReplyFormVisible=!t.isReplyFormVisible}}},[o("CommentIcon"),t._v("\n          "+t._s(t.isReplyFormVisible?"取消回复":t.replyCount||"回复")+"\n        ")],1)])],1),t._v(" "),t.isReplyFormVisible?o("CommentForm",{staticClass:"replyform",attrs:{subject:t.subject,parent:t.parent,comment:t.reply,replyList:t.replyList,autoFocus:t.isAutoFocus,placeholder:t.replyPlaceholder,mode:t.mode},on:{emptyBlur:t.onReplyFormEmptyBlur,submitted:t.onSubmitted,syncCommentNum:t.onSyncCommentNum}}):t._e()],1)],1)}),[],!1,null,"1c6a2aac",null).exports,$=o(899),E=o.n($),T={components:{SubComment:D,MoreIcon:E.a},props:["subject","parent","expanded","removable","user","mode","isHiddenReply"],data:function(){return{list:[],cursor:"0",limit:20,count:0,has_more:!0,loading:!1,showAll:!1}},computed:{canFetchMore:function(){var t=this.parent.comment_info.reply_count;return!!this.list.length&&(t>2&&t<=10&&(this.showAll=!0),this.expanded?"0"===this.cursor?this.parent.comment_info.reply_count>this.list.length:this.has_more:this.list.length&&this.parent.comment_info.reply_count>this.list.length)}},watch:{parent:function(t){this.list=t.reply_infos}},methods:{getRouterParams:function(){return{name:{2:"column",4:"pin",12:"book"}[this.subject.item_type],params:{id:this.subject.item_id}}},onSubmitted:function(){},refetch:function(){this.$emit("refetch")},fetchMore:function(){var t=this;!this.loading&&this.has_more&&(this.loading=!0,Object(y.f)({comment_id:this.parent.comment_info.comment_id,item_id:this.subject.item_id,item_type:this.subject.item_type,cursor:this.cursor,limit:this.limit}).then((function(e){var data=e.data,o=e.count,n=e.has_more,cursor=e.cursor;t.loading=!1,t.mergeList(data),t.count=o,t.has_more=n,t.cursor=cursor})).catch((function(e){t.loading=!1,console.error(e)})))},mergeList:function(t){var e,o=this.list.reduce((function(t,e){return t[e.reply_info.reply_id]=!0,t}),{}),n=t.filter((function(t){return!o[t.reply_info.reply_id]}));(e=this.list).push.apply(e,Object(r.a)(n))},onSyncCommentNum:function(t){this.$emit("syncCommentNum",t)}},created:function(){this.list=this.parent.reply_infos}},R=(o(945),Object(P.a)(T,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.list.length?o("div",{staticClass:"sub-comment-list"},[o("div",t._l(t.list,(function(e){return o("sub-comment",{key:e.reply_info.reply_id,staticClass:"sub-comment",attrs:{"data-comment-id":e.reply_info&&e.reply_info.reply_id,subject:t.subject,parent:t.parent,reply:e,replyList:t.list,removable:t.removable,user:t.user,mode:t.mode,isHiddenReply:t.isHiddenReply},on:{submitted:t.onSubmitted,refetch:t.refetch,syncCommentNum:t.onSyncCommentNum}})})),1),t._v(" "),t.canFetchMore&&t.has_more?o("div",{staticClass:"fetch-more"},[t.expanded||t.showAll?t.loading?o("span",{staticClass:"fetch-more-comment"},[t._v("加载中...")]):o("span",{staticClass:"fetch-more-comment",on:{click:t.fetchMore}},[t._v("\n      查看更多回复\n      "),o("MoreIcon")],1):o("app-link",{staticClass:"fetch-more-comment",attrs:{to:t.getRouterParams(),blank:!0}},[t._v("\n      查看更多回复\n    ")])],1):t._e()]):t._e()}),[],!1,null,"66f606e1",null).exports),V=o(7),F=o(946),A=o.n(F),U=o(880),N=Object(V.b)({components:{VideoSingleIcon:A.a},props:{comment:{type:Object,default:function(){return{}}}},setup:function(t,e){var o=e.root,n=Object(V.a)((function(){return o.$userPosition(t.comment.user_info)}));return{isMobile:o.$device.isMobile,position:n,getVideoDetailRoute:function(t){return{name:U.e.singleDetailRoute,params:{id:t.parent_id,sectionId:t.item_id}}}}}}),H=(o(947),Object(P.a)(N,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"comment-more-info"},[!t.isMobile&&t.position?o("span",{staticClass:"divide"}):t._e(),t._v(" "),t.position?o("span",{staticClass:"position"},[t._v("\n    "+t._s(t.position)+"\n  ")]):t._e(),t._v(" "),!t.isMobile||t.isMobile&&t.position?o("span",{class:{divide:!t.isMobile,dot:t.isMobile}}):t._e(),t._v(" "),o("time",{staticClass:"time",attrs:{datetime:t._f("iso")(1e3*t.comment.comment_info.ctime),title:new Date(1e3*t.comment.comment_info.ctime)}},[t._v("\n    "+t._s(t._f("relative")(1e3*t.comment.comment_info.ctime))+"\n  ")]),t._v(" "),t.comment.root_item&&t.comment.root_item.item_id?o("span",{staticClass:"dot"}):t._e(),t._v(" "),t.comment.root_item&&t.comment.root_item.item_id?o("router-link",{staticClass:"extra-info",attrs:{to:t.getVideoDetailRoute(t.comment.root_item)}},[o("div",{staticClass:"video-title"},[t._v("来自分辑-"+t._s(t.comment.root_item.title))]),t._v(" "),o("VideoSingleIcon",{staticClass:"single-video-icon"})],1):t._e()],1)}),[],!1,null,"29d7f98b",null).exports),G={components:{Avatar:f.a,Thumb:m.a,CommentForm:h.a,SubCommentList:R,UserPopover:_.default,LikeIcon:j.a,CommentIcon:B.a,LikeActiveIcon:S.a,CommentExtraInfo:H},props:["list","subject","comment","expanded","mode","isHiddenReply"],data:function(){return{likeLock:Object(d.a)(),isReplyFormVisible:!1,isShowAll:!1,isLikeLoading:!1,parseUrlEmoji:k.b,extend:!1,replyCount:this.comment.comment_info.reply_count}},computed:{isMobile:function(){return this.$device.isMobile},isDelete:function(){var t;return null===(t=this.comment.user_info)||void 0===t?void 0:t.is_logout},currentUser:function(){var t=this.$store.getters;return"USER"in t?t.USER:null},isCurrentUsersSubject:function(){return this.currentUser&&this.currentUser.user_id===this.subject.user_id},isCurrentUsersComment:function(){return this.currentUser&&this.currentUser.user_id===this.comment.user_info.user_id},isAdmin:function(){return this.currentUser&&"admin"===this.currentUser.role},hasAuthorBadge:function(){return this.subject.user_id===this.comment.user_info.user_id},removable:function(){return this.isAdmin||this.isCurrentUsersSubject||this.isCurrentUsersComment},mobile:function(){return this.$device.isMobile},imageUrl:function(){return this.comment.comment_info.comment_pics[0]&&this.comment.comment_info.comment_pics[0].pic_url},replyPlaceholder:function(){return"回复".concat(this.comment.user_info.user_name,"...")},isAutoFocus:function(){return!this.currentUser||this.currentUser.isBindedPhone}},methods:{toggleLike:function(){var t=this;return this.currentUser?this.currentUser.isBindedPhone?void(this.isLikeLoading||this.$ensureAuthorized().then((function(){t.isLikeLoading=!0,t.comment.user_interact.is_digg?Object(C.c)({itemId:t.comment.comment_info.comment_id,type:5}).then((function(e){t.isLikeLoading=!1,0!==e.err_no?t.$error(e.err_msg):(t.comment.comment_info.digg_count--,t.comment.user_interact.is_digg=!t.comment.user_interact.is_digg)})):(Object(C.b)({itemId:t.comment.comment_info.comment_id,type:5}).then((function(e){t.isLikeLoading=!1,0!==e.err_no?t.$error(e.err_msg):(t.comment.comment_info.digg_count++,t.comment.user_interact.is_digg=!t.comment.user_interact.is_digg)})),t.$TEA("like_action",{like_comment_mode:t.mode}))}))):this.$requestBindPhoneNumber(L.a.interact):this.$requestLogin()},onReplyFormEmptyBlur:function(){var t=this;window.setTimeout((function(){t.isReplyFormVisible=!1}))},onSubmitted:function(){this.isReplyFormVisible=!1,this.$refs.subCommentList.onSubmitted()},refetch:function(){this.$emit("refetch")},deleteComment:function(t){var e=this;this.$ensureAuthorized("login").then((function(){window.confirm("确定删除这条评论吗？")&&Object(y.a)({comment_id:t.comment_info.comment_id}).then((function(){e.list.some((function(o,n){o.comment_info.comment_id===t.comment_info.comment_id&&e.list.splice(n,1)})),e.$alertMsg("删除成功"),e.$emit("syncCommentNum",{type:"sub",count:t.reply_infos.length})})).catch((function(){e.$alertMsg("删除失败，刷新后重试")}))}))},onSyncCommentNum:function(t){"add"===t.type&&(this.replyCount=this.replyCount+(t.count||1)),"sub"===t.type&&(this.replyCount=this.replyCount-(t.count||1)),this.$emit("syncCommentNum",t)}},mounted:function(){var t=this.$refs.content;if(t){var e=t.clientHeight;t.scrollHeight>e&&(this.extend=!0)}}},W=(o(948),Object(P.a)(G,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"comment"},[o("UserPopover",{staticClass:"popover",attrs:{"user-id":t.comment.user_info.user_id,"enable-popover":Boolean(!t.isDelete),"show-jscore-level":!0}},[o("app-link",{staticClass:"user-link",attrs:{to:t.$userRoute(t.comment.user_info.user_id),blank:!0}},[o("Avatar",{staticClass:"avatar",attrs:{user:t.comment.user_info,alt:t.comment.user_info.user_name+"的头像"}})],1)],1),t._v(" "),o("div",{staticClass:"content-box"},[o("div",{staticClass:"comment-main"},[o("span",{staticClass:"delete",class:{removable:t.removable},on:{click:function(e){return t.deleteComment(t.comment)}}},[t._v("\n        删除\n      ")]),t._v(" "),o("div",{staticClass:"user-box"},[o("UserPopover",{attrs:{"user-id":t.comment.user_info.user_id,"enable-popover":Boolean(!t.isDelete),"show-jscore-level":!0}},[o("username",{staticClass:"username",attrs:{user:t.comment.user_info,universal:!0,"show-jscore-level":!0}})],1),t._v(" "),t.hasAuthorBadge&&!t.isMobile?o("span",{staticClass:"author-badge-text"},[t._v("\n          （作者）\n        ")]):t._e(),t._v(" "),t.isMobile?t._e():o("CommentExtraInfo",{attrs:{comment:t.comment}})],1),t._v(" "),t.isMobile?o("CommentExtraInfo",{attrs:{comment:t.comment}}):t._e(),t._v(" "),o("div",{ref:"content",staticClass:"content",class:{extend:t.extend&&t.isShowAll,hasimage:!!t.imageUrl},domProps:{innerHTML:t._s(t.parseUrlEmoji(t.comment.comment_info.comment_content))}}),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.extend&&!t.isShowAll,expression:"extend && !isShowAll"}],staticClass:"limit-btn",on:{click:function(e){t.isShowAll=!0}}},[t._v("\n        展开\n      ")]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.extend&&t.isShowAll,expression:"extend && isShowAll"}],staticClass:"limit-btn",on:{click:function(e){t.isShowAll=!1}}},[t._v("\n        收起\n      ")]),t._v(" "),t.imageUrl?o("Thumb",{staticClass:"viewable",attrs:{"data-src":t.imageUrl,url:t.imageUrl,width:160,height:160,format:"jpg"}}):t._e(),t._v(" "),o("div",{staticClass:"action-box"},[o("div",{staticClass:"action-left"},[o("div",{staticClass:"item dig-item",class:t.comment.user_interact.is_digg&&"active",on:{click:t.toggleLike}},[t.comment.user_interact.is_digg?o("LikeActiveIcon"):o("LikeIcon"),t._v("\n            "+t._s(t.comment.comment_info.digg_count||"点赞")+"\n          ")],1),t._v(" "),t.isHiddenReply?t._e():o("div",{staticClass:"item",class:t.isReplyFormVisible&&"active",on:{click:function(e){t.isReplyFormVisible=!t.isReplyFormVisible}}},[o("CommentIcon"),t._v("\n            "+t._s(t.isReplyFormVisible?"取消回复":t.replyCount||"回复")+"\n          ")],1)])])],1),t._v(" "),o("div",{staticClass:"subcomment-wrapper"},[t.isReplyFormVisible?o("CommentForm",{staticClass:"comment-form",attrs:{subject:t.subject,comment:t.comment,"reply-list":t.comment.reply_infos,"auto-focus":t.isAutoFocus,placeholder:t.replyPlaceholder,mode:t.mode},on:{emptyBlur:t.onReplyFormEmptyBlur,submitted:t.onSubmitted,syncCommentNum:t.onSyncCommentNum}}):t._e(),t._v(" "),o("SubCommentList",{ref:"subCommentList",attrs:{subject:t.subject,parent:t.comment,expanded:t.expanded,removable:t.isAdmin||t.isCurrentUsersSubject,user:t.currentUser,mode:t.mode,"is-hidden-reply":t.isHiddenReply},on:{refetch:t.refetch,syncCommentNum:t.onSyncCommentNum}})],1)])],1)}),[],!1,null,"35c9dead",null).exports),Z={components:{ImageViewer:l.a,Comment:W},props:["subject","list","expanded","mode","isHiddenReply"],methods:{initImageViewer:function(){this.$refs.imageViewer.attachContainer(this.$el)},refetch:function(){this.$emit("refetch")},onSyncCommentNum:function(t){this.$emit("syncCommentNum",t)}},mounted:function(){this.initImageViewer()}},Y=Object(P.a)(Z,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"comment-list"},[o("ImageViewer",{ref:"imageViewer",attrs:{selector:".viewable"}}),t._v(" "),t._l(t.list,(function(e){return o("comment",{key:e.comment_id,staticClass:"comment",attrs:{"data-comment-id":e.comment_id,"data-comment-status":e.comment_info.comment_status,list:t.list,comment:e,subject:t.subject,expanded:t.expanded,isHiddenReply:t.isHiddenReply,mode:t.mode},on:{refetch:t.refetch,syncCommentNum:t.onSyncCommentNum}})}))],2)}),[],!1,null,null,null).exports,z=o(8),X=o(949),J=o.n(X),K=Object(z.d)({props:{subject:{type:Object,required:!0}},components:{HotIcon:J.a,CommentComp:W,ImageViewer:l.a},setup:function(t){var e=Object(z.q)([]);Object(z.x)((function(){var o=t.subject,n=o.item_id,r=o.item_type;n&&r&&Object(y.e)({item_id:n,item_type:r}).then((function(t){return e.value=t}))}));var o=Object(z.a)((function(){return e.value.slice(0,5)})),n=Object(z.q)(),r=Object(z.q)();return Object(z.w)([n,r],(function(){n.value&&r.value&&n.value.attachContainer(r.value)})),{list:o,imageViewer:n,commentContainer:r}}}),Q=(o(950),Object(P.a)(K,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.list.length>0?o("div",{staticClass:"container"},[o("ImageViewer",{ref:"imageViewer",attrs:{selector:".viewable"}}),t._v(" "),o("div",{staticClass:"title"},[t._v("\n    热门评论\n    "),o("HotIcon")],1),t._v(" "),o("div",{ref:"commentContainer",staticClass:"list"},t._l(t.list,(function(e){return o("CommentComp",{key:e.comment_id,attrs:{"data-comment-id":e.comment_id,list:t.list,comment:e,subject:t.subject,expanded:!0,mode:"top"}})})),1)],1):t._e()}),[],!1,null,"bfe15586",null).exports),tt={components:{CommentForm:h.a,CommentList:Y,HotCommentList:Q,MoreIcon:E.a},props:["subject","expanded","sticky","forbidInput","small","hasSort","hasHot","threeSiftComment","isHiddenReply","isBestComment"],data:function(){return{list:[],cursor:"0",limit:20,count:0,has_more:!0,loading:!1,listSize:0,sort:"new",hasLoadMore:!1}},watch:{"subject.item_id":{handler:function(t){t&&!this.$isServer&&this.fetchData()}},sortData:{handler:function(){this.$isServer||this.fetchData()}}},computed:{sortData:function(){return{new:0,hot:1}[this.sort]||0}},methods:{setSort:function(t){this.$TEA("comment_switch",{switch:t}),this.sort=t},getMore:function(){var t=this;if(!this.expanded){var e=this.$router.resolve({name:{2:"column",4:"pin",12:"book"}[this.subject.item_type],params:{id:this.subject.item_id},hash:"#comment"}).href;window.open(e,"_blank")}if(this.expanded&&!this.hasLoadMore){this.hasLoadMore=!0,this.fetchMoreIfConditionIsSatisfied();var o=this.$getBean("eventBus");o.onVmLife(this,o.eventType.ROOT_CONTAINER_SCROLL,(function(){t.fetchMoreIfConditionIsSatisfied()})),Object(c.l)(this.$el,(function(){t.fetchMoreIfConditionIsSatisfied()}))}},fetchMore:function(){var t=this;if(!this.loading&&this.has_more){this.loading=!0;var e=this.subject,o=e.item_id,n=e.item_type;Object(y.d)({item_id:o,item_type:n,cursor:this.cursor,limit:this.limit,sort:this.sortData}).then((function(e){var data=e.data,cursor=e.cursor,o=e.count,n=e.has_more;t.listSize=data.length,t.loading=!1,t.mergeList(data),t.count=o,t.cursor=cursor,t.has_more=n})).catch((function(e){t.loading=!1,console.error(e)}))}},mergeList:function(t){var e,o=this.list.reduce((function(t,e){return t[e.comment_id]=!0,t}),{}),n=t.filter((function(t){return!o[t.comment_id]}));(e=this.list).push.apply(e,Object(r.a)(n))},fetchMoreIfConditionIsSatisfied:function(){Object(c.b)(this.$el)>-200&&this.fetchMore()},onRefetch:function(){this.fetchData()},onSyncCommentNum:function(t){this.$emit("syncCommentNum",t)},handleBookCommentScroll:function(){var t=this,e=document.documentElement.clientHeight,o=document.body.scrollHeight;if(document.documentElement.scrollTop+e>=o&&this.has_more&&!this.threeSiftComment){var n=this.subject,c=n.item_id,l=n.item_type;this.limit=this.expanded?20:5,Object(y.d)({item_id:c,item_type:l,cursor:this.cursor,limit:this.limit,sort:this.sortData}).then((function(e){var data=e.data,cursor=e.cursor,o=e.count,n=e.has_more,c=data.filter((function(t){return 5===t.comment_info.comment_status}));t.list=[].concat(Object(r.a)(t.list),Object(r.a)(c)),t.cursor=cursor,t.count=o,t.has_more=n}))}},fetchData:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var o,n,r,c,data,cursor,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.subject,n=o.item_id,r=o.item_type,!t.loading&&n){e.next=3;break}return e.abrupt("return");case 3:return t.loading=!0,t.limit=t.expanded?20:5,t.cursor="0",t.count=0,t.has_more=!0,e.prev=8,e.next=11,Object(y.d)({item_id:n,item_type:r,cursor:t.cursor,limit:t.limit,sort:t.sortData});case 11:c=e.sent,data=c.data,cursor=c.cursor,l=c.count,d=c.has_more,t.listSize=data.length,t.loading=!1,t.list=data,t.threeSiftComment&&data.length>3&&(t.list=t.list.filter((function(t){return 5===t.comment_info.comment_status})),t.list.length>3&&t.$emit("isListLenMore3"),t.list&&0!==t.list.length&&t.$emit("isShowCommentMode"),t.list=t.list.slice(0,3)),t.count=l,t.cursor=cursor,t.has_more=d,t.isBestComment&&(t.list=t.list.filter((function(t){return 5===t.comment_info.comment_status})),addEventListener("scroll",t.handleBookCommentScroll)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(8),t.loading=!1,console.error(e.t0);case 30:case"end":return e.stop()}}),e,null,[[8,26]])})))()}},mounted:function(){this.fetchData()},beforeDestroy:function(){removeEventListener("scroll",this.handleBookCommentScroll)}},et=(o(951),Object(P.a)(tt,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container",class:t.small&&"small",attrs:{"data-jj-helper":"comment-container"}},[t.forbidInput?t._e():o("CommentForm",{staticClass:"comment-form",class:{hasborder:t.list&&t.list.length},attrs:{commentList:t.list,subject:t.subject,small:t.small},on:{syncCommentNum:t.onSyncCommentNum}}),t._v(" "),t.hasHot?o("HotCommentList",{staticClass:"hot-list hasborder",attrs:{subject:t.subject}}):t._e(),t._v(" "),t.list.length?o("div",{staticClass:"comment-list-wrapper"},[o("div",{staticClass:"title"},[t._v("\n      全部评论（"+t._s(t.subject.comment_count)+"）\n      "),t.hasSort?o("div",{staticClass:"sort"},[o("div",{staticClass:"item",class:"new"===t.sort&&"active",on:{click:function(e){return t.setSort("new")}}},[t._v("\n          最新\n        ")]),t._v(" "),o("div",{staticClass:"divide"}),t._v(" "),o("div",{staticClass:"item",class:"hot"===t.sort&&"active",on:{click:function(e){return t.setSort("hot")}}},[t._v("\n          最热\n        ")])]):t._e()]),t._v(" "),o("comment-list",{staticClass:"comment-list",attrs:{list:t.list,subject:t.subject,expanded:t.expanded,isHiddenReply:t.isHiddenReply,mode:t.sort},on:{refetch:t.onRefetch,syncCommentNum:t.onSyncCommentNum}}),t._v(" "),t.list.length<t.subject.comment_count&&t.has_more?o("p",{staticClass:"fetch-more-comment",on:{click:t.getMore}},[t._v("\n      "+t._s(t.hasLoadMore?"加载中...":"查看全部 "+t.subject.comment_count+" 条回复")+"\n      "),t.expanded&&!t.hasLoadMore?o("MoreIcon"):t._e()],1):t._e()],1):t._e()],1)}),[],!1,null,"3f2ad607",null));e.a=et.exports},943:function(t,e,o){"use strict";o.d(e,"a",(function(){return n})),o.d(e,"c",(function(){return r})),o.d(e,"b",(function(){return c}));o(45),o(135),o(83),o(21),o(22),o(6);function n(t,e){if(0===t)return 0;var o=function(t,e){var o,n,r=0,c=t.toString(),l=e.toString();try{r+=(null===(o=c.split(".")[1])||void 0===o?void 0:o.length)||0}catch(t){console.error(t)}try{r+=(null===(n=l.split(".")[1])||void 0===n?void 0:n.length)||0}catch(t){console.error(t)}c=Number(c.replace(".","")),l=Number(l.replace(".",""));var d=c*l/Math.pow(10,r),f=e>0?.01:0;return Math.max(f,d)}(t,isNaN(e)?1:e/10);return 0===o?0:o.toFixed(2)}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{startTime:0,endTime:0},e=t.startTime,o=t.endTime,time=(new Date).getTime();return time>e&&time<o}function c(t){if(t<0||!t)return"0秒";if(0<=t&&t<60)return t+"秒";var e=Math.floor(t/60),s=Math.floor(t%60);return s>0?e+"分"+s+"秒":e+"分"}},944:function(t,e,o){"use strict";o(898)},945:function(t,e,o){"use strict";o(900)},946:function(t,e,o){o(16),o(15),o(11),o(6),o(14);var n=o(40),r=o(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,m=data.staticClass,style=data.style,h=data.staticStyle,v=data.attrs,_=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,m],style:[style,h],attrs:Object.assign({width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{d:"M8 6L4 9L4 3L8 6Z",fill:"#8A919F"}})]))}}},947:function(t,e,o){"use strict";o(901)},948:function(t,e,o){"use strict";o(902)},949:function(t,e,o){o(16),o(15),o(11),o(6),o(14);var n=o(40),r=o(42);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}t.exports={functional:!0,render:function(t,e){var o=e._c,data=(e._v,e.data),l=e.children,d=void 0===l?[]:l,f=data.class,m=data.staticClass,style=data.style,h=data.staticStyle,v=data.attrs,_=void 0===v?{}:v,y=r(data,["class","staticClass","style","staticStyle","attrs"]);return o("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){n(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({class:[f,m],style:[style,h],attrs:Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_)},y),d.concat([o("path",{attrs:{d:"M12.8 5.2C13.9532 6.46 14.8 8.2 14.8 10C14.7039 12.8937 12.6843 15.1706 9.97973 15.8159C10.359 12.3442 7.77588 9.35406 7.77588 9.35406C7.77588 9.35406 7.99512 13.7064 6.79514 15.8104C4.03715 15.1428 2 12.7806 2 9.8C2 7.776 2.9336 5.9728 4.4 4.8C5.8608 3.7056 6.8 1.9656 6.8 0C9.684 0.4368 11.894 2.9264 11.894 5.932C11.894 6.5012 11.746 7.0652 11.6 7.6C12.1264 6.9024 12.6184 6.0876 12.8 5.2Z",fill:"#F53F3F"}})]))}}},950:function(t,e,o){"use strict";o(903)},951:function(t,e,o){"use strict";o(904)}}]);