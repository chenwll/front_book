(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1004:function(t,e,n){"use strict";n(925)},1023:function(t,e,n){"use strict";n(953)},1024:function(t,e,n){"use strict";n(954)},1025:function(t,e,n){"use strict";n(955)},856:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));n(6);var o=n(11),r=n(13),l=function(){function t(){Object(o.a)(this,t),this.busy=!1}return Object(r.a)(t,[{key:"do",value:function(t){var e=this;return this.busy?Promise.resolve():(this.busy=!0,Promise.resolve("function"==typeof t?t():t).then((function(t){return e.busy=!1,t})).catch((function(t){return e.busy=!1,Promise.reject(t)})))}}]),t}();function c(){return new l}},858:function(t,e,n){"use strict";n(135);var o=n(68),r=n(271),l=n(273),c=n(8),f=Object(c.d)({components:{Lazy:l.a},props:{url:{type:String},default:{type:String},quality:{type:Number},width:{type:Number,default:0},height:{type:Number,default:0},shrink:{type:Boolean},format:{type:String},alt:{type:String},blank:{type:String},hasMark:{type:Boolean,default:!1},lazy:{type:Boolean,default:!0}},computed:{defaultThumbUrl:function(){return this.default||o.h},thumbUrl:function(){var t=this.url||(this.blank?"":this.defaultThumbUrl);return this.shrink?Object(r.d)(t,this.width*o.l,this.height*o.l,{format:this.format,quality:this.quality},this.hasMark?"zoomCrop":"noMark"):Object(r.a)(t,this.width*o.l,this.height*o.l,{format:this.format,quality:this.quality},this.hasMark?"zoomCrop":"noMark")}}}),h=n(30),component=Object(h.a)(f,(function(){var t=this.$createElement;return(this._self._c||t)("lazy",{attrs:{url:this.thumbUrl,alt:this.alt,lazy:this.lazy,"loading-style":{aspectRatio:""+this.width/this.height}}})}),[],!1,null,null,null);e.a=component.exports},867:function(t,e,n){"use strict";n.r(e);n(16),n(15),n(12),n(14),n(6);var o=n(0),r=n(8),l=n(4),c=n(856),f=n(178),h=n(28),d=n(84),v=n(932),m=Object(r.d)({components:{Triangle:v.a},props:{disalbe:{type:Boolean,default:!1},promise:Promise},setup:function(t,e){var data=Object(r.p)({visible:!1,top:0,left:0,isTop:!1}),n=Object(r.q)(null),o=Object(r.q)(null),l=Object(r.q)();return{data:data,popoverStyle:Object(r.a)((function(){return{top:"".concat(data.top,"px"),left:"".concat(data.left,"px")}})),contentElem:l,showPopover:function(r){t.disalbe||(clearTimeout(o.value),e.emit("show"),n.value=setTimeout((function(){Promise.resolve(t.promise).then((function(){n.value&&(data.visible=!0,e.root.$nextTick((function(){var t=r.target,e=null==t?void 0:t.getBoundingClientRect(),n=t.offsetWidth||33,o=t.offsetHeight||33,c=l.value,f=(null==c?void 0:c.offsetWidth)||260,h=(null==c?void 0:c.offsetHeight)||160,d=e.left-f/2+n/2,v=e.top-h-12;data.isTop=!1,v<60&&(data.isTop=!0,v=e.top+o+8),d=Math.max(0,d),data.left=d,data.top=v})))}))}),300))},hidePopover:function(){clearTimeout(n.value),n.value=null,e.emit("hide"),o.value=setTimeout((function(){o.value=null,data.visible=!1}),300)}}}}),y=(n(1023),n(30)),w=Object(y.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popover-box",on:{mouseenter:function(e){return t.showPopover(e)},mouseleave:t.hidePopover}},[n("transition",{attrs:{name:"fade"}},[t.data.visible?n("div",{ref:"contentElem",staticClass:"popover-content",style:t.popoverStyle},[t._t("content"),t._v(" "),n("triangle",{staticClass:"triangle-bottom",class:{isTop:t.data.isTop}})],2):t._e()]),t._v(" "),t._t("default")],2)}),[],!1,null,"f1a2074a",null).exports,_=n(868);function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var k=Object(r.d)({components:{Avatar:f.a,Popover:w,Button:_.a},props:{userId:String,showJscoreLevel:{type:Boolean,default:!1},enablePopover:{type:Boolean,default:!0}},data:function(){return{user:null,followLock:Object(c.a)(),fetchUserPromise:null,isFollowing:!1}},computed:j(j({},Object(d.mapGetters)({currentUser:l.USER})),{},{position:function(){return this.user&&(this.$userPosition(this.user)||this.user.description||"暂无简介")},self:function(){return this.currentUser&&this.currentUser.id===this.userId},followed:function(){return this.user&&this.user.followed}}),methods:{toFollowing:function(){window.open("/user/".concat(this.userId,"/following"),"_blank")},toFollower:function(){window.open("/user/".concat(this.userId,"/followers"),"_blank")},handleShow:function(){this.fetchUserPromise=this.fetch().then((function(t){if(t.is_logout)return Promise.reject()}))},fetch:function(){var t=this;return Object(h.i)(this.userId,{ignore404:!0}).then((function(e){return t.user=e,e}))},toggleFollow:function(){var t=this;this.isFollowing=!0,this.followLock.do((function(){return t.$ensureAuthorized().then((function(){return t.$store.dispatch(l.TOGGLE_FOLLOW_USER,t.user).catch((function(e){t.$error(e)}))})).catch((function(t){return console.warn("follow failed err:",t)})).finally((function(){return t.isFollowing=!1}))}))}}}),C=(n(1024),n(1025),Object(y.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Popover",{staticClass:"user-popover",attrs:{promise:t.fetchUserPromise},on:{show:t.handleShow},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"info-row",on:{click:function(t){t.stopPropagation()}}},[n("app-link",{attrs:{to:t.$userRoute(t.user),blank:!0}},[n("avatar",{staticClass:"avatar",attrs:{user:t.user,decorative:!0,alt:t.user.username+"的头像"}})],1),t._v(" "),n("div",{staticClass:"user-info"},[n("username",{attrs:{user:t.user,"show-jscore-level":t.showJscoreLevel}}),t._v(" "),n("div",{staticClass:"position"},[t._v(t._s(t.position))])],1)],1),t._v(" "),t.self?t._e():n("Button",{staticClass:"follow-btn",attrs:{"st:name":"followBtn",attention:!0,"custom-attention-text":"关注","cancel-attention-text":"取消关注",cancel:t.followed,loading:t.isFollowing,size:"large","show-icon":!1},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleFollow(e)}}}),t._v(" "),n("div",{staticClass:"meta-row",on:{click:function(t){t.stopPropagation()}}},[n("ul",{staticClass:"meta-list"},[n("li",{staticClass:"item",on:{click:t.toFollowing}},[n("div",{staticClass:"count"},[t._v(t._s(t.user.followingCount||0))]),t._v(" "),n("div",{staticClass:"title"},[t._v("关注")])]),t._v(" "),n("li",{staticClass:"divider"}),t._v(" "),n("li",{staticClass:"item",on:{click:t.toFollower}},[n("div",{staticClass:"count"},[t._v(t._s(t.user.followerCount||0))]),t._v(" "),n("div",{staticClass:"title"},[t._v("粉丝")])])])])]},proxy:!0}])},[t._v(" "),t._t("default")],2)}),[],!1,null,"0c01b30d",null));e.default=C.exports},868:function(t,e,n){"use strict";var o=n(8),r=n(888),l=n.n(r),c=n(889),f=n.n(c),h=n(890),d=n.n(h),v=n(891),m=n.n(v),y=n(892),w=n.n(y),_=Object(o.d)({props:{type:{type:String,default:"primary"},attention:Boolean,customAttentionText:String,cancelAttentionText:String,size:{type:String,default:"medium"},status:{type:String,default:"default"},disabled:Boolean,loading:Boolean,cancel:Boolean,text:String,icon:String,showIcon:{type:Boolean,default:!0}},setup:function(t,e){var n=Object(o.a)((function(){return t.attention}));return{handleClick:function(n){t.disabled||t.loading||e.emit("click",n)},isAttentionType:n,attentionText:Object(o.a)((function(){return"mini"===t.size&&t.loading?"":t.cancel?t.loading?"取消":t.cancelAttentionText||"已关注":t.customAttentionText||"关注"})),iconSrc:Object(o.a)((function(){return t.loading?t.cancel||n.value&&"primary"!==t.type?m.a:w.a:n.value&&t.showIcon?"mini"===t.size?"":t.icon||t.cancel?d.a:"primary"===t.type?l.a:f.a:""}))}}}),O=(n(893),n(30)),component=Object(O.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"ui-btn",class:[t.type,t.size,t.status,t.cancel?"cancel":"",t.attention?"attention":""],attrs:{disabled:t.disabled||t.loading},on:{click:t.handleClick}},[t.iconSrc?n("img",{staticClass:"img",class:t.loading?"loading":"",attrs:{src:t.iconSrc}}):t._e(),t._v(" "),t.isAttentionType?[t._v("\n    "+t._s(t.attentionText)+"\n  ")]:t._t("default",[t._v(t._s(t.text))])],2)}),[],!1,null,"05e27314",null);e.a=component.exports},869:function(t,e,n){},888:function(t,e,n){t.exports=n.p+"c5c64e06a56896da43c1d084d2482cf3.svg"},889:function(t,e,n){t.exports=n.p+"bd960fe696b2c2b82cea3c0e2e2f2aae.svg"},890:function(t,e,n){t.exports=n.p+"062856d97fc330530a3a64c01d915edc.svg"},891:function(t,e,n){t.exports=n.p+"img/loading.b144729.png"},892:function(t,e,n){t.exports=n.p+"img/loading-light.e96acb8.png"},893:function(t,e,n){"use strict";n(869)},925:function(t,e,n){},932:function(t,e,n){"use strict";n(1004);var o=n(30),component=Object(o.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"container"},[e("em",{staticClass:"triangle"})])}],!1,null,"68da8972",null);e.a=component.exports},953:function(t,e,n){},954:function(t,e,n){},955:function(t,e,n){}}]);